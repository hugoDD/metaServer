import{d as t,r as e,o as n,a as r,b as i,e as o,f as a,g as l,t as s,i as u,j as c,s as h,k as d,l as f,m as p,w as v,p as g,q as y,u as m,c as C,v as w,x,y as S,z as b,F as _,A as L,B as E,C as T}from"./@vue-1ad4818c.js";import{M as O,B as I,I as R,E as M,a as A,S as B,P as D,D as k}from"./ant-design-vue-2db0c9af.js";var N=Object.freeze({__proto__:null,get Base(){return mo},get Circle(){return Co},get Ellipse(){return xo},get Image(){return bo},get Line(){return Lo},get Marker(){return To},get Path(){return zo},get Polygon(){return Fo},get Polyline(){return Go},get Rect(){return jo},get Text(){return Uo}}),P=function(t,e){return(P=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function z(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}P(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var H=function(){return H=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},H.apply(this,arguments)};var F=function(t){return null!==t&&"function"!=typeof t&&isFinite(t.length)},W={}.toString,G=function(t,e){return W.call(t)==="[object "+e+"]"},j=function(t){return G(t,"Function")},U=function(t){return null==t},Y=function(t){return Array.isArray?Array.isArray(t):G(t,"Array")},V=function(t){var e=typeof t;return null!==t&&"object"===e||"function"===e};function X(t,e){if(t)if(Y(t))for(var n=0,r=t.length;n<r&&!1!==e(t[n],n);n++);else if(V(t))for(var i in t)if(t.hasOwnProperty(i)&&!1===e(t[i],i))break}var q=function(t){return"object"==typeof t&&null!==t},K=function(t){if(Y(t))return t.reduce((function(t,e){return Math.max(t,e)}),t[0])},$=function(t){if(Y(t))return t.reduce((function(t,e){return Math.min(t,e)}),t[0])},Z=function(t){return G(t,"String")},Q=function(t){return G(t,"Number")},J=1e-5;var tt=function(t,e){return(t%e+e)%e},et=Math.PI/180,nt=function(t){return et*t},rt=Object.values?function(t){return Object.values(t)}:function(t){var e=[];return X(t,(function(n,r){j(t)&&"prototype"===r||e.push(n)})),e},it=function(t){var e=function(t){return U(t)?"":t.toString()}(t);return e.charAt(0).toUpperCase()+e.substring(1)};function ot(t,e){for(var n in e)e.hasOwnProperty(n)&&"constructor"!==n&&void 0!==e[n]&&(t[n]=e[n])}function at(t,e,n,r){return e&&ot(t,e),n&&ot(t,n),r&&ot(t,r),t}var lt,st=function(t,e){if(t===e)return!0;if(!t||!e)return!1;if(Z(t)||Z(e))return!1;if(F(t)||F(e)){if(t.length!==e.length)return!1;for(var n=!0,r=0;r<t.length&&(n=st(t[r],e[r]));r++);return n}if(q(t)||q(e)){var i=Object.keys(t),o=Object.keys(e);if(i.length!==o.length)return!1;for(n=!0,r=0;r<i.length&&(n=st(t[i[r]],e[i[r]]));r++);return n}return!1},ut={},ct=function(){};!function(t,e){if(!j(t))throw new TypeError("Expected a function");var n=function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var o=e?e.apply(this,r):r[0],a=n.cache;if(a.has(o))return a.get(o);var l=t.apply(this,r);return a.set(o,l),l};n.cache=new Map}((function(t,e){void 0===e&&(e={});var n=e.fontSize,r=e.fontFamily,i=e.fontWeight,o=e.fontStyle,a=e.fontVariant;return lt||(lt=document.createElement("canvas").getContext("2d")),lt.font=[o,a,i,n+"px",r].join(" "),lt.measureText(Z(t)?t:"").width}),(function(t,e){return void 0===e&&(e={}),
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,l=o.length;a<l;a++,i++)r[i]=o[a];return r}([t],rt(e)).join("")}));var ht="\t\n\v\f\r   ᠎             　\u2028\u2029",dt=new RegExp("([a-z])["+ht+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+ht+"]*,?["+ht+"]*)+)","ig"),ft=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+ht+"]*,?["+ht+"]*","ig"),pt=function(t){if(!t)return null;if(Y(t))return t;var e={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},n=[];return String(t).replace(dt,(function(r,i,o){var a=[],l=i.toLowerCase();if(o.replace(ft,(function(t,e){e&&a.push(+e)})),"m"===l&&a.length>2&&(n.push([i].concat(a.splice(0,2))),l="l",i="m"===i?"l":"L"),"o"===l&&1===a.length&&n.push([i,a[0]]),"r"===l)n.push([i].concat(a));else for(;a.length>=e[l]&&(n.push([i].concat(a.splice(0,e[l]))),e[l]););return t})),n},vt=function(t,e){for(var n=[],r=0,i=t.length;i-2*!e>r;r+=2){var o=[{x:+t[r-2],y:+t[r-1]},{x:+t[r],y:+t[r+1]},{x:+t[r+2],y:+t[r+3]},{x:+t[r+4],y:+t[r+5]}];e?r?i-4===r?o[3]={x:+t[0],y:+t[1]}:i-2===r&&(o[2]={x:+t[0],y:+t[1]},o[3]={x:+t[2],y:+t[3]}):o[0]={x:+t[i-2],y:+t[i-1]}:i-4===r?o[3]=o[2]:r||(o[0]={x:+t[r],y:+t[r+1]}),n.push(["C",(-o[0].x+6*o[1].x+o[2].x)/6,(-o[0].y+6*o[1].y+o[2].y)/6,(o[1].x+6*o[2].x-o[3].x)/6,(o[1].y+6*o[2].y-o[3].y)/6,o[2].x,o[2].y])}return n},gt=function(t,e,n,r,i){var o=[];if(null===i&&null===r&&(r=n),t=+t,e=+e,n=+n,r=+r,null!==i){var a=Math.PI/180,l=t+n*Math.cos(-r*a),s=t+n*Math.cos(-i*a);o=[["M",l,e+n*Math.sin(-r*a)],["A",n,n,0,+(i-r>180),0,s,e+n*Math.sin(-i*a)]]}else o=[["M",t,e],["m",0,-r],["a",n,r,0,1,1,0,2*r],["a",n,r,0,1,1,0,-2*r],["z"]];return o},yt=function(t){if(!(t=pt(t))||!t.length)return[["M",0,0]];var e,n,r=[],i=0,o=0,a=0,l=0,s=0;"M"===t[0][0]&&(a=i=+t[0][1],l=o=+t[0][2],s++,r[0]=["M",i,o]);for(var u=3===t.length&&"M"===t[0][0]&&"R"===t[1][0].toUpperCase()&&"Z"===t[2][0].toUpperCase(),c=void 0,h=void 0,d=s,f=t.length;d<f;d++){if(r.push(c=[]),(e=(h=t[d])[0])!==e.toUpperCase())switch(c[0]=e.toUpperCase(),c[0]){case"A":c[1]=h[1],c[2]=h[2],c[3]=h[3],c[4]=h[4],c[5]=h[5],c[6]=+h[6]+i,c[7]=+h[7]+o;break;case"V":c[1]=+h[1]+o;break;case"H":c[1]=+h[1]+i;break;case"R":for(var p=2,v=(n=[i,o].concat(h.slice(1))).length;p<v;p++)n[p]=+n[p]+i,n[++p]=+n[p]+o;r.pop(),r=r.concat(vt(n,u));break;case"O":r.pop(),(n=gt(i,o,h[1],h[2])).push(n[0]),r=r.concat(n);break;case"U":r.pop(),r=r.concat(gt(i,o,h[1],h[2],h[3])),c=["U"].concat(r[r.length-1].slice(-2));break;case"M":a=+h[1]+i,l=+h[2]+o;break;default:for(p=1,v=h.length;p<v;p++)c[p]=+h[p]+(p%2?i:o)}else if("R"===e)n=[i,o].concat(h.slice(1)),r.pop(),r=r.concat(vt(n,u)),c=["R"].concat(h.slice(-2));else if("O"===e)r.pop(),(n=gt(i,o,h[1],h[2])).push(n[0]),r=r.concat(n);else if("U"===e)r.pop(),r=r.concat(gt(i,o,h[1],h[2],h[3])),c=["U"].concat(r[r.length-1].slice(-2));else for(var g=0,y=h.length;g<y;g++)c[g]=h[g];if("O"!==(e=e.toUpperCase()))switch(c[0]){case"Z":i=+a,o=+l;break;case"H":i=c[1];break;case"V":o=c[1];break;case"M":a=c[c.length-2],l=c[c.length-1];break;default:i=c[c.length-2],o=c[c.length-1]}}return r},mt=function(t,e,n,r){return[t,e,n,r,n,r]},Ct=function(t,e,n,r,i,o){var a=1/3,l=2/3;return[a*t+l*n,a*e+l*r,a*i+l*n,a*o+l*r,i,o]},wt=function(t,e,n,r,i,o,a,l,s,u){n===r&&(n+=1);var c,h,d,f,p,v=120*Math.PI/180,g=Math.PI/180*(+i||0),y=[],m=function(t,e,n){return{x:t*Math.cos(n)-e*Math.sin(n),y:t*Math.sin(n)+e*Math.cos(n)}};if(u)h=u[0],d=u[1],f=u[2],p=u[3];else{t=(c=m(t,e,-g)).x,e=c.y,l=(c=m(l,s,-g)).x,s=c.y,t===l&&e===s&&(l+=1,s+=1);var C=(t-l)/2,w=(e-s)/2,x=C*C/(n*n)+w*w/(r*r);x>1&&(n*=x=Math.sqrt(x),r*=x);var S=n*n,b=r*r,_=(o===a?-1:1)*Math.sqrt(Math.abs((S*b-S*w*w-b*C*C)/(S*w*w+b*C*C)));f=_*n*w/r+(t+l)/2,p=_*-r*C/n+(e+s)/2,h=Math.asin(((e-p)/r).toFixed(9)),d=Math.asin(((s-p)/r).toFixed(9)),h=t<f?Math.PI-h:h,d=l<f?Math.PI-d:d,h<0&&(h=2*Math.PI+h),d<0&&(d=2*Math.PI+d),a&&h>d&&(h-=2*Math.PI),!a&&d>h&&(d-=2*Math.PI)}var L=d-h;if(Math.abs(L)>v){var E=d,T=l,O=s;d=h+v*(a&&d>h?1:-1),l=f+n*Math.cos(d),s=p+r*Math.sin(d),y=wt(l,s,n,r,i,0,a,T,O,[d,E,f,p])}L=d-h;var I=Math.cos(h),R=Math.sin(h),M=Math.cos(d),A=Math.sin(d),B=Math.tan(L/4),D=4/3*n*B,k=4/3*r*B,N=[t,e],P=[t+D*R,e-k*I],z=[l+D*A,s-k*M],H=[l,s];if(P[0]=2*N[0]-P[0],P[1]=2*N[1]-P[1],u)return[P,z,H].concat(y);for(var F=[],W=0,G=(y=[P,z,H].concat(y).join().split(",")).length;W<G;W++)F[W]=W%2?m(y[W-1],y[W],g).y:m(y[W],y[W+1],g).x;return F},xt=function(t,e){var n,r=yt(t),i=e&&yt(e),o={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},a={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},l=[],s=[],u="",c="",h=function(t,e,n){var r,i;if(!t)return["C",e.x,e.y,e.x,e.y,e.x,e.y];switch(!(t[0]in{T:1,Q:1})&&(e.qx=e.qy=null),t[0]){case"M":e.X=t[1],e.Y=t[2];break;case"A":t=["C"].concat(wt.apply(0,[e.x,e.y].concat(t.slice(1))));break;case"S":"C"===n||"S"===n?(r=2*e.x-e.bx,i=2*e.y-e.by):(r=e.x,i=e.y),t=["C",r,i].concat(t.slice(1));break;case"T":"Q"===n||"T"===n?(e.qx=2*e.x-e.qx,e.qy=2*e.y-e.qy):(e.qx=e.x,e.qy=e.y),t=["C"].concat(Ct(e.x,e.y,e.qx,e.qy,t[1],t[2]));break;case"Q":e.qx=t[1],e.qy=t[2],t=["C"].concat(Ct(e.x,e.y,t[1],t[2],t[3],t[4]));break;case"L":t=["C"].concat(mt(e.x,e.y,t[1],t[2]));break;case"H":t=["C"].concat(mt(e.x,e.y,t[1],e.y));break;case"V":t=["C"].concat(mt(e.x,e.y,e.x,t[1]));break;case"Z":t=["C"].concat(mt(e.x,e.y,e.X,e.Y))}return t},d=function(t,e){if(t[e].length>7){t[e].shift();for(var o=t[e];o.length;)l[e]="A",i&&(s[e]="A"),t.splice(e++,0,["C"].concat(o.splice(0,6)));t.splice(e,1),n=Math.max(r.length,i&&i.length||0)}},f=function(t,e,o,a,l){t&&e&&"M"===t[l][0]&&"M"!==e[l][0]&&(e.splice(l,0,["M",a.x,a.y]),o.bx=0,o.by=0,o.x=t[l][1],o.y=t[l][2],n=Math.max(r.length,i&&i.length||0))};n=Math.max(r.length,i&&i.length||0);for(var p=0;p<n;p++){r[p]&&(u=r[p][0]),"C"!==u&&(l[p]=u,p&&(c=l[p-1])),r[p]=h(r[p],o,c),"A"!==l[p]&&"C"===u&&(l[p]="C"),d(r,p),i&&(i[p]&&(u=i[p][0]),"C"!==u&&(s[p]=u,p&&(c=s[p-1])),i[p]=h(i[p],a,c),"A"!==s[p]&&"C"===u&&(s[p]="C"),d(i,p)),f(r,i,o,a,p),f(i,r,a,o,p);var v=r[p],g=i&&i[p],y=v.length,m=i&&g.length;o.x=v[y-2],o.y=v[y-1],o.bx=parseFloat(v[y-4])||o.x,o.by=parseFloat(v[y-3])||o.y,a.bx=i&&(parseFloat(g[m-4])||a.x),a.by=i&&(parseFloat(g[m-3])||a.y),a.x=i&&g[m-2],a.y=i&&g[m-1]}return i?[r,i]:r},St=/,?([a-z]),?/gi,bt=function(t){return t.join(",").replace(St,"$1")},_t=function(t,e,n,r,i){return t*(t*(-3*e+9*n-9*r+3*i)+6*e-12*n+6*r)-3*e+3*n},Lt=function(t,e,n,r,i,o,a,l,s){null===s&&(s=1);for(var u=(s=s>1?1:s<0?0:s)/2,c=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],h=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],d=0,f=0;f<12;f++){var p=u*c[f]+u,v=_t(p,t,n,i,a),g=_t(p,e,r,o,l),y=v*v+g*g;d+=h[f]*Math.sqrt(y)}return u*d},Et=function(t,e,n,r,i,o,a,l){for(var s,u,c,h,d=[],f=[[],[]],p=0;p<2;++p)if(0===p?(u=6*t-12*n+6*i,s=-3*t+9*n-9*i+3*a,c=3*n-3*t):(u=6*e-12*r+6*o,s=-3*e+9*r-9*o+3*l,c=3*r-3*e),Math.abs(s)<1e-12){if(Math.abs(u)<1e-12)continue;(h=-c/u)>0&&h<1&&d.push(h)}else{var v=u*u-4*c*s,g=Math.sqrt(v);if(!(v<0)){var y=(-u+g)/(2*s);y>0&&y<1&&d.push(y);var m=(-u-g)/(2*s);m>0&&m<1&&d.push(m)}}for(var C,w=d.length,x=w;w--;)C=1-(h=d[w]),f[0][w]=C*C*C*t+3*C*C*h*n+3*C*h*h*i+h*h*h*a,f[1][w]=C*C*C*e+3*C*C*h*r+3*C*h*h*o+h*h*h*l;return f[0][x]=t,f[1][x]=e,f[0][x+1]=a,f[1][x+1]=l,f[0].length=f[1].length=x+2,{min:{x:Math.min.apply(0,f[0]),y:Math.min.apply(0,f[1])},max:{x:Math.max.apply(0,f[0]),y:Math.max.apply(0,f[1])}}},Tt=function(t,e,n,r,i,o,a,l){if(!(Math.max(t,n)<Math.min(i,a)||Math.min(t,n)>Math.max(i,a)||Math.max(e,r)<Math.min(o,l)||Math.min(e,r)>Math.max(o,l))){var s=(t-n)*(o-l)-(e-r)*(i-a);if(s){var u=((t*r-e*n)*(i-a)-(t-n)*(i*l-o*a))/s,c=((t*r-e*n)*(o-l)-(e-r)*(i*l-o*a))/s,h=+u.toFixed(2),d=+c.toFixed(2);if(!(h<+Math.min(t,n).toFixed(2)||h>+Math.max(t,n).toFixed(2)||h<+Math.min(i,a).toFixed(2)||h>+Math.max(i,a).toFixed(2)||d<+Math.min(e,r).toFixed(2)||d>+Math.max(e,r).toFixed(2)||d<+Math.min(o,l).toFixed(2)||d>+Math.max(o,l).toFixed(2)))return{x:u,y:c}}}},Ot=function(t,e,n){return e>=t.x&&e<=t.x+t.width&&n>=t.y&&n<=t.y+t.height},It=function(t,e,n,r,i){if(i)return[["M",+t+ +i,e],["l",n-2*i,0],["a",i,i,0,0,1,i,i],["l",0,r-2*i],["a",i,i,0,0,1,-i,i],["l",2*i-n,0],["a",i,i,0,0,1,-i,-i],["l",0,2*i-r],["a",i,i,0,0,1,i,-i],["z"]];var o=[["M",t,e],["l",n,0],["l",0,r],["l",-n,0],["z"]];return o.parsePathArray=bt,o},Rt=function(t,e,n,r){return null===t&&(t=e=n=r=0),null===e&&(e=t.y,n=t.width,r=t.height,t=t.x),{x:t,y:e,width:n,w:n,height:r,h:r,x2:t+n,y2:e+r,cx:t+n/2,cy:e+r/2,r1:Math.min(n,r)/2,r2:Math.max(n,r)/2,r0:Math.sqrt(n*n+r*r)/2,path:It(t,e,n,r),vb:[t,e,n,r].join(" ")}},Mt=function(t,e,n,r,i,o,a,l){Y(t)||(t=[t,e,n,r,i,o,a,l]);var s=Et.apply(null,t);return Rt(s.min.x,s.min.y,s.max.x-s.min.x,s.max.y-s.min.y)},At=function(t,e,n,r,i,o,a,l,s){var u=1-s,c=Math.pow(u,3),h=Math.pow(u,2),d=s*s,f=d*s,p=t+2*s*(n-t)+d*(i-2*n+t),v=e+2*s*(r-e)+d*(o-2*r+e),g=n+2*s*(i-n)+d*(a-2*i+n),y=r+2*s*(o-r)+d*(l-2*o+r);return{x:c*t+3*h*s*n+3*u*s*s*i+f*a,y:c*e+3*h*s*r+3*u*s*s*o+f*l,m:{x:p,y:v},n:{x:g,y:y},start:{x:u*t+s*n,y:u*e+s*r},end:{x:u*i+s*a,y:u*o+s*l},alpha:90-180*Math.atan2(p-g,v-y)/Math.PI}},Bt=function(t,e,n){if(!function(t,e){return t=Rt(t),e=Rt(e),Ot(e,t.x,t.y)||Ot(e,t.x2,t.y)||Ot(e,t.x,t.y2)||Ot(e,t.x2,t.y2)||Ot(t,e.x,e.y)||Ot(t,e.x2,e.y)||Ot(t,e.x,e.y2)||Ot(t,e.x2,e.y2)||(t.x<e.x2&&t.x>e.x||e.x<t.x2&&e.x>t.x)&&(t.y<e.y2&&t.y>e.y||e.y<t.y2&&e.y>t.y)}(Mt(t),Mt(e)))return n?0:[];for(var r=~~(Lt.apply(0,t)/8),i=~~(Lt.apply(0,e)/8),o=[],a=[],l={},s=n?0:[],u=0;u<r+1;u++){var c=At.apply(0,t.concat(u/r));o.push({x:c.x,y:c.y,t:u/r})}for(u=0;u<i+1;u++){c=At.apply(0,e.concat(u/i));a.push({x:c.x,y:c.y,t:u/i})}for(u=0;u<r;u++)for(var h=0;h<i;h++){var d=o[u],f=o[u+1],p=a[h],v=a[h+1],g=Math.abs(f.x-d.x)<.001?"y":"x",y=Math.abs(v.x-p.x)<.001?"y":"x",m=Tt(d.x,d.y,f.x,f.y,p.x,p.y,v.x,v.y);if(m){if(l[m.x.toFixed(4)]===m.y.toFixed(4))continue;l[m.x.toFixed(4)]=m.y.toFixed(4);var C=d.t+Math.abs((m[g]-d[g])/(f[g]-d[g]))*(f.t-d.t),w=p.t+Math.abs((m[y]-p[y])/(v[y]-p[y]))*(v.t-p.t);C>=0&&C<=1&&w>=0&&w<=1&&(n?s+=1:s.push({x:m.x,y:m.y,t1:C,t2:w}))}}return s};function Dt(t,e){var n=[],r=[];return t.length&&function t(e,i){if(1===e.length)n.push(e[0]),r.push(e[0]);else{for(var o=[],a=0;a<e.length-1;a++)0===a&&n.push(e[0]),a===e.length-2&&r.push(e[a+1]),o[a]=[(1-i)*e[a][0]+i*e[a+1][0],(1-i)*e[a][1]+i*e[a+1][1]];t(o,i)}}(t,e),{left:n,right:r.reverse()}}var kt=function(t,e,n){if(1===n)return[[].concat(t)];var r=[];if("L"===e[0]||"C"===e[0]||"Q"===e[0])r=r.concat(function(t,e,n){var r=[[t[1],t[2]]];n=n||2;var i=[];"A"===e[0]?(r.push(e[6]),r.push(e[7])):"C"===e[0]?(r.push([e[1],e[2]]),r.push([e[3],e[4]]),r.push([e[5],e[6]])):"S"===e[0]||"Q"===e[0]?(r.push([e[1],e[2]]),r.push([e[3],e[4]])):r.push([e[1],e[2]]);for(var o=r,a=1/n,l=0;l<n-1;l++){var s=Dt(o,a/(1-a*l));i.push(s.left),o=s.right}return i.push(o),i.map((function(t){var e=[];return 4===t.length&&(e.push("C"),e=e.concat(t[2])),t.length>=3&&(3===t.length&&e.push("Q"),e=e.concat(t[1])),2===t.length&&e.push("L"),e.concat(t[t.length-1])}))}(t,e,n));else{var i=[].concat(t);"M"===i[0]&&(i[0]="L");for(var o=0;o<=n-1;o++)r.push(i)}return r},Nt=function(t,e){if(t.length!==e.length)return!1;var n=!0;return X(t,(function(t,r){if(t!==e[r])return n=!1,!1})),n};function Pt(t,e,n){var r=null,i=n;return e<i&&(i=e,r="add"),t<i&&(i=t,r="del"),{type:r,min:i}}var zt=function(t,e){var n=function(t,e){var n,r,i=t.length,o=e.length,a=0;if(0===i||0===o)return null;for(var l=[],s=0;s<=i;s++)l[s]=[],l[s][0]={min:s};for(var u=0;u<=o;u++)l[0][u]={min:u};for(s=1;s<=i;s++)for(n=t[s-1],u=1;u<=o;u++){r=e[u-1],a=Nt(n,r)?0:1;var c=l[s-1][u].min+1,h=l[s][u-1].min+1,d=l[s-1][u-1].min+a;l[s][u]=Pt(c,h,d)}return l}(t,e),r=t.length,i=e.length,o=[],a=1,l=1;if(n[r][i].min!==r){for(var s=1;s<=r;s++){var u=n[s][s].min;l=s;for(var c=a;c<=i;c++)n[s][c].min<u&&(u=n[s][c].min,l=c);a=l,n[s][a].type&&o.push({index:s-1,type:n[s][a].type})}for(s=o.length-1;s>=0;s--)a=o[s].index,"add"===o[s].type?t.splice(a,0,[].concat(t[a])):t.splice(a,1)}var h=i-(r=t.length);if(r<i)for(s=0;s<h;s++)"z"===t[r-1][0]||"Z"===t[r-1][0]?t.splice(r-2,0,t[r-2]):t.push(t[r-1]),r+=1;return t};function Ht(t,e,n){for(var r,i=[].concat(t),o=1/(n+1),a=Ft(e)[0],l=1;l<=n;l++)o*=l,0===(r=Math.floor(t.length*o))?i.unshift([a[0]*o+t[r][0]*(1-o),a[1]*o+t[r][1]*(1-o)]):i.splice(r,0,[a[0]*o+t[r][0]*(1-o),a[1]*o+t[r][1]*(1-o)]);return i}function Ft(t){var e=[];switch(t[0]){case"M":case"L":case"T":e.push([t[1],t[2]]);break;case"A":e.push([t[6],t[7]]);break;case"Q":case"S":e.push([t[3],t[4]]),e.push([t[1],t[2]]);break;case"C":e.push([t[5],t[6]]),e.push([t[1],t[2]]),e.push([t[3],t[4]]);break;case"H":case"V":e.push([t[1],t[1]])}return e}var Wt=function(t,e){if(t.length<=1)return t;for(var n,r=0;r<e.length;r++)if(t[r][0]!==e[r][0])switch(n=Ft(t[r]),e[r][0]){case"M":t[r]=["M"].concat(n[0]);break;case"L":t[r]=["L"].concat(n[0]);break;case"A":t[r]=[].concat(e[r]),t[r][6]=n[0][0],t[r][7]=n[0][1];break;case"Q":if(n.length<2){if(!(r>0)){t[r]=e[r];break}n=Ht(n,t[r-1],1)}t[r]=["Q"].concat(n.reduce((function(t,e){return t.concat(e)}),[]));break;case"T":t[r]=["T"].concat(n[0]);break;case"C":if(n.length<3){if(!(r>0)){t[r]=e[r];break}n=Ht(n,t[r-1],2)}t[r]=["C"].concat(n.reduce((function(t,e){return t.concat(e)}),[]));break;case"S":if(n.length<2){if(!(r>0)){t[r]=e[r];break}n=Ht(n,t[r-1],1)}t[r]=["S"].concat(n.reduce((function(t,e){return t.concat(e)}),[]));break;default:t[r]=e[r]}return t},Gt=Object.freeze({__proto__:null,catmullRomToBezier:vt,fillPath:function(t,e){if(1===t.length)return t;var n=t.length-1,r=e.length-1,i=n/r,o=[];if(1===t.length&&"M"===t[0][0]){for(var a=0;a<r-n;a++)t.push(t[0]);return t}for(a=0;a<r;a++){var l=Math.floor(i*a);o[l]=(o[l]||0)+1}var s=o.reduce((function(e,r,i){return i===n?e.concat(t[n]):e.concat(kt(t[i],t[i+1],r))}),[]);return s.unshift(t[0]),"Z"!==e[r]&&"z"!==e[r]||s.push("Z"),s},fillPathByDiff:zt,formatPath:Wt,intersection:function(t,e){return function(t,e,n){var r,i,o,a,l,s,u,c,h,d;t=xt(t),e=xt(e);for(var f=n?0:[],p=0,v=t.length;p<v;p++){var g=t[p];if("M"===g[0])r=l=g[1],i=s=g[2];else{"C"===g[0]?(h=[r,i].concat(g.slice(1)),r=h[6],i=h[7]):(h=[r,i,r,i,l,s,l,s],r=l,i=s);for(var y=0,m=e.length;y<m;y++){var C=e[y];if("M"===C[0])o=u=C[1],a=c=C[2];else{"C"===C[0]?(d=[o,a].concat(C.slice(1)),o=d[6],a=d[7]):(d=[o,a,o,a,u,c,u,c],o=u,a=c);var w=Bt(h,d,n);if(n)f+=w;else{for(var x=0,S=w.length;x<S;x++)w[x].segment1=p,w[x].segment2=y,w[x].bez1=h,w[x].bez2=d;f=f.concat(w)}}}}}return f}(t,e)},parsePathArray:bt,parsePathString:pt,pathToAbsolute:yt,pathToCurve:xt,rectPath:It}),jt=function(){function t(t,e){this.bubbles=!0,this.target=null,this.currentTarget=null,this.delegateTarget=null,this.delegateObject=null,this.defaultPrevented=!1,this.propagationStopped=!1,this.shape=null,this.fromShape=null,this.toShape=null,this.propagationPath=[],this.type=t,this.name=t,this.originalEvent=e,this.timeStamp=e.timeStamp}return t.prototype.preventDefault=function(){this.defaultPrevented=!0,this.originalEvent.preventDefault&&this.originalEvent.preventDefault()},t.prototype.stopPropagation=function(){this.propagationStopped=!0},t.prototype.toString=function(){return"[Event (type="+this.type+")]"},t.prototype.save=function(){},t.prototype.restore=function(){},t}(),Ut=function(t,e){return(Ut=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function Yt(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}Ut(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var Vt=function(){function t(){this._events={}}return t.prototype.on=function(t,e,n){return this._events[t]||(this._events[t]=[]),this._events[t].push({callback:e,once:!!n}),this},t.prototype.once=function(t,e){return this.on(t,e,!0)},t.prototype.emit=function(t){for(var e=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=this._events[t]||[],o=this._events["*"]||[],a=function(r){for(var i=r.length,o=0;o<i;o++)if(r[o]){var a=r[o],l=a.callback;a.once&&(r.splice(o,1),0===r.length&&delete e._events[t],i--,o--),l.apply(e,n)}};a(i),a(o)},t.prototype.off=function(t,e){if(t)if(e){for(var n=this._events[t]||[],r=n.length,i=0;i<r;i++)n[i].callback===e&&(n.splice(i,1),r--,i--);0===n.length&&delete this._events[t]}else delete this._events[t];else this._events={};return this},t.prototype.getEvents=function(){return this._events},t}();function Xt(t,e){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}var qt="undefined"!=typeof window&&void 0!==window.document;function Kt(t,e){if(t.isCanvas())return!0;for(var n=e.getParent(),r=!1;n;){if(n===t){r=!0;break}n=n.getParent()}return r}function $t(t){return t.cfg.visible&&t.cfg.capture}var Zt=function(t){function e(e){var n=t.call(this)||this;n.destroyed=!1;var r=n.getDefaultCfg();return n.cfg=at(r,e),n}return Yt(e,t),e.prototype.getDefaultCfg=function(){return{}},e.prototype.get=function(t){return this.cfg[t]},e.prototype.set=function(t,e){this.cfg[t]=e},e.prototype.destroy=function(){this.cfg={destroyed:!0},this.off(),this.destroyed=!0},e}(Vt),Qt=function(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))},Jt=function(t,e,n){this.name=t,this.version=e,this.os=n,this.type="browser"},te=function(t){this.version=t,this.type="node",this.name="node",this.os=process.platform},ee=function(t,e,n,r){this.name=t,this.version=e,this.os=n,this.bot=r,this.type="bot-device"},ne=function(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null},re=function(){this.type="react-native",this.name="react-native",this.version=null,this.os=null},ie=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,oe=3,ae=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]],le=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function se(t){var e=function(t){return""!==t&&ae.reduce((function(e,n){var r=n[0],i=n[1];if(e)return e;var o=i.exec(t);return!!o&&[r,o]}),!1)}(t);if(!e)return null;var n=e[0],r=e[1];if("searchbot"===n)return new ne;var i=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);i?i.length<oe&&(i=Qt(Qt([],i,!0),function(t){for(var e=[],n=0;n<t;n++)e.push("0");return e}(oe-i.length),!0)):i=[];var o=i.join("."),a=function(t){for(var e=0,n=le.length;e<n;e++){var r=le[e],i=r[0];if(r[1].exec(t))return i}return null}(t),l=ie.exec(t);return l&&l[1]?new ee(n,o,a,l[1]):new Jt(n,o,a)}var ue,ce="undefined"!=typeof Float32Array?Float32Array:Array;function he(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],l=e[4],s=e[5],u=e[6],c=e[7],h=e[8],d=n[0],f=n[1],p=n[2],v=n[3],g=n[4],y=n[5],m=n[6],C=n[7],w=n[8];return t[0]=d*r+f*a+p*u,t[1]=d*i+f*l+p*c,t[2]=d*o+f*s+p*h,t[3]=v*r+g*a+y*u,t[4]=v*i+g*l+y*c,t[5]=v*o+g*s+y*h,t[6]=m*r+C*a+w*u,t[7]=m*i+C*l+w*c,t[8]=m*o+C*s+w*h,t}function de(t,e,n){var r=e[0],i=e[1],o=e[2];return t[0]=r*n[0]+i*n[3]+o*n[6],t[1]=r*n[1]+i*n[4]+o*n[7],t[2]=r*n[2]+i*n[5]+o*n[8],t}function fe(t,e,n){var r=[0,0,0,0,0,0,0,0,0];return function(t,e){t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1}(r,n),he(t,r,e)}function pe(t,e,n){var r=[0,0,0,0,0,0,0,0,0];return function(t,e){var n=Math.sin(e),r=Math.cos(e);t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1}(r,n),he(t,r,e)}function ve(t,e,n){var r=[0,0,0,0,0,0,0,0,0];return function(t,e){t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1}(r,n),he(t,r,e)}function ge(t,e,n){return he(t,n,e)}function ye(t,e){for(var n=t?[].concat(t):[1,0,0,0,1,0,0,0,1],r=0,i=e.length;r<i;r++){var o=e[r];switch(o[0]){case"t":fe(n,n,[o[1],o[2]]);break;case"s":ve(n,n,[o[1],o[2]]);break;case"r":pe(n,n,o[1]);break;case"m":ge(n,n,o[1])}}return n}function me(t,e){var n=[],r=t[0],i=t[1],o=t[2],a=t[3],l=t[4],s=t[5],u=t[6],c=t[7],h=t[8],d=e[0],f=e[1],p=e[2],v=e[3],g=e[4],y=e[5],m=e[6],C=e[7],w=e[8];return n[0]=d*r+f*a+p*u,n[1]=d*i+f*l+p*c,n[2]=d*o+f*s+p*h,n[3]=v*r+g*a+y*u,n[4]=v*i+g*l+y*c,n[5]=v*o+g*s+y*h,n[6]=m*r+C*a+w*u,n[7]=m*i+C*l+w*c,n[8]=m*o+C*s+w*h,n}function Ce(t,e){var n=[],r=e[0],i=e[1];return n[0]=t[0]*r+t[3]*i+t[6],n[1]=t[1]*r+t[4]*i+t[7],n}function we(t){var e=[],n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],l=t[5],s=t[6],u=t[7],c=t[8],h=c*a-l*u,d=-c*o+l*s,f=u*o-a*s,p=n*h+r*d+i*f;return p?(p=1/p,e[0]=h*p,e[1]=(-c*r+i*u)*p,e[2]=(l*r-i*a)*p,e[3]=d*p,e[4]=(c*n-i*s)*p,e[5]=(-l*n+i*o)*p,e[6]=f*p,e[7]=(-u*n+r*s)*p,e[8]=(a*n-r*o)*p,e):null}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)}),ue=new ce(3),ce!=Float32Array&&(ue[0]=0,ue[1]=0,ue[2]=0),function(){var t=function(){var t=new ce(2);return ce!=Float32Array&&(t[0]=0,t[1]=0),t}()}();var xe=ye,Se="matrix",be=["zIndex","capture","visible","type"],_e=["repeat"];function Le(t,e){var n={},r=e.attrs;for(var i in t)n[i]=r[i];return n}var Ee=function(t){function e(e){var n=t.call(this,e)||this;n.attrs={};var r=n.getDefaultAttrs();return at(r,e.attrs),n.attrs=r,n.initAttrs(r),n.initAnimate(),n}return Yt(e,t),e.prototype.getDefaultCfg=function(){return{visible:!0,capture:!0,zIndex:0}},e.prototype.getDefaultAttrs=function(){return{matrix:this.getDefaultMatrix(),opacity:1}},e.prototype.onCanvasChange=function(t){},e.prototype.initAttrs=function(t){},e.prototype.initAnimate=function(){this.set("animable",!0),this.set("animating",!1)},e.prototype.isGroup=function(){return!1},e.prototype.getParent=function(){return this.get("parent")},e.prototype.getCanvas=function(){return this.get("canvas")},e.prototype.attr=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e[0],i=e[1];if(!r)return this.attrs;if(V(r)){for(var o in r)this.setAttr(o,r[o]);return this.afterAttrsChange(r),this}return 2===e.length?(this.setAttr(r,i),this.afterAttrsChange(((t={})[r]=i,t)),this):this.attrs[r]},e.prototype.isClipped=function(t,e){var n=this.getClip();return n&&!n.isHit(t,e)},e.prototype.setAttr=function(t,e){var n=this.attrs[t];n!==e&&(this.attrs[t]=e,this.onAttrChange(t,e,n))},e.prototype.onAttrChange=function(t,e,n){"matrix"===t&&this.set("totalMatrix",null)},e.prototype.afterAttrsChange=function(t){if(this.cfg.isClipShape){var e=this.cfg.applyTo;e&&e.onCanvasChange("clip")}else this.onCanvasChange("attr")},e.prototype.show=function(){return this.set("visible",!0),this.onCanvasChange("show"),this},e.prototype.hide=function(){return this.set("visible",!1),this.onCanvasChange("hide"),this},e.prototype.setZIndex=function(t){this.set("zIndex",t);var e=this.getParent();return e&&e.sort(),this},e.prototype.toFront=function(){var t=this.getParent();if(t){var e=t.getChildren();this.get("el");var n=e.indexOf(this);e.splice(n,1),e.push(this),this.onCanvasChange("zIndex")}},e.prototype.toBack=function(){var t=this.getParent();if(t){var e=t.getChildren();this.get("el");var n=e.indexOf(this);e.splice(n,1),e.unshift(this),this.onCanvasChange("zIndex")}},e.prototype.remove=function(t){void 0===t&&(t=!0);var e=this.getParent();e?(Xt(e.getChildren(),this),e.get("clearing")||this.onCanvasChange("remove")):this.onCanvasChange("remove"),t&&this.destroy()},e.prototype.resetMatrix=function(){this.attr(Se,this.getDefaultMatrix()),this.onCanvasChange("matrix")},e.prototype.getMatrix=function(){return this.attr(Se)},e.prototype.setMatrix=function(t){this.attr(Se,t),this.onCanvasChange("matrix")},e.prototype.getTotalMatrix=function(){var t=this.cfg.totalMatrix;if(!t){var e=this.attr("matrix"),n=this.cfg.parentMatrix;t=n&&e?me(n,e):e||n,this.set("totalMatrix",t)}return t},e.prototype.applyMatrix=function(t){var e=this.attr("matrix"),n=null;n=t&&e?me(t,e):e||t,this.set("totalMatrix",n),this.set("parentMatrix",t)},e.prototype.getDefaultMatrix=function(){return null},e.prototype.applyToMatrix=function(t){var e=this.attr("matrix");return e?Ce(e,t):t},e.prototype.invertFromMatrix=function(t){var e=this.attr("matrix");if(e){var n=we(e);if(n)return Ce(n,t)}return t},e.prototype.setClip=function(t){var e=this.getCanvas(),n=null;if(t){var r=this.getShapeBase()[it(t.type)];r&&(n=new r({type:t.type,isClipShape:!0,applyTo:this,attrs:t.attrs,canvas:e}))}return this.set("clipShape",n),this.onCanvasChange("clip"),n},e.prototype.getClip=function(){var t=this.cfg.clipShape;return t||null},e.prototype.clone=function(){var t=this,e=this.attrs,n={};X(e,(function(t,r){Y(e[r])?n[r]=function(t){for(var e=[],n=0;n<t.length;n++)Y(t[n])?e.push([].concat(t[n])):e.push(t[n]);return e}(e[r]):n[r]=e[r]}));var r=new(0,this.constructor)({attrs:n});return X(be,(function(e){r.set(e,t.get(e))})),r},e.prototype.destroy=function(){this.destroyed||(this.attrs={},t.prototype.destroy.call(this))},e.prototype.isAnimatePaused=function(){return this.get("_pause").isPaused},e.prototype.animate=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(this.get("timeline")||this.get("canvas")){this.set("animating",!0);var n=this.get("timeline");n||(n=this.get("canvas").get("timeline"),this.set("timeline",n));var r=this.get("animations")||[];n.timer||n.initTimer();var i,o,a,l,s,u=t[0],c=t[1],h=t[2],d=void 0===h?"easeLinear":h,f=t[3],p=void 0===f?ct:f,v=t[4],g=void 0===v?0:v;j(u)?(i=u,u={}):V(u)&&u.onFrame&&(i=u.onFrame,o=u.repeat),V(c)?(c=(s=c).duration,d=s.easing||"easeLinear",g=s.delay||0,o=s.repeat||o||!1,p=s.callback||ct,a=s.pauseCallback||ct,l=s.resumeCallback||ct):(Q(p)&&(g=p,p=null),j(d)?(p=d,d="easeLinear"):d=d||"easeLinear");var y,m=function(t,e){var n={},r=e.attr();return X(t,(function(t,e){-1!==_e.indexOf(e)||st(r[e],t)||(n[e]=t)})),n}(u,this),C={fromAttrs:Le(m,this),toAttrs:m,duration:c,easing:d,repeat:o,callback:p,pauseCallback:a,resumeCallback:l,delay:g,startTime:n.getTime(),id:(ut[y=y||"g"]?ut[y]+=1:ut[y]=1,y+ut[y]),onFrame:i,pathFormatted:!1};r.length>0?r=function(t,e){if(e.onFrame)return t;var n=e.startTime,r=e.delay,i=e.duration,o=Object.prototype.hasOwnProperty;return X(t,(function(t){n+r<t.startTime+t.delay+t.duration&&i>t.delay&&X(e.toAttrs,(function(e,n){o.call(t.toAttrs,n)&&(delete t.toAttrs[n],delete t.fromAttrs[n])}))})),t}(r,C):n.addAnimator(this),r.push(C),this.set("animations",r),this.set("_pause",{isPaused:!1})}},e.prototype.stopAnimate=function(t){var e=this;void 0===t&&(t=!0),X(this.get("animations"),(function(n){t&&(n.onFrame?e.attr(n.onFrame(1)):e.attr(n.toAttrs)),n.callback&&n.callback()})),this.set("animating",!1),this.set("animations",[])},e.prototype.pauseAnimate=function(){var t=this.get("timeline"),e=this.get("animations"),n=t.getTime();return X(e,(function(t){t._paused=!0,t._pauseTime=n,t.pauseCallback&&t.pauseCallback()})),this.set("_pause",{isPaused:!0,pauseTime:n}),this},e.prototype.resumeAnimate=function(){var t=this.get("timeline").getTime(),e=this.get("animations"),n=this.get("_pause").pauseTime;return X(e,(function(e){e.startTime=e.startTime+(t-n),e._paused=!1,e._pauseTime=null,e.resumeCallback&&e.resumeCallback()})),this.set("_pause",{isPaused:!1}),this.set("animations",e),this},e.prototype.emitDelegation=function(t,e){var n,r=this,i=e.propagationPath;this.getEvents(),"mouseenter"===t?n=e.fromShape:"mouseleave"===t&&(n=e.toShape);for(var o=function(t){var o=i[t],l=o.get("name");if(l){if((o.isGroup()||o.isCanvas&&o.isCanvas())&&n&&Kt(o,n))return"break";Y(l)?X(l,(function(t){r.emitDelegateEvent(o,t,e)})):a.emitDelegateEvent(o,l,e)}},a=this,l=0;l<i.length;l++){if("break"===o(l))break}},e.prototype.emitDelegateEvent=function(t,e,n){var r=this.getEvents(),i=e+":"+n.type;(r[i]||r["*"])&&(n.name=i,n.currentTarget=t,n.delegateTarget=this,n.delegateObject=t.get("delegateObject"),this.emit(i,n))},e.prototype.translate=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0);var n=this.getMatrix(),r=xe(n,[["t",t,e]]);return this.setMatrix(r),this},e.prototype.move=function(t,e){var n=this.attr("x")||0,r=this.attr("y")||0;return this.translate(t-n,e-r),this},e.prototype.moveTo=function(t,e){return this.move(t,e)},e.prototype.scale=function(t,e){var n=this.getMatrix(),r=xe(n,[["s",t,e||t]]);return this.setMatrix(r),this},e.prototype.rotate=function(t){var e=this.getMatrix(),n=xe(e,[["r",t]]);return this.setMatrix(n),this},e.prototype.rotateAtStart=function(t){var e=this.attr(),n=e.x,r=e.y,i=this.getMatrix(),o=xe(i,[["t",-n,-r],["r",t],["t",n,r]]);return this.setMatrix(o),this},e.prototype.rotateAtPoint=function(t,e,n){var r=this.getMatrix(),i=xe(r,[["t",-t,-e],["r",n],["t",t,e]]);return this.setMatrix(i),this},e}(Zt),Te={},Oe="_INDEX";function Ie(t,e){if(t.set("canvas",e),t.isGroup()){var n=t.get("children");n.length&&n.forEach((function(t){Ie(t,e)}))}}function Re(t,e){if(t.set("timeline",e),t.isGroup()){var n=t.get("children");n.length&&n.forEach((function(t){Re(t,e)}))}}var Me,Ae,Be=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Yt(e,t),e.prototype.isCanvas=function(){return!1},e.prototype.getBBox=function(){var t=Infinity,e=-Infinity,n=Infinity,r=-Infinity,i=[],o=[],a=this.getChildren().filter((function(t){return t.get("visible")&&(!t.isGroup()||t.isGroup()&&t.getChildren().length>0)}));return a.length>0?(X(a,(function(t){var e=t.getBBox();i.push(e.minX,e.maxX),o.push(e.minY,e.maxY)})),t=$(i),e=K(i),n=$(o),r=K(o)):(t=0,e=0,n=0,r=0),{x:t,y:n,minX:t,minY:n,maxX:e,maxY:r,width:e-t,height:r-n}},e.prototype.getCanvasBBox=function(){var t=Infinity,e=-Infinity,n=Infinity,r=-Infinity,i=[],o=[],a=this.getChildren().filter((function(t){return t.get("visible")&&(!t.isGroup()||t.isGroup()&&t.getChildren().length>0)}));return a.length>0?(X(a,(function(t){var e=t.getCanvasBBox();i.push(e.minX,e.maxX),o.push(e.minY,e.maxY)})),t=$(i),e=K(i),n=$(o),r=K(o)):(t=0,e=0,n=0,r=0),{x:t,y:n,minX:t,minY:n,maxX:e,maxY:r,width:e-t,height:r-n}},e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return e.children=[],e},e.prototype.onAttrChange=function(e,n,r){if(t.prototype.onAttrChange.call(this,e,n,r),"matrix"===e){var i=this.getTotalMatrix();this._applyChildrenMarix(i)}},e.prototype.applyMatrix=function(e){var n=this.getTotalMatrix();t.prototype.applyMatrix.call(this,e);var r=this.getTotalMatrix();r!==n&&this._applyChildrenMarix(r)},e.prototype._applyChildrenMarix=function(t){X(this.getChildren(),(function(e){e.applyMatrix(t)}))},e.prototype.addShape=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t[0],r=t[1];V(n)?r=n:r.type=n;var i=Te[r.type];i||(i=it(r.type),Te[r.type]=i);var o=new(this.getShapeBase()[i])(r);return this.add(o),o},e.prototype.addGroup=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n,r=t[0],i=t[1];if(j(r))n=new r(i||{parent:this});else{var o=r||{};n=new(this.getGroupBase())(o)}return this.add(n),n},e.prototype.getCanvas=function(){return this.isCanvas()?this:this.get("canvas")},e.prototype.getShape=function(t,e,n){if(!$t(this))return null;var r,i=this.getChildren();if(this.isCanvas())r=this._findShape(i,t,e,n);else{var o=[t,e,1];o=this.invertFromMatrix(o),this.isClipped(o[0],o[1])||(r=this._findShape(i,o[0],o[1],n))}return r},e.prototype._findShape=function(t,e,n,r){for(var i=null,o=t.length-1;o>=0;o--){var a=t[o];if($t(a)&&(a.isGroup()?i=a.getShape(e,n,r):a.isHit(e,n)&&(i=a)),i)break}return i},e.prototype.add=function(t){var e=this.getCanvas(),n=this.getChildren(),r=this.get("timeline"),i=t.getParent();i&&function(t,e,n){void 0===n&&(n=!0),n?e.destroy():(e.set("parent",null),e.set("canvas",null)),Xt(t.getChildren(),e)}(i,t,!1),t.set("parent",this),e&&Ie(t,e),r&&Re(t,r),n.push(t),t.onCanvasChange("add"),this._applyElementMatrix(t)},e.prototype._applyElementMatrix=function(t){var e=this.getTotalMatrix();e&&t.applyMatrix(e)},e.prototype.getChildren=function(){return this.get("children")},e.prototype.sort=function(){var t,e=this.getChildren();X(e,(function(t,e){return t[Oe]=e,t})),e.sort((t=function(t,e){return t.get("zIndex")-e.get("zIndex")},function(e,n){var r=t(e,n);return 0===r?e[Oe]-n[Oe]:r})),this.onCanvasChange("sort")},e.prototype.clear=function(){if(this.set("clearing",!0),!this.destroyed){for(var t=this.getChildren(),e=t.length-1;e>=0;e--)t[e].destroy();this.set("children",[]),this.onCanvasChange("clear"),this.set("clearing",!1)}},e.prototype.destroy=function(){this.get("destroyed")||(this.clear(),t.prototype.destroy.call(this))},e.prototype.getFirst=function(){return this.getChildByIndex(0)},e.prototype.getLast=function(){var t=this.getChildren();return this.getChildByIndex(t.length-1)},e.prototype.getChildByIndex=function(t){return this.getChildren()[t]},e.prototype.getCount=function(){return this.getChildren().length},e.prototype.contain=function(t){return this.getChildren().indexOf(t)>-1},e.prototype.removeChild=function(t,e){void 0===e&&(e=!0),this.contain(t)&&t.remove(e)},e.prototype.findAll=function(t){var e=[];return X(this.getChildren(),(function(n){t(n)&&e.push(n),n.isGroup()&&(e=e.concat(n.findAll(t)))})),e},e.prototype.find=function(t){var e=null;return X(this.getChildren(),(function(n){if(t(n)?e=n:n.isGroup()&&(e=n.find(t)),e)return!1})),e},e.prototype.findById=function(t){return this.find((function(e){return e.get("id")===t}))},e.prototype.findByClassName=function(t){return this.find((function(e){return e.get("className")===t}))},e.prototype.findAllByName=function(t){return this.findAll((function(e){return e.get("name")===t}))},e}(Ee),De=0,ke=0,Ne=0,Pe=1e3,ze=0,He=0,Fe=0,We="object"==typeof performance&&performance.now?performance:Date,Ge="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function je(){return He||(Ge(Ue),He=We.now()+Fe)}function Ue(){He=0}function Ye(){this._call=this._time=this._next=null}function Ve(t,e,n){var r=new Ye;return r.restart(t,e,n),r}function Xe(){He=(ze=We.now())+Fe,De=ke=0;try{!function(){je(),++De;for(var t,e=Me;e;)(t=He-e._time)>=0&&e._call.call(null,t),e=e._next;--De}()}finally{De=0,function(){var t,e,n=Me,r=Infinity;for(;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:Me=e);Ae=t,Ke(r)}(),He=0}}function qe(){var t=We.now(),e=t-ze;e>Pe&&(Fe-=e,ze=t)}function Ke(t){De||(ke&&(ke=clearTimeout(ke)),t-He>24?(t<Infinity&&(ke=setTimeout(Xe,t-We.now()-Fe)),Ne&&(Ne=clearInterval(Ne))):(Ne||(ze=We.now(),Ne=setInterval(qe,Pe)),De=1,Ge(Xe)))}function $e(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Ze(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Qe(){}Ye.prototype=Ve.prototype={constructor:Ye,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?je():+n)+(null==e?0:+e),this._next||Ae===this||(Ae?Ae._next=this:Me=this,Ae=this),this._call=t,this._time=n,Ke()},stop:function(){this._call&&(this._call=null,this._time=Infinity,Ke())}};var Je=.7,tn=1/Je,en="\\s*([+-]?\\d+)\\s*",nn="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",rn="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",on=/^#([0-9a-f]{3,8})$/,an=new RegExp("^rgb\\("+[en,en,en]+"\\)$"),ln=new RegExp("^rgb\\("+[rn,rn,rn]+"\\)$"),sn=new RegExp("^rgba\\("+[en,en,en,nn]+"\\)$"),un=new RegExp("^rgba\\("+[rn,rn,rn,nn]+"\\)$"),cn=new RegExp("^hsl\\("+[nn,rn,rn]+"\\)$"),hn=new RegExp("^hsla\\("+[nn,rn,rn,nn]+"\\)$"),dn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function fn(){return this.rgb().formatHex()}function pn(){return this.rgb().formatRgb()}function vn(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=on.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?gn(e):3===n?new Cn(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?yn(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?yn(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=an.exec(t))?new Cn(e[1],e[2],e[3],1):(e=ln.exec(t))?new Cn(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=sn.exec(t))?yn(e[1],e[2],e[3],e[4]):(e=un.exec(t))?yn(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=cn.exec(t))?bn(e[1],e[2]/100,e[3]/100,1):(e=hn.exec(t))?bn(e[1],e[2]/100,e[3]/100,e[4]):dn.hasOwnProperty(t)?gn(dn[t]):"transparent"===t?new Cn(NaN,NaN,NaN,0):null}function gn(t){return new Cn(t>>16&255,t>>8&255,255&t,1)}function yn(t,e,n,r){return r<=0&&(t=e=n=NaN),new Cn(t,e,n,r)}function mn(t,e,n,r){return 1===arguments.length?((i=t)instanceof Qe||(i=vn(i)),i?new Cn((i=i.rgb()).r,i.g,i.b,i.opacity):new Cn):new Cn(t,e,n,null==r?1:r);var i}function Cn(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function wn(){return"#"+Sn(this.r)+Sn(this.g)+Sn(this.b)}function xn(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function Sn(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function bn(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Ln(t,e,n,r)}function _n(t){if(t instanceof Ln)return new Ln(t.h,t.s,t.l,t.opacity);if(t instanceof Qe||(t=vn(t)),!t)return new Ln;if(t instanceof Ln)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),a=NaN,l=o-i,s=(o+i)/2;return l?(a=e===o?(n-r)/l+6*(n<r):n===o?(r-e)/l+2:(e-n)/l+4,l/=s<.5?o+i:2-o-i,a*=60):l=s>0&&s<1?0:a,new Ln(a,l,s,t.opacity)}function Ln(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function En(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function Tn(t){return function(){return t}}function On(t){return 1==(t=+t)?In:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}(e,n,t):Tn(isNaN(e)?n:e)}}function In(t,e){var n=e-t;return n?function(t,e){return function(n){return t+n*e}}(t,n):Tn(isNaN(t)?e:t)}$e(Qe,vn,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:fn,formatHex:fn,formatHsl:function(){return _n(this).formatHsl()},formatRgb:pn,toString:pn}),$e(Cn,mn,Ze(Qe,{brighter:function(t){return t=null==t?tn:Math.pow(tn,t),new Cn(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?Je:Math.pow(Je,t),new Cn(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:wn,formatHex:wn,formatRgb:xn,toString:xn})),$e(Ln,(function(t,e,n,r){return 1===arguments.length?_n(t):new Ln(t,e,n,null==r?1:r)}),Ze(Qe,{brighter:function(t){return t=null==t?tn:Math.pow(tn,t),new Ln(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?Je:Math.pow(Je,t),new Ln(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Cn(En(t>=240?t-240:t+120,i,r),En(t,i,r),En(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));var Rn=function t(e){var n=On(e);function r(t,e){var r=n((t=mn(t)).r,(e=mn(e)).r),i=n(t.g,e.g),o=n(t.b,e.b),a=In(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=i(e),t.b=o(e),t.opacity=a(e),t+""}}return r.gamma=t,r}(1);function Mn(t,e){e||(e=[]);var n,r=t?Math.min(e.length,t.length):0,i=e.slice();return function(o){for(n=0;n<r;++n)i[n]=t[n]*(1-o)+e[n]*o;return i}}function An(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Bn(t,e){return(An(e)?Mn:Dn)(t,e)}function Dn(t,e){var n,r=e?e.length:0,i=t?Math.min(r,t.length):0,o=new Array(i),a=new Array(r);for(n=0;n<i;++n)o[n]=Wn(t[n],e[n]);for(;n<r;++n)a[n]=e[n];return function(t){for(n=0;n<i;++n)a[n]=o[n](t);return a}}function kn(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function Nn(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Pn(t,e){var n,r={},i={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?r[n]=Wn(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}}var zn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Hn=new RegExp(zn.source,"g");function Fn(t,e){var n,r,i,o=zn.lastIndex=Hn.lastIndex=0,a=-1,l=[],s=[];for(t+="",e+="";(n=zn.exec(t))&&(r=Hn.exec(e));)(i=r.index)>o&&(i=e.slice(o,i),l[a]?l[a]+=i:l[++a]=i),(n=n[0])===(r=r[0])?l[a]?l[a]+=r:l[++a]=r:(l[++a]=null,s.push({i:a,x:Nn(n,r)})),o=Hn.lastIndex;return o<e.length&&(i=e.slice(o),l[a]?l[a]+=i:l[++a]=i),l.length<2?s[0]?function(t){return function(e){return t(e)+""}}(s[0].x):function(t){return function(){return t}}(e):(e=s.length,function(t){for(var n,r=0;r<e;++r)l[(n=s[r]).i]=n.x(t);return l.join("")})}function Wn(t,e){var n,r=typeof e;return null==e||"boolean"===r?Tn(e):("number"===r?Nn:"string"===r?(n=vn(e))?(e=n,Rn):Fn:e instanceof vn?Rn:e instanceof Date?kn:An(e)?Mn:Array.isArray(e)?Dn:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?Pn:Nn)(t,e)}function Gn(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}function jn(t){return t*t*t}function Un(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Yn=function t(e){function n(t){return Math.pow(t,e)}return e=+e,n.exponent=t,n}(3),Vn=function t(e){function n(t){return 1-Math.pow(1-t,e)}return e=+e,n.exponent=t,n}(3),Xn=function t(e){function n(t){return((t*=2)<=1?Math.pow(t,e):2-Math.pow(2-t,e))/2}return e=+e,n.exponent=t,n}(3),qn=Math.PI,Kn=qn/2;function $n(t){return(1-Math.cos(qn*t))/2}function Zn(t){return 1.0009775171065494*(Math.pow(2,-10*t)-.0009765625)}function Qn(t){return((t*=2)<=1?Zn(1-t):2-Zn(t-1))/2}function Jn(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2}var tr=4/11,er=6/11,nr=8/11,rr=3/4,ir=9/11,or=10/11,ar=15/16,lr=21/22,sr=63/64,ur=1/tr/tr;function cr(t){return(t=+t)<tr?ur*t*t:t<nr?ur*(t-=er)*t+rr:t<or?ur*(t-=ir)*t+ar:ur*(t-=lr)*t+sr}var hr=1.70158,dr=function t(e){function n(t){return(t=+t)*t*(e*(t-1)+t)}return e=+e,n.overshoot=t,n}(hr),fr=function t(e){function n(t){return--t*t*((t+1)*e+t)+1}return e=+e,n.overshoot=t,n}(hr),pr=function t(e){function n(t){return((t*=2)<1?t*t*((e+1)*t-e):(t-=2)*t*((e+1)*t+e)+2)/2}return e=+e,n.overshoot=t,n}(hr),vr=2*Math.PI,gr=function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=vr);function i(t){return e*Zn(- --t)*Math.sin((r-t)/n)}return i.amplitude=function(e){return t(e,n*vr)},i.period=function(n){return t(e,n)},i}(1,.3),yr=function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=vr);function i(t){return 1-e*Zn(t=+t)*Math.sin((t+r)/n)}return i.amplitude=function(e){return t(e,n*vr)},i.period=function(n){return t(e,n)},i}(1,.3),mr=function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=vr);function i(t){return((t=2*t-1)<0?e*Zn(-t)*Math.sin((r-t)/n):2-e*Zn(t)*Math.sin((r+t)/n))/2}return i.amplitude=function(e){return t(e,n*vr)},i.period=function(n){return t(e,n)},i}(1,.3),Cr=Object.freeze({__proto__:null,easeLinear:function(t){return+t},easeQuad:Gn,easeQuadIn:function(t){return t*t},easeQuadOut:function(t){return t*(2-t)},easeQuadInOut:Gn,easeCubic:Un,easeCubicIn:jn,easeCubicOut:function(t){return--t*t*t+1},easeCubicInOut:Un,easePoly:Xn,easePolyIn:Yn,easePolyOut:Vn,easePolyInOut:Xn,easeSin:$n,easeSinIn:function(t){return 1==+t?1:1-Math.cos(t*Kn)},easeSinOut:function(t){return Math.sin(t*Kn)},easeSinInOut:$n,easeExp:Qn,easeExpIn:function(t){return Zn(1-+t)},easeExpOut:function(t){return 1-Zn(t)},easeExpInOut:Qn,easeCircle:Jn,easeCircleIn:function(t){return 1-Math.sqrt(1-t*t)},easeCircleOut:function(t){return Math.sqrt(1- --t*t)},easeCircleInOut:Jn,easeBounce:cr,easeBounceIn:function(t){return 1-cr(1-t)},easeBounceOut:cr,easeBounceInOut:function(t){return((t*=2)<=1?1-cr(1-t):cr(t-1)+1)/2},easeBack:pr,easeBackIn:dr,easeBackOut:fr,easeBackInOut:pr,easeElastic:yr,easeElasticIn:gr,easeElasticOut:yr,easeElasticInOut:mr}),wr={};var xr=function(t){return["fill","stroke","fillStyle","strokeStyle"].includes(t)},Sr=function(t){return/^[r,R,L,l]{1}[\s]*\(/.test(t)},br=[1,0,0,0,1,0,0,0,1];function _r(t,e,n){var r,i=e.startTime;if(n<i+e.delay||e._paused)return!1;var o,a=e.duration,l=e.easing,s=wr[(o=l).toLowerCase()]||Cr[o];if(n=n-i-e.delay,e.repeat)r=s(r=n%a/a);else{if(!((r=n/a)<1))return e.onFrame?t.attr(e.onFrame(1)):t.attr(e.toAttrs),!0;r=s(r)}if(e.onFrame){var u=e.onFrame(r);t.attr(u)}else!function(t,e,n){var r={},i=e.fromAttrs,o=e.toAttrs;if(!t.destroyed){var a;for(var l in o)if(!st(i[l],o[l]))if("path"===l){var s=o[l],u=i[l];s.length>u.length?(s=pt(o[l]),u=pt(i[l]),u=zt(u,s),u=Wt(u,s),e.fromAttrs.path=u,e.toAttrs.path=s):e.pathFormatted||(s=pt(o[l]),u=pt(i[l]),u=Wt(u,s),e.fromAttrs.path=u,e.toAttrs.path=s,e.pathFormatted=!0),r[l]=[];for(var c=0;c<s.length;c++){for(var h=s[c],d=u[c],f=[],p=0;p<h.length;p++)Q(h[p])&&d&&Q(d[p])?(a=Wn(d[p],h[p]),f.push(a(n))):f.push(h[p]);r[l].push(f)}}else if("matrix"===l){var v=Bn(i[l]||br,o[l]||br)(n);r[l]=v}else xr(l)&&Sr(o[l])?r[l]=o[l]:j(o[l])||(a=Wn(i[l],o[l]),r[l]=a(n));t.attr(r)}}(t,e,r);return!1}var Lr=function(){function t(t){this.animators=[],this.current=0,this.timer=null,this.canvas=t}return t.prototype.initTimer=function(){var t,e,n,r=this;this.timer=Ve((function(i){if(r.current=i,r.animators.length>0){for(var o=r.animators.length-1;o>=0;o--)if((t=r.animators[o]).destroyed)r.removeAnimator(o);else{if(!t.isAnimatePaused())for(var a=(e=t.get("animations")).length-1;a>=0;a--)n=e[a],_r(t,n,i)&&(e.splice(a,1),!1,n.callback&&n.callback());0===e.length&&r.removeAnimator(o)}r.canvas.get("autoDraw")||r.canvas.draw()}}))},t.prototype.addAnimator=function(t){this.animators.push(t)},t.prototype.removeAnimator=function(t){this.animators.splice(t,1)},t.prototype.isAnimating=function(){return!!this.animators.length},t.prototype.stop=function(){this.timer&&this.timer.stop()},t.prototype.stopAllAnimations=function(t){void 0===t&&(t=!0),this.animators.forEach((function(e){e.stopAnimate(t)})),this.animators=[],this.canvas.draw()},t.prototype.getTime=function(){return this.current},t}(),Er=["mousedown","mouseup","dblclick","mouseout","mouseover","mousemove","mouseleave","mouseenter","touchstart","touchmove","touchend","dragenter","dragover","dragleave","drop","contextmenu","mousewheel"];function Tr(t,e,n){n.name=e,n.target=t,n.currentTarget=t,n.delegateTarget=t,t.emit(e,n)}function Or(t,e,n){if(n.bubbles){var r=void 0,i=!1;if("mouseenter"===e?(r=n.fromShape,i=!0):"mouseleave"===e&&(i=!0,r=n.toShape),t.isCanvas()&&i)return;if(r&&Kt(t,r))return void(n.bubbles=!1);n.name=e,n.currentTarget=t,n.delegateTarget=t,t.emit(e,n)}}var Ir,Rr=function(){function t(t){var e=this;this.draggingShape=null,this.dragging=!1,this.currentShape=null,this.mousedownShape=null,this.mousedownPoint=null,this._eventCallback=function(t){var n=t.type;e._triggerEvent(n,t)},this._onDocumentMove=function(t){if(e.canvas.get("el")!==t.target&&(e.dragging||e.currentShape)){var n=e._getPointInfo(t);e.dragging&&e._emitEvent("drag",t,n,e.draggingShape)}},this._onDocumentMouseUp=function(t){if(e.canvas.get("el")!==t.target&&e.dragging){var n=e._getPointInfo(t);e.draggingShape&&e._emitEvent("drop",t,n,null),e._emitEvent("dragend",t,n,e.draggingShape),e._afterDrag(e.draggingShape,n,t)}},this.canvas=t.canvas}return t.prototype.init=function(){this._bindEvents()},t.prototype._bindEvents=function(){var t=this,e=this.canvas.get("el");X(Er,(function(n){e.addEventListener(n,t._eventCallback)})),document&&(document.addEventListener("mousemove",this._onDocumentMove),document.addEventListener("mouseup",this._onDocumentMouseUp))},t.prototype._clearEvents=function(){var t=this,e=this.canvas.get("el");X(Er,(function(n){e.removeEventListener(n,t._eventCallback)})),document&&(document.removeEventListener("mousemove",this._onDocumentMove),document.removeEventListener("mouseup",this._onDocumentMouseUp))},t.prototype._getEventObj=function(t,e,n,r,i,o){var a=new jt(t,e);return a.fromShape=i,a.toShape=o,a.x=n.x,a.y=n.y,a.clientX=n.clientX,a.clientY=n.clientY,a.propagationPath.push(r),a},t.prototype._getShape=function(t,e){return this.canvas.getShape(t.x,t.y,e)},t.prototype._getPointInfo=function(t){var e=this.canvas,n=e.getClientByEvent(t),r=e.getPointByEvent(t);return{x:r.x,y:r.y,clientX:n.x,clientY:n.y}},t.prototype._triggerEvent=function(t,e){var n=this._getPointInfo(e),r=this._getShape(n,e),i=this["_on"+t],o=!1;if(i)i.call(this,n,r,e);else{var a=this.currentShape;"mouseenter"===t||"dragenter"===t||"mouseover"===t?(this._emitEvent(t,e,n,null,null,r),r&&this._emitEvent(t,e,n,r,null,r),"mouseenter"===t&&this.draggingShape&&this._emitEvent("dragenter",e,n,null)):"mouseleave"===t||"dragleave"===t||"mouseout"===t?(o=!0,a&&this._emitEvent(t,e,n,a,a,null),this._emitEvent(t,e,n,null,a,null),"mouseleave"===t&&this.draggingShape&&this._emitEvent("dragleave",e,n,null)):this._emitEvent(t,e,n,r,null,null)}if(o||(this.currentShape=r),r&&!r.get("destroyed")){var l=this.canvas;l.get("el").style.cursor=r.attr("cursor")||l.get("cursor")}},t.prototype._onmousedown=function(t,e,n){0===n.button&&(this.mousedownShape=e,this.mousedownPoint=t,this.mousedownTimeStamp=n.timeStamp),this._emitEvent("mousedown",n,t,e,null,null)},t.prototype._emitMouseoverEvents=function(t,e,n,r){var i=this.canvas.get("el");n!==r&&(n&&(this._emitEvent("mouseout",t,e,n,n,r),this._emitEvent("mouseleave",t,e,n,n,r),r&&!r.get("destroyed")||(i.style.cursor=this.canvas.get("cursor"))),r&&(this._emitEvent("mouseover",t,e,r,n,r),this._emitEvent("mouseenter",t,e,r,n,r)))},t.prototype._emitDragoverEvents=function(t,e,n,r,i){r?(r!==n&&(n&&this._emitEvent("dragleave",t,e,n,n,r),this._emitEvent("dragenter",t,e,r,n,r)),i||this._emitEvent("dragover",t,e,r)):n&&this._emitEvent("dragleave",t,e,n,n,r),i&&this._emitEvent("dragover",t,e,r)},t.prototype._afterDrag=function(t,e,n){t&&(t.set("capture",!0),this.draggingShape=null),this.dragging=!1;var r=this._getShape(e,n);r!==t&&this._emitMouseoverEvents(n,e,t,r),this.currentShape=r},t.prototype._onmouseup=function(t,e,n){if(0===n.button){var r=this.draggingShape;this.dragging?(r&&this._emitEvent("drop",n,t,e),this._emitEvent("dragend",n,t,r),this._afterDrag(r,t,n)):(this._emitEvent("mouseup",n,t,e),e===this.mousedownShape&&this._emitEvent("click",n,t,e),this.mousedownShape=null,this.mousedownPoint=null)}},t.prototype._ondragover=function(t,e,n){n.preventDefault();var r=this.currentShape;this._emitDragoverEvents(n,t,r,e,!0)},t.prototype._onmousemove=function(t,e,n){var r=this.canvas,i=this.currentShape,o=this.draggingShape;if(this.dragging)o&&this._emitDragoverEvents(n,t,i,e,!1),this._emitEvent("drag",n,t,o);else{var a=this.mousedownPoint;if(a){var l=this.mousedownShape,s=n.timeStamp-this.mousedownTimeStamp,u=a.clientX-t.clientX,c=a.clientY-t.clientY;s>120||u*u+c*c>40?l&&l.get("draggable")?((o=this.mousedownShape).set("capture",!1),this.draggingShape=o,this.dragging=!0,this._emitEvent("dragstart",n,t,o),this.mousedownShape=null,this.mousedownPoint=null):!l&&r.get("draggable")?(this.dragging=!0,this._emitEvent("dragstart",n,t,null),this.mousedownShape=null,this.mousedownPoint=null):(this._emitMouseoverEvents(n,t,i,e),this._emitEvent("mousemove",n,t,e)):(this._emitMouseoverEvents(n,t,i,e),this._emitEvent("mousemove",n,t,e))}else this._emitMouseoverEvents(n,t,i,e),this._emitEvent("mousemove",n,t,e)}},t.prototype._emitEvent=function(t,e,n,r,i,o){var a=this._getEventObj(t,e,n,r,i,o);if(r){a.shape=r,Tr(r,t,a);for(var l=r.getParent();l;)l.emitDelegation(t,a),a.propagationStopped||Or(l,t,a),a.propagationPath.push(l),l=l.getParent()}else{Tr(this.canvas,t,a)}},t.prototype.destroy=function(){this._clearEvents(),this.canvas=null,this.currentShape=null,this.draggingShape=null,this.mousedownPoint=null,this.mousedownShape=null,this.mousedownTimeStamp=null},t}(),Mr=Ir?se(Ir):"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"===navigator.product?new re:"undefined"!=typeof navigator?se(navigator.userAgent):"undefined"!=typeof process&&process.version?new te(process.version.slice(1)):null,Ar=Mr&&"firefox"===Mr.name,Br=function(t){function e(e){var n=t.call(this,e)||this;return n.initContainer(),n.initDom(),n.initEvents(),n.initTimeline(),n}return Yt(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return e.cursor="default",e.supportCSSTransform=!1,e},e.prototype.initContainer=function(){var t=this.get("container");Z(t)&&(t=document.getElementById(t),this.set("container",t))},e.prototype.initDom=function(){var t=this.createDom();this.set("el",t),this.get("container").appendChild(t),this.setDOMSize(this.get("width"),this.get("height"))},e.prototype.initEvents=function(){var t=new Rr({canvas:this});t.init(),this.set("eventController",t)},e.prototype.initTimeline=function(){var t=new Lr(this);this.set("timeline",t)},e.prototype.setDOMSize=function(t,e){var n=this.get("el");qt&&(n.style.width=t+"px",n.style.height=e+"px")},e.prototype.changeSize=function(t,e){this.setDOMSize(t,e),this.set("width",t),this.set("height",e),this.onCanvasChange("changeSize")},e.prototype.getRenderer=function(){return this.get("renderer")},e.prototype.getCursor=function(){return this.get("cursor")},e.prototype.setCursor=function(t){this.set("cursor",t);var e=this.get("el");qt&&e&&(e.style.cursor=t)},e.prototype.getPointByEvent=function(t){if(this.get("supportCSSTransform")){if(Ar&&!U(t.layerX)&&t.layerX!==t.offsetX)return{x:t.layerX,y:t.layerY};if(!U(t.offsetX))return{x:t.offsetX,y:t.offsetY}}var e=this.getClientByEvent(t),n=e.x,r=e.y;return this.getPointByClient(n,r)},e.prototype.getClientByEvent=function(t){var e=t;return t.touches&&(e="touchend"===t.type?t.changedTouches[0]:t.touches[0]),{x:e.clientX,y:e.clientY}},e.prototype.getPointByClient=function(t,e){var n=this.get("el").getBoundingClientRect();return{x:t-n.left,y:e-n.top}},e.prototype.getClientByPoint=function(t,e){var n=this.get("el").getBoundingClientRect();return{x:t+n.left,y:e+n.top}},e.prototype.draw=function(){},e.prototype.removeDom=function(){var t=this.get("el");t.parentNode.removeChild(t)},e.prototype.clearEvents=function(){this.get("eventController").destroy()},e.prototype.isCanvas=function(){return!0},e.prototype.getParent=function(){return null},e.prototype.destroy=function(){var e=this.get("timeline");this.get("destroyed")||(this.clear(),e&&e.stop(),this.clearEvents(),this.removeDom(),t.prototype.destroy.call(this))},e}(Be),Dr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Yt(e,t),e.prototype.isGroup=function(){return!0},e.prototype.isEntityGroup=function(){return!1},e.prototype.clone=function(){for(var e=t.prototype.clone.call(this),n=this.getChildren(),r=0;r<n.length;r++){var i=n[r];e.add(i.clone())}return e},e}(Be),kr=function(t){function e(e){return t.call(this,e)||this}return Yt(e,t),e.prototype._isInBBox=function(t,e){var n=this.getBBox();return n.minX<=t&&n.maxX>=t&&n.minY<=e&&n.maxY>=e},e.prototype.afterAttrsChange=function(e){t.prototype.afterAttrsChange.call(this,e),this.clearCacheBBox()},e.prototype.getBBox=function(){var t=this.cfg.bbox;return t||(t=this.calculateBBox(),this.set("bbox",t)),t},e.prototype.getCanvasBBox=function(){var t=this.cfg.canvasBBox;return t||(t=this.calculateCanvasBBox(),this.set("canvasBBox",t)),t},e.prototype.applyMatrix=function(e){t.prototype.applyMatrix.call(this,e),this.set("canvasBBox",null)},e.prototype.calculateCanvasBBox=function(){var t=this.getBBox(),e=this.getTotalMatrix(),n=t.minX,r=t.minY,i=t.maxX,o=t.maxY;if(e){var a=Ce(e,[t.minX,t.minY]),l=Ce(e,[t.maxX,t.minY]),s=Ce(e,[t.minX,t.maxY]),u=Ce(e,[t.maxX,t.maxY]);n=Math.min(a[0],l[0],s[0],u[0]),i=Math.max(a[0],l[0],s[0],u[0]),r=Math.min(a[1],l[1],s[1],u[1]),o=Math.max(a[1],l[1],s[1],u[1])}var c=this.attrs;if(c.shadowColor){var h=c.shadowBlur,d=void 0===h?0:h,f=c.shadowOffsetX,p=void 0===f?0:f,v=c.shadowOffsetY,g=void 0===v?0:v,y=n-d+p,m=i+d+p,C=r-d+g,w=o+d+g;n=Math.min(n,y),i=Math.max(i,m),r=Math.min(r,C),o=Math.max(o,w)}return{x:n,y:r,minX:n,minY:r,maxX:i,maxY:o,width:i-n,height:o-r}},e.prototype.clearCacheBBox=function(){this.set("bbox",null),this.set("canvasBBox",null)},e.prototype.isClipShape=function(){return this.get("isClipShape")},e.prototype.isInShape=function(t,e){return!1},e.prototype.isOnlyHitBox=function(){return!1},e.prototype.isHit=function(t,e){var n=this.get("startArrowShape"),r=this.get("endArrowShape"),i=[t,e,1],o=(i=this.invertFromMatrix(i))[0],a=i[1],l=this._isInBBox(o,a);if(this.isOnlyHitBox())return l;if(l&&!this.isClipped(o,a)){if(this.isInShape(o,a))return!0;if(n&&n.isHit(o,a))return!0;if(r&&r.isHit(o,a))return!0}return!1},e}(Ee),Nr=new Map;function Pr(t,e){Nr.set(t,e)}function zr(t){var e=t.attr();return{x:e.x,y:e.y,width:e.width,height:e.height}}function Hr(t){var e=t.attr(),n=e.x,r=e.y,i=e.r;return{x:n-i,y:r-i,width:2*i,height:2*i}}function Fr(t){return Math.min.apply(null,t)}function Wr(t){return Math.max.apply(null,t)}function Gr(t,e,n,r){var i=t-n,o=e-r;return Math.sqrt(i*i+o*o)}function jr(t,e){return Math.abs(t-e)<.001}function Ur(t,e){var n=Fr(t),r=Fr(e);return{x:n,y:r,width:Wr(t)-n,height:Wr(e)-r}}function Yr(t){return(t+2*Math.PI)%(2*Math.PI)}var Vr={box:function(t,e,n,r){return Ur([t,n],[e,r])},length:function(t,e,n,r){return Gr(t,e,n,r)},pointAt:function(t,e,n,r,i){return{x:(1-i)*t+i*n,y:(1-i)*e+i*r}},pointDistance:function(t,e,n,r,i,o){var a=(n-t)*(i-t)+(r-e)*(o-e);return a<0?Gr(t,e,i,o):a>(n-t)*(n-t)+(r-e)*(r-e)?Gr(n,r,i,o):this.pointToLine(t,e,n,r,i,o)},pointToLine:function(t,e,n,r,i,o){var a=[n-t,r-e];if(function(t,e){return t[0]===e[0]&&t[1]===e[1]}(a,[0,0]))return Math.sqrt((i-t)*(i-t)+(o-e)*(o-e));var l=[-a[1],a[0]];!function(t,e){var n=e[0],r=e[1],i=n*n+r*r;i>0&&(i=1/Math.sqrt(i)),t[0]=e[0]*i,t[1]=e[1]*i}(l,l);var s=[i-t,o-e];return Math.abs(function(t,e){return t[0]*e[0]+t[1]*e[1]}(s,l))},tangentAngle:function(t,e,n,r){return Math.atan2(r-e,n-t)}};function Xr(t,e,n,r,i,o){var a,l=Infinity,s=[n,r],u=20;o&&o>200&&(u=o/10);for(var c=1/u,h=c/10,d=0;d<=u;d++){var f=d*c,p=[i.apply(null,t.concat([f])),i.apply(null,e.concat([f]))];(m=Gr(s[0],s[1],p[0],p[1]))<l&&(a=f,l=m)}if(0===a)return{x:t[0],y:e[0]};if(1===a){var v=t.length;return{x:t[v-1],y:e[v-1]}}l=Infinity;for(d=0;d<32&&!(h<1e-4);d++){var g=a-h,y=a+h,m=(p=[i.apply(null,t.concat([g])),i.apply(null,e.concat([g]))],Gr(s[0],s[1],p[0],p[1]));if(g>=0&&m<l)a=g,l=m;else{var C=[i.apply(null,t.concat([y])),i.apply(null,e.concat([y]))],w=Gr(s[0],s[1],C[0],C[1]);y<=1&&w<l?(a=y,l=w):h*=.5}}return{x:i.apply(null,t.concat([a])),y:i.apply(null,e.concat([a]))}}function qr(t,e,n,r){var i=1-r;return i*i*t+2*r*i*e+r*r*n}function Kr(t,e,n){var r=t+n-2*e;if(jr(r,0))return[.5];var i=(t-e)/r;return i<=1&&i>=0?[i]:[]}function $r(t,e,n,r){return 2*(1-r)*(e-t)+2*r*(n-e)}function Zr(t,e,n,r,i,o,a){var l=qr(t,n,i,a),s=qr(e,r,o,a),u=Vr.pointAt(t,e,n,r,a),c=Vr.pointAt(n,r,i,o,a);return[[t,e,u.x,u.y,l,s],[l,s,c.x,c.y,i,o]]}function Qr(t,e,n,r,i,o,a){if(0===a)return(Gr(t,e,n,r)+Gr(n,r,i,o)+Gr(t,e,i,o))/2;var l=Zr(t,e,n,r,i,o,.5),s=l[0],u=l[1];return s.push(a-1),u.push(a-1),Qr.apply(null,s)+Qr.apply(null,u)}var Jr={box:function(t,e,n,r,i,o){var a=Kr(t,n,i)[0],l=Kr(e,r,o)[0],s=[t,i],u=[e,o];return void 0!==a&&s.push(qr(t,n,i,a)),void 0!==l&&u.push(qr(e,r,o,l)),Ur(s,u)},length:function(t,e,n,r,i,o){return Qr(t,e,n,r,i,o,3)},nearestPoint:function(t,e,n,r,i,o,a,l){return Xr([t,n,i],[e,r,o],a,l,qr)},pointDistance:function(t,e,n,r,i,o,a,l){var s=this.nearestPoint(t,e,n,r,i,o,a,l);return Gr(s.x,s.y,a,l)},interpolationAt:qr,pointAt:function(t,e,n,r,i,o,a){return{x:qr(t,n,i,a),y:qr(e,r,o,a)}},divide:function(t,e,n,r,i,o,a){return Zr(t,e,n,r,i,o,a)},tangentAngle:function(t,e,n,r,i,o,a){var l=$r(t,n,i,a),s=$r(e,r,o,a);return Yr(Math.atan2(s,l))}};function ti(t,e,n,r,i){var o=1-i;return o*o*o*t+3*e*i*o*o+3*n*i*i*o+r*i*i*i}function ei(t,e,n,r,i){var o=1-i;return 3*(o*o*(e-t)+2*o*i*(n-e)+i*i*(r-n))}function ni(t,e,n,r){var i,o,a,l=-3*t+9*e-9*n+3*r,s=6*t-12*e+6*n,u=3*e-3*t,c=[];if(jr(l,0))jr(s,0)||(i=-u/s)>=0&&i<=1&&c.push(i);else{var h=s*s-4*l*u;jr(h,0)?c.push(-s/(2*l)):h>0&&(o=(-s-(a=Math.sqrt(h)))/(2*l),(i=(-s+a)/(2*l))>=0&&i<=1&&c.push(i),o>=0&&o<=1&&c.push(o))}return c}function ri(t,e,n,r,i,o,a,l,s){var u=ti(t,n,i,a,s),c=ti(e,r,o,l,s),h=Vr.pointAt(t,e,n,r,s),d=Vr.pointAt(n,r,i,o,s),f=Vr.pointAt(i,o,a,l,s),p=Vr.pointAt(h.x,h.y,d.x,d.y,s),v=Vr.pointAt(d.x,d.y,f.x,f.y,s);return[[t,e,h.x,h.y,p.x,p.y,u,c],[u,c,v.x,v.y,f.x,f.y,a,l]]}function ii(t,e,n,r,i,o,a,l,s){if(0===s)return function(t,e){for(var n=0,r=t.length,i=0;i<r;i++)n+=Gr(t[i],e[i],t[(i+1)%r],e[(i+1)%r]);return n/2}([t,n,i,a],[e,r,o,l]);var u=ri(t,e,n,r,i,o,a,l,.5),c=u[0],h=u[1];return c.push(s-1),h.push(s-1),ii.apply(null,c)+ii.apply(null,h)}var oi={extrema:ni,box:function(t,e,n,r,i,o,a,l){for(var s=[t,a],u=[e,l],c=ni(t,n,i,a),h=ni(e,r,o,l),d=0;d<c.length;d++)s.push(ti(t,n,i,a,c[d]));for(d=0;d<h.length;d++)u.push(ti(e,r,o,l,h[d]));return Ur(s,u)},length:function(t,e,n,r,i,o,a,l){return ii(t,e,n,r,i,o,a,l,3)},nearestPoint:function(t,e,n,r,i,o,a,l,s,u,c){return Xr([t,n,i,a],[e,r,o,l],s,u,ti,c)},pointDistance:function(t,e,n,r,i,o,a,l,s,u,c){var h=this.nearestPoint(t,e,n,r,i,o,a,l,s,u,c);return Gr(h.x,h.y,s,u)},interpolationAt:ti,pointAt:function(t,e,n,r,i,o,a,l,s){return{x:ti(t,n,i,a,s),y:ti(e,r,o,l,s)}},divide:function(t,e,n,r,i,o,a,l,s){return ri(t,e,n,r,i,o,a,l,s)},tangentAngle:function(t,e,n,r,i,o,a,l,s){var u=ei(t,n,i,a,s),c=ei(e,r,o,l,s);return Yr(Math.atan2(c,u))}};function ai(t,e){var n=Math.abs(t);return e>0?n:-1*n}var li=function(t,e,n,r,i,o){var a=n,l=r;if(0===a||0===l)return{x:t,y:e};for(var s,u,c=i-t,h=o-e,d=Math.abs(c),f=Math.abs(h),p=a*a,v=l*l,g=Math.PI/4,y=0;y<4;y++){s=a*Math.cos(g),u=l*Math.sin(g);var m=(p-v)*Math.pow(Math.cos(g),3)/a,C=(v-p)*Math.pow(Math.sin(g),3)/l,w=s-m,x=u-C,S=d-m,b=f-C,_=Math.hypot(x,w),L=Math.hypot(b,S);g+=_*Math.asin((w*b-x*S)/(_*L))/Math.sqrt(p+v-s*s-u*u),g=Math.min(Math.PI/2,Math.max(0,g))}return{x:t+ai(s,c),y:e+ai(u,h)}};function si(t,e,n,r,i,o){return n*Math.cos(i)*Math.cos(o)-r*Math.sin(i)*Math.sin(o)+t}function ui(t,e,n,r,i,o){return n*Math.sin(i)*Math.cos(o)+r*Math.cos(i)*Math.sin(o)+e}function ci(t,e,n){return{x:t*Math.cos(n),y:e*Math.sin(n)}}function hi(t,e,n){var r=Math.cos(n),i=Math.sin(n);return[t*r-e*i,t*i+e*r]}var di={box:function(t,e,n,r,i,o,a){for(var l=function(t,e,n){return Math.atan(-e/t*Math.tan(n))}(n,r,i),s=Infinity,u=-Infinity,c=[o,a],h=2*-Math.PI;h<=2*Math.PI;h+=Math.PI){var d=l+h;o<a?o<d&&d<a&&c.push(d):a<d&&d<o&&c.push(d)}for(h=0;h<c.length;h++){var f=si(t,0,n,r,i,c[h]);f<s&&(s=f),f>u&&(u=f)}var p=function(t,e,n){return Math.atan(e/(t*Math.tan(n)))}(n,r,i),v=Infinity,g=-Infinity,y=[o,a];for(h=2*-Math.PI;h<=2*Math.PI;h+=Math.PI){var m=p+h;o<a?o<m&&m<a&&y.push(m):a<m&&m<o&&y.push(m)}for(h=0;h<y.length;h++){var C=ui(0,e,n,r,i,y[h]);C<v&&(v=C),C>g&&(g=C)}return{x:s,y:v,width:u-s,height:g-v}},length:function(t,e,n,r,i,o,a){},nearestPoint:function(t,e,n,r,i,o,a,l,s){var u=hi(l-t,s-e,-i),c=u[0],h=u[1],d=li(0,0,n,r,c,h),f=function(t,e,n,r){return(Math.atan2(r*t,n*e)+2*Math.PI)%(2*Math.PI)}(n,r,d.x,d.y);f<o?d=ci(n,r,o):f>a&&(d=ci(n,r,a));var p=hi(d.x,d.y,i);return{x:p[0]+t,y:p[1]+e}},pointDistance:function(t,e,n,r,i,o,a,l,s){var u=this.nearestPoint(t,e,n,r,l,s);return Gr(u.x,u.y,l,s)},pointAt:function(t,e,n,r,i,o,a,l){var s=(a-o)*l+o;return{x:si(t,0,n,r,i,s),y:ui(0,e,n,r,i,s)}},tangentAngle:function(t,e,n,r,i,o,a,l){var s=(a-o)*l+o,u=function(t,e,n,r,i,o,a,l){return-1*n*Math.cos(i)*Math.sin(l)-r*Math.sin(i)*Math.cos(l)}(0,0,n,r,i,0,0,s),c=function(t,e,n,r,i,o,a,l){return-1*n*Math.sin(i)*Math.sin(l)+r*Math.cos(i)*Math.cos(l)}(0,0,n,r,i,0,0,s);return Yr(Math.atan2(c,u))}};var fi=function(t){return function(t){if(t.length<2)return 0;for(var e=0,n=0;n<t.length-1;n++){var r=t[n],i=t[n+1];e+=Gr(r[0],r[1],i[0],i[1])}return e}(t)};function pi(t,e){return t&&e?{minX:Math.min(t.minX,e.minX),minY:Math.min(t.minY,e.minY),maxX:Math.max(t.maxX,e.maxX),maxY:Math.max(t.maxY,e.maxY)}:t||e}function vi(t,e){var n=t.get("startArrowShape"),r=t.get("endArrowShape");return n&&(e=pi(e,n.getCanvasBBox())),r&&(e=pi(e,r.getCanvasBBox())),e}var gi=null;function yi(){if(!gi){var t=document.createElement("canvas");t.width=1,t.height=1,gi=t.getContext("2d")}return gi}function mi(t,e,n){var r=1;if(Z(t)&&(r=t.split("\n").length),r>1){var i=function(t,e){return e?e-t:.14*t}(e,n);return e*r+i*(r-1)}return e}function Ci(t){var e=t.fontSize,n=t.fontFamily,r=t.fontWeight;return[t.fontStyle,t.fontVariant,r,e+"px",n].join(" ").trim()}var wi=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/gi,xi=/[^\s\,]+/gi;var Si="\t\n\v\f\r   ᠎             　\u2028\u2029",bi=new RegExp("([a-z])["+Si+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+Si+"]*,?["+Si+"]*)+)","ig"),_i=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+Si+"]*,?["+Si+"]*","ig");var Li=/[a-z]/;function Ei(t,e){return[e[0]+(e[0]-t[0]),e[1]+(e[1]-t[1])]}function Ti(t){var e=function(t){if(!t)return null;if(Y(t))return t;var e={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},n=[];return String(t).replace(bi,(function(t,r,i){var o=[],a=r.toLowerCase();if(i.replace(_i,(function(t,e){e&&o.push(+e)})),"m"===a&&o.length>2&&(n.push([r].concat(o.splice(0,2))),a="l",r="m"===r?"l":"L"),"o"===a&&1===o.length&&n.push([r,o[0]]),"r"===a)n.push([r].concat(o));else for(;o.length>=e[a]&&(n.push([r].concat(o.splice(0,e[a]))),e[a]););return""})),n}(t);if(!e||!e.length)return[["M",0,0]];for(var n=!1,r=0;r<e.length;r++){var i=e[r][0];if(Li.test(i)||["V","H","T","S"].indexOf(i)>=0){n=!0;break}}if(!n)return e;var o=[],a=0,l=0,s=0,u=0,c=0,h=e[0];"M"!==h[0]&&"m"!==h[0]||(s=a=+h[1],u=l=+h[2],c++,o[0]=["M",a,l]);r=c;for(var d=e.length;r<d;r++){var f=e[r],p=o[r-1],v=[],g=(i=f[0]).toUpperCase();if(i!==g)switch(v[0]=g,g){case"A":v[1]=f[1],v[2]=f[2],v[3]=f[3],v[4]=f[4],v[5]=f[5],v[6]=+f[6]+a,v[7]=+f[7]+l;break;case"V":v[1]=+f[1]+l;break;case"H":v[1]=+f[1]+a;break;case"M":s=+f[1]+a,u=+f[2]+l,v[1]=s,v[2]=u;break;default:for(var y=1,m=f.length;y<m;y++)v[y]=+f[y]+(y%2?a:l)}else v=e[r];switch(g){case"Z":a=+s,l=+u;break;case"H":v=["L",a=v[1],l];break;case"V":v=["L",a,l=v[1]];break;case"T":a=v[1],l=v[2];var C=Ei([p[1],p[2]],[p[3],p[4]]);v=["Q",C[0],C[1],a,l];break;case"S":a=v[v.length-2],l=v[v.length-1];var w=p.length,x=Ei([p[w-4],p[w-3]],[p[w-2],p[w-1]]);v=["C",x[0],x[1],v[1],v[2],a,l];break;case"M":s=v[v.length-2],u=v[v.length-1];break;default:a=v[v.length-2],l=v[v.length-1]}o.push(v)}return o}function Oi(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function Ii(t,e){return Oi(t)*Oi(e)?(t[0]*e[0]+t[1]*e[1])/(Oi(t)*Oi(e)):1}function Ri(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(Ii(t,e))}function Mi(t,e){return t[0]===e[0]&&t[1]===e[1]}function Ai(t,e){var n=e[1],r=e[2],i=tt(nt(e[3]),2*Math.PI),o=e[4],a=e[5],l=t[0],s=t[1],u=e[6],c=e[7],h=Math.cos(i)*(l-u)/2+Math.sin(i)*(s-c)/2,d=-1*Math.sin(i)*(l-u)/2+Math.cos(i)*(s-c)/2,f=h*h/(n*n)+d*d/(r*r);f>1&&(n*=Math.sqrt(f),r*=Math.sqrt(f));var p=n*n*(d*d)+r*r*(h*h),v=p?Math.sqrt((n*n*(r*r)-p)/p):1;o===a&&(v*=-1),isNaN(v)&&(v=0);var g=r?v*n*d/r:0,y=n?v*-r*h/n:0,m=(l+u)/2+Math.cos(i)*g-Math.sin(i)*y,C=(s+c)/2+Math.sin(i)*g+Math.cos(i)*y,w=[(h-g)/n,(d-y)/r],x=[(-1*h-g)/n,(-1*d-y)/r],S=Ri([1,0],w),b=Ri(w,x);return Ii(w,x)<=-1&&(b=Math.PI),Ii(w,x)>=1&&(b=0),0===a&&b>0&&(b-=2*Math.PI),1===a&&b<0&&(b+=2*Math.PI),{cx:m,cy:C,rx:Mi(t,[u,c])?0:n,ry:Mi(t,[u,c])?0:r,startAngle:S,endAngle:S+b,xRotation:i,arcFlag:o,sweepFlag:a}}function Bi(t,e){return[e[0]+(e[0]-t[0]),e[1]+(e[1]-t[1])]}function Di(t){t=function(t){var e=t||[];return Y(e)?e:Z(e)?(X(e=e.match(wi),(function(t,n){if((t=t.match(xi))[0].length>1){var r=t[0].charAt(0);t.splice(1,0,t[0].substr(1)),t[0]=r}X(t,(function(e,n){isNaN(e)||(t[n]=+e)})),e[n]=t})),e):void 0}(t);for(var e=[],n=null,r=null,i=null,o=0,a=t.length,l=0;l<a;l++){var s=t[l];r=t[l+1];var u=s[0],c={command:u,prePoint:n,params:s,startTangent:null,endTangent:null};switch(u){case"M":i=[s[1],s[2]],o=l;break;case"A":var h=Ai(n,s);c.arcParams=h}if("Z"===u)n=i,r=t[o+1];else{var d=s.length;n=[s[d-2],s[d-1]]}r&&"Z"===r[0]&&(r=t[o],e[o]&&(e[o].prePoint=n)),c.currentPoint=n,e[o]&&Mi(n,e[o].currentPoint)&&(e[o].prePoint=c.prePoint);var f=r?[r[r.length-2],r[r.length-1]]:null;c.nextPoint=f;var p=c.prePoint;if(["L","H","V"].includes(u))c.startTangent=[p[0]-n[0],p[1]-n[1]],c.endTangent=[n[0]-p[0],n[1]-p[1]];else if("Q"===u){var v=[s[1],s[2]];c.startTangent=[p[0]-v[0],p[1]-v[1]],c.endTangent=[n[0]-v[0],n[1]-v[1]]}else if("T"===u){v=Bi((m=e[l-1]).currentPoint,p);"Q"===m.command?(c.command="Q",c.startTangent=[p[0]-v[0],p[1]-v[1]],c.endTangent=[n[0]-v[0],n[1]-v[1]]):(c.command="TL",c.startTangent=[p[0]-n[0],p[1]-n[1]],c.endTangent=[n[0]-p[0],n[1]-p[1]])}else if("C"===u){var g=[s[1],s[2]],y=[s[3],s[4]];c.startTangent=[p[0]-g[0],p[1]-g[1]],c.endTangent=[n[0]-y[0],n[1]-y[1]],0===c.startTangent[0]&&0===c.startTangent[1]&&(c.startTangent=[g[0]-y[0],g[1]-y[1]]),0===c.endTangent[0]&&0===c.endTangent[1]&&(c.endTangent=[y[0]-g[0],y[1]-g[1]])}else if("S"===u){var m;g=Bi((m=e[l-1]).currentPoint,p),y=[s[1],s[2]];"C"===m.command?(c.command="C",c.startTangent=[p[0]-g[0],p[1]-g[1]],c.endTangent=[n[0]-y[0],n[1]-y[1]]):(c.command="SQ",c.startTangent=[p[0]-y[0],p[1]-y[1]],c.endTangent=[n[0]-y[0],n[1]-y[1]])}else if("A"===u){var C=.001,w=c.arcParams||{},x=w.cx,S=void 0===x?0:x,b=w.cy,_=void 0===b?0:b,L=w.rx,E=void 0===L?0:L,T=w.ry,O=void 0===T?0:T,I=w.sweepFlag,R=void 0===I?0:I,M=w.startAngle,A=void 0===M?0:M,B=w.endAngle,D=void 0===B?0:B;0===R&&(C*=-1);var k=E*Math.cos(A-C)+S,N=O*Math.sin(A-C)+_;c.startTangent=[k-i[0],N-i[1]];var P=E*Math.cos(A+D+C)+S,z=O*Math.sin(A+D-C)+_;c.endTangent=[p[0]-P,p[1]-z]}e.push(c)}return e}function ki(t,e){var n,r,i,o=t.prePoint,a=t.currentPoint,l=t.nextPoint,s=Math.pow(a[0]-o[0],2)+Math.pow(a[1]-o[1],2),u=Math.pow(a[0]-l[0],2)+Math.pow(a[1]-l[1],2),c=Math.pow(o[0]-l[0],2)+Math.pow(o[1]-l[1],2),h=Math.acos((s+u-c)/(2*Math.sqrt(s)*Math.sqrt(u)));if(!h||0===Math.sin(h)||(n=h,r=0,void 0===i&&(i=J),Math.abs(n-r)<i))return{xExtra:0,yExtra:0};var d=Math.abs(Math.atan2(l[1]-a[1],l[0]-a[0])),f=Math.abs(Math.atan2(l[0]-a[0],l[1]-a[1]));return d=d>Math.PI/2?Math.PI-d:d,f=f>Math.PI/2?Math.PI-f:f,{xExtra:Math.cos(h/2-d)*(e/2*(1/Math.sin(h/2)))-e/2||0,yExtra:Math.cos(f-h/2)*(e/2*(1/Math.sin(h/2)))-e/2||0}}function Ni(t,e,n,r){var i=t-n,o=e-r;return Math.sqrt(i*i+o*o)}function Pi(t,e,n,r,i,o){return i>=t&&i<=t+n&&o>=e&&o<=e+r}function zi(t,e){return!(e.minX>t.maxX||e.maxX<t.minX||e.minY>t.maxY||e.maxY<t.minY)}function Hi(t,e){return t[0]===e[0]&&t[1]===e[1]}Pr("rect",zr),Pr("image",zr),Pr("circle",Hr),Pr("marker",Hr),Pr("polyline",(function(t){for(var e=t.attr().points,n=[],r=[],i=0;i<e.length;i++){var o=e[i];n.push(o[0]),r.push(o[1])}var a=Ur(n,r),l=a.x,s=a.y,u={minX:l,minY:s,maxX:l+a.width,maxY:s+a.height};return{x:(u=vi(t,u)).minX,y:u.minY,width:u.maxX-u.minX,height:u.maxY-u.minY}})),Pr("polygon",(function(t){for(var e=t.attr().points,n=[],r=[],i=0;i<e.length;i++){var o=e[i];n.push(o[0]),r.push(o[1])}return Ur(n,r)})),Pr("text",(function(t){var e=t.attr(),n=e.x,r=e.y,i=e.text,o=e.fontSize,a=e.lineHeight,l=e.font;l||(l=Ci(e));var s,u=function(t,e){var n=yi(),r=0;return U(t)||""===t||(n.save(),n.font=e,Z(t)&&t.includes("\n")?X(t.split("\n"),(function(t){var e=n.measureText(t).width;r<e&&(r=e)})):r=n.measureText(t).width,n.restore()),r}(i,l);if(u){var c=e.textAlign,h=e.textBaseline,d=mi(i,o,a),f={x:n,y:r-d};c&&("end"===c||"right"===c?f.x-=u:"center"===c&&(f.x-=u/2)),h&&("top"===h?f.y+=d:"middle"===h&&(f.y+=d/2)),s={x:f.x,y:f.y,width:u,height:d}}else s={x:n,y:r,width:0,height:0};return s})),Pr("path",(function(t){var e=t.attr(),n=e.path,r=e.stroke?e.lineWidth:0,i=function(t,e){for(var n=[],r=[],i=[],o=0;o<t.length;o++){var a=(v=t[o]).currentPoint,l=v.params,s=v.prePoint,u=void 0;switch(v.command){case"Q":u=Jr.box(s[0],s[1],l[1],l[2],l[3],l[4]);break;case"C":u=oi.box(s[0],s[1],l[1],l[2],l[3],l[4],l[5],l[6]);break;case"A":var c=v.arcParams;u=di.box(c.cx,c.cy,c.rx,c.ry,c.xRotation,c.startAngle,c.endAngle);break;default:n.push(a[0]),r.push(a[1])}u&&(v.box=u,n.push(u.x,u.x+u.width),r.push(u.y,u.y+u.height)),e&&("L"===v.command||"M"===v.command)&&v.prePoint&&v.nextPoint&&i.push(v)}n=n.filter((function(t){return!Number.isNaN(t)&&Infinity!==t&&-Infinity!==t})),r=r.filter((function(t){return!Number.isNaN(t)&&Infinity!==t&&-Infinity!==t}));var h=$(n),d=$(r),f=K(n),p=K(r);if(0===i.length)return{x:h,y:d,width:f-h,height:p-d};for(o=0;o<i.length;o++){var v;(a=(v=i[o]).currentPoint)[0]===h?h-=ki(v,e).xExtra:a[0]===f&&(f+=ki(v,e).xExtra),a[1]===d?d-=ki(v,e).yExtra:a[1]===p&&(p+=ki(v,e).yExtra)}return{x:h,y:d,width:f-h,height:p-d}}(t.get("segments")||Di(n),r),o=i.x,a=i.y,l={minX:o,minY:a,maxX:o+i.width,maxY:a+i.height};return{x:(l=vi(t,l)).minX,y:l.minY,width:l.maxX-l.minX,height:l.maxY-l.minY}})),Pr("line",(function(t){var e=t.attr(),n=e.x1,r=e.y1,i=e.x2,o=e.y2,a={minX:Math.min(n,i),maxX:Math.max(n,i),minY:Math.min(r,o),maxY:Math.max(r,o)};return{x:(a=vi(t,a)).minX,y:a.minY,width:a.maxX-a.minX,height:a.maxY-a.minY}})),Pr("ellipse",(function(t){var e=t.attr(),n=e.x,r=e.y,i=e.rx,o=e.ry;return{x:n-i,y:r-o,width:2*i,height:2*o}}));var Fi=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,Wi=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,Gi=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,ji=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function Ui(t,e){X(t.match(ji),(function(t){var n=t.split(":");e.addColorStop(n[0],n[1])}))}function Yi(t,e,n){var r=e.getBBox();if(isNaN(r.x)||isNaN(r.y)||isNaN(r.width)||isNaN(r.height))return n;if(Z(n)){if("("===n[1]||"("===n[2]){if("l"===n[0])return function(t,e,n){var r,i,o=Fi.exec(n),a=parseFloat(o[1])%360*(Math.PI/180),l=o[2],s=e.getBBox();a>=0&&a<.5*Math.PI?(r={x:s.minX,y:s.minY},i={x:s.maxX,y:s.maxY}):.5*Math.PI<=a&&a<Math.PI?(r={x:s.maxX,y:s.minY},i={x:s.minX,y:s.maxY}):Math.PI<=a&&a<1.5*Math.PI?(r={x:s.maxX,y:s.maxY},i={x:s.minX,y:s.minY}):(r={x:s.minX,y:s.maxY},i={x:s.maxX,y:s.minY});var u=Math.tan(a),c=u*u,h=(i.x-r.x+u*(i.y-r.y))/(c+1)+r.x,d=u*(i.x-r.x+u*(i.y-r.y))/(c+1)+r.y,f=t.createLinearGradient(r.x,r.y,h,d);return Ui(l,f),f}(t,e,n);if("r"===n[0])return function(t,e,n){var r=Wi.exec(n),i=parseFloat(r[1]),o=parseFloat(r[2]),a=parseFloat(r[3]),l=r[4];if(0===a){var s=l.match(ji);return s[s.length-1].split(":")[1]}var u=e.getBBox(),c=u.maxX-u.minX,h=u.maxY-u.minY,d=Math.sqrt(c*c+h*h)/2,f=t.createRadialGradient(u.minX+c*i,u.minY+h*o,0,u.minX+c/2,u.minY+h/2,a*d);return Ui(l,f),f}(t,e,n);if("p"===n[0])return function(t,e,n){if(e.get("patternSource")&&e.get("patternSource")===n)return e.get("pattern");var r,i,o=Gi.exec(n),a=o[1],l=o[2];function s(){r=t.createPattern(i,a),e.set("pattern",r),e.set("patternSource",n)}switch(a){case"a":a="repeat";break;case"x":a="repeat-x";break;case"y":a="repeat-y";break;default:a="no-repeat"}return i=new Image,l.match(/^data:/i)||(i.crossOrigin="Anonymous"),i.src=l,i.complete?s():(i.onload=s,i.src=i.src),r}(t,e,n)}return n}return n instanceof CanvasPattern?n:void 0}function Vi(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function Xi(t,e){return Vi(t)*Vi(e)?(t[0]*e[0]+t[1]*e[1])/(Vi(t)*Vi(e)):1}function qi(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(Xi(t,e))}function Ki(t,e){var n=e[1],r=e[2],i=tt(nt(e[3]),2*Math.PI),o=e[4],a=e[5],l=t[0],s=t[1],u=e[6],c=e[7],h=Math.cos(i)*(l-u)/2+Math.sin(i)*(s-c)/2,d=-1*Math.sin(i)*(l-u)/2+Math.cos(i)*(s-c)/2,f=h*h/(n*n)+d*d/(r*r);f>1&&(n*=Math.sqrt(f),r*=Math.sqrt(f));var p=n*n*(d*d)+r*r*(h*h),v=p?Math.sqrt((n*n*(r*r)-p)/p):1;o===a&&(v*=-1),isNaN(v)&&(v=0);var g=r?v*n*d/r:0,y=n?v*-r*h/n:0,m=(l+u)/2+Math.cos(i)*g-Math.sin(i)*y,C=(s+c)/2+Math.sin(i)*g+Math.cos(i)*y,w=[(h-g)/n,(d-y)/r],x=[(-1*h-g)/n,(-1*d-y)/r],S=qi([1,0],w),b=qi(w,x);return Xi(w,x)<=-1&&(b=Math.PI),Xi(w,x)>=1&&(b=0),0===a&&b>0&&(b-=2*Math.PI),1===a&&b<0&&(b+=2*Math.PI),{cx:m,cy:C,rx:Hi(t,[u,c])?0:n,ry:Hi(t,[u,c])?0:r,startAngle:S,endAngle:S+b,xRotation:i,arcFlag:o,sweepFlag:a}}var $i=Math.sin,Zi=Math.cos,Qi=Math.atan2,Ji=Math.PI;function to(t,e,n,r,i,o,a){var l=e.stroke,s=e.lineWidth,u=Qi(r-o,n-i),c=new zo({type:"path",canvas:t.get("canvas"),isArrowShape:!0,attrs:{path:"M"+10*Zi(Ji/6)+","+10*$i(Ji/6)+" L0,0 L"+10*Zi(Ji/6)+",-"+10*$i(Ji/6),stroke:l,lineWidth:s}});c.translate(i,o),c.rotateAtPoint(i,o,u),t.set(a?"startArrowShape":"endArrowShape",c)}function eo(t,e,n,r,i,o,a){var l=e.startArrow,s=e.endArrow,u=e.stroke,c=e.lineWidth,h=a?l:s,d=h.d,f=h.fill,p=h.stroke,v=h.lineWidth,g=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(h,["d","fill","stroke","lineWidth"]),y=Qi(r-o,n-i);d&&(i-=Zi(y)*d,o-=$i(y)*d);var m=new zo({type:"path",canvas:t.get("canvas"),isArrowShape:!0,attrs:H(H({},g),{stroke:p||u,lineWidth:v||c,fill:f})});m.translate(i,o),m.rotateAtPoint(i,o,y),t.set(a?"startArrowShape":"endArrowShape",m)}function no(t,e,n,r,i){var o=Qi(r-e,n-t);return{dx:Zi(o)*i,dy:$i(o)*i}}function ro(t,e,n,r,i,o){"object"==typeof e.startArrow?eo(t,e,n,r,i,o,!0):e.startArrow?to(t,e,n,r,i,o,!0):t.set("startArrowShape",null)}function io(t,e,n,r,i,o){"object"==typeof e.endArrow?eo(t,e,n,r,i,o,!1):e.endArrow?to(t,e,n,r,i,o,!1):t.set("startArrowShape",null)}var oo={fill:"fillStyle",stroke:"strokeStyle",opacity:"globalAlpha"};function ao(t,e){var n=e.attr();for(var r in n){var i=n[r],o=oo[r]?oo[r]:r;"matrix"===o&&i?t.transform(i[0],i[1],i[3],i[4],i[6],i[7]):"lineDash"===o&&t.setLineDash?Y(i)&&t.setLineDash(i):("strokeStyle"===o||"fillStyle"===o?i=Yi(t,e,i):"globalAlpha"===o&&(i*=t.globalAlpha),t[o]=i)}}function lo(t,e,n){for(var r=0;r<e.length;r++){var i=e[r];i.cfg.visible?i.draw(t,n):i.skipDraw()}}function so(t,e,n){var r=t.get("refreshElements");X(r,(function(e){if(e!==t)for(var n=e.cfg.parent;n&&n!==t&&!n.cfg.refresh;)n.cfg.refresh=!0,n=n.cfg.parent})),r[0]===t?ho(e):uo(e,n)}function uo(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(r.cfg.visible)if(r.cfg.hasChanged)r.cfg.refresh=!0,r.isGroup()&&ho(r.cfg.children);else if(r.cfg.refresh)r.isGroup()&&uo(r.cfg.children,e);else{var i=fo(r,e);r.cfg.refresh=i,i&&r.isGroup()&&uo(r.cfg.children,e)}}}function co(t){for(var e=0;e<t.length;e++){var n=t[e];n.cfg.hasChanged=!1,n.isGroup()&&!n.destroyed&&co(n.cfg.children)}}function ho(t,e){for(var n=0;n<t.length;n++){var r=t[n];r.cfg.refresh=!0,r.isGroup()&&ho(r.get("children"))}}function fo(t,e){var n=t.cfg.cacheCanvasBBox;return t.cfg.isInView&&n&&zi(n,e)}function po(t,e,n,r){var i=n.path,o=n.startArrow,a=n.endArrow;if(i){var l=[0,0],s=[0,0],u={dx:0,dy:0};e.beginPath();for(var c=0;c<i.length;c++){var h=i[c],d=h[0];if(0===c&&o&&o.d)u=no((f=t.getStartTangent())[0][0],f[0][1],f[1][0],f[1][1],o.d);else if(c===i.length-2&&"Z"===i[c+1][0]&&a&&a.d){if("Z"===i[c+1][0])u=no((f=t.getEndTangent())[0][0],f[0][1],f[1][0],f[1][1],a.d)}else if(c===i.length-1&&a&&a.d){var f;if("Z"!==i[0])u=no((f=t.getEndTangent())[0][0],f[0][1],f[1][0],f[1][1],a.d)}var p=u.dx,v=u.dy;switch(d){case"M":e.moveTo(h[1]-p,h[2]-v),s=[h[1],h[2]];break;case"L":e.lineTo(h[1]-p,h[2]-v);break;case"Q":e.quadraticCurveTo(h[1],h[2],h[3]-p,h[4]-v);break;case"C":e.bezierCurveTo(h[1],h[2],h[3],h[4],h[5]-p,h[6]-v);break;case"A":var g=void 0;r?(g=r[c])||(g=Ki(l,h),r[c]=g):g=Ki(l,h);var y=g.cx,m=g.cy,C=g.rx,w=g.ry,x=g.startAngle,S=g.endAngle,b=g.xRotation,_=g.sweepFlag;if(e.ellipse)e.ellipse(y,m,C,w,b,x,S,1-_);else{var L=C>w?C:w,E=C>w?1:C/w,T=C>w?w/C:1;e.translate(y,m),e.rotate(b),e.scale(E,T),e.arc(0,0,L,x,S,1-_),e.scale(1/E,1/T),e.rotate(-b),e.translate(-y,-m)}break;case"Z":e.closePath()}if("Z"===d)l=s;else{var O=h.length;l=[h[O-2],h[O-1]]}}}}function vo(t,e){var n=t.get("canvas");n&&("remove"===e&&(t._cacheCanvasBBox=t.get("cacheCanvasBBox")),t.get("hasChanged")||(t.set("hasChanged",!0),t.cfg.parent&&t.cfg.parent.get("hasChanged")||(n.refreshElement(t,e,n),n.get("autoDraw")&&n.draw())))}function go(t){var e,n,r;if(t.destroyed)e=t._cacheCanvasBBox;else{var i=t.get("cacheCanvasBBox"),o=i&&!(!i.width||!i.height),a=t.getCanvasBBox(),l=a&&!(!a.width||!a.height);o&&l?(r=a,e=(n=i)&&r?{minX:Math.min(n.minX,r.minX),minY:Math.min(n.minY,r.minY),maxX:Math.max(n.maxX,r.maxX),maxY:Math.max(n.maxY,r.maxY)}:n||r):o?e=i:l&&(e=a)}return e}var yo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return z(e,t),e.prototype.onCanvasChange=function(t){vo(this,t)},e.prototype.getShapeBase=function(){return N},e.prototype.getGroupBase=function(){return e},e.prototype._applyClip=function(t,e){e&&(t.save(),ao(t,e),e.createPath(t),t.restore(),t.clip(),e._afterDraw())},e.prototype.cacheCanvasBBox=function(){var t=this.cfg.children,e=[],n=[];X(t,(function(t){var r=t.cfg.cacheCanvasBBox;r&&t.cfg.isInView&&(e.push(r.minX,r.maxX),n.push(r.minY,r.maxY))}));var r=null;if(e.length){var i=$(e),o=K(e),a=$(n),l=K(n);r={minX:i,minY:a,x:i,y:a,maxX:o,maxY:l,width:o-i,height:l-a};var s=this.cfg.canvas;if(s){var u=s.getViewRange();this.set("isInView",zi(r,u))}}else this.set("isInView",!1);this.set("cacheCanvasBBox",r)},e.prototype.draw=function(t,e){var n=this.cfg.children,r=!e||this.cfg.refresh;n.length&&r&&(t.save(),ao(t,this),this._applyClip(t,this.getClip()),lo(t,n,e),t.restore(),this.cacheCanvasBBox()),this.cfg.refresh=null,this.set("hasChanged",!1)},e.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("hasChanged",!1)},e}(Dr),mo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return z(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return H(H({},e),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},e.prototype.getShapeBase=function(){return N},e.prototype.getGroupBase=function(){return yo},e.prototype.onCanvasChange=function(t){vo(this,t)},e.prototype.calculateBBox=function(){var t=this.get("type"),e=this.getHitLineWidth(),n=function(t){return Nr.get(t)}(t),r=n(this),i=e/2,o=r.x-i,a=r.y-i,l=r.x+r.width+i,s=r.y+r.height+i;return{x:o,minX:o,y:a,minY:a,width:r.width+e,height:r.height+e,maxX:l,maxY:s}},e.prototype.isFill=function(){return!!this.attrs.fill||this.isClipShape()},e.prototype.isStroke=function(){return!!this.attrs.stroke},e.prototype._applyClip=function(t,e){e&&(t.save(),ao(t,e),e.createPath(t),t.restore(),t.clip(),e._afterDraw())},e.prototype.draw=function(t,e){var n=this.cfg.clipShape;if(e){if(!1===this.cfg.refresh)return void this.set("hasChanged",!1);if(!zi(e,this.getCanvasBBox()))return this.set("hasChanged",!1),void(this.cfg.isInView&&this._afterDraw())}t.save(),ao(t,this),this._applyClip(t,n),this.drawPath(t),t.restore(),this._afterDraw()},e.prototype.getCanvasViewBox=function(){var t=this.cfg.canvas;return t?t.getViewRange():null},e.prototype.cacheCanvasBBox=function(){var t=this.getCanvasViewBox();if(t){var e=this.getCanvasBBox(),n=zi(e,t);this.set("isInView",n),n?this.set("cacheCanvasBBox",e):this.set("cacheCanvasBBox",null)}},e.prototype._afterDraw=function(){this.cacheCanvasBBox(),this.set("hasChanged",!1),this.set("refresh",null)},e.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("isInView",null),this.set("hasChanged",!1)},e.prototype.drawPath=function(t){this.createPath(t),this.strokeAndFill(t),this.afterDrawPath(t)},e.prototype.fill=function(t){t.fill()},e.prototype.stroke=function(t){t.stroke()},e.prototype.strokeAndFill=function(t){var e=this.attrs,n=e.lineWidth,r=e.opacity,i=e.strokeOpacity,o=e.fillOpacity;this.isFill()&&(U(o)||1===o?this.fill(t):(t.globalAlpha=o,this.fill(t),t.globalAlpha=r)),this.isStroke()&&n>0&&(U(i)||1===i||(t.globalAlpha=i),this.stroke(t)),this.afterDrawPath(t)},e.prototype.createPath=function(t){},e.prototype.afterDrawPath=function(t){},e.prototype.isInShape=function(t,e){var n=this.isStroke(),r=this.isFill(),i=this.getHitLineWidth();return this.isInStrokeOrPath(t,e,n,r,i)},e.prototype.isInStrokeOrPath=function(t,e,n,r,i){return!1},e.prototype.getHitLineWidth=function(){if(!this.isStroke())return 0;var t=this.attrs;return t.lineWidth+t.lineAppendWidth},e}(kr),Co=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return z(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return H(H({},e),{x:0,y:0,r:0})},e.prototype.isInStrokeOrPath=function(t,e,n,r,i){var o=this.attr(),a=o.x,l=o.y,s=o.r,u=i/2,c=Ni(a,l,t,e);return r&&n?c<=s+u:r?c<=s:!!n&&(c>=s-u&&c<=s+u)},e.prototype.createPath=function(t){var e=this.attr(),n=e.x,r=e.y,i=e.r;t.beginPath(),t.arc(n,r,i,0,2*Math.PI,!1),t.closePath()},e}(mo);function wo(t,e,n,r){return t/(n*n)+e/(r*r)}var xo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return z(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return H(H({},e),{x:0,y:0,rx:0,ry:0})},e.prototype.isInStrokeOrPath=function(t,e,n,r,i){var o=this.attr(),a=i/2,l=o.x,s=o.y,u=o.rx,c=o.ry,h=(t-l)*(t-l),d=(e-s)*(e-s);return r&&n?wo(h,d,u+a,c+a)<=1:r?wo(h,d,u,c)<=1:!!n&&(wo(h,d,u-a,c-a)>=1&&wo(h,d,u+a,c+a)<=1)},e.prototype.createPath=function(t){var e=this.attr(),n=e.x,r=e.y,i=e.rx,o=e.ry;if(t.beginPath(),t.ellipse)t.ellipse(n,r,i,o,0,0,2*Math.PI,!1);else{var a=i>o?i:o,l=i>o?1:i/o,s=i>o?o/i:1;t.save(),t.translate(n,r),t.scale(l,s),t.arc(0,0,a,0,2*Math.PI),t.restore(),t.closePath()}},e}(mo);function So(t){return t instanceof HTMLElement&&Z(t.nodeName)&&"CANVAS"===t.nodeName.toUpperCase()}var bo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return z(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return H(H({},e),{x:0,y:0,width:0,height:0})},e.prototype.initAttrs=function(t){this._setImage(t.img)},e.prototype.isStroke=function(){return!1},e.prototype.isOnlyHitBox=function(){return!0},e.prototype._afterLoading=function(){if(!0===this.get("toDraw")){var t=this.get("canvas");t?t.draw():this.createPath(this.get("context"))}},e.prototype._setImage=function(t){var e=this,n=this.attrs;if(Z(t)){var r=new Image;r.onload=function(){if(e.destroyed)return!1;e.attr("img",r),e.set("loading",!1),e._afterLoading();var t=e.get("callback");t&&t.call(e)},r.crossOrigin="Anonymous",r.src=t,this.set("loading",!0)}else t instanceof Image?(n.width||(n.width=t.width),n.height||(n.height=t.height)):So(t)&&(n.width||(n.width=Number(t.getAttribute("width"))),n.height||(n.height,Number(t.getAttribute("height"))))},e.prototype.onAttrChange=function(e,n,r){t.prototype.onAttrChange.call(this,e,n,r),"img"===e&&this._setImage(n)},e.prototype.createPath=function(t){if(this.get("loading"))return this.set("toDraw",!0),void this.set("context",t);var e=this.attr(),n=e.x,r=e.y,i=e.width,o=e.height,a=e.sx,l=e.sy,s=e.swidth,u=e.sheight,c=e.img;(c instanceof Image||So(c))&&(U(a)||U(l)||U(s)||U(u)?t.drawImage(c,n,r,i,o):t.drawImage(c,a,l,s,u,n,r,i,o))},e}(mo);function _o(t,e,n,r,i,o,a){var l=Math.min(t,n),s=Math.max(t,n),u=Math.min(e,r),c=Math.max(e,r),h=i/2;return o>=l-h&&o<=s+h&&a>=u-h&&a<=c+h&&Vr.pointToLine(t,e,n,r,o,a)<=i/2}var Lo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return z(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return H(H({},e),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},e.prototype.initAttrs=function(t){this.setArrow()},e.prototype.onAttrChange=function(e,n,r){t.prototype.onAttrChange.call(this,e,n,r),this.setArrow()},e.prototype.setArrow=function(){var t=this.attr(),e=t.x1,n=t.y1,r=t.x2,i=t.y2,o=t.startArrow,a=t.endArrow;o&&ro(this,t,r,i,e,n),a&&io(this,t,e,n,r,i)},e.prototype.isInStrokeOrPath=function(t,e,n,r,i){if(!n||!i)return!1;var o=this.attr();return _o(o.x1,o.y1,o.x2,o.y2,i,t,e)},e.prototype.createPath=function(t){var e=this.attr(),n=e.x1,r=e.y1,i=e.x2,o=e.y2,a=e.startArrow,l=e.endArrow,s={dx:0,dy:0},u={dx:0,dy:0};a&&a.d&&(s=no(n,r,i,o,e.startArrow.d)),l&&l.d&&(u=no(n,r,i,o,e.endArrow.d)),t.beginPath(),t.moveTo(n+s.dx,r+s.dy),t.lineTo(i-u.dx,o-u.dy)},e.prototype.afterDrawPath=function(t){var e=this.get("startArrowShape"),n=this.get("endArrowShape");e&&e.draw(t),n&&n.draw(t)},e.prototype.getTotalLength=function(){var t=this.attr(),e=t.x1,n=t.y1,r=t.x2,i=t.y2;return Vr.length(e,n,r,i)},e.prototype.getPoint=function(t){var e=this.attr(),n=e.x1,r=e.y1,i=e.x2,o=e.y2;return Vr.pointAt(n,r,i,o,t)},e}(mo),Eo={circle:function(t,e,n){return[["M",t-n,e],["A",n,n,0,1,0,t+n,e],["A",n,n,0,1,0,t-n,e]]},square:function(t,e,n){return[["M",t-n,e-n],["L",t+n,e-n],["L",t+n,e+n],["L",t-n,e+n],["Z"]]},diamond:function(t,e,n){return[["M",t-n,e],["L",t,e-n],["L",t+n,e],["L",t,e+n],["Z"]]},triangle:function(t,e,n){var r=n*Math.sin(1/3*Math.PI);return[["M",t-n,e+r],["L",t,e-r],["L",t+n,e+r],["Z"]]},"triangle-down":function(t,e,n){var r=n*Math.sin(1/3*Math.PI);return[["M",t-n,e-r],["L",t+n,e-r],["L",t,e+r],["Z"]]}},To=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return z(e,t),e.prototype.initAttrs=function(t){this._resetParamsCache()},e.prototype._resetParamsCache=function(){this.set("paramsCache",{})},e.prototype.onAttrChange=function(e,n,r){t.prototype.onAttrChange.call(this,e,n,r),-1!==["symbol","x","y","r","radius"].indexOf(e)&&this._resetParamsCache()},e.prototype.isOnlyHitBox=function(){return!0},e.prototype._getR=function(t){return U(t.r)?t.radius:t.r},e.prototype._getPath=function(){var t,n,r=this.attr(),i=r.x,o=r.y,a=r.symbol||"circle",l=this._getR(r);if(j(a))n=Ti(n=(t=a)(i,o,l));else{if(!(t=e.Symbols[a]))return null;n=t(i,o,l)}return n},e.prototype.createPath=function(t){po(this,t,{path:this._getPath()},this.get("paramsCache"))},e.Symbols=Eo,e}(mo);function Oo(t,e,n){var r=yi();return t.createPath(r),r.isPointInPath(e,n)}var Io=1e-6;function Ro(t){return Math.abs(t)<Io?0:t<0?-1:1}function Mo(t,e,n){return(n[0]-t[0])*(e[1]-t[1])==(e[0]-t[0])*(n[1]-t[1])&&Math.min(t[0],e[0])<=n[0]&&n[0]<=Math.max(t[0],e[0])&&Math.min(t[1],e[1])<=n[1]&&n[1]<=Math.max(t[1],e[1])}function Ao(t,e,n){var r=!1,i=t.length;if(i<=2)return!1;for(var o=0;o<i;o++){var a=t[o],l=t[(o+1)%i];if(Mo(a,l,[e,n]))return!0;Ro(a[1]-n)>0!=Ro(l[1]-n)>0&&Ro(e-(n-a[1])*(a[0]-l[0])/(a[1]-l[1])-a[0])<0&&(r=!r)}return r}function Bo(t,e,n,r,i,o,a,l){var s=(Math.atan2(l-e,a-t)+2*Math.PI)%(2*Math.PI);if(s<r||s>i)return!1;var u={x:t+n*Math.cos(s),y:e+n*Math.sin(s)};return Ni(u.x,u.y,a,l)<=o/2}var Do=ye;var ko=H({hasArc:function(t){for(var e=!1,n=t.length,r=0;r<n;r++){var i=t[r][0];if("C"===i||"A"===i||"Q"===i){e=!0;break}}return e},extractPolygons:function(t){for(var e=t.length,n=[],r=[],i=[],o=0;o<e;o++){var a=t[o],l=a[0];"M"===l?(i.length&&(r.push(i),i=[]),i.push([a[1],a[2]])):"Z"===l?i.length&&(n.push(i),i=[]):i.push([a[1],a[2]])}return i.length>0&&r.push(i),{polygons:n,polylines:r}},isPointInStroke:function(t,e,n,r,i){for(var o=!1,a=e/2,l=0;l<t.length;l++){var s=t[l],u=s.currentPoint,c=s.params,h=s.prePoint,d=s.box;if(!d||Pi(d.x-a,d.y-a,d.width+e,d.height+e,n,r)){switch(s.command){case"L":case"Z":o=_o(h[0],h[1],u[0],u[1],e,n,r);break;case"Q":o=Jr.pointDistance(h[0],h[1],c[1],c[2],c[3],c[4],n,r)<=e/2;break;case"C":o=oi.pointDistance(h[0],h[1],c[1],c[2],c[3],c[4],c[5],c[6],n,r,i)<=e/2;break;case"A":var f=s.arcParams,p=f.cx,v=f.cy,g=f.rx,y=f.ry,m=f.startAngle,C=f.endAngle,w=f.xRotation,x=[n,r,1],S=g>y?g:y;de(x,x,Do(null,[["t",-p,-v],["r",-w],["s",1/(g>y?1:g/y),1/(g>y?y/g:1)]])),o=Bo(0,0,S,m,C,e,x[0],x[1])}if(o)break}}return o}},Gt);function No(t,e,n){for(var r=!1,i=0;i<t.length;i++){if(r=Ao(t[i],e,n))break}return r}var Po=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return z(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return H(H({},e),{startArrow:!1,endArrow:!1})},e.prototype.initAttrs=function(t){this._setPathArr(t.path),this.setArrow()},e.prototype.onAttrChange=function(e,n,r){t.prototype.onAttrChange.call(this,e,n,r),"path"===e&&this._setPathArr(n),this.setArrow()},e.prototype._setPathArr=function(t){this.attrs.path=Ti(t);var e=ko.hasArc(t);this.set("hasArc",e),this.set("paramsCache",{}),this.set("segments",null),this.set("curve",null),this.set("tCache",null),this.set("totalLength",null)},e.prototype.getSegments=function(){var t=this.get("segements");return t||(t=Di(this.attr("path")),this.set("segments",t)),t},e.prototype.setArrow=function(){var t,e=this.attr(),n=e.startArrow,r=e.endArrow;n&&ro(this,e,(t=this.getStartTangent())[0][0],t[0][1],t[1][0],t[1][1]);r&&io(this,e,(t=this.getEndTangent())[0][0],t[0][1],t[1][0],t[1][1])},e.prototype.isInStrokeOrPath=function(t,e,n,r,i){var o=this.getSegments(),a=this.get("hasArc"),l=!1;if(n){var s=this.getTotalLength();l=ko.isPointInStroke(o,i,t,e,s)}if(!l&&r)if(a)l=Oo(this,t,e);else{var u=this.attr("path"),c=ko.extractPolygons(u);l=No(c.polygons,t,e)||No(c.polylines,t,e)}return l},e.prototype.createPath=function(t){po(this,t,this.attr(),this.get("paramsCache"))},e.prototype.afterDrawPath=function(t){var e=this.get("startArrowShape"),n=this.get("endArrowShape");e&&e.draw(t),n&&n.draw(t)},e.prototype.getTotalLength=function(){var t=this.get("totalLength");return U(t)?(this._calculateCurve(),this._setTcache(),this.get("totalLength")):t},e.prototype.getPoint=function(t){var e,n,r=this.get("tCache");r||(this._calculateCurve(),this._setTcache(),r=this.get("tCache"));var i=this.get("curve");if(!r||0===r.length)return i?{x:i[0][1],y:i[0][2]}:null;X(r,(function(r,i){t>=r[0]&&t<=r[1]&&(e=(t-r[0])/(r[1]-r[0]),n=i)}));var o=i[n];if(U(o)||U(n))return null;var a=o.length,l=i[n+1];return oi.pointAt(o[a-2],o[a-1],l[1],l[2],l[3],l[4],l[5],l[6],e)},e.prototype._calculateCurve=function(){var t=this.attr().path;this.set("curve",ko.pathToCurve(t))},e.prototype._setTcache=function(){var t,e,n,r,i=0,o=0,a=[],l=this.get("curve");l&&(X(l,(function(t,e){n=l[e+1],r=t.length,n&&(i+=oi.length(t[r-2],t[r-1],n[1],n[2],n[3],n[4],n[5],n[6])||0)})),this.set("totalLength",i),0!==i?(X(l,(function(s,u){n=l[u+1],r=s.length,n&&((t=[])[0]=o/i,e=oi.length(s[r-2],s[r-1],n[1],n[2],n[3],n[4],n[5],n[6]),o+=e||0,t[1]=o/i,a.push(t))})),this.set("tCache",a)):this.set("tCache",[]))},e.prototype.getStartTangent=function(){var t,e=this.getSegments();if(e.length>1){var n=e[0].currentPoint,r=e[1].currentPoint,i=e[1].startTangent;t=[],i?(t.push([n[0]-i[0],n[1]-i[1]]),t.push([n[0],n[1]])):(t.push([r[0],r[1]]),t.push([n[0],n[1]]))}return t},e.prototype.getEndTangent=function(){var t,e=this.getSegments(),n=e.length;if(n>1){var r=e[n-2].currentPoint,i=e[n-1].currentPoint,o=e[n-1].endTangent;t=[],o?(t.push([i[0]-o[0],i[1]-o[1]]),t.push([i[0],i[1]])):(t.push([r[0],r[1]]),t.push([i[0],i[1]]))}return t},e}(mo),zo=Po;function Ho(t,e,n,r,i){var o=t.length;if(o<2)return!1;for(var a=0;a<o-1;a++){if(_o(t[a][0],t[a][1],t[a+1][0],t[a+1][1],e,n,r))return!0}if(i){var l=t[0],s=t[o-1];if(_o(l[0],l[1],s[0],s[1],e,n,r))return!0}return!1}var Fo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return z(e,t),e.prototype.isInStrokeOrPath=function(t,e,n,r,i){var o=this.attr().points,a=!1;return n&&(a=Ho(o,i,t,e,!0)),!a&&r&&(a=Ao(o,t,e)),a},e.prototype.createPath=function(t){var e=this.attr().points;if(!(e.length<2)){t.beginPath();for(var n=0;n<e.length;n++){var r=e[n];0===n?t.moveTo(r[0],r[1]):t.lineTo(r[0],r[1])}t.closePath()}},e}(mo),Wo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return z(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return H(H({},e),{startArrow:!1,endArrow:!1})},e.prototype.initAttrs=function(t){this.setArrow()},e.prototype.onAttrChange=function(e,n,r){t.prototype.onAttrChange.call(this,e,n,r),this.setArrow(),-1!==["points"].indexOf(e)&&this._resetCache()},e.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},e.prototype.setArrow=function(){var t=this.attr(),e=this.attrs,n=e.points,r=e.startArrow,i=e.endArrow,o=n.length,a=n[0][0],l=n[0][1],s=n[o-1][0],u=n[o-1][1];r&&ro(this,t,n[1][0],n[1][1],a,l),i&&io(this,t,n[o-2][0],n[o-2][1],s,u)},e.prototype.isFill=function(){return!1},e.prototype.isInStrokeOrPath=function(t,e,n,r,i){return!(!n||!i)&&Ho(this.attr().points,i,t,e,!1)},e.prototype.isStroke=function(){return!0},e.prototype.createPath=function(t){var e=this.attr(),n=e.points,r=e.startArrow,i=e.endArrow,o=n.length;if(!(n.length<2)){var a,l=n[0][0],s=n[0][1],u=n[o-1][0],c=n[o-1][1];if(r&&r.d)l+=(a=no(l,s,n[1][0],n[1][1],r.d)).dx,s+=a.dy;if(i&&i.d)u-=(a=no(n[o-2][0],n[o-2][1],u,c,i.d)).dx,c-=a.dy;t.beginPath(),t.moveTo(l,s);for(var h=0;h<o-1;h++){var d=n[h];t.lineTo(d[0],d[1])}t.lineTo(u,c)}},e.prototype.afterDrawPath=function(t){var e=this.get("startArrowShape"),n=this.get("endArrowShape");e&&e.draw(t),n&&n.draw(t)},e.prototype.getTotalLength=function(){var t=this.attr().points,e=this.get("totalLength");return U(e)?(this.set("totalLength",fi(t)),this.get("totalLength")):e},e.prototype.getPoint=function(t){var e,n,r=this.attr().points,i=this.get("tCache");return i||(this._setTcache(),i=this.get("tCache")),X(i,(function(r,i){t>=r[0]&&t<=r[1]&&(e=(t-r[0])/(r[1]-r[0]),n=i)})),Vr.pointAt(r[n][0],r[n][1],r[n+1][0],r[n+1][1],e)},e.prototype._setTcache=function(){var t=this.attr().points;if(t&&0!==t.length){var e=this.getTotalLength();if(!(e<=0)){var n,r,i=0,o=[];X(t,(function(a,l){t[l+1]&&((n=[])[0]=i/e,r=Vr.length(a[0],a[1],t[l+1][0],t[l+1][1]),i+=r,n[1]=i/e,o.push(n))})),this.set("tCache",o)}}},e.prototype.getStartTangent=function(){var t=this.attr().points,e=[];return e.push([t[1][0],t[1][1]]),e.push([t[0][0],t[0][1]]),e},e.prototype.getEndTangent=function(){var t=this.attr().points,e=t.length-1,n=[];return n.push([t[e-1][0],t[e-1][1]]),n.push([t[e][0],t[e][1]]),n},e}(mo),Go=Wo;var jo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return z(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return H(H({},e),{x:0,y:0,width:0,height:0,radius:0})},e.prototype.isInStrokeOrPath=function(t,e,n,r,i){var o=this.attr(),a=o.x,l=o.y,s=o.width,u=o.height,c=o.radius;if(c){var h=!1;return n&&(h=function(t,e,n,r,i,o,a,l){return _o(t+i,e,t+n-i,e,o,a,l)||_o(t+n,e+i,t+n,e+r-i,o,a,l)||_o(t+n-i,e+r,t+i,e+r,o,a,l)||_o(t,e+r-i,t,e+i,o,a,l)||Bo(t+n-i,e+i,i,1.5*Math.PI,2*Math.PI,o,a,l)||Bo(t+n-i,e+r-i,i,0,.5*Math.PI,o,a,l)||Bo(t+i,e+r-i,i,.5*Math.PI,Math.PI,o,a,l)||Bo(t+i,e+i,i,Math.PI,1.5*Math.PI,o,a,l)}(a,l,s,u,c,i,t,e)),!h&&r&&(h=Oo(this,t,e)),h}var d=i/2;return r&&n?Pi(a-d,l-d,s+d,u+d,t,e):r?Pi(a,l,s,u,t,e):n?function(t,e,n,r,i,o,a){var l=i/2;return Pi(t-l,e-l,n,i,o,a)||Pi(t+n-l,e-l,i,r,o,a)||Pi(t+l,e+r-l,n,i,o,a)||Pi(t-l,e+l,i,r,o,a)}(a,l,s,u,i,t,e):void 0},e.prototype.createPath=function(t){var e=this.attr(),n=e.x,r=e.y,i=e.width,o=e.height,a=e.radius;if(t.beginPath(),0===a)t.rect(n,r,i,o);else{var l=function(t){var e=0,n=0,r=0,i=0;return Y(t)?1===t.length?e=n=r=i=t[0]:2===t.length?(e=r=t[0],n=i=t[1]):3===t.length?(e=t[0],n=i=t[1],r=t[2]):(e=t[0],n=t[1],r=t[2],i=t[3]):e=n=r=i=t,[e,n,r,i]}(a),s=l[0],u=l[1],c=l[2],h=l[3];t.moveTo(n+s,r),t.lineTo(n+i-u,r),0!==u&&t.arc(n+i-u,r+u,u,-Math.PI/2,0),t.lineTo(n+i,r+o-c),0!==c&&t.arc(n+i-c,r+o-c,c,0,Math.PI/2),t.lineTo(n+h,r+o),0!==h&&t.arc(n+h,r+o-h,h,Math.PI/2,Math.PI),t.lineTo(n,r+s),0!==s&&t.arc(n+s,r+s,s,Math.PI,1.5*Math.PI),t.closePath()}},e}(mo),Uo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return z(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return H(H({},e),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},e.prototype.isOnlyHitBox=function(){return!0},e.prototype.initAttrs=function(t){this._assembleFont(),t.text&&this._setText(t.text)},e.prototype._assembleFont=function(){var t=this.attrs;t.font=Ci(t)},e.prototype._setText=function(t){var e=null;Z(t)&&-1!==t.indexOf("\n")&&(e=t.split("\n")),this.set("textArr",e)},e.prototype.onAttrChange=function(e,n,r){t.prototype.onAttrChange.call(this,e,n,r),e.startsWith("font")&&this._assembleFont(),"text"===e&&this._setText(n)},e.prototype._getSpaceingY=function(){var t=this.attrs,e=t.lineHeight,n=1*t.fontSize;return e?e-n:.14*n},e.prototype._drawTextArr=function(t,e,n){var r,i=this.attrs,o=i.textBaseline,a=i.x,l=i.y,s=1*i.fontSize,u=this._getSpaceingY(),c=mi(i.text,i.fontSize,i.lineHeight);X(e,(function(e,i){r=l+i*(u+s)-c+s,"middle"===o&&(r+=c-s-(c-s)/2),"top"===o&&(r+=c-s),U(e)||(n?t.fillText(e,a,r):t.strokeText(e,a,r))}))},e.prototype._drawText=function(t,e){var n=this.attr(),r=n.x,i=n.y,o=this.get("textArr");if(o)this._drawTextArr(t,o,e);else{var a=n.text;U(a)||(e?t.fillText(a,r,i):t.strokeText(a,r,i))}},e.prototype.strokeAndFill=function(t){var e=this.attrs,n=e.lineWidth,r=e.opacity,i=e.strokeOpacity,o=e.fillOpacity;this.isStroke()&&n>0&&(U(i)||1===i||(t.globalAlpha=r),this.stroke(t)),this.isFill()&&(U(o)||1===o?this.fill(t):(t.globalAlpha=o,this.fill(t),t.globalAlpha=r)),this.afterDrawPath(t)},e.prototype.fill=function(t){this._drawText(t,!0)},e.prototype.stroke=function(t){this._drawText(t,!1)},e}(mo);function Yo(t,e,n){var r,i,o=t.getTotalMatrix();if(o){var a=(r=[e,n,1],(i=o)?Ce(we(i),r):r);return[a[0],a[1]]}return[e,n]}function Vo(t,e,n){if(t.isCanvas&&t.isCanvas())return!0;if(!$t(t)||!1===t.cfg.isInView)return!1;if(t.cfg.clipShape){var r=Yo(t,e,n),i=r[0],o=r[1];if(t.isClipped(i,o))return!1}var a=t.cfg.cacheCanvasBBox||t.getCanvasBBox();return e>=a.minX&&e<=a.maxX&&n>=a.minY&&n<=a.maxY}function Xo(t,e,n){if(!Vo(t,e,n))return null;for(var r=null,i=t.getChildren(),o=i.length-1;o>=0;o--){var a=i[o];if(a.isGroup())r=Xo(a,e,n);else if(Vo(a,e,n)){var l=a,s=Yo(a,e,n),u=s[0],c=s[1];l.isInShape(u,c)&&(r=a)}if(r)break}return r}var qo,Ko,$o,Zo,Qo,Jo,ta=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return z(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return e.renderer="canvas",e.autoDraw=!0,e.localRefresh=!0,e.refreshElements=[],e.clipView=!0,e.quickHit=!1,e},e.prototype.onCanvasChange=function(t){"attr"!==t&&"sort"!==t&&"changeSize"!==t||(this.set("refreshElements",[this]),this.draw())},e.prototype.getShapeBase=function(){return N},e.prototype.getGroupBase=function(){return yo},e.prototype.getPixelRatio=function(){var t=this.get("pixelRatio")||(window?window.devicePixelRatio:1);return t>=1?Math.ceil(t):1},e.prototype.getViewRange=function(){return{minX:0,minY:0,maxX:this.cfg.width,maxY:this.cfg.height}},e.prototype.createDom=function(){var t=document.createElement("canvas"),e=t.getContext("2d");return this.set("context",e),t},e.prototype.setDOMSize=function(e,n){t.prototype.setDOMSize.call(this,e,n);var r=this.get("context"),i=this.get("el"),o=this.getPixelRatio();i.width=o*e,i.height=o*n,o>1&&r.scale(o,o)},e.prototype.clear=function(){t.prototype.clear.call(this),this._clearFrame();var e=this.get("context"),n=this.get("el");e.clearRect(0,0,n.width,n.height)},e.prototype.getShape=function(e,n){return this.get("quickHit")?Xo(this,e,n):t.prototype.getShape.call(this,e,n,null)},e.prototype._getRefreshRegion=function(){var t,e=this.get("refreshElements"),n=this.getViewRange();e.length&&e[0]===this?t=n:(t=function(t){if(!t.length)return null;var e=[],n=[],r=[],i=[];return X(t,(function(t){var o=go(t);o&&(e.push(o.minX),n.push(o.minY),r.push(o.maxX),i.push(o.maxY))})),{minX:$(e),minY:$(n),maxX:K(r),maxY:K(i)}}(e),t&&(t.minX=Math.floor(t.minX),t.minY=Math.floor(t.minY),t.maxX=Math.ceil(t.maxX),t.maxY=Math.ceil(t.maxY),t.maxY+=1,this.get("clipView")&&(t=function(t,e){return t&&e&&zi(t,e)?{minX:Math.max(t.minX,e.minX),minY:Math.max(t.minY,e.minY),maxX:Math.min(t.maxX,e.maxX),maxY:Math.min(t.maxY,e.maxY)}:null}(t,n))));return t},e.prototype.refreshElement=function(t){this.get("refreshElements").push(t)},e.prototype._clearFrame=function(){var t,e=this.get("drawFrame");e&&(t=e,(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout)(t),this.set("drawFrame",null),this.set("refreshElements",[]))},e.prototype.draw=function(){var t=this.get("drawFrame");this.get("autoDraw")&&t||this._startDraw()},e.prototype._drawAll=function(){var t=this.get("context"),e=this.get("el"),n=this.getChildren();t.clearRect(0,0,e.width,e.height),ao(t,this),lo(t,n),this.set("refreshElements",[])},e.prototype._drawRegion=function(){var t=this.get("context"),e=this.get("refreshElements"),n=this.getChildren(),r=this._getRefreshRegion();r?(t.clearRect(r.minX,r.minY,r.maxX-r.minX,r.maxY-r.minY),t.save(),t.beginPath(),t.rect(r.minX,r.minY,r.maxX-r.minX,r.maxY-r.minY),t.clip(),ao(t,this),so(this,n,r),lo(t,n,r),t.restore()):e.length&&co(e),X(e,(function(t){t.get("hasChanged")&&t.set("hasChanged",!1)})),this.set("refreshElements",[])},e.prototype._startDraw=function(){var t,e=this,n=this.get("drawFrame");n||(t=function(){e.get("localRefresh")?e._drawRegion():e._drawAll(),e.set("drawFrame",null)},n=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return setTimeout(t,16)})(t),this.set("drawFrame",n))},e.prototype.skipDraw=function(){},e.prototype.removeDom=function(){var t=this.get("el");t.width=0,t.height=0,t.parentNode.removeChild(t)},e}(Br);(Ko=qo||(qo={})).DATA_CELL_CLICK_EVENT="interaction:data-cell-click",Ko.MERGED_CELLS_CLICK_EVENT="interaction:merged-cells-click",Ko.CORNER_TEXT_CLICK_EVENT="interaction:corner-cell-text-click",Ko.ROW_COLUMN_CLICK_EVENT="interaction:row-column-click",Ko.ROW_TEXT_CLICK_EVENT="interaction:row-text-click",Ko.HOVER_EVENT="interaction:hover",Ko.TREND_ICON_CLICK="interaction:trend-icon-click",(Zo=$o||($o={})).MOUSE_DOWN="mousedown",Zo.MOUSE_MOVE="mousemove",Zo.MOUSE_OUT="mouseout",Zo.MOUSE_LEAVE="mouseleave",Zo.MOUSE_UP="mouseup",Zo.KEY_DOWN="keydown",Zo.KEY_UP="keyup",Zo.CLICK="click",Zo.HOVER="hover",Zo.DOUBLE_CLICK="dblclick",Zo.CONTEXT_MENU="contextmenu",(Jo=Qo||(Qo={})).ROW_CELL_HOVER="row-cell:hover",Jo.ROW_CELL_CLICK="row-cell:click",Jo.ROW_CELL_DOUBLE_CLICK="row-cell:double-click",Jo.ROW_CELL_CONTEXT_MENU="row-cell:context-menu",Jo.ROW_CELL_MOUSE_DOWN="row-cell:mouse-down",Jo.ROW_CELL_MOUSE_UP="row-cell:mouse-up",Jo.ROW_CELL_MOUSE_MOVE="row-cell:mouse-move",Jo.ROW_CELL_COLLAPSE_TREE_ROWS="row-cell:collapsed-tree-rows",Jo.ROW_CELL_SCROLL="row-cell:scroll",Jo.ROW_CELL_BRUSH_SELECTION="row-cell:brush-selection",Jo.COL_CELL_HOVER="col-cell:hover",Jo.COL_CELL_CLICK="col-cell:click",Jo.COL_CELL_DOUBLE_CLICK="col-cell:double-click",Jo.COL_CELL_CONTEXT_MENU="col-cell:context-menu",Jo.COL_CELL_MOUSE_DOWN="col-cell:mouse-down",Jo.COL_CELL_MOUSE_UP="col-cell:mouse-up",Jo.COL_CELL_MOUSE_MOVE="col-cell:mouse-move",Jo.COL_CELL_BRUSH_SELECTION="col-cell:brush-selection",Jo.DATA_CELL_HOVER="data-cell:hover",Jo.DATA_CELL_CLICK="data-cell:click",Jo.DATA_CELL_DOUBLE_CLICK="data-cell:double-click",Jo.DATA_CELL_CONTEXT_MENU="data-cell:context-menu",Jo.DATA_CELL_MOUSE_UP="data-cell:mouse-up",Jo.DATA_CELL_MOUSE_DOWN="data-cell:mouse-down",Jo.DATA_CELL_MOUSE_MOVE="data-cell:mouse-move",Jo.DATA_CELL_TREND_ICON_CLICK="data-cell:trend-icon-click",Jo.DATA_CELL_BRUSH_SELECTION="data-cell:brush-selection",Jo.DATA_CELL_SELECT_MOVE="data-cell:select-move",Jo.CORNER_CELL_HOVER="corner-cell:hover",Jo.CORNER_CELL_CLICK="corner-cell:click",Jo.CORNER_CELL_DOUBLE_CLICK="corner-cell:double-click",Jo.CORNER_CELL_CONTEXT_MENU="corner-cell:context-menu",Jo.CORNER_CELL_MOUSE_DOWN="corner-cell:mouse-down",Jo.CORNER_CELL_MOUSE_UP="corner-cell:mouse-up",Jo.CORNER_CELL_MOUSE_MOVE="corner-cell:mouse-move",Jo.MERGED_CELLS_HOVER="merged-cells:hover",Jo.MERGED_CELLS_CLICK="merged-cells:click",Jo.MERGED_CELLS_DOUBLE_CLICK="merged-cells:double-click",Jo.MERGED_CELLS_CONTEXT_MENU="merged-cell:context-menu",Jo.MERGED_CELLS_MOUSE_DOWN="merged-cells:mouse-down",Jo.MERGED_CELLS_MOUSE_UP="merged-cells:mouse-up",Jo.MERGED_CELLS_MOUSE_MOVE="merged-cells:mouse-move",Jo.RANGE_SORT="sort:range-sort",Jo.RANGE_SORTED="sort:range-sorted",Jo.RANGE_FILTER="filter:range-filter",Jo.RANGE_FILTERED="filter:range-filtered",Jo.LAYOUT_AFTER_HEADER_LAYOUT="layout:after-header-layout",Jo.LAYOUT_CELL_SCROLL="layout:cell-scroll",Jo.LAYOUT_PAGINATION="layout:pagination",Jo.LAYOUT_COLLAPSE_ROWS="layout:collapsed-rows",Jo.LAYOUT_AFTER_COLLAPSE_ROWS="layout:after-collapsed-rows",Jo.LAYOUT_AFTER_REAL_DATA_CELL_RENDER="layout:after-real-data-cell-render",Jo.LAYOUT_TREE_ROWS_COLLAPSE_ALL="layout:toggle-collapse-all",Jo.LAYOUT_COLS_EXPANDED="layout:table-col-expanded",Jo.LAYOUT_COLS_HIDDEN="layout:table-col-hidden",Jo.LAYOUT_AFTER_RENDER="layout:after-render",Jo.LAYOUT_BEFORE_RENDER="layout:before-render",Jo.LAYOUT_DESTROY="layout:destroy",Jo.LAYOUT_RESIZE="layout:resize",Jo.LAYOUT_RESIZE_SERIES_WIDTH="layout:resize-series-width",Jo.LAYOUT_RESIZE_ROW_WIDTH="layout:resize-row-width",Jo.LAYOUT_RESIZE_ROW_HEIGHT="layout:resize-row-height",Jo.LAYOUT_RESIZE_COL_WIDTH="layout:resize-column-width",Jo.LAYOUT_RESIZE_COL_HEIGHT="layout:resize-column-height",Jo.LAYOUT_RESIZE_TREE_WIDTH="layout:resize-tree-width",Jo.LAYOUT_RESIZE_MOUSE_DOWN="layout:resize:mouse-down",Jo.LAYOUT_RESIZE_MOUSE_MOVE="layout:resize:mouse-move",Jo.LAYOUT_RESIZE_MOUSE_UP="layout:resize-mouse-up",Jo.GLOBAL_KEYBOARD_DOWN="global:keyboard-down",Jo.GLOBAL_KEYBOARD_UP="global:keyboard-up",Jo.GLOBAL_COPIED="global:copied",Jo.GLOBAL_MOUSE_UP="global:mouse-up",Jo.GLOBAL_MOUSE_MOVE="global:mouse-move",Jo.GLOBAL_ACTION_ICON_CLICK="global:action-icon-click",Jo.GLOBAL_ACTION_ICON_HOVER="global:action-icon-hover",Jo.GLOBAL_ACTION_ICON_HOVER_OFF="global:action-icon-hover-off",Jo.GLOBAL_CONTEXT_MENU="global:context-menu",Jo.GLOBAL_CLICK="global:click",Jo.GLOBAL_DOUBLE_CLICK="global:double-click",Jo.GLOBAL_SELECTED="global:selected",Jo.GLOBAL_HOVER="global:hover",Jo.GLOBAL_RESET="global:reset",Jo.GLOBAL_LINK_FIELD_JUMP="global:link-field-jump",Jo.GLOBAL_SCROLL="global:scroll";var ea,na,ra="$$value$$",ia="$$extra$$",oa="$$extra_column$$",aa="$$total$$",la="$$series_number$$",sa="mergedCellsGroup",ua="frozenRowGroup",ca="frozenColGroup",ha="frozenTrailingRowGroup",da="frozenTrailingColGroup",fa="frozenTopGroup",pa="frozenBottomGroup",va="rowResizeAreaGroup",ga="rowFrozenResizeAreaGroup",ya="frozenSplitLine",ma="rowIndexResizeAreaGroup",Ca="cornerResizeAreaGroup",wa="colResizeAreaGroup",xa="colFrozenResizeAreaGroup",Sa="gridGroup",ba="horizontal-resize-area-",_a="root",La="[&]",Ea="-";(na=ea||(ea={})).Line="line",na.Bar="bar",na.Bullet="bullet";var Ta,Oa,Ia,Ra,Ma,Aa="square",Ba="...",Da="antv-s2",ka="valueRanges",Na={},Pa="#000000",za="#FFFFFF",Ha={data:[],totalData:[],fields:{rows:[],columns:[],values:[],customTreeItems:[],valueInCols:!0},meta:[],sortParams:[],filterParams:[]};(Ia=Oa||(Oa={})).ROW="row",Ia.COL="col",Ia.TRAILING_ROW="trailingRow",Ia.TRAILING_COL="trailingCol",Ia.SCROLL="scroll",Ia.TOP="top",Ia.BOTTOM="bottom",(Ma=Ra||(Ra={})).FROZEN_COL="frozenCol",Ma.FROZEN_ROW="frozenRow",Ma.FROZEN_TRAILING_COL="frozenTrailingCol",Ma.FROZEN_TRAILING_ROW="frozenTrailingRow";var Fa,Wa,Ga,ja,Ua,Ya,Va=((Ta={})[Oa.ROW]="frozenRowGroup",Ta[Oa.COL]="frozenColGroup",Ta[Oa.TRAILING_COL]="frozenTrailingColGroup",Ta[Oa.TRAILING_ROW]="frozenTrailingRowGroup",Ta[Oa.SCROLL]="panelScrollGroup",Ta[Oa.TOP]="frozenTopGroup",Ta[Oa.BOTTOM]="frozenBottomGroup",Ta);(Wa=Fa||(Fa={})).CORNER_CELL_CLICK="cornerCellClick",Wa.DATA_CELL_CLICK="dataCellClick",Wa.MERGED_CELLS_CLICK="mergedCellsClick",Wa.ROW_COLUMN_CLICK="rowColumnClick",Wa.ROW_TEXT_CLICK="rowTextClick",Wa.HOVER="hover",Wa.BRUSH_SELECTION="brushSelection",Wa.ROW_BRUSH_SELECTION="rowBrushSelection",Wa.COL_BRUSH_SELECTION="colBrushSelection",Wa.COL_ROW_RESIZE="rowColResize",Wa.DATA_CELL_MULTI_SELECTION="dataCellMultiSelection",Wa.RANGE_SELECTION="rangeSelection",Wa.SELECTED_CELL_MOVE="selectedCellMove",(ja=Ga||(Ga={})).ALL_SELECTED="allSelected",ja.SELECTED="selected",ja.UNSELECTED="unselected",ja.HOVER="hover",ja.HOVER_FOCUS="hoverFocus",ja.HIGHLIGHT="highlight",ja.SEARCH_RESULT="searchResult",ja.PREPARE_SELECT="prepareSelect",(Ya=Ua||(Ua={})).DATA_CELL="dataCell",Ya.HEADER_CELL="headerCell",Ya.ROW_CELL="rowCell",Ya.COL_CELL="colCell",Ya.CORNER_CELL="cornerCell",Ya.MERGED_CELL="mergedCell";var Xa,qa,Ka,$a,Za,Qa,Ja,tl,el={textOpacity:"fillOpacity",backgroundOpacity:"fillOpacity",backgroundColor:"fill",borderOpacity:"strokeOpacity",borderColor:"stroke",borderWidth:"lineWidth",opacity:"opacity"},nl={textShape:["textOpacity"],textShapes:["textOpacity"],linkFieldShape:["opacity"],interactiveBgShape:["backgroundColor","backgroundOpacity"],interactiveBorderShape:["borderColor","borderOpacity","borderWidth"]},rl="interactionStateInfo";(qa=Xa||(Xa={})).CLICK="click",qa.UN_DRAGGED="unDragged",qa.DRAGGED="dragged",($a=Ka||(Ka={})).SHIFT="Shift",$a.COPY="c",$a.ESC="Escape",$a.META="Meta",$a.CONTROL="Control",$a.ARROW_UP="ArrowUp",$a.ARROW_DOWN="ArrowDown",$a.ARROW_LEFT="ArrowLeft",$a.ARROW_RIGHT="ArrowRight",(Qa=Za||(Za={})).ASC="ASC",Qa.DESC="DESC",(tl=Ja||(Ja={})).HOVER="hover",tl.CLICK="click",tl.BRUSH_SELECTION="brushSelection",tl.ROW_BRUSH_SELECTION="rowBrushSelection",tl.COL_BRUSH_SELECTION="colBrushSelection",tl.MULTI_SELECTION="multiSelection",tl.RESIZE="resize";var il,ol,al,ll,sl,ul,cl={x:{value:0,scroll:!1},y:{value:0,scroll:!1}};(ol=il||(il={})).CONTENT="content",ol.CANVAS="canvas",(ll=al||(al={})).SCROLL_UP="scrollUp",ll.SCROLL_DOWN="scrollDown",(ul=sl||(sl={}))[ul.SCROLL_UP=-1]="SCROLL_UP",ul[ul.SCROLL_DOWN=1]="SCROLL_DOWN";var hl,dl,fl,pl,vl,gl;(dl=hl||(hl={})).Horizontal="col",dl.Vertical="row",(pl=fl||(fl={})).Field="field",pl.Cell="cell",pl.Tree="tree",pl.Series="series",(gl=vl||(vl={})).ALL="all",gl.CURRENT="current";var yl,ml;(ml=yl||(yl={})).Adaptive="adaptive",ml.ColAdaptive="colAdaptive",ml.Compact="compact";var Cl={layoutWidthType:yl.Adaptive,showTreeLeafNodeAlignDot:!1,collapsedRows:{},collapsedCols:{},cellCfg:{width:96,height:30},rowCfg:{width:null,widthByField:{},heightByField:{}},colCfg:{height:30,widthByFieldValue:{},heightByField:{}},device:"pc"},wl={width:600,height:480,debug:!1,hierarchyType:"grid",conditions:{},totals:{},tooltip:{showTooltip:!1,autoAdjustBoundary:"body",operation:{hiddenColumns:!1,trend:!1,sort:!1,menus:[]}},interaction:{linkFields:[],hiddenColumnFields:[],selectedCellsSpotlight:!1,hoverHighlight:!0,hoverFocus:{duration:800},scrollSpeedRatio:{horizontal:1,vertical:1},autoResetSheetStyle:!0,brushSelection:{data:!0,row:!1,col:!1},multiSelection:!0,rangeSelection:!0,scrollbarPosition:il.CONTENT,resize:{rowCellVertical:!0,cornerCellHorizontal:!0,colCellHorizontal:!0,colCellVertical:!0,rowResizeType:vl.ALL},eventListenerOptions:!1,selectedCellHighlight:!1,overscrollBehavior:"auto"},showSeriesNumber:!1,customSVGIcons:[],showDefaultHeaderActionIcon:!1,headerActionIcons:[],style:Cl,frozenRowHeader:!0,frozenRowCount:0,frozenColCount:0,frozenTrailingRowCount:0,frozenTrailingColCount:0,hdAdapter:!0,cornerText:"",cornerExtraFieldText:"",placeholder:Ea,supportCSSTransform:!1,devicePixelRatio:window.devicePixelRatio},xl=function(t,e){return(xl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function Sl(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}xl(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var bl=function(){return bl=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},bl.apply(this,arguments)};function _l(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function Ll(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function El(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(l){i={error:l}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function Tl(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}var Ol="object"==typeof global&&global&&global.Object===Object&&global,Il="object"==typeof self&&self&&self.Object===Object&&self,Rl=Ol||Il||Function("return this")(),Ml=Rl.Symbol,Al=Object.prototype,Bl=Al.hasOwnProperty,Dl=Al.toString,kl=Ml?Ml.toStringTag:void 0;var Nl=Object.prototype.toString;var Pl="[object Null]",zl="[object Undefined]",Hl=Ml?Ml.toStringTag:void 0;function Fl(t){return null==t?void 0===t?zl:Pl:Hl&&Hl in Object(t)?function(t){var e=Bl.call(t,kl),n=t[kl];try{t[kl]=void 0;var r=!0}catch(o){}var i=Dl.call(t);return r&&(e?t[kl]=n:delete t[kl]),i}(t):function(t){return Nl.call(t)}(t)}function Wl(t){return null!=t&&"object"==typeof t}var Gl="[object Symbol]";function jl(t){return"symbol"==typeof t||Wl(t)&&Fl(t)==Gl}var Ul=NaN;function Yl(t){return"number"==typeof t?t:jl(t)?Ul:+t}function Vl(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}var Xl=Array.isArray,ql=1/0,Kl=Ml?Ml.prototype:void 0,$l=Kl?Kl.toString:void 0;function Zl(t){if("string"==typeof t)return t;if(Xl(t))return Vl(t,Zl)+"";if(jl(t))return $l?$l.call(t):"";var e=t+"";return"0"==e&&1/t==-ql?"-0":e}function Ql(t,e){return function(n,r){var i;if(void 0===n&&void 0===r)return e;if(void 0!==n&&(i=n),void 0!==r){if(void 0===i)return r;"string"==typeof n||"string"==typeof r?(n=Zl(n),r=Zl(r)):(n=Yl(n),r=Yl(r)),i=t(n,r)}return i}}var Jl=Ql((function(t,e){return t+e}),0),ts=/\s/;function es(t){for(var e=t.length;e--&&ts.test(t.charAt(e)););return e}var ns=/^\s+/;function rs(t){return t?t.slice(0,es(t)+1).replace(ns,""):t}function is(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}var os=NaN,as=/^[-+]0x[0-9a-f]+$/i,ls=/^0b[01]+$/i,ss=/^0o[0-7]+$/i,us=parseInt;function cs(t){if("number"==typeof t)return t;if(jl(t))return os;if(is(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=is(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=rs(t);var n=ls.test(t);return n||ss.test(t)?us(t.slice(2),n?2:8):as.test(t)?os:+t}var hs=1/0,ds=17976931348623157e292;function fs(t){return t?(t=cs(t))===hs||t===-hs?(t<0?-1:1)*ds:t==t?t:0:0===t?t:0}function ps(t){var e=fs(t),n=e%1;return e==e?n?e-n:e:0}function vs(t){return t}var gs="[object AsyncFunction]",ys="[object Function]",ms="[object GeneratorFunction]",Cs="[object Proxy]";function ws(t){if(!is(t))return!1;var e=Fl(t);return e==ys||e==ms||e==gs||e==Cs}var xs,Ss=Rl["__core-js_shared__"],bs=(xs=/[^.]+$/.exec(Ss&&Ss.keys&&Ss.keys.IE_PROTO||""))?"Symbol(src)_1."+xs:"";var _s=Function.prototype.toString;function Ls(t){if(null!=t){try{return _s.call(t)}catch(e){}try{return t+""}catch(e){}}return""}var Es=/^\[object .+?Constructor\]$/,Ts=Function.prototype,Os=Object.prototype,Is=Ts.toString,Rs=Os.hasOwnProperty,Ms=RegExp("^"+Is.call(Rs).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function As(t){return!(!is(t)||(e=t,bs&&bs in e))&&(ws(t)?Ms:Es).test(Ls(t));var e}function Bs(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return As(n)?n:void 0}var Ds=Bs(Rl,"WeakMap"),ks=Ds&&new Ds,Ns=ks?function(t,e){return ks.set(t,e),t}:vs,Ps=Ns,zs=Object.create,Hs=function(){function t(){}return function(e){if(!is(e))return{};if(zs)return zs(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}(),Fs=Hs;function Ws(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=Fs(t.prototype),r=t.apply(n,e);return is(r)?r:n}}var Gs=1;function js(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}var Us=Math.max;function Ys(t,e,n,r){for(var i=-1,o=t.length,a=n.length,l=-1,s=e.length,u=Us(o-a,0),c=Array(s+u),h=!r;++l<s;)c[l]=e[l];for(;++i<a;)(h||i<o)&&(c[n[i]]=t[i]);for(;u--;)c[l++]=t[i++];return c}var Vs=Math.max;function Xs(t,e,n,r){for(var i=-1,o=t.length,a=-1,l=n.length,s=-1,u=e.length,c=Vs(o-l,0),h=Array(c+u),d=!r;++i<c;)h[i]=t[i];for(var f=i;++s<u;)h[f+s]=e[s];for(;++a<l;)(d||i<o)&&(h[f+n[a]]=t[i++]);return h}function qs(){}var Ks=4294967295;function $s(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Ks,this.__views__=[]}function Zs(){}$s.prototype=Fs(qs.prototype),$s.prototype.constructor=$s;var Qs=ks?function(t){return ks.get(t)}:Zs,Js=Qs,tu={},eu=Object.prototype.hasOwnProperty;function nu(t){for(var e=t.name+"",n=tu[e],r=eu.call(tu,e)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==t)return i.name}return e}function ru(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=void 0}function iu(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}function ou(t){if(t instanceof $s)return t.clone();var e=new ru(t.__wrapped__,t.__chain__);return e.__actions__=iu(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}ru.prototype=Fs(qs.prototype),ru.prototype.constructor=ru;var au=Object.prototype.hasOwnProperty;function lu(t){if(Wl(t)&&!Xl(t)&&!(t instanceof $s)){if(t instanceof ru)return t;if(au.call(t,"__wrapped__"))return ou(t)}return new ru(t)}function su(t){var e=nu(t),n=lu[e];if("function"!=typeof n||!(e in $s.prototype))return!1;if(t===n)return!0;var r=Js(n);return!!r&&t===r[0]}lu.prototype=qs.prototype,lu.prototype.constructor=lu;var uu=Date.now;function cu(t){var e=0,n=0;return function(){var r=uu(),i=16-(r-n);if(n=r,i>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var hu=cu(Ps),du=/\{\n\/\* \[wrapped with (.+)\] \*/,fu=/,? & /;var pu=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;function vu(t){return function(){return t}}var gu=function(){try{var t=Bs(Object,"defineProperty");return t({},"",{}),t}catch(e){}}(),yu=gu,mu=yu?function(t,e){return yu(t,"toString",{configurable:!0,enumerable:!1,value:vu(e),writable:!0})}:vs,Cu=cu(mu);function wu(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}function xu(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}function Su(t){return t!=t}function bu(t,e,n){return e==e?function(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}(t,e,n):xu(t,Su,n)}function _u(t,e){return!!(null==t?0:t.length)&&bu(t,e,0)>-1}var Lu=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]];function Eu(t,e,n){var r=e+"";return Cu(t,function(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(n>1?"& ":"")+e[r],e=e.join(n>2?", ":" "),t.replace(pu,"{\n/* [wrapped with "+e+"] */\n")}(r,function(t,e){return wu(Lu,(function(n){var r="_."+n[0];e&n[1]&&!_u(t,r)&&t.push(r)})),t.sort()}(function(t){var e=t.match(du);return e?e[1].split(fu):[]}(r),n)))}var Tu=1,Ou=2,Iu=4,Ru=8,Mu=32,Au=64;function Bu(t,e,n,r,i,o,a,l,s,u){var c=e&Ru;e|=c?Mu:Au,(e&=~(c?Au:Mu))&Iu||(e&=~(Tu|Ou));var h=[t,e,i,c?o:void 0,c?a:void 0,c?void 0:o,c?void 0:a,l,s,u],d=n.apply(void 0,h);return su(t)&&hu(d,h),d.placeholder=r,Eu(d,t,e)}function Du(t){return t.placeholder}var ku=9007199254740991,Nu=/^(?:0|[1-9]\d*)$/;function Pu(t,e){var n=typeof t;return!!(e=null==e?ku:e)&&("number"==n||"symbol"!=n&&Nu.test(t))&&t>-1&&t%1==0&&t<e}var zu=Math.min;var Hu="__lodash_placeholder__";function Fu(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var a=t[n];a!==e&&a!==Hu||(t[n]=Hu,o[i++]=n)}return o}var Wu=1,Gu=2,ju=8,Uu=16,Yu=128,Vu=512;function Xu(t,e,n,r,i,o,a,l,s,u){var c=e&Yu,h=e&Wu,d=e&Gu,f=e&(ju|Uu),p=e&Vu,v=d?void 0:Ws(t);return function g(){for(var y=arguments.length,m=Array(y),C=y;C--;)m[C]=arguments[C];if(f)var w=Du(g),x=function(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r}(m,w);if(r&&(m=Ys(m,r,i,f)),o&&(m=Xs(m,o,a,f)),y-=x,f&&y<u){var S=Fu(m,w);return Bu(t,e,Xu,g.placeholder,n,m,S,l,s,u-y)}var b=h?n:this,_=d?b[t]:t;return y=m.length,l?m=function(t,e){for(var n=t.length,r=zu(e.length,n),i=iu(t);r--;){var o=e[r];t[r]=Pu(o,n)?i[o]:void 0}return t}(m,l):p&&y>1&&m.reverse(),c&&s<y&&(m.length=s),this&&this!==Rl&&this instanceof g&&(_=v||Ws(_)),_.apply(b,m)}}var qu=1;var Ku="__lodash_placeholder__",$u=1,Zu=2,Qu=4,Ju=8,tc=128,ec=256,nc=Math.min;var rc="Expected a function",ic=1,oc=2,ac=8,lc=16,sc=32,uc=64,cc=Math.max;function hc(t,e,n,r,i,o,a,l){var s=e&oc;if(!s&&"function"!=typeof t)throw new TypeError(rc);var u=r?r.length:0;if(u||(e&=~(sc|uc),r=i=void 0),a=void 0===a?a:cc(ps(a),0),l=void 0===l?l:ps(l),u-=i?i.length:0,e&uc){var c=r,h=i;r=i=void 0}var d=s?void 0:Js(t),f=[t,e,n,r,i,c,h,o,a,l];if(d&&function(t,e){var n=t[1],r=e[1],i=n|r,o=i<($u|Zu|tc),a=r==tc&&n==Ju||r==tc&&n==ec&&t[7].length<=e[8]||r==(tc|ec)&&e[7].length<=e[8]&&n==Ju;if(!o&&!a)return t;r&$u&&(t[2]=e[2],i|=n&$u?0:Qu);var l=e[3];if(l){var s=t[3];t[3]=s?Ys(s,l,e[4]):l,t[4]=s?Fu(t[3],Ku):e[4]}(l=e[5])&&(s=t[5],t[5]=s?Xs(s,l,e[6]):l,t[6]=s?Fu(t[5],Ku):e[6]),(l=e[7])&&(t[7]=l),r&tc&&(t[8]=null==t[8]?e[8]:nc(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=i}(f,d),t=f[0],e=f[1],n=f[2],r=f[3],i=f[4],!(l=f[9]=void 0===f[9]?s?0:t.length:cc(f[9]-u,0))&&e&(ac|lc)&&(e&=~(ac|lc)),e&&e!=ic)p=e==ac||e==lc?function(t,e,n){var r=Ws(t);return function i(){for(var o=arguments.length,a=Array(o),l=o,s=Du(i);l--;)a[l]=arguments[l];var u=o<3&&a[0]!==s&&a[o-1]!==s?[]:Fu(a,s);return(o-=u.length)<n?Bu(t,e,Xu,i.placeholder,void 0,a,u,void 0,void 0,n-o):js(this&&this!==Rl&&this instanceof i?r:t,this,a)}}(t,e,l):e!=sc&&e!=(ic|sc)||i.length?Xu.apply(void 0,f):function(t,e,n,r){var i=e&qu,o=Ws(t);return function e(){for(var a=-1,l=arguments.length,s=-1,u=r.length,c=Array(u+l),h=this&&this!==Rl&&this instanceof e?o:t;++s<u;)c[s]=r[s];for(;l--;)c[s++]=arguments[++a];return js(h,i?n:this,c)}}(t,e,n,r);else var p=function(t,e,n){var r=e&Gs,i=Ws(t);return function e(){return(this&&this!==Rl&&this instanceof e?i:t).apply(r?n:this,arguments)}}(t,e,n);return Eu((d?Ps:hu)(p,f),t,e)}var dc=128;function fc(t,e,n){return e=n?void 0:e,e=t&&null==e?t.length:e,hc(t,dc,void 0,void 0,void 0,void 0,e)}function pc(t,e,n){"__proto__"==e&&yu?yu(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function vc(t,e){return t===e||t!=t&&e!=e}var gc=Object.prototype.hasOwnProperty;function yc(t,e,n){var r=t[e];gc.call(t,e)&&vc(r,n)&&(void 0!==n||e in t)||pc(t,e,n)}function mc(t,e,n,r){var i=!n;n||(n={});for(var o=-1,a=e.length;++o<a;){var l=e[o],s=r?r(n[l],t[l],l,n,t):void 0;void 0===s&&(s=t[l]),i?pc(n,l,s):yc(n,l,s)}return n}var Cc=Math.max;function wc(t,e,n){return e=Cc(void 0===e?t.length-1:e,0),function(){for(var r=arguments,i=-1,o=Cc(r.length-e,0),a=Array(o);++i<o;)a[i]=r[e+i];i=-1;for(var l=Array(e+1);++i<e;)l[i]=r[i];return l[e]=n(a),js(t,this,l)}}function xc(t,e){return Cu(wc(t,e,vs),t+"")}var Sc=9007199254740991;function bc(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=Sc}function _c(t){return null!=t&&bc(t.length)&&!ws(t)}function Lc(t,e,n){if(!is(n))return!1;var r=typeof e;return!!("number"==r?_c(n)&&Pu(e,n.length):"string"==r&&e in n)&&vc(n[e],t)}function Ec(t){return xc((function(e,n){var r=-1,i=n.length,o=i>1?n[i-1]:void 0,a=i>2?n[2]:void 0;for(o=t.length>3&&"function"==typeof o?(i--,o):void 0,a&&Lc(n[0],n[1],a)&&(o=i<3?void 0:o,i=1),e=Object(e);++r<i;){var l=n[r];l&&t(e,l,r,o)}return e}))}var Tc=Object.prototype;function Oc(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Tc)}function Ic(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function Rc(t){return Wl(t)&&"[object Arguments]"==Fl(t)}var Mc=Object.prototype,Ac=Mc.hasOwnProperty,Bc=Mc.propertyIsEnumerable,Dc=Rc(function(){return arguments}())?Rc:function(t){return Wl(t)&&Ac.call(t,"callee")&&!Bc.call(t,"callee")};function kc(){return!1}var Nc="object"==typeof exports&&exports&&!exports.nodeType&&exports,Pc=Nc&&"object"==typeof module&&module&&!module.nodeType&&module,zc=Pc&&Pc.exports===Nc?Rl.Buffer:void 0,Hc=(zc?zc.isBuffer:void 0)||kc,Fc={};function Wc(t){return function(e){return t(e)}}Fc["[object Float32Array]"]=Fc["[object Float64Array]"]=Fc["[object Int8Array]"]=Fc["[object Int16Array]"]=Fc["[object Int32Array]"]=Fc["[object Uint8Array]"]=Fc["[object Uint8ClampedArray]"]=Fc["[object Uint16Array]"]=Fc["[object Uint32Array]"]=!0,Fc["[object Arguments]"]=Fc["[object Array]"]=Fc["[object ArrayBuffer]"]=Fc["[object Boolean]"]=Fc["[object DataView]"]=Fc["[object Date]"]=Fc["[object Error]"]=Fc["[object Function]"]=Fc["[object Map]"]=Fc["[object Number]"]=Fc["[object Object]"]=Fc["[object RegExp]"]=Fc["[object Set]"]=Fc["[object String]"]=Fc["[object WeakMap]"]=!1;var Gc="object"==typeof exports&&exports&&!exports.nodeType&&exports,jc=Gc&&"object"==typeof module&&module&&!module.nodeType&&module,Uc=jc&&jc.exports===Gc&&Ol.process,Yc=function(){try{var t=jc&&jc.require&&jc.require("util").types;return t||Uc&&Uc.binding&&Uc.binding("util")}catch(e){}}(),Vc=Yc&&Yc.isTypedArray,Xc=Vc?Wc(Vc):function(t){return Wl(t)&&bc(t.length)&&!!Fc[Fl(t)]},qc=Object.prototype.hasOwnProperty;function Kc(t,e){var n=Xl(t),r=!n&&Dc(t),i=!n&&!r&&Hc(t),o=!n&&!r&&!i&&Xc(t),a=n||r||i||o,l=a?Ic(t.length,String):[],s=l.length;for(var u in t)!e&&!qc.call(t,u)||a&&("length"==u||i&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||Pu(u,s))||l.push(u);return l}function $c(t,e){return function(n){return t(e(n))}}var Zc=$c(Object.keys,Object),Qc=Object.prototype.hasOwnProperty;function Jc(t){if(!Oc(t))return Zc(t);var e=[];for(var n in Object(t))Qc.call(t,n)&&"constructor"!=n&&e.push(n);return e}function th(t){return _c(t)?Kc(t):Jc(t)}var eh=Object.prototype.hasOwnProperty,nh=Ec((function(t,e){if(Oc(e)||_c(e))mc(e,th(e),t);else for(var n in e)eh.call(e,n)&&yc(t,n,e[n])})),rh=nh;var ih=Object.prototype.hasOwnProperty;function oh(t){if(!is(t))return function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}(t);var e=Oc(t),n=[];for(var r in t)("constructor"!=r||!e&&ih.call(t,r))&&n.push(r);return n}function ah(t){return _c(t)?Kc(t,!0):oh(t)}var lh=Ec((function(t,e){mc(e,ah(e),t)})),sh=lh,uh=Ec((function(t,e,n,r){mc(e,ah(e),t,r)})),ch=uh,hh=Ec((function(t,e,n,r){mc(e,th(e),t,r)})),dh=hh,fh=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ph=/^\w*$/;function vh(t,e){if(Xl(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!jl(t))||(ph.test(t)||!fh.test(t)||null!=e&&t in Object(e))}var gh=Bs(Object,"create");var yh=Object.prototype.hasOwnProperty;var mh=Object.prototype.hasOwnProperty;function Ch(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function wh(t,e){for(var n=t.length;n--;)if(vc(t[n][0],e))return n;return-1}Ch.prototype.clear=function(){this.__data__=gh?gh(null):{},this.size=0},Ch.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Ch.prototype.get=function(t){var e=this.__data__;if(gh){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return yh.call(e,t)?e[t]:void 0},Ch.prototype.has=function(t){var e=this.__data__;return gh?void 0!==e[t]:mh.call(e,t)},Ch.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=gh&&void 0===e?"__lodash_hash_undefined__":e,this};var xh=Array.prototype.splice;function Sh(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Sh.prototype.clear=function(){this.__data__=[],this.size=0},Sh.prototype.delete=function(t){var e=this.__data__,n=wh(e,t);return!(n<0)&&(n==e.length-1?e.pop():xh.call(e,n,1),--this.size,!0)},Sh.prototype.get=function(t){var e=this.__data__,n=wh(e,t);return n<0?void 0:e[n][1]},Sh.prototype.has=function(t){return wh(this.__data__,t)>-1},Sh.prototype.set=function(t,e){var n=this.__data__,r=wh(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this};var bh=Bs(Rl,"Map");function _h(t,e){var n,r,i=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof e?"string":"hash"]:i.map}function Lh(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Lh.prototype.clear=function(){this.size=0,this.__data__={hash:new Ch,map:new(bh||Sh),string:new Ch}},Lh.prototype.delete=function(t){var e=_h(this,t).delete(t);return this.size-=e?1:0,e},Lh.prototype.get=function(t){return _h(this,t).get(t)},Lh.prototype.has=function(t){return _h(this,t).has(t)},Lh.prototype.set=function(t,e){var n=_h(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this};var Eh="Expected a function";function Th(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError(Eh);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(Th.Cache||Lh),n}Th.Cache=Lh;var Oh,Ih,Rh,Mh=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ah=/\\(\\)?/g,Bh=(Oh=function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(Mh,(function(t,n,r,i){e.push(r?i.replace(Ah,"$1"):n||t)})),e},Ih=Th(Oh,(function(t){return 500===Rh.size&&Rh.clear(),t})),Rh=Ih.cache,Ih),Dh=Bh;function kh(t){return null==t?"":Zl(t)}function Nh(t,e){return Xl(t)?t:vh(t,e)?[t]:Dh(kh(t))}var Ph=1/0;function zh(t){if("string"==typeof t||jl(t))return t;var e=t+"";return"0"==e&&1/t==-Ph?"-0":e}function Hh(t,e){for(var n=0,r=(e=Nh(e,t)).length;null!=t&&n<r;)t=t[zh(e[n++])];return n&&n==r?t:void 0}function Fh(t,e,n){var r=null==t?void 0:Hh(t,e);return void 0===r?n:r}function Wh(t,e){for(var n=-1,r=e.length,i=Array(r),o=null==t;++n<r;)i[n]=o?void 0:Fh(t,e[n]);return i}function Gh(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}var jh=Ml?Ml.isConcatSpreadable:void 0;function Uh(t){return Xl(t)||Dc(t)||!!(jh&&t&&t[jh])}function Yh(t,e,n,r,i){var o=-1,a=t.length;for(n||(n=Uh),i||(i=[]);++o<a;){var l=t[o];e>0&&n(l)?e>1?Yh(l,e-1,n,r,i):Gh(i,l):r||(i[i.length]=l)}return i}function Vh(t){return(null==t?0:t.length)?Yh(t,1):[]}function Xh(t){return Cu(wc(t,void 0,Vh),t+"")}var qh=Xh(Wh),Kh=$c(Object.getPrototypeOf,Object),$h="[object Object]",Zh=Function.prototype,Qh=Object.prototype,Jh=Zh.toString,td=Qh.hasOwnProperty,ed=Jh.call(Object);function nd(t){if(!Wl(t)||Fl(t)!=$h)return!1;var e=Kh(t);if(null===e)return!0;var n=td.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&Jh.call(n)==ed}var rd="[object DOMException]",id="[object Error]";function od(t){if(!Wl(t))return!1;var e=Fl(t);return e==id||e==rd||"string"==typeof t.message&&"string"==typeof t.name&&!nd(t)}var ad=xc((function(t,e){try{return js(t,void 0,e)}catch(n){return od(n)?n:new Error(n)}})),ld=ad,sd="Expected a function";function ud(t,e){var n;if("function"!=typeof e)throw new TypeError(sd);return t=ps(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=void 0),n}}var cd=xc((function(t,e,n){var r=1;if(n.length){var i=Fu(n,Du(cd));r|=32}return hc(t,r,e,n,i)}));cd.placeholder={};var hd=cd,dd=Xh((function(t,e){return wu(e,(function(e){e=zh(e),pc(t,e,hd(t[e],t))})),t})),fd=xc((function(t,e,n){var r=3;if(n.length){var i=Fu(n,Du(fd));r|=32}return hc(e,r,t,n,i)}));fd.placeholder={};var pd=fd;function vd(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),(n=n>i?i:n)<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=Array(i);++r<i;)o[r]=t[r+e];return o}function gd(t,e,n){var r=t.length;return n=void 0===n?r:n,!e&&n>=r?t:vd(t,e,n)}var yd=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");function md(t){return yd.test(t)}var Cd="\\ud800-\\udfff",wd="["+Cd+"]",xd="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Sd="\\ud83c[\\udffb-\\udfff]",bd="[^"+Cd+"]",_d="(?:\\ud83c[\\udde6-\\uddff]){2}",Ld="[\\ud800-\\udbff][\\udc00-\\udfff]",Ed="(?:"+xd+"|"+Sd+")"+"?",Td="[\\ufe0e\\ufe0f]?",Od=Td+Ed+("(?:\\u200d(?:"+[bd,_d,Ld].join("|")+")"+Td+Ed+")*"),Id="(?:"+[bd+xd+"?",xd,_d,Ld,wd].join("|")+")",Rd=RegExp(Sd+"(?="+Sd+")|"+Id+Od,"g");function Md(t){return md(t)?function(t){return t.match(Rd)||[]}(t):function(t){return t.split("")}(t)}function Ad(t){return function(e){var n=md(e=kh(e))?Md(e):void 0,r=n?n[0]:e.charAt(0),i=n?gd(n,1).join(""):e.slice(1);return r[t]()+i}}var Bd=Ad("toUpperCase");function Dd(t){return Bd(kh(t).toLowerCase())}function kd(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}function Nd(t){return function(e){return null==t?void 0:t[e]}}var Pd=Nd({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),zd=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Hd=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");function Fd(t){return(t=kh(t))&&t.replace(zd,Pd).replace(Hd,"")}var Wd=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;var Gd=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;var jd="\\ud800-\\udfff",Ud="\\u2700-\\u27bf",Yd="a-z\\xdf-\\xf6\\xf8-\\xff",Vd="A-Z\\xc0-\\xd6\\xd8-\\xde",Xd="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",qd="["+Xd+"]",Kd="\\d+",$d="["+Ud+"]",Zd="["+Yd+"]",Qd="[^"+jd+Xd+Kd+Ud+Yd+Vd+"]",Jd="(?:\\ud83c[\\udde6-\\uddff]){2}",tf="[\\ud800-\\udbff][\\udc00-\\udfff]",ef="["+Vd+"]",nf="(?:"+Zd+"|"+Qd+")",rf="(?:"+ef+"|"+Qd+")",of="(?:['’](?:d|ll|m|re|s|t|ve))?",af="(?:['’](?:D|LL|M|RE|S|T|VE))?",lf="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",sf="[\\ufe0e\\ufe0f]?",uf=sf+lf+("(?:\\u200d(?:"+["[^"+jd+"]",Jd,tf].join("|")+")"+sf+lf+")*"),cf="(?:"+[$d,Jd,tf].join("|")+")"+uf,hf=RegExp([ef+"?"+Zd+"+"+of+"(?="+[qd,ef,"$"].join("|")+")",rf+"+"+af+"(?="+[qd,ef+nf,"$"].join("|")+")",ef+"?"+nf+"+"+of,ef+"+"+af,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Kd,cf].join("|"),"g");function df(t,e,n){return t=kh(t),void 0===(e=n?void 0:e)?function(t){return Gd.test(t)}(t)?function(t){return t.match(hf)||[]}(t):function(t){return t.match(Wd)||[]}(t):t.match(e)||[]}var ff=RegExp("['’]","g");function pf(t){return function(e){return kd(df(Fd(e).replace(ff,"")),t,"")}}var vf=pf((function(t,e,n){return e=e.toLowerCase(),t+(n?Dd(e):e)})),gf=vf;var yf=Rl.isFinite,mf=Math.min;function Cf(t){var e=Math[t];return function(t,n){if(t=cs(t),(n=null==n?0:mf(ps(n),292))&&yf(t)){var r=(kh(t)+"e").split("e");return+((r=(kh(e(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return e(t)}}var wf=Cf("ceil");function xf(t){var e=lu(t);return e.__chain__=!0,e}var Sf=Math.ceil,bf=Math.max;function _f(t,e,n){return t==t&&(void 0!==n&&(t=t<=n?t:n),void 0!==e&&(t=t>=e?t:e)),t}function Lf(t,e,n){return void 0===n&&(n=e,e=void 0),void 0!==n&&(n=(n=cs(n))==n?n:0),void 0!==e&&(e=(e=cs(e))==e?e:0),_f(cs(t),e,n)}function Ef(t){var e=this.__data__=new Sh(t);this.size=e.size}function Tf(t,e){return t&&mc(e,th(e),t)}Ef.prototype.clear=function(){this.__data__=new Sh,this.size=0},Ef.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},Ef.prototype.get=function(t){return this.__data__.get(t)},Ef.prototype.has=function(t){return this.__data__.has(t)},Ef.prototype.set=function(t,e){var n=this.__data__;if(n instanceof Sh){var r=n.__data__;if(!bh||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Lh(r)}return n.set(t,e),this.size=n.size,this};var Of="object"==typeof exports&&exports&&!exports.nodeType&&exports,If=Of&&"object"==typeof module&&module&&!module.nodeType&&module,Rf=If&&If.exports===Of?Rl.Buffer:void 0,Mf=Rf?Rf.allocUnsafe:void 0;function Af(t,e){if(e)return t.slice();var n=t.length,r=Mf?Mf(n):new t.constructor(n);return t.copy(r),r}function Bf(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}function Df(){return[]}var kf=Object.prototype.propertyIsEnumerable,Nf=Object.getOwnPropertySymbols,Pf=Nf?function(t){return null==t?[]:(t=Object(t),Bf(Nf(t),(function(e){return kf.call(t,e)})))}:Df;var zf=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)Gh(e,Pf(t)),t=Kh(t);return e}:Df,Hf=zf;function Ff(t,e,n){var r=e(t);return Xl(t)?r:Gh(r,n(t))}function Wf(t){return Ff(t,th,Pf)}function Gf(t){return Ff(t,ah,Hf)}var jf=Bs(Rl,"DataView"),Uf=Bs(Rl,"Promise"),Yf=Bs(Rl,"Set"),Vf="[object Map]",Xf="[object Promise]",qf="[object Set]",Kf="[object WeakMap]",$f="[object DataView]",Zf=Ls(jf),Qf=Ls(bh),Jf=Ls(Uf),tp=Ls(Yf),ep=Ls(Ds),np=Fl;(jf&&np(new jf(new ArrayBuffer(1)))!=$f||bh&&np(new bh)!=Vf||Uf&&np(Uf.resolve())!=Xf||Yf&&np(new Yf)!=qf||Ds&&np(new Ds)!=Kf)&&(np=function(t){var e=Fl(t),n="[object Object]"==e?t.constructor:void 0,r=n?Ls(n):"";if(r)switch(r){case Zf:return $f;case Qf:return Vf;case Jf:return Xf;case tp:return qf;case ep:return Kf}return e});var rp=np,ip=Object.prototype.hasOwnProperty;var op=Rl.Uint8Array;function ap(t){var e=new t.constructor(t.byteLength);return new op(e).set(new op(t)),e}var lp=/\w*$/;var sp=Ml?Ml.prototype:void 0,up=sp?sp.valueOf:void 0;function cp(t,e){var n=e?ap(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}var hp="[object Boolean]",dp="[object Date]",fp="[object Map]",pp="[object Number]",vp="[object RegExp]",gp="[object Set]",yp="[object String]",mp="[object Symbol]",Cp="[object ArrayBuffer]",wp="[object DataView]",xp="[object Float32Array]",Sp="[object Float64Array]",bp="[object Int8Array]",_p="[object Int16Array]",Lp="[object Int32Array]",Ep="[object Uint8Array]",Tp="[object Uint8ClampedArray]",Op="[object Uint16Array]",Ip="[object Uint32Array]";function Rp(t,e,n){var r,i=t.constructor;switch(e){case Cp:return ap(t);case hp:case dp:return new i(+t);case wp:return function(t,e){var n=e?ap(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case xp:case Sp:case bp:case _p:case Lp:case Ep:case Tp:case Op:case Ip:return cp(t,n);case fp:return new i;case pp:case yp:return new i(t);case vp:return function(t){var e=new t.constructor(t.source,lp.exec(t));return e.lastIndex=t.lastIndex,e}(t);case gp:return new i;case mp:return r=t,up?Object(up.call(r)):{}}}function Mp(t){return"function"!=typeof t.constructor||Oc(t)?{}:Fs(Kh(t))}var Ap=Yc&&Yc.isMap,Bp=Ap?Wc(Ap):function(t){return Wl(t)&&"[object Map]"==rp(t)};var Dp=Yc&&Yc.isSet,kp=Dp?Wc(Dp):function(t){return Wl(t)&&"[object Set]"==rp(t)},Np=1,Pp=2,zp=4,Hp="[object Arguments]",Fp="[object Function]",Wp="[object GeneratorFunction]",Gp="[object Object]",jp={};function Up(t,e,n,r,i,o){var a,l=e&Np,s=e&Pp,u=e&zp;if(n&&(a=i?n(t,r,i,o):n(t)),void 0!==a)return a;if(!is(t))return t;var c=Xl(t);if(c){if(a=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&ip.call(t,"index")&&(n.index=t.index,n.input=t.input),n}(t),!l)return iu(t,a)}else{var h=rp(t),d=h==Fp||h==Wp;if(Hc(t))return Af(t,l);if(h==Gp||h==Hp||d&&!i){if(a=s||d?{}:Mp(t),!l)return s?function(t,e){return mc(t,Hf(t),e)}(t,function(t,e){return t&&mc(e,ah(e),t)}(a,t)):function(t,e){return mc(t,Pf(t),e)}(t,Tf(a,t))}else{if(!jp[h])return i?t:{};a=Rp(t,h,l)}}o||(o=new Ef);var f=o.get(t);if(f)return f;o.set(t,a),kp(t)?t.forEach((function(r){a.add(Up(r,e,n,r,t,o))})):Bp(t)&&t.forEach((function(r,i){a.set(i,Up(r,e,n,i,t,o))}));var p=c?void 0:(u?s?Gf:Wf:s?ah:th)(t);return wu(p||t,(function(r,i){p&&(r=t[i=r]),yc(a,i,Up(r,e,n,i,t,o))})),a}jp[Hp]=jp["[object Array]"]=jp["[object ArrayBuffer]"]=jp["[object DataView]"]=jp["[object Boolean]"]=jp["[object Date]"]=jp["[object Float32Array]"]=jp["[object Float64Array]"]=jp["[object Int8Array]"]=jp["[object Int16Array]"]=jp["[object Int32Array]"]=jp["[object Map]"]=jp["[object Number]"]=jp[Gp]=jp["[object RegExp]"]=jp["[object Set]"]=jp["[object String]"]=jp["[object Symbol]"]=jp["[object Uint8Array]"]=jp["[object Uint8ClampedArray]"]=jp["[object Uint16Array]"]=jp["[object Uint32Array]"]=!0,jp["[object Error]"]=jp[Fp]=jp["[object WeakMap]"]=!1;function Yp(t){return Up(t,4)}function Vp(t){return Up(t,5)}function Xp(t){for(var e=-1,n=null==t?0:t.length,r=0,i=[];++e<n;){var o=t[e];o&&(i[r++]=o)}return i}function qp(){var t=arguments.length;if(!t)return[];for(var e=Array(t-1),n=arguments[0],r=t;r--;)e[r-1]=arguments[r];return Gh(Xl(n)?iu(n):[n],Yh(e,1))}function Kp(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new Lh;++e<n;)this.add(t[e])}function $p(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function Zp(t,e){return t.has(e)}Kp.prototype.add=Kp.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},Kp.prototype.has=function(t){return this.__data__.has(t)};var Qp=1,Jp=2;function tv(t,e,n,r,i,o){var a=n&Qp,l=t.length,s=e.length;if(l!=s&&!(a&&s>l))return!1;var u=o.get(t),c=o.get(e);if(u&&c)return u==e&&c==t;var h=-1,d=!0,f=n&Jp?new Kp:void 0;for(o.set(t,e),o.set(e,t);++h<l;){var p=t[h],v=e[h];if(r)var g=a?r(v,p,h,e,t,o):r(p,v,h,t,e,o);if(void 0!==g){if(g)continue;d=!1;break}if(f){if(!$p(e,(function(t,e){if(!Zp(f,e)&&(p===t||i(p,t,n,r,o)))return f.push(e)}))){d=!1;break}}else if(p!==v&&!i(p,v,n,r,o)){d=!1;break}}return o.delete(t),o.delete(e),d}function ev(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}function nv(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}var rv=1,iv=2,ov="[object Boolean]",av="[object Date]",lv="[object Error]",sv="[object Map]",uv="[object Number]",cv="[object RegExp]",hv="[object Set]",dv="[object String]",fv="[object Symbol]",pv="[object ArrayBuffer]",vv="[object DataView]",gv=Ml?Ml.prototype:void 0,yv=gv?gv.valueOf:void 0;var mv=1,Cv=Object.prototype.hasOwnProperty;var wv=1,xv="[object Arguments]",Sv="[object Array]",bv="[object Object]",_v=Object.prototype.hasOwnProperty;function Lv(t,e,n,r,i,o){var a=Xl(t),l=Xl(e),s=a?Sv:rp(t),u=l?Sv:rp(e),c=(s=s==xv?bv:s)==bv,h=(u=u==xv?bv:u)==bv,d=s==u;if(d&&Hc(t)){if(!Hc(e))return!1;a=!0,c=!1}if(d&&!c)return o||(o=new Ef),a||Xc(t)?tv(t,e,n,r,i,o):function(t,e,n,r,i,o,a){switch(n){case vv:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case pv:return!(t.byteLength!=e.byteLength||!o(new op(t),new op(e)));case ov:case av:case uv:return vc(+t,+e);case lv:return t.name==e.name&&t.message==e.message;case cv:case dv:return t==e+"";case sv:var l=ev;case hv:var s=r&rv;if(l||(l=nv),t.size!=e.size&&!s)return!1;var u=a.get(t);if(u)return u==e;r|=iv,a.set(t,e);var c=tv(l(t),l(e),r,i,o,a);return a.delete(t),c;case fv:if(yv)return yv.call(t)==yv.call(e)}return!1}(t,e,s,n,r,i,o);if(!(n&wv)){var f=c&&_v.call(t,"__wrapped__"),p=h&&_v.call(e,"__wrapped__");if(f||p){var v=f?t.value():t,g=p?e.value():e;return o||(o=new Ef),i(v,g,n,r,o)}}return!!d&&(o||(o=new Ef),function(t,e,n,r,i,o){var a=n&mv,l=Wf(t),s=l.length;if(s!=Wf(e).length&&!a)return!1;for(var u=s;u--;){var c=l[u];if(!(a?c in e:Cv.call(e,c)))return!1}var h=o.get(t),d=o.get(e);if(h&&d)return h==e&&d==t;var f=!0;o.set(t,e),o.set(e,t);for(var p=a;++u<s;){var v=t[c=l[u]],g=e[c];if(r)var y=a?r(g,v,c,e,t,o):r(v,g,c,t,e,o);if(!(void 0===y?v===g||i(v,g,n,r,o):y)){f=!1;break}p||(p="constructor"==c)}if(f&&!p){var m=t.constructor,C=e.constructor;m==C||!("constructor"in t)||!("constructor"in e)||"function"==typeof m&&m instanceof m&&"function"==typeof C&&C instanceof C||(f=!1)}return o.delete(t),o.delete(e),f}(t,e,n,r,i,o))}function Ev(t,e,n,r,i){return t===e||(null==t||null==e||!Wl(t)&&!Wl(e)?t!=t&&e!=e:Lv(t,e,n,r,Ev,i))}var Tv=1,Ov=2;function Iv(t,e,n,r){var i=n.length,o=i,a=!r;if(null==t)return!o;for(t=Object(t);i--;){var l=n[i];if(a&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++i<o;){var s=(l=n[i])[0],u=t[s],c=l[1];if(a&&l[2]){if(void 0===u&&!(s in t))return!1}else{var h=new Ef;if(r)var d=r(u,c,s,t,e,h);if(!(void 0===d?Ev(c,u,Tv|Ov,r,h):d))return!1}}return!0}function Rv(t){return t==t&&!is(t)}function Mv(t){for(var e=th(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,Rv(i)]}return e}function Av(t,e){return function(n){return null!=n&&(n[t]===e&&(void 0!==e||t in Object(n)))}}function Bv(t){var e=Mv(t);return 1==e.length&&e[0][2]?Av(e[0][0],e[0][1]):function(n){return n===t||Iv(n,t,e)}}function Dv(t,e){return null!=t&&e in Object(t)}function kv(t,e,n){for(var r=-1,i=(e=Nh(e,t)).length,o=!1;++r<i;){var a=zh(e[r]);if(!(o=null!=t&&n(t,a)))break;t=t[a]}return o||++r!=i?o:!!(i=null==t?0:t.length)&&bc(i)&&Pu(a,i)&&(Xl(t)||Dc(t))}function Nv(t,e){return null!=t&&kv(t,e,Dv)}var Pv=1,zv=2;function Hv(t,e){return vh(t)&&Rv(e)?Av(zh(t),e):function(n){var r=Fh(n,t);return void 0===r&&r===e?Nv(n,t):Ev(e,r,Pv|zv)}}function Fv(t){return function(e){return null==e?void 0:e[t]}}function Wv(t){return vh(t)?Fv(zh(t)):function(t){return function(e){return Hh(e,t)}}(t)}function Gv(t){return"function"==typeof t?t:null==t?vs:"object"==typeof t?Xl(t)?Hv(t[0],t[1]):Bv(t):Wv(t)}function jv(t){var e=null==t?0:t.length,n=Gv;return t=e?Vl(t,(function(t){if("function"!=typeof t[1])throw new TypeError("Expected a function");return[n(t[0]),t[1]]})):[],xc((function(n){for(var r=-1;++r<e;){var i=t[r];if(js(i[0],this,n))return js(i[1],this,n)}}))}function Uv(t,e,n){var r=n.length;if(null==t)return!r;for(t=Object(t);r--;){var i=n[r],o=e[i],a=t[i];if(void 0===a&&!(i in t)||!o(a))return!1}return!0}function Yv(t,e,n,r){for(var i=-1,o=null==t?0:t.length;++i<o;){var a=t[i];e(r,a,n(a),t)}return r}function Vv(t){return function(e,n,r){for(var i=-1,o=Object(e),a=r(e),l=a.length;l--;){var s=a[t?l:++i];if(!1===n(o[s],s,o))break}return e}}var Xv=Vv();function qv(t,e){return t&&Xv(t,e,th)}function Kv(t,e){return function(n,r){if(null==n)return n;if(!_c(n))return t(n,r);for(var i=n.length,o=e?i:-1,a=Object(n);(e?o--:++o<i)&&!1!==r(a[o],o,a););return n}}var $v=Kv(qv);function Zv(t,e,n,r){return $v(t,(function(t,i,o){e(r,t,n(t),o)})),r}function Qv(t,e){return function(n,r){var i=Xl(n)?Yv:Zv,o=e?e():{};return i(n,t,Gv(r),o)}}var Jv=Object.prototype.hasOwnProperty,tg=Qv((function(t,e,n){Jv.call(t,n)?++t[n]:pc(t,n,1)})),eg=tg;function ng(t,e,n){var r=hc(t,8,void 0,void 0,void 0,void 0,void 0,e=n?void 0:e);return r.placeholder=ng.placeholder,r}ng.placeholder={};function rg(t,e,n){var r=hc(t,16,void 0,void 0,void 0,void 0,void 0,e=n?void 0:e);return r.placeholder=rg.placeholder,r}rg.placeholder={};var ig=function(){return Rl.Date.now()},og="Expected a function",ag=Math.max,lg=Math.min;function sg(t,e,n){var r,i,o,a,l,s,u=0,c=!1,h=!1,d=!0;if("function"!=typeof t)throw new TypeError(og);function f(e){var n=r,o=i;return r=i=void 0,u=e,a=t.apply(o,n)}function p(t){var n=t-s;return void 0===s||n>=e||n<0||h&&t-u>=o}function v(){var t=ig();if(p(t))return g(t);l=setTimeout(v,function(t){var n=e-(t-s);return h?lg(n,o-(t-u)):n}(t))}function g(t){return l=void 0,d&&r?f(t):(r=i=void 0,a)}function y(){var t=ig(),n=p(t);if(r=arguments,i=this,s=t,n){if(void 0===l)return function(t){return u=t,l=setTimeout(v,e),c?f(t):a}(s);if(h)return clearTimeout(l),l=setTimeout(v,e),f(s)}return void 0===l&&(l=setTimeout(v,e)),a}return e=cs(e)||0,is(n)&&(c=!!n.leading,o=(h="maxWait"in n)?ag(cs(n.maxWait)||0,e):o,d="trailing"in n?!!n.trailing:d),y.cancel=function(){void 0!==l&&clearTimeout(l),u=0,r=s=i=l=void 0},y.flush=function(){return void 0===l?a:g(ig())},y}var ug=Object.prototype,cg=ug.hasOwnProperty,hg=xc((function(t,e){t=Object(t);var n=-1,r=e.length,i=r>2?e[2]:void 0;for(i&&Lc(e[0],e[1],i)&&(r=1);++n<r;)for(var o=e[n],a=ah(o),l=-1,s=a.length;++l<s;){var u=a[l],c=t[u];(void 0===c||vc(c,ug[u])&&!cg.call(t,u))&&(t[u]=o[u])}return t})),dg=hg;function fg(t,e,n){(void 0!==n&&!vc(t[e],n)||void 0===n&&!(e in t))&&pc(t,e,n)}function pg(t){return Wl(t)&&_c(t)}function vg(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}function gg(t){return mc(t,ah(t))}function yg(t,e,n,r,i){t!==e&&Xv(e,(function(o,a){if(i||(i=new Ef),is(o))!function(t,e,n,r,i,o,a){var l=vg(t,n),s=vg(e,n),u=a.get(s);if(u)fg(t,n,u);else{var c=o?o(l,s,n+"",t,e,a):void 0,h=void 0===c;if(h){var d=Xl(s),f=!d&&Hc(s),p=!d&&!f&&Xc(s);c=s,d||f||p?Xl(l)?c=l:pg(l)?c=iu(l):f?(h=!1,c=Af(s,!0)):p?(h=!1,c=cp(s,!0)):c=[]:nd(s)||Dc(s)?(c=l,Dc(l)?c=gg(l):is(l)&&!ws(l)||(c=Mp(s))):h=!1}h&&(a.set(s,c),i(c,s,r,o,a),a.delete(s)),fg(t,n,c)}}(t,e,a,n,yg,r,i);else{var l=r?r(vg(t,a),o,a+"",t,e,i):void 0;void 0===l&&(l=o),fg(t,a,l)}}),ah)}function mg(t,e,n,r,i,o){return is(t)&&is(e)&&(o.set(e,t),yg(t,e,void 0,mg,o),o.delete(e)),t}var Cg=Ec((function(t,e,n,r){yg(t,e,n,r)})),wg=Cg,xg=xc((function(t){return t.push(void 0,mg),js(wg,void 0,t)}));function Sg(t,e,n){if("function"!=typeof t)throw new TypeError("Expected a function");return setTimeout((function(){t.apply(void 0,n)}),e)}var bg=xc((function(t,e){return Sg(t,1,e)})),_g=bg,Lg=xc((function(t,e,n){return Sg(t,cs(e)||0,n)})),Eg=Lg;function Tg(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}var Og=200;function Ig(t,e,n,r){var i=-1,o=_u,a=!0,l=t.length,s=[],u=e.length;if(!l)return s;n&&(e=Vl(e,Wc(n))),r?(o=Tg,a=!1):e.length>=Og&&(o=Zp,a=!1,e=new Kp(e));t:for(;++i<l;){var c=t[i],h=null==n?c:n(c);if(c=r||0!==c?c:0,a&&h==h){for(var d=u;d--;)if(e[d]===h)continue t;s.push(c)}else o(e,h,r)||s.push(c)}return s}var Rg=xc((function(t,e){return pg(t)?Ig(t,Yh(e,1,pg,!0)):[]}));function Mg(t){var e=null==t?0:t.length;return e?t[e-1]:void 0}var Ag=xc((function(t,e){var n=Mg(e);return pg(n)&&(n=void 0),pg(t)?Ig(t,Yh(e,1,pg,!0),Gv(n)):[]})),Bg=xc((function(t,e){var n=Mg(e);return pg(n)&&(n=void 0),pg(t)?Ig(t,Yh(e,1,pg,!0),void 0,n):[]})),Dg=Ql((function(t,e){return t/e}),1);function kg(t,e,n,r){for(var i=t.length,o=r?i:-1;(r?o--:++o<i)&&e(t[o],o,t););return n?vd(t,r?0:o,r?o+1:i):vd(t,r?o+1:0,r?i:o)}function Ng(t){return"function"==typeof t?t:vs}function Pg(t,e){return(Xl(t)?wu:$v)(t,Ng(e))}function zg(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}var Hg=Vv(!0);function Fg(t,e){return t&&Hg(t,e,th)}var Wg=Kv(Fg,!0);function Gg(t,e){return(Xl(t)?zg:Wg)(t,Ng(e))}function jg(t,e,n){t=kh(t),e=Zl(e);var r=t.length,i=n=void 0===n?r:_f(ps(n),0,r);return(n-=e.length)>=0&&t.slice(n,i)==e}function Ug(t){return function(e){var n=rp(e);return"[object Map]"==n?ev(e):"[object Set]"==n?function(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=[t,t]})),n}(e):function(t,e){return Vl(e,(function(e){return[e,t[e]]}))}(e,t(e))}}var Yg=Ug(th),Vg=Ug(ah),Xg=Nd({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}),qg=/[&<>"']/g,Kg=RegExp(qg.source);function $g(t){return(t=kh(t))&&Kg.test(t)?t.replace(qg,Xg):t}var Zg=/[\\^$.*+?()[\]{}|]/g,Qg=RegExp(Zg.source);function Jg(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function ty(t,e){var n=!0;return $v(t,(function(t,r,i){return n=!!e(t,r,i)})),n}function ey(t,e,n){var r=Xl(t)?Jg:ty;return n&&Lc(t,e,n)&&(e=void 0),r(t,Gv(e))}var ny=4294967295;function ry(t){return t?_f(ps(t),0,ny):0}function iy(t,e){var n=[];return $v(t,(function(t,r,i){e(t,r,i)&&n.push(t)})),n}function oy(t,e){return(Xl(t)?Bf:iy)(t,Gv(e))}function ay(t){return function(e,n,r){var i=Object(e);if(!_c(e)){var o=Gv(n);e=th(e),n=function(t){return o(i[t],t,i)}}var a=t(e,n,r);return a>-1?i[o?e[a]:a]:void 0}}var ly=Math.max;function sy(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:ps(n);return i<0&&(i=ly(r+i,0)),xu(t,Gv(e),i)}var uy=ay(sy);function cy(t,e,n){var r;return n(t,(function(t,n,i){if(e(t,n,i))return r=n,!1})),r}var hy=Math.max,dy=Math.min;function fy(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=r-1;return void 0!==n&&(i=ps(n),i=n<0?hy(r+i,0):dy(i,r-1)),xu(t,Gv(e),i,!0)}var py=ay(fy);function vy(t){return t&&t.length?t[0]:void 0}function gy(t,e){var n=-1,r=_c(t)?Array(t.length):[];return $v(t,(function(t,i,o){r[++n]=e(t,i,o)})),r}function yy(t,e){return(Xl(t)?Vl:gy)(t,Gv(e))}var my=Cf("floor");function Cy(t){return Xh((function(e){var n=e.length,r=n,i=ru.prototype.thru;for(t&&e.reverse();r--;){var o=e[r];if("function"!=typeof o)throw new TypeError("Expected a function");if(i&&!a&&"wrapper"==nu(o))var a=new ru([],!0)}for(r=a?r:n;++r<n;){var l=nu(o=e[r]),s="wrapper"==l?Js(o):void 0;a=s&&su(s[0])&&424==s[1]&&!s[4].length&&1==s[9]?a[nu(s[0])].apply(a,s[3]):1==o.length&&su(o)?a[l]():a.thru(o)}return function(){var t=arguments,r=t[0];if(a&&1==t.length&&Xl(r))return a.plant(r).value();for(var i=0,o=n?e[i].apply(this,t):r;++i<n;)o=e[i].call(this,o);return o}}))}var wy=Cy(),xy=Cy(!0);function Sy(t,e){return null==t?t:Xv(t,Ng(e),ah)}function by(t,e){return Bf(e,(function(e){return ws(t[e])}))}var _y=Object.prototype.hasOwnProperty,Ly=Qv((function(t,e,n){_y.call(t,n)?t[n].push(e):pc(t,n,[e])})),Ey=Ly;function Ty(t,e){return t>e}function Oy(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=cs(e),n=cs(n)),t(e,n)}}var Iy=Oy(Ty),Ry=Oy((function(t,e){return t>=e})),My=Object.prototype.hasOwnProperty;function Ay(t,e){return null!=t&&My.call(t,e)}function By(t,e){return null!=t&&kv(t,e,Ay)}var Dy=Math.max,ky=Math.min;function Ny(t,e,n){return e=fs(e),void 0===n?(n=e,e=0):n=fs(n),function(t,e,n){return t>=ky(e,n)&&t<Dy(e,n)}(t=cs(t),e,n)}var Py="[object String]";function zy(t){return"string"==typeof t||!Xl(t)&&Wl(t)&&Fl(t)==Py}function Hy(t,e){return Vl(e,(function(e){return t[e]}))}function Fy(t){return null==t?[]:Hy(t,th(t))}var Wy=Math.max;function Gy(t,e,n,r){t=_c(t)?t:Fy(t),n=n&&!r?ps(n):0;var i=t.length;return n<0&&(n=Wy(i+n,0)),zy(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&bu(t,e,n)>-1}var jy=Math.max;function Uy(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:ps(n);return i<0&&(i=jy(r+i,0)),bu(t,e,i)}var Yy=Math.min;function Vy(t,e,n){for(var r=n?Tg:_u,i=t[0].length,o=t.length,a=o,l=Array(o),s=Infinity,u=[];a--;){var c=t[a];a&&e&&(c=Vl(c,Wc(e))),s=Yy(c.length,s),l[a]=!n&&(e||i>=120&&c.length>=120)?new Kp(a&&c):void 0}c=t[0];var h=-1,d=l[0];t:for(;++h<i&&u.length<s;){var f=c[h],p=e?e(f):f;if(f=n||0!==f?f:0,!(d?Zp(d,p):r(u,p,n))){for(a=o;--a;){var v=l[a];if(!(v?Zp(v,p):r(t[a],p,n)))continue t}d&&d.push(p),u.push(f)}}return u}function Xy(t){return pg(t)?t:[]}var qy=xc((function(t){var e=Vl(t,Xy);return e.length&&e[0]===t[0]?Vy(e):[]})),Ky=xc((function(t){var e=Mg(t),n=Vl(t,Xy);return e===Mg(n)?e=void 0:n.pop(),n.length&&n[0]===t[0]?Vy(n,Gv(e)):[]})),$y=xc((function(t){var e=Mg(t),n=Vl(t,Xy);return(e="function"==typeof e?e:void 0)&&n.pop(),n.length&&n[0]===t[0]?Vy(n,void 0,e):[]}));function Zy(t,e){return function(n,r){return function(t,e,n,r){return qv(t,(function(t,i,o){e(r,n(t),i,o)})),r}(n,t,e(r),{})}}var Qy=Object.prototype.toString,Jy=Zy((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=Qy.call(e)),t[e]=n}),vu(vs)),tm=Jy,em=Object.prototype,nm=em.hasOwnProperty,rm=em.toString,im=Zy((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=rm.call(e)),nm.call(t,e)?t[e].push(n):t[e]=[n]}),Gv),om=im;function am(t,e){return e.length<2?t:Hh(t,vd(e,0,-1))}function lm(t,e,n){var r=null==(t=am(t,e=Nh(e,t)))?t:t[zh(Mg(e))];return null==r?void 0:js(r,t,n)}var sm=xc(lm),um=xc((function(t,e,n){var r=-1,i="function"==typeof e,o=_c(t)?Array(t.length):[];return $v(t,(function(t){o[++r]=i?js(e,t,n):lm(t,e,n)})),o})),cm=um;var hm=Yc&&Yc.isArrayBuffer,dm=hm?Wc(hm):function(t){return Wl(t)&&"[object ArrayBuffer]"==Fl(t)};function fm(t){return!0===t||!1===t||Wl(t)&&"[object Boolean]"==Fl(t)}var pm=Yc&&Yc.isDate,vm=pm?Wc(pm):function(t){return Wl(t)&&"[object Date]"==Fl(t)};var gm="[object Map]",ym="[object Set]",mm=Object.prototype.hasOwnProperty;function Cm(t){if(null==t)return!0;if(_c(t)&&(Xl(t)||"string"==typeof t||"function"==typeof t.splice||Hc(t)||Xc(t)||Dc(t)))return!t.length;var e=rp(t);if(e==gm||e==ym)return!t.size;if(Oc(t))return!Jc(t).length;for(var n in t)if(mm.call(t,n))return!1;return!0}function wm(t,e){return Ev(t,e)}var xm=Rl.isFinite;function Sm(t){return"number"==typeof t&&t==ps(t)}var bm="[object Number]";function _m(t){return"number"==typeof t||Wl(t)&&Fl(t)==bm}function Lm(t){return _m(t)&&t!=+t}var Em=Ss?ws:kc;function Tm(t){return null==t}var Om=Yc&&Yc.isRegExp,Im=Om?Wc(Om):function(t){return Wl(t)&&"[object RegExp]"==Fl(t)},Rm=9007199254740991;function Mm(t){return void 0===t}var Am=Array.prototype.join;var Bm=pf((function(t,e,n){return t+(n?"-":"")+e.toLowerCase()})),Dm=Bm,km=Qv((function(t,e,n){pc(t,n,e)})),Nm=km;var Pm=Math.max,zm=Math.min;var Hm=pf((function(t,e,n){return t+(n?" ":"")+e.toLowerCase()})),Fm=Hm,Wm=Ad("toLowerCase");function Gm(t,e){return t<e}var jm=Oy(Gm),Um=Oy((function(t,e){return t<=e}));function Ym(t,e){var n={};return e=Gv(e),qv(t,(function(t,r,i){pc(n,e(t,r,i),t)})),n}function Vm(t){return Bv(Up(t,1))}function Xm(t,e,n){for(var r=-1,i=t.length;++r<i;){var o=t[r],a=e(o);if(null!=a&&(void 0===l?a==a&&!jl(a):n(a,l)))var l=a,s=o}return s}function qm(t){return t&&t.length?Xm(t,vs,Ty):void 0}function Km(t,e){return t&&t.length?Xm(t,Gv(e),Ty):void 0}function $m(t,e){for(var n,r=-1,i=t.length;++r<i;){var o=e(t[r]);void 0!==o&&(n=void 0===n?o:n+o)}return n}var Zm=NaN;function Qm(t,e){var n=null==t?0:t.length;return n?$m(t,e)/n:Zm}var Jm=Ec((function(t,e,n){yg(t,e,n)})),tC=Jm,eC=xc((function(t,e){return function(n){return lm(n,t,e)}})),nC=xc((function(t,e){return function(n){return lm(t,n,e)}}));function rC(t){return t&&t.length?Xm(t,vs,Gm):void 0}function iC(t,e,n){var r=th(e),i=by(e,r),o=!(is(n)&&"chain"in n&&!n.chain),a=ws(t);return wu(i,(function(n){var r=e[n];t[n]=r,a&&(t.prototype[n]=function(){var e=this.__chain__;if(o||e){var n=t(this.__wrapped__);return(n.__actions__=iu(this.__actions__)).push({func:r,args:arguments,thisArg:t}),n.__chain__=e,n}return r.apply(t,Gh([this.value()],arguments))})})),t}var oC=Ql((function(t,e){return t*e}),1),aC="Expected a function";function lC(t){if("function"!=typeof t)throw new TypeError(aC);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}var sC="[object Map]",uC="[object Set]",cC=Ml?Ml.iterator:void 0;function hC(t){if(!t)return[];if(_c(t))return zy(t)?Md(t):iu(t);if(cC&&t[cC])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[cC]());var e=rp(t);return(e==sC?ev:e==uC?nv:Fy)(t)}function dC(t,e){var n=t.length;if(n)return Pu(e+=e<0?n:0,n)?t[e]:void 0}function fC(t,e){return null==(t=am(t,e=Nh(e,t)))||delete t[zh(Mg(e))]}function pC(t){return nd(t)?void 0:t}var vC=Xh((function(t,e){var n={};if(null==t)return n;var r=!1;e=Vl(e,(function(e){return e=Nh(e,t),r||(r=e.length>1),e})),mc(t,Gf(t),n),r&&(n=Up(n,7,pC));for(var i=e.length;i--;)fC(n,e[i]);return n})),gC=vC;function yC(t,e,n,r){if(!is(t))return t;for(var i=-1,o=(e=Nh(e,t)).length,a=o-1,l=t;null!=l&&++i<o;){var s=zh(e[i]),u=n;if("__proto__"===s||"constructor"===s||"prototype"===s)return t;if(i!=a){var c=l[s];void 0===(u=r?r(c,s,l):void 0)&&(u=is(c)?c:Pu(e[i+1])?[]:{})}yc(l,s,u),l=l[s]}return t}function mC(t,e,n){for(var r=-1,i=e.length,o={};++r<i;){var a=e[r],l=Hh(t,a);n(l,a)&&yC(o,Nh(a,t),l)}return o}function CC(t,e){if(null==t)return{};var n=Vl(Gf(t),(function(t){return[t]}));return e=Gv(e),mC(t,n,(function(t,n){return e(t,n[0])}))}function wC(t,e){if(t!==e){var n=void 0!==t,r=null===t,i=t==t,o=jl(t),a=void 0!==e,l=null===e,s=e==e,u=jl(e);if(!l&&!u&&!o&&t>e||o&&a&&s&&!l&&!u||r&&a&&s||!n&&s||!i)return 1;if(!r&&!o&&!u&&t<e||u&&n&&i&&!r&&!o||l&&n&&i||!a&&i||!s)return-1}return 0}function xC(t,e,n){e=e.length?Vl(e,(function(t){return Xl(t)?function(e){return Hh(e,1===t.length?t[0]:t)}:t})):[vs];var r=-1;return e=Vl(e,Wc(Gv)),function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}(gy(t,(function(t,n,i){return{criteria:Vl(e,(function(e){return e(t)})),index:++r,value:t}})),(function(t,e){return function(t,e,n){for(var r=-1,i=t.criteria,o=e.criteria,a=i.length,l=n.length;++r<a;){var s=wC(i[r],o[r]);if(s)return r>=l?s:s*("desc"==n[r]?-1:1)}return t.index-e.index}(t,e,n)}))}function SC(t,e,n,r){return null==t?[]:(Xl(e)||(e=null==e?[]:[e]),Xl(n=r?void 0:n)||(n=null==n?[]:[n]),xC(t,e,n))}function bC(t){return Xh((function(e){return e=Vl(e,Wc(Gv)),xc((function(n){var r=this;return t(e,(function(t){return js(t,r,n)}))}))}))}var _C=bC(Vl),LC=xc,EC=Math.min,TC=LC((function(t,e){var n=(e=1==e.length&&Xl(e[0])?Vl(e[0],Wc(Gv)):Vl(Yh(e,1),Wc(Gv))).length;return xc((function(r){for(var i=-1,o=EC(r.length,n);++i<o;)r[i]=e[i].call(this,r[i]);return js(t,this,r)}))})),OC=TC,IC=bC(Jg),RC=bC($p),MC=9007199254740991,AC=Math.floor;function BC(t,e){var n="";if(!t||e<1||e>MC)return n;do{e%2&&(n+=t),(e=AC(e/2))&&(t+=t)}while(e);return n}var DC=Fv("length"),kC="\\ud800-\\udfff",NC="["+kC+"]",PC="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",zC="\\ud83c[\\udffb-\\udfff]",HC="[^"+kC+"]",FC="(?:\\ud83c[\\udde6-\\uddff]){2}",WC="[\\ud800-\\udbff][\\udc00-\\udfff]",GC="(?:"+PC+"|"+zC+")"+"?",jC="[\\ufe0e\\ufe0f]?",UC=jC+GC+("(?:\\u200d(?:"+[HC,FC,WC].join("|")+")"+jC+GC+")*"),YC="(?:"+[HC+PC+"?",PC,FC,WC,NC].join("|")+")",VC=RegExp(zC+"(?="+zC+")|"+YC+UC,"g");function XC(t){return md(t)?function(t){for(var e=VC.lastIndex=0;VC.test(t);)++e;return e}(t):DC(t)}var qC=Math.ceil;function KC(t,e){var n=(e=void 0===e?" ":Zl(e)).length;if(n<2)return n?BC(e,t):e;var r=BC(e,qC(t/XC(e)));return md(e)?gd(Md(r),0,t).join(""):r.slice(0,t)}var $C=Math.ceil,ZC=Math.floor;var QC=/^\s+/,JC=Rl.parseInt;var tw=xc((function(t,e){return hc(t,32,void 0,e,Fu(e,Du(tw)))}));tw.placeholder={};var ew=tw,nw=xc((function(t,e){return hc(t,64,void 0,e,Fu(e,Du(nw)))}));nw.placeholder={};var rw=nw,iw=Qv((function(t,e,n){t[n?0:1].push(e)}),(function(){return[[],[]]})),ow=iw;var aw=Xh((function(t,e){return null==t?{}:function(t,e){return mC(t,e,(function(e,n){return Nv(t,n)}))}(t,e)}));function lw(t,e,n,r){for(var i=n-1,o=t.length;++i<o;)if(r(t[i],e))return i;return-1}var sw=Array.prototype.splice;function uw(t,e,n,r){var i=r?lw:bu,o=-1,a=e.length,l=t;for(t===e&&(e=iu(e)),n&&(l=Vl(t,Wc(n)));++o<a;)for(var s=0,u=e[o],c=n?n(u):u;(s=i(l,c,s,r))>-1;)l!==t&&sw.call(l,s,1),sw.call(t,s,1);return t}function cw(t,e){return t&&t.length&&e&&e.length?uw(t,e):t}var hw=xc(cw);var dw=Array.prototype.splice;function fw(t,e){for(var n=t?e.length:0,r=n-1;n--;){var i=e[n];if(n==r||i!==o){var o=i;Pu(i)?dw.call(t,i,1):fC(t,i)}}return t}var pw=Xh((function(t,e){var n=null==t?0:t.length,r=Wh(t,e);return fw(t,Vl(e,(function(t){return Pu(t,n)?+t:t})).sort(wC)),r})),vw=pw,gw=Math.floor,yw=Math.random;function mw(t,e){return t+gw(yw()*(e-t+1))}var Cw=parseFloat,ww=Math.min,xw=Math.random;var Sw=Math.ceil,bw=Math.max;function _w(t){return function(e,n,r){return r&&"number"!=typeof r&&Lc(e,n,r)&&(n=r=void 0),e=fs(e),void 0===n?(n=e,e=0):n=fs(n),function(t,e,n,r){for(var i=-1,o=bw(Sw((e-t)/(n||1)),0),a=Array(o);o--;)a[r?o:++i]=t,t+=n;return a}(e,n,r=void 0===r?e<n?1:-1:fs(r),t)}}var Lw=_w(),Ew=_w(!0),Tw=Xh((function(t,e){return hc(t,256,void 0,void 0,void 0,e)})),Ow=Tw;function Iw(t,e,n,r,i){return i(t,(function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)})),n}function Rw(t,e,n){var r=Xl(t)?kd:Iw,i=arguments.length<3;return r(t,Gv(e),n,i,$v)}function Mw(t,e,n,r){var i=null==t?0:t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n}var Aw=Array.prototype.reverse;function Bw(t){return null==t?t:Aw.call(t)}var Dw=Cf("round");function kw(t){var e=t.length;return e?t[mw(0,e-1)]:void 0}function Nw(t){return kw(Fy(t))}function Pw(t,e){var n=-1,r=t.length,i=r-1;for(e=void 0===e?r:e;++n<e;){var o=mw(n,i),a=t[o];t[o]=t[n],t[n]=a}return t.length=e,t}function zw(t,e){return Pw(iu(t),_f(e,0,t.length))}function Hw(t,e){var n=Fy(t);return Pw(n,_f(e,0,n.length))}function Fw(t,e,n){return null==t?t:yC(t,e,n)}function Ww(t){return Pw(iu(t))}function Gw(t){return Pw(Fy(t))}function jw(t){if(null==t)return 0;if(_c(t))return zy(t)?XC(t):t.length;var e=rp(t);return"[object Map]"==e||"[object Set]"==e?t.size:Jc(t).length}var Uw=pf((function(t,e,n){return t+(n?"_":"")+e.toLowerCase()})),Yw=Uw;function Vw(t,e){var n;return $v(t,(function(t,r,i){return!(n=e(t,r,i))})),!!n}function Xw(t,e,n){var r=Xl(t)?$p:Vw;return n&&Lc(t,e,n)&&(e=void 0),r(t,Gv(e))}var qw=xc((function(t,e){if(null==t)return[];var n=e.length;return n>1&&Lc(t,e[0],e[1])?e=[]:n>2&&Lc(e[0],e[1],e[2])&&(e=[e[0]]),xC(t,Yh(e,1),[])})),Kw=4294967294,$w=Math.floor,Zw=Math.min;function Qw(t,e,n,r){var i=0,o=null==t?0:t.length;if(0===o)return 0;for(var a=(e=n(e))!=e,l=null===e,s=jl(e),u=void 0===e;i<o;){var c=$w((i+o)/2),h=n(t[c]),d=void 0!==h,f=null===h,p=h==h,v=jl(h);if(a)var g=r||p;else g=u?p&&(r||d):l?p&&d&&(r||!f):s?p&&d&&!f&&(r||!v):!f&&!v&&(r?h<=e:h<e);g?i=c+1:o=c}return Zw(o,Kw)}var Jw=2147483647;function tx(t,e,n){var r=0,i=null==t?r:t.length;if("number"==typeof e&&e==e&&i<=Jw){for(;r<i;){var o=r+i>>>1,a=t[o];null!==a&&!jl(a)&&(n?a<=e:a<e)?r=o+1:i=o}return i}return Qw(t,e,vs,n)}function ex(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var a=t[n],l=e?e(a):a;if(!n||!vc(l,s)){var s=l;o[i++]=0===a?0:a}}return o}function nx(t,e,n){return n&&"number"!=typeof n&&Lc(t,e,n)&&(e=n=void 0),(n=void 0===n?4294967295:n>>>0)?(t=kh(t))&&("string"==typeof e||null!=e&&!Im(e))&&!(e=Zl(e))&&md(t)?gd(Md(t),0,n):t.split(e,n):[]}var rx=Math.max;var ix=pf((function(t,e,n){return t+(n?" ":"")+Bd(e)})),ox=ix;function ax(){return!0}var lx=Ql((function(t,e){return t-e}),0);function sx(t,e){return t&&t.length?$m(t,Gv(e)):0}var ux=Object.prototype,cx=ux.hasOwnProperty;function hx(t,e,n,r){return void 0===t||vc(t,ux[n])&&!cx.call(r,n)?e:t}var dx={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"};function fx(t){return"\\"+dx[t]}var px=/<%=([\s\S]+?)%>/g,vx={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:px,variable:"",imports:{_:{escape:$g}}},gx=/\b__p \+= '';/g,yx=/\b(__p \+=) '' \+/g,mx=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Cx=/[()=,{}\[\]\/\s]/,wx=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,xx=/($^)/,Sx=/['\n\r\u2028\u2029\\]/g,bx=Object.prototype.hasOwnProperty;function _x(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new TypeError("Expected a function");return is(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),sg(t,e,{leading:r,maxWait:e,trailing:i})}function Lx(t,e){return e(t)}var Ex=4294967295,Tx=Math.min;function Ox(t,e){var n=t;return n instanceof $s&&(n=n.value()),kd(e,(function(t,e){return e.func.apply(e.thisArg,Gh([t],e.args))}),n)}function Ix(){return Ox(this.__wrapped__,this.__actions__)}var Rx=9007199254740991;function Mx(t){return kh(t).toUpperCase()}function Ax(t,e){for(var n=t.length;n--&&bu(e,t[n],0)>-1;);return n}function Bx(t,e){for(var n=-1,r=t.length;++n<r&&bu(e,t[n],0)>-1;);return n}var Dx=/^\s+/;var kx=/\w*$/;var Nx=Nd({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),Px=/&(?:amp|lt|gt|quot|#39);/g,zx=RegExp(Px.source);var Hx=Yf&&1/nv(new Yf([,-0]))[1]==1/0?function(t){return new Yf(t)}:Zs,Fx=200;function Wx(t,e,n){var r=-1,i=_u,o=t.length,a=!0,l=[],s=l;if(n)a=!1,i=Tg;else if(o>=Fx){var u=e?null:Hx(t);if(u)return nv(u);a=!1,i=Zp,s=new Kp}else s=e?[]:l;t:for(;++r<o;){var c=t[r],h=e?e(c):c;if(c=n||0!==c?c:0,a&&h==h){for(var d=s.length;d--;)if(s[d]===h)continue t;e&&s.push(h),l.push(c)}else i(s,h,n)||(s!==l&&s.push(h),l.push(c))}return l}var Gx=xc((function(t){return Wx(Yh(t,1,pg,!0))})),jx=xc((function(t){var e=Mg(t);return pg(e)&&(e=void 0),Wx(Yh(t,1,pg,!0),Gv(e))})),Ux=xc((function(t){var e=Mg(t);return e="function"==typeof e?e:void 0,Wx(Yh(t,1,pg,!0),void 0,e)}));function Yx(t){return t&&t.length?Wx(t):[]}var Vx=0;function Xx(t,e){return null==t||fC(t,e)}var qx=Math.max;function Kx(t){if(!t||!t.length)return[];var e=0;return t=Bf(t,(function(t){if(pg(t))return e=qx(t.length,e),!0})),Ic(e,(function(e){return Vl(t,Fv(e))}))}function $x(t,e){if(!t||!t.length)return[];var n=Kx(t);return null==e?n:Vl(n,(function(t){return js(e,void 0,t)}))}function Zx(t,e,n,r){return yC(t,e,n(Hh(t,e)),r)}var Qx=pf((function(t,e,n){return t+(n?" ":"")+e.toUpperCase()})),Jx=Qx;var tS=xc((function(t,e){return pg(t)?Ig(t,e):[]}));var eS=Xh((function(t){var e=t.length,n=e?t[0]:0,r=this.__wrapped__,i=function(e){return Wh(e,t)};return!(e>1||this.__actions__.length)&&r instanceof $s&&Pu(n)?((r=r.slice(n,+n+(e?1:0))).__actions__.push({func:Lx,args:[i],thisArg:void 0}),new ru(r,this.__chain__).thru((function(t){return e&&!t.length&&t.push(void 0),t}))):this.thru(i)}));function nS(t,e,n){var r=t.length;if(r<2)return r?Wx(t[0]):[];for(var i=-1,o=Array(r);++i<r;)for(var a=t[i],l=-1;++l<r;)l!=i&&(o[i]=Ig(o[i]||a,t[l],e,n));return Wx(Yh(o,1),e,n)}var rS=xc((function(t){return nS(Bf(t,pg))})),iS=xc((function(t){var e=Mg(t);return pg(e)&&(e=void 0),nS(Bf(t,pg),Gv(e))})),oS=xc((function(t){var e=Mg(t);return e="function"==typeof e?e:void 0,nS(Bf(t,pg),void 0,e)})),aS=xc(Kx);function lS(t,e,n){for(var r=-1,i=t.length,o=e.length,a={};++r<i;){var l=r<o?e[r]:void 0;n(a,t[r],l)}return a}var sS=xc((function(t){var e=t.length,n=e>1?t[e-1]:void 0;return n="function"==typeof n?(t.pop(),n):void 0,$x(t,n)})),uS={chunk:function(t,e,n){e=(n?Lc(t,e,n):void 0===e)?1:bf(ps(e),0);var r=null==t?0:t.length;if(!r||e<1)return[];for(var i=0,o=0,a=Array(Sf(r/e));i<r;)a[o++]=vd(t,i,i+=e);return a},compact:Xp,concat:qp,difference:Rg,differenceBy:Ag,differenceWith:Bg,drop:function(t,e,n){var r=null==t?0:t.length;return r?vd(t,(e=n||void 0===e?1:ps(e))<0?0:e,r):[]},dropRight:function(t,e,n){var r=null==t?0:t.length;return r?vd(t,0,(e=r-(e=n||void 0===e?1:ps(e)))<0?0:e):[]},dropRightWhile:function(t,e){return t&&t.length?kg(t,Gv(e),!0,!0):[]},dropWhile:function(t,e){return t&&t.length?kg(t,Gv(e),!0):[]},fill:function(t,e,n,r){var i=null==t?0:t.length;return i?(n&&"number"!=typeof n&&Lc(t,e,n)&&(n=0,r=i),function(t,e,n,r){var i=t.length;for((n=ps(n))<0&&(n=-n>i?0:i+n),(r=void 0===r||r>i?i:ps(r))<0&&(r+=i),r=n>r?0:ry(r);n<r;)t[n++]=e;return t}(t,e,n,r)):[]},findIndex:sy,findLastIndex:fy,first:vy,flatten:Vh,flattenDeep:function(t){return(null==t?0:t.length)?Yh(t,Infinity):[]},flattenDepth:function(t,e){return(null==t?0:t.length)?Yh(t,e=void 0===e?1:ps(e)):[]},fromPairs:function(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var i=t[e];r[i[0]]=i[1]}return r},head:vy,indexOf:Uy,initial:function(t){return(null==t?0:t.length)?vd(t,0,-1):[]},intersection:qy,intersectionBy:Ky,intersectionWith:$y,join:function(t,e){return null==t?"":Am.call(t,e)},last:Mg,lastIndexOf:function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=r;return void 0!==n&&(i=(i=ps(n))<0?Pm(r+i,0):zm(i,r-1)),e==e?function(t,e,n){for(var r=n+1;r--;)if(t[r]===e)return r;return r}(t,e,i):xu(t,Su,i,!0)},nth:function(t,e){return t&&t.length?dC(t,ps(e)):void 0},pull:hw,pullAll:cw,pullAllBy:function(t,e,n){return t&&t.length&&e&&e.length?uw(t,e,Gv(n)):t},pullAllWith:function(t,e,n){return t&&t.length&&e&&e.length?uw(t,e,void 0,n):t},pullAt:vw,remove:function(t,e){var n=[];if(!t||!t.length)return n;var r=-1,i=[],o=t.length;for(e=Gv(e);++r<o;){var a=t[r];e(a,r,t)&&(n.push(a),i.push(r))}return fw(t,i),n},reverse:Bw,slice:function(t,e,n){var r=null==t?0:t.length;return r?(n&&"number"!=typeof n&&Lc(t,e,n)?(e=0,n=r):(e=null==e?0:ps(e),n=void 0===n?r:ps(n)),vd(t,e,n)):[]},sortedIndex:function(t,e){return tx(t,e)},sortedIndexBy:function(t,e,n){return Qw(t,e,Gv(n))},sortedIndexOf:function(t,e){var n=null==t?0:t.length;if(n){var r=tx(t,e);if(r<n&&vc(t[r],e))return r}return-1},sortedLastIndex:function(t,e){return tx(t,e,!0)},sortedLastIndexBy:function(t,e,n){return Qw(t,e,Gv(n),!0)},sortedLastIndexOf:function(t,e){if(null==t?0:t.length){var n=tx(t,e,!0)-1;if(vc(t[n],e))return n}return-1},sortedUniq:function(t){return t&&t.length?ex(t):[]},sortedUniqBy:function(t,e){return t&&t.length?ex(t,Gv(e)):[]},tail:function(t){var e=null==t?0:t.length;return e?vd(t,1,e):[]},take:function(t,e,n){return t&&t.length?vd(t,0,(e=n||void 0===e?1:ps(e))<0?0:e):[]},takeRight:function(t,e,n){var r=null==t?0:t.length;return r?vd(t,(e=r-(e=n||void 0===e?1:ps(e)))<0?0:e,r):[]},takeRightWhile:function(t,e){return t&&t.length?kg(t,Gv(e),!1,!0):[]},takeWhile:function(t,e){return t&&t.length?kg(t,Gv(e)):[]},union:Gx,unionBy:jx,unionWith:Ux,uniq:Yx,uniqBy:function(t,e){return t&&t.length?Wx(t,Gv(e)):[]},uniqWith:function(t,e){return e="function"==typeof e?e:void 0,t&&t.length?Wx(t,void 0,e):[]},unzip:Kx,unzipWith:$x,without:tS,xor:rS,xorBy:iS,xorWith:oS,zip:aS,zipObject:function(t,e){return lS(t||[],e||[],yc)},zipObjectDeep:function(t,e){return lS(t||[],e||[],yC)},zipWith:sS},cS={countBy:eg,each:Pg,eachRight:Gg,every:ey,filter:oy,find:uy,findLast:py,flatMap:function(t,e){return Yh(yy(t,e),1)},flatMapDeep:function(t,e){return Yh(yy(t,e),Infinity)},flatMapDepth:function(t,e,n){return n=void 0===n?1:ps(n),Yh(yy(t,e),n)},forEach:Pg,forEachRight:Gg,groupBy:Ey,includes:Gy,invokeMap:cm,keyBy:Nm,map:yy,orderBy:SC,partition:ow,reduce:Rw,reduceRight:function(t,e,n){var r=Xl(t)?Mw:Iw,i=arguments.length<3;return r(t,Gv(e),n,i,Wg)},reject:function(t,e){return(Xl(t)?Bf:iy)(t,lC(Gv(e)))},sample:function(t){return(Xl(t)?kw:Nw)(t)},sampleSize:function(t,e,n){return e=(n?Lc(t,e,n):void 0===e)?1:ps(e),(Xl(t)?zw:Hw)(t,e)},shuffle:function(t){return(Xl(t)?Ww:Gw)(t)},size:jw,some:Xw,sortBy:qw},hS={now:ig},dS={after:function(t,e){if("function"!=typeof e)throw new TypeError("Expected a function");return t=ps(t),function(){if(--t<1)return e.apply(this,arguments)}},ary:fc,before:ud,bind:hd,bindKey:pd,curry:ng,curryRight:rg,debounce:sg,defer:_g,delay:Eg,flip:function(t){return hc(t,512)},memoize:Th,negate:lC,once:function(t){return ud(2,t)},overArgs:OC,partial:ew,partialRight:rw,rearg:Ow,rest:function(t,e){if("function"!=typeof t)throw new TypeError("Expected a function");return xc(t,e=void 0===e?e:ps(e))},spread:function(t,e){if("function"!=typeof t)throw new TypeError("Expected a function");return e=null==e?0:rx(ps(e),0),xc((function(n){var r=n[e],i=gd(n,0,e);return r&&Gh(i,r),js(t,this,i)}))},throttle:_x,unary:function(t){return fc(t,1)},wrap:function(t,e){return ew(Ng(e),t)}},fS={castArray:function(){if(!arguments.length)return[];var t=arguments[0];return Xl(t)?t:[t]},clone:Yp,cloneDeep:Vp,cloneDeepWith:function(t,e){return Up(t,5,e="function"==typeof e?e:void 0)},cloneWith:function(t,e){return Up(t,4,e="function"==typeof e?e:void 0)},conformsTo:function(t,e){return null==e||Uv(t,e,th(e))},eq:vc,gt:Iy,gte:Ry,isArguments:Dc,isArray:Xl,isArrayBuffer:dm,isArrayLike:_c,isArrayLikeObject:pg,isBoolean:fm,isBuffer:Hc,isDate:vm,isElement:function(t){return Wl(t)&&1===t.nodeType&&!nd(t)},isEmpty:Cm,isEqual:wm,isEqualWith:function(t,e,n){var r=(n="function"==typeof n?n:void 0)?n(t,e):void 0;return void 0===r?Ev(t,e,void 0,n):!!r},isError:od,isFinite:function(t){return"number"==typeof t&&xm(t)},isFunction:ws,isInteger:Sm,isLength:bc,isMap:Bp,isMatch:function(t,e){return t===e||Iv(t,e,Mv(e))},isMatchWith:function(t,e,n){return n="function"==typeof n?n:void 0,Iv(t,e,Mv(e),n)},isNaN:Lm,isNative:function(t){if(Em(t))throw new Error("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return As(t)},isNil:Tm,isNull:function(t){return null===t},isNumber:_m,isObject:is,isObjectLike:Wl,isPlainObject:nd,isRegExp:Im,isSafeInteger:function(t){return Sm(t)&&t>=-9007199254740991&&t<=Rm},isSet:kp,isString:zy,isSymbol:jl,isTypedArray:Xc,isUndefined:Mm,isWeakMap:function(t){return Wl(t)&&"[object WeakMap]"==rp(t)},isWeakSet:function(t){return Wl(t)&&"[object WeakSet]"==Fl(t)},lt:jm,lte:Um,toArray:hC,toFinite:fs,toInteger:ps,toLength:ry,toNumber:cs,toPlainObject:gg,toSafeInteger:function(t){return t?_f(ps(t),-9007199254740991,Rx):0===t?t:0},toString:kh},pS={add:Jl,ceil:wf,divide:Dg,floor:my,max:qm,maxBy:Km,mean:function(t){return Qm(t,vs)},meanBy:function(t,e){return Qm(t,Gv(e))},min:rC,minBy:function(t,e){return t&&t.length?Xm(t,Gv(e),Gm):void 0},multiply:oC,round:Dw,subtract:lx,sum:function(t){return t&&t.length?$m(t,vs):0},sumBy:sx},vS=Lf,gS=Ny,yS=function(t,e,n){if(n&&"boolean"!=typeof n&&Lc(t,e,n)&&(e=n=void 0),void 0===n&&("boolean"==typeof e?(n=e,e=void 0):"boolean"==typeof t&&(n=t,t=void 0)),void 0===t&&void 0===e?(t=0,e=1):(t=fs(t),void 0===e?(e=t,t=0):e=fs(e)),t>e){var r=t;t=e,e=r}if(n||t%1||e%1){var i=xw();return ww(t+i*(e-t+Cw("1e-"+((i+"").length-1))),e)}return mw(t,e)},mS={assign:rh,assignIn:sh,assignInWith:ch,assignWith:dh,at:qh,create:function(t,e){var n=Fs(t);return null==e?n:Tf(n,e)},defaults:dg,defaultsDeep:xg,entries:Yg,entriesIn:Vg,extend:sh,extendWith:ch,findKey:function(t,e){return cy(t,Gv(e),qv)},findLastKey:function(t,e){return cy(t,Gv(e),Fg)},forIn:Sy,forInRight:function(t,e){return null==t?t:Hg(t,Ng(e),ah)},forOwn:function(t,e){return t&&qv(t,Ng(e))},forOwnRight:function(t,e){return t&&Fg(t,Ng(e))},functions:function(t){return null==t?[]:by(t,th(t))},functionsIn:function(t){return null==t?[]:by(t,ah(t))},get:Fh,has:By,hasIn:Nv,invert:tm,invertBy:om,invoke:sm,keys:th,keysIn:ah,mapKeys:Ym,mapValues:function(t,e){var n={};return e=Gv(e),qv(t,(function(t,r,i){pc(n,r,e(t,r,i))})),n},merge:tC,mergeWith:wg,omit:gC,omitBy:function(t,e){return CC(t,lC(Gv(e)))},pick:aw,pickBy:CC,result:function(t,e,n){var r=-1,i=(e=Nh(e,t)).length;for(i||(i=1,t=void 0);++r<i;){var o=null==t?void 0:t[zh(e[r])];void 0===o&&(r=i,o=n),t=ws(o)?o.call(t):o}return t},set:Fw,setWith:function(t,e,n,r){return r="function"==typeof r?r:void 0,null==t?t:yC(t,e,n,r)},toPairs:Yg,toPairsIn:Vg,transform:function(t,e,n){var r=Xl(t),i=r||Hc(t)||Xc(t);if(e=Gv(e),null==n){var o=t&&t.constructor;n=i?r?new o:[]:is(t)&&ws(o)?Fs(Kh(t)):{}}return(i?wu:qv)(t,(function(t,r,i){return e(n,t,r,i)})),n},unset:Xx,update:function(t,e,n){return null==t?t:Zx(t,e,Ng(n))},updateWith:function(t,e,n,r){return r="function"==typeof r?r:void 0,null==t?t:Zx(t,e,Ng(n),r)},values:Fy,valuesIn:function(t){return null==t?[]:Hy(t,ah(t))}},CS={at:eS,chain:xf,commit:function(){return new ru(this.value(),this.__chain__)},lodash:lu,next:function(){void 0===this.__values__&&(this.__values__=hC(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?void 0:this.__values__[this.__index__++]}},plant:function(t){for(var e,n=this;n instanceof qs;){var r=ou(n);r.__index__=0,r.__values__=void 0,e?i.__wrapped__=r:e=r;var i=r;n=n.__wrapped__}return i.__wrapped__=t,e},reverse:function(){var t=this.__wrapped__;if(t instanceof $s){var e=t;return this.__actions__.length&&(e=new $s(this)),(e=e.reverse()).__actions__.push({func:Lx,args:[Bw],thisArg:void 0}),new ru(e,this.__chain__)}return this.thru(Bw)},tap:function(t,e){return e(t),t},thru:Lx,toIterator:function(){return this},toJSON:Ix,value:Ix,valueOf:Ix,wrapperChain:function(){return xf(this)}},wS={camelCase:gf,capitalize:Dd,deburr:Fd,endsWith:jg,escape:$g,escapeRegExp:function(t){return(t=kh(t))&&Qg.test(t)?t.replace(Zg,"\\$&"):t},kebabCase:Dm,lowerCase:Fm,lowerFirst:Wm,pad:function(t,e,n){t=kh(t);var r=(e=ps(e))?XC(t):0;if(!e||r>=e)return t;var i=(e-r)/2;return KC(ZC(i),n)+t+KC($C(i),n)},padEnd:function(t,e,n){t=kh(t);var r=(e=ps(e))?XC(t):0;return e&&r<e?t+KC(e-r,n):t},padStart:function(t,e,n){t=kh(t);var r=(e=ps(e))?XC(t):0;return e&&r<e?KC(e-r,n)+t:t},parseInt:function(t,e,n){return n||null==e?e=0:e&&(e=+e),JC(kh(t).replace(QC,""),e||0)},repeat:function(t,e,n){return e=(n?Lc(t,e,n):void 0===e)?1:ps(e),BC(kh(t),e)},replace:function(){var t=arguments,e=kh(t[0]);return t.length<3?e:e.replace(t[1],t[2])},snakeCase:Yw,split:nx,startCase:ox,startsWith:function(t,e,n){return t=kh(t),n=null==n?0:_f(ps(n),0,t.length),e=Zl(e),t.slice(n,n+e.length)==e},template:function(t,e,n){var r=vx.imports._.templateSettings||vx;n&&Lc(t,e,n)&&(e=void 0),t=kh(t),e=ch({},e,r,hx);var i,o,a=ch({},e.imports,r.imports,hx),l=th(a),s=Hy(a,l),u=0,c=e.interpolate||xx,h="__p += '",d=RegExp((e.escape||xx).source+"|"+c.source+"|"+(c===px?wx:xx).source+"|"+(e.evaluate||xx).source+"|$","g"),f=bx.call(e,"sourceURL")?"//# sourceURL="+(e.sourceURL+"").replace(/\s/g," ")+"\n":"";t.replace(d,(function(e,n,r,a,l,s){return r||(r=a),h+=t.slice(u,s).replace(Sx,fx),n&&(i=!0,h+="' +\n__e("+n+") +\n'"),l&&(o=!0,h+="';\n"+l+";\n__p += '"),r&&(h+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),u=s+e.length,e})),h+="';\n";var p=bx.call(e,"variable")&&e.variable;if(p){if(Cx.test(p))throw new Error("Invalid `variable` option passed into `_.template`")}else h="with (obj) {\n"+h+"\n}\n";h=(o?h.replace(gx,""):h).replace(yx,"$1").replace(mx,"$1;"),h="function("+(p||"obj")+") {\n"+(p?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var v=ld((function(){return Function(l,f+"return "+h).apply(void 0,s)}));if(v.source=h,od(v))throw v;return v},templateSettings:vx,toLower:function(t){return kh(t).toLowerCase()},toUpper:Mx,trim:function(t,e,n){if((t=kh(t))&&(n||void 0===e))return rs(t);if(!t||!(e=Zl(e)))return t;var r=Md(t),i=Md(e);return gd(r,Bx(r,i),Ax(r,i)+1).join("")},trimEnd:function(t,e,n){if((t=kh(t))&&(n||void 0===e))return t.slice(0,es(t)+1);if(!t||!(e=Zl(e)))return t;var r=Md(t);return gd(r,0,Ax(r,Md(e))+1).join("")},trimStart:function(t,e,n){if((t=kh(t))&&(n||void 0===e))return t.replace(Dx,"");if(!t||!(e=Zl(e)))return t;var r=Md(t);return gd(r,Bx(r,Md(e))).join("")},truncate:function(t,e){var n=30,r="...";if(is(e)){var i="separator"in e?e.separator:i;n="length"in e?ps(e.length):n,r="omission"in e?Zl(e.omission):r}var o=(t=kh(t)).length;if(md(t)){var a=Md(t);o=a.length}if(n>=o)return t;var l=n-XC(r);if(l<1)return r;var s=a?gd(a,0,l).join(""):t.slice(0,l);if(void 0===i)return s+r;if(a&&(l+=s.length-l),Im(i)){if(t.slice(l).search(i)){var u,c=s;for(i.global||(i=RegExp(i.source,kh(kx.exec(i))+"g")),i.lastIndex=0;u=i.exec(c);)var h=u.index;s=s.slice(0,void 0===h?l:h)}}else if(t.indexOf(Zl(i),l)!=l){var d=s.lastIndexOf(i);d>-1&&(s=s.slice(0,d))}return s+r},unescape:function(t){return(t=kh(t))&&zx.test(t)?t.replace(Px,Nx):t},upperCase:Jx,upperFirst:Bd,words:df},xS={attempt:ld,bindAll:dd,cond:jv,conforms:function(t){return function(t){var e=th(t);return function(n){return Uv(n,t,e)}}(Up(t,1))},constant:vu,defaultTo:function(t,e){return null==t||t!=t?e:t},flow:wy,flowRight:xy,identity:vs,iteratee:function(t){return Gv("function"==typeof t?t:Up(t,1))},matches:Vm,matchesProperty:function(t,e){return Hv(t,Up(e,1))},method:eC,methodOf:nC,mixin:iC,noop:Zs,nthArg:function(t){return t=ps(t),xc((function(e){return dC(e,t)}))},over:_C,overEvery:IC,overSome:RC,property:Wv,propertyOf:function(t){return function(e){return null==t?void 0:Hh(t,e)}},range:Lw,rangeRight:Ew,stubArray:Df,stubFalse:kc,stubObject:function(){return{}},stubString:function(){return""},stubTrue:ax,times:function(t,e){if((t=ps(t))<1||t>9007199254740991)return[];var n=Ex,r=Tx(t,Ex);e=Ng(e),t-=Ex;for(var i=Ic(r,e);++n<t;)e(n);return i},toPath:function(t){return Xl(t)?Vl(t,zh):jl(t)?[t]:iu(Dh(kh(t)))},uniqueId:function(t){var e=++Vx;return kh(t)+e}};var SS=Math.max,bS=Math.min;var _S=Math.min;
/**
 * @license
 * Lodash (Custom Build) <https://lodash.com/>
 * Build: `lodash modularize exports="es" -o ./`
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */
var LS,ES=4294967295,TS=Array.prototype,OS=Object.prototype.hasOwnProperty,IS=Ml?Ml.iterator:void 0,RS=Math.max,MS=Math.min,AS=function(t){return function(e,n,r){if(null==r){var i=is(n),o=i&&th(n),a=o&&o.length&&by(n,o);(a?a.length:i)||(r=n,n=e,e=this)}return t(e,n,r)}}(iC);lu.after=dS.after,lu.ary=dS.ary,lu.assign=mS.assign,lu.assignIn=mS.assignIn,lu.assignInWith=mS.assignInWith,lu.assignWith=mS.assignWith,lu.at=mS.at,lu.before=dS.before,lu.bind=dS.bind,lu.bindAll=xS.bindAll,lu.bindKey=dS.bindKey,lu.castArray=fS.castArray,lu.chain=CS.chain,lu.chunk=uS.chunk,lu.compact=uS.compact,lu.concat=uS.concat,lu.cond=xS.cond,lu.conforms=xS.conforms,lu.constant=xS.constant,lu.countBy=cS.countBy,lu.create=mS.create,lu.curry=dS.curry,lu.curryRight=dS.curryRight,lu.debounce=dS.debounce,lu.defaults=mS.defaults,lu.defaultsDeep=mS.defaultsDeep,lu.defer=dS.defer,lu.delay=dS.delay,lu.difference=uS.difference,lu.differenceBy=uS.differenceBy,lu.differenceWith=uS.differenceWith,lu.drop=uS.drop,lu.dropRight=uS.dropRight,lu.dropRightWhile=uS.dropRightWhile,lu.dropWhile=uS.dropWhile,lu.fill=uS.fill,lu.filter=cS.filter,lu.flatMap=cS.flatMap,lu.flatMapDeep=cS.flatMapDeep,lu.flatMapDepth=cS.flatMapDepth,lu.flatten=uS.flatten,lu.flattenDeep=uS.flattenDeep,lu.flattenDepth=uS.flattenDepth,lu.flip=dS.flip,lu.flow=xS.flow,lu.flowRight=xS.flowRight,lu.fromPairs=uS.fromPairs,lu.functions=mS.functions,lu.functionsIn=mS.functionsIn,lu.groupBy=cS.groupBy,lu.initial=uS.initial,lu.intersection=uS.intersection,lu.intersectionBy=uS.intersectionBy,lu.intersectionWith=uS.intersectionWith,lu.invert=mS.invert,lu.invertBy=mS.invertBy,lu.invokeMap=cS.invokeMap,lu.iteratee=xS.iteratee,lu.keyBy=cS.keyBy,lu.keys=th,lu.keysIn=mS.keysIn,lu.map=cS.map,lu.mapKeys=mS.mapKeys,lu.mapValues=mS.mapValues,lu.matches=xS.matches,lu.matchesProperty=xS.matchesProperty,lu.memoize=dS.memoize,lu.merge=mS.merge,lu.mergeWith=mS.mergeWith,lu.method=xS.method,lu.methodOf=xS.methodOf,lu.mixin=AS,lu.negate=lC,lu.nthArg=xS.nthArg,lu.omit=mS.omit,lu.omitBy=mS.omitBy,lu.once=dS.once,lu.orderBy=cS.orderBy,lu.over=xS.over,lu.overArgs=dS.overArgs,lu.overEvery=xS.overEvery,lu.overSome=xS.overSome,lu.partial=dS.partial,lu.partialRight=dS.partialRight,lu.partition=cS.partition,lu.pick=mS.pick,lu.pickBy=mS.pickBy,lu.property=xS.property,lu.propertyOf=xS.propertyOf,lu.pull=uS.pull,lu.pullAll=uS.pullAll,lu.pullAllBy=uS.pullAllBy,lu.pullAllWith=uS.pullAllWith,lu.pullAt=uS.pullAt,lu.range=xS.range,lu.rangeRight=xS.rangeRight,lu.rearg=dS.rearg,lu.reject=cS.reject,lu.remove=uS.remove,lu.rest=dS.rest,lu.reverse=uS.reverse,lu.sampleSize=cS.sampleSize,lu.set=mS.set,lu.setWith=mS.setWith,lu.shuffle=cS.shuffle,lu.slice=uS.slice,lu.sortBy=cS.sortBy,lu.sortedUniq=uS.sortedUniq,lu.sortedUniqBy=uS.sortedUniqBy,lu.split=wS.split,lu.spread=dS.spread,lu.tail=uS.tail,lu.take=uS.take,lu.takeRight=uS.takeRight,lu.takeRightWhile=uS.takeRightWhile,lu.takeWhile=uS.takeWhile,lu.tap=CS.tap,lu.throttle=dS.throttle,lu.thru=Lx,lu.toArray=fS.toArray,lu.toPairs=mS.toPairs,lu.toPairsIn=mS.toPairsIn,lu.toPath=xS.toPath,lu.toPlainObject=fS.toPlainObject,lu.transform=mS.transform,lu.unary=dS.unary,lu.union=uS.union,lu.unionBy=uS.unionBy,lu.unionWith=uS.unionWith,lu.uniq=uS.uniq,lu.uniqBy=uS.uniqBy,lu.uniqWith=uS.uniqWith,lu.unset=mS.unset,lu.unzip=uS.unzip,lu.unzipWith=uS.unzipWith,lu.update=mS.update,lu.updateWith=mS.updateWith,lu.values=mS.values,lu.valuesIn=mS.valuesIn,lu.without=uS.without,lu.words=wS.words,lu.wrap=dS.wrap,lu.xor=uS.xor,lu.xorBy=uS.xorBy,lu.xorWith=uS.xorWith,lu.zip=uS.zip,lu.zipObject=uS.zipObject,lu.zipObjectDeep=uS.zipObjectDeep,lu.zipWith=uS.zipWith,lu.entries=mS.toPairs,lu.entriesIn=mS.toPairsIn,lu.extend=mS.assignIn,lu.extendWith=mS.assignInWith,AS(lu,lu),lu.add=pS.add,lu.attempt=xS.attempt,lu.camelCase=wS.camelCase,lu.capitalize=wS.capitalize,lu.ceil=pS.ceil,lu.clamp=vS,lu.clone=fS.clone,lu.cloneDeep=fS.cloneDeep,lu.cloneDeepWith=fS.cloneDeepWith,lu.cloneWith=fS.cloneWith,lu.conformsTo=fS.conformsTo,lu.deburr=wS.deburr,lu.defaultTo=xS.defaultTo,lu.divide=pS.divide,lu.endsWith=wS.endsWith,lu.eq=fS.eq,lu.escape=wS.escape,lu.escapeRegExp=wS.escapeRegExp,lu.every=cS.every,lu.find=cS.find,lu.findIndex=uS.findIndex,lu.findKey=mS.findKey,lu.findLast=cS.findLast,lu.findLastIndex=uS.findLastIndex,lu.findLastKey=mS.findLastKey,lu.floor=pS.floor,lu.forEach=cS.forEach,lu.forEachRight=cS.forEachRight,lu.forIn=mS.forIn,lu.forInRight=mS.forInRight,lu.forOwn=mS.forOwn,lu.forOwnRight=mS.forOwnRight,lu.get=mS.get,lu.gt=fS.gt,lu.gte=fS.gte,lu.has=mS.has,lu.hasIn=mS.hasIn,lu.head=uS.head,lu.identity=vs,lu.includes=cS.includes,lu.indexOf=uS.indexOf,lu.inRange=gS,lu.invoke=mS.invoke,lu.isArguments=fS.isArguments,lu.isArray=Xl,lu.isArrayBuffer=fS.isArrayBuffer,lu.isArrayLike=fS.isArrayLike,lu.isArrayLikeObject=fS.isArrayLikeObject,lu.isBoolean=fS.isBoolean,lu.isBuffer=fS.isBuffer,lu.isDate=fS.isDate,lu.isElement=fS.isElement,lu.isEmpty=fS.isEmpty,lu.isEqual=fS.isEqual,lu.isEqualWith=fS.isEqualWith,lu.isError=fS.isError,lu.isFinite=fS.isFinite,lu.isFunction=fS.isFunction,lu.isInteger=fS.isInteger,lu.isLength=fS.isLength,lu.isMap=fS.isMap,lu.isMatch=fS.isMatch,lu.isMatchWith=fS.isMatchWith,lu.isNaN=fS.isNaN,lu.isNative=fS.isNative,lu.isNil=fS.isNil,lu.isNull=fS.isNull,lu.isNumber=fS.isNumber,lu.isObject=is,lu.isObjectLike=fS.isObjectLike,lu.isPlainObject=fS.isPlainObject,lu.isRegExp=fS.isRegExp,lu.isSafeInteger=fS.isSafeInteger,lu.isSet=fS.isSet,lu.isString=fS.isString,lu.isSymbol=fS.isSymbol,lu.isTypedArray=fS.isTypedArray,lu.isUndefined=fS.isUndefined,lu.isWeakMap=fS.isWeakMap,lu.isWeakSet=fS.isWeakSet,lu.join=uS.join,lu.kebabCase=wS.kebabCase,lu.last=Mg,lu.lastIndexOf=uS.lastIndexOf,lu.lowerCase=wS.lowerCase,lu.lowerFirst=wS.lowerFirst,lu.lt=fS.lt,lu.lte=fS.lte,lu.max=pS.max,lu.maxBy=pS.maxBy,lu.mean=pS.mean,lu.meanBy=pS.meanBy,lu.min=pS.min,lu.minBy=pS.minBy,lu.stubArray=xS.stubArray,lu.stubFalse=xS.stubFalse,lu.stubObject=xS.stubObject,lu.stubString=xS.stubString,lu.stubTrue=xS.stubTrue,lu.multiply=pS.multiply,lu.nth=uS.nth,lu.noop=xS.noop,lu.now=hS.now,lu.pad=wS.pad,lu.padEnd=wS.padEnd,lu.padStart=wS.padStart,lu.parseInt=wS.parseInt,lu.random=yS,lu.reduce=cS.reduce,lu.reduceRight=cS.reduceRight,lu.repeat=wS.repeat,lu.replace=wS.replace,lu.result=mS.result,lu.round=pS.round,lu.sample=cS.sample,lu.size=cS.size,lu.snakeCase=wS.snakeCase,lu.some=cS.some,lu.sortedIndex=uS.sortedIndex,lu.sortedIndexBy=uS.sortedIndexBy,lu.sortedIndexOf=uS.sortedIndexOf,lu.sortedLastIndex=uS.sortedLastIndex,lu.sortedLastIndexBy=uS.sortedLastIndexBy,lu.sortedLastIndexOf=uS.sortedLastIndexOf,lu.startCase=wS.startCase,lu.startsWith=wS.startsWith,lu.subtract=pS.subtract,lu.sum=pS.sum,lu.sumBy=pS.sumBy,lu.template=wS.template,lu.times=xS.times,lu.toFinite=fS.toFinite,lu.toInteger=ps,lu.toLength=fS.toLength,lu.toLower=wS.toLower,lu.toNumber=fS.toNumber,lu.toSafeInteger=fS.toSafeInteger,lu.toString=fS.toString,lu.toUpper=wS.toUpper,lu.trim=wS.trim,lu.trimEnd=wS.trimEnd,lu.trimStart=wS.trimStart,lu.truncate=wS.truncate,lu.unescape=wS.unescape,lu.uniqueId=xS.uniqueId,lu.upperCase=wS.upperCase,lu.upperFirst=wS.upperFirst,lu.each=cS.forEach,lu.eachRight=cS.forEachRight,lu.first=uS.head,AS(lu,(LS={},qv(lu,(function(t,e){OS.call(lu.prototype,e)||(LS[e]=t)})),LS),{chain:!1}),lu.VERSION="4.17.21",(lu.templateSettings=wS.templateSettings).imports._=lu,wu(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(t){lu[t].placeholder=lu})),wu(["drop","take"],(function(t,e){$s.prototype[t]=function(n){n=void 0===n?1:RS(ps(n),0);var r=this.__filtered__&&!e?new $s(this):this.clone();return r.__filtered__?r.__takeCount__=MS(n,r.__takeCount__):r.__views__.push({size:MS(n,ES),type:t+(r.__dir__<0?"Right":"")}),r},$s.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}})),wu(["filter","map","takeWhile"],(function(t,e){var n=e+1,r=1==n||3==n;$s.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:Gv(t),type:n}),e.__filtered__=e.__filtered__||r,e}})),wu(["head","last"],(function(t,e){var n="take"+(e?"Right":"");$s.prototype[t]=function(){return this[n](1).value()[0]}})),wu(["initial","tail"],(function(t,e){var n="drop"+(e?"":"Right");$s.prototype[t]=function(){return this.__filtered__?new $s(this):this[n](1)}})),$s.prototype.compact=function(){return this.filter(vs)},$s.prototype.find=function(t){return this.filter(t).head()},$s.prototype.findLast=function(t){return this.reverse().find(t)},$s.prototype.invokeMap=xc((function(t,e){return"function"==typeof t?new $s(this):this.map((function(n){return lm(n,t,e)}))})),$s.prototype.reject=function(t){return this.filter(lC(Gv(t)))},$s.prototype.slice=function(t,e){t=ps(t);var n=this;return n.__filtered__&&(t>0||e<0)?new $s(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),void 0!==e&&(n=(e=ps(e))<0?n.dropRight(-e):n.take(e-t)),n)},$s.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},$s.prototype.toArray=function(){return this.take(ES)},qv($s.prototype,(function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),r=/^(?:head|last)$/.test(e),i=lu[r?"take"+("last"==e?"Right":""):e],o=r||/^find/.test(e);i&&(lu.prototype[e]=function(){var e=this.__wrapped__,a=r?[1]:arguments,l=e instanceof $s,s=a[0],u=l||Xl(e),c=function(t){var e=i.apply(lu,Gh([t],a));return r&&h?e[0]:e};u&&n&&"function"==typeof s&&1!=s.length&&(l=u=!1);var h=this.__chain__,d=!!this.__actions__.length,f=o&&!h,p=l&&!d;if(!o&&u){e=p?e:new $s(this);var v=t.apply(e,a);return v.__actions__.push({func:Lx,args:[c],thisArg:void 0}),new ru(v,h)}return f&&p?t.apply(this,a):(v=this.thru(c),f?r?v.value()[0]:v.value():v)})})),wu(["pop","push","shift","sort","splice","unshift"],(function(t){var e=TS[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);lu.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var i=this.value();return e.apply(Xl(i)?i:[],t)}return this[n]((function(n){return e.apply(Xl(n)?n:[],t)}))}})),qv($s.prototype,(function(t,e){var n=lu[e];if(n){var r=n.name+"";OS.call(tu,r)||(tu[r]=[]),tu[r].push({name:e,func:n})}})),tu[Xu(void 0,2).name]=[{name:"wrapper",func:void 0}],$s.prototype.clone=function(){var t=new $s(this.__wrapped__);return t.__actions__=iu(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=iu(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=iu(this.__views__),t},$s.prototype.reverse=function(){if(this.__filtered__){var t=new $s(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},$s.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=Xl(t),r=e<0,i=n?t.length:0,o=function(t,e,n){for(var r=-1,i=n.length;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=bS(e,t+a);break;case"takeRight":t=SS(t,e-a)}}return{start:t,end:e}}(0,i,this.__views__),a=o.start,l=o.end,s=l-a,u=r?l:a-1,c=this.__iteratees__,h=c.length,d=0,f=_S(s,this.__takeCount__);if(!n||!r&&i==s&&f==s)return Ox(t,this.__actions__);var p=[];t:for(;s--&&d<f;){for(var v=-1,g=t[u+=e];++v<h;){var y=c[v],m=y.iteratee,C=y.type,w=m(g);if(2==C)g=w;else if(!w){if(1==C)continue t;break t}}p[d++]=g}return p},lu.prototype.at=CS.at,lu.prototype.chain=CS.wrapperChain,lu.prototype.commit=CS.commit,lu.prototype.next=CS.next,lu.prototype.plant=CS.plant,lu.prototype.reverse=CS.reverse,lu.prototype.toJSON=lu.prototype.valueOf=lu.prototype.value=CS.value,lu.prototype.first=lu.prototype.head,IS&&(lu.prototype[IS]=CS.toIterator);var BS,DS={exports:{}};BS=DS,function(t){var e=/^\s+/,n=/\s+$/,r=0,i=t.round,o=t.min,a=t.max,l=t.random;function s(l,u){if(u=u||{},(l=l||"")instanceof s)return l;if(!(this instanceof s))return new s(l,u);var c=function(r){var i,l,s,u={r:0,g:0,b:0},c=1,h=null,d=null,f=null,p=!1,v=!1;return"string"==typeof r&&(r=function(t){t=t.replace(e,"").replace(n,"").toLowerCase();var r,i=!1;if(E[t])t=E[t],i=!0;else if("transparent"==t)return{r:0,g:0,b:0,a:0,format:"name"};return(r=H.rgb.exec(t))?{r:r[1],g:r[2],b:r[3]}:(r=H.rgba.exec(t))?{r:r[1],g:r[2],b:r[3],a:r[4]}:(r=H.hsl.exec(t))?{h:r[1],s:r[2],l:r[3]}:(r=H.hsla.exec(t))?{h:r[1],s:r[2],l:r[3],a:r[4]}:(r=H.hsv.exec(t))?{h:r[1],s:r[2],v:r[3]}:(r=H.hsva.exec(t))?{h:r[1],s:r[2],v:r[3],a:r[4]}:(r=H.hex8.exec(t))?{r:M(r[1]),g:M(r[2]),b:M(r[3]),a:k(r[4]),format:i?"name":"hex8"}:(r=H.hex6.exec(t))?{r:M(r[1]),g:M(r[2]),b:M(r[3]),format:i?"name":"hex"}:(r=H.hex4.exec(t))?{r:M(r[1]+""+r[1]),g:M(r[2]+""+r[2]),b:M(r[3]+""+r[3]),a:k(r[4]+""+r[4]),format:i?"name":"hex8"}:!!(r=H.hex3.exec(t))&&{r:M(r[1]+""+r[1]),g:M(r[2]+""+r[2]),b:M(r[3]+""+r[3]),format:i?"name":"hex"}}(r)),"object"==typeof r&&(F(r.r)&&F(r.g)&&F(r.b)?(i=r.r,l=r.g,s=r.b,u={r:255*I(i,255),g:255*I(l,255),b:255*I(s,255)},p=!0,v="%"===String(r.r).substr(-1)?"prgb":"rgb"):F(r.h)&&F(r.s)&&F(r.v)?(h=B(r.s),d=B(r.v),u=function(e,n,r){e=6*I(e,360),n=I(n,100),r=I(r,100);var i=t.floor(e),o=e-i,a=r*(1-n),l=r*(1-o*n),s=r*(1-(1-o)*n),u=i%6,c=[r,l,a,a,s,r][u],h=[s,r,r,l,a,a][u],d=[a,a,s,r,r,l][u];return{r:255*c,g:255*h,b:255*d}}(r.h,h,d),p=!0,v="hsv"):F(r.h)&&F(r.s)&&F(r.l)&&(h=B(r.s),f=B(r.l),u=function(t,e,n){var r,i,o;function a(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}if(t=I(t,360),e=I(e,100),n=I(n,100),0===e)r=i=o=n;else{var l=n<.5?n*(1+e):n+e-n*e,s=2*n-l;r=a(s,l,t+1/3),i=a(s,l,t),o=a(s,l,t-1/3)}return{r:255*r,g:255*i,b:255*o}}(r.h,h,f),p=!0,v="hsl"),r.hasOwnProperty("a")&&(c=r.a)),c=O(c),{ok:p,format:r.format||v,r:o(255,a(u.r,0)),g:o(255,a(u.g,0)),b:o(255,a(u.b,0)),a:c}}(l);this._originalInput=l,this._r=c.r,this._g=c.g,this._b=c.b,this._a=c.a,this._roundA=i(100*this._a)/100,this._format=u.format||c.format,this._gradientType=u.gradientType,this._r<1&&(this._r=i(this._r)),this._g<1&&(this._g=i(this._g)),this._b<1&&(this._b=i(this._b)),this._ok=c.ok,this._tc_id=r++}function u(t,e,n){t=I(t,255),e=I(e,255),n=I(n,255);var r,i,l=a(t,e,n),s=o(t,e,n),u=(l+s)/2;if(l==s)r=i=0;else{var c=l-s;switch(i=u>.5?c/(2-l-s):c/(l+s),l){case t:r=(e-n)/c+(e<n?6:0);break;case e:r=(n-t)/c+2;break;case n:r=(t-e)/c+4}r/=6}return{h:r,s:i,l:u}}function c(t,e,n){t=I(t,255),e=I(e,255),n=I(n,255);var r,i,l=a(t,e,n),s=o(t,e,n),u=l,c=l-s;if(i=0===l?0:c/l,l==s)r=0;else{switch(l){case t:r=(e-n)/c+(e<n?6:0);break;case e:r=(n-t)/c+2;break;case n:r=(t-e)/c+4}r/=6}return{h:r,s:i,v:u}}function h(t,e,n,r){var o=[A(i(t).toString(16)),A(i(e).toString(16)),A(i(n).toString(16))];return r&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0):o.join("")}function d(t,e,n,r){return[A(D(r)),A(i(t).toString(16)),A(i(e).toString(16)),A(i(n).toString(16))].join("")}function f(t,e){e=0===e?0:e||10;var n=s(t).toHsl();return n.s-=e/100,n.s=R(n.s),s(n)}function p(t,e){e=0===e?0:e||10;var n=s(t).toHsl();return n.s+=e/100,n.s=R(n.s),s(n)}function v(t){return s(t).desaturate(100)}function g(t,e){e=0===e?0:e||10;var n=s(t).toHsl();return n.l+=e/100,n.l=R(n.l),s(n)}function y(t,e){e=0===e?0:e||10;var n=s(t).toRgb();return n.r=a(0,o(255,n.r-i(-e/100*255))),n.g=a(0,o(255,n.g-i(-e/100*255))),n.b=a(0,o(255,n.b-i(-e/100*255))),s(n)}function m(t,e){e=0===e?0:e||10;var n=s(t).toHsl();return n.l-=e/100,n.l=R(n.l),s(n)}function C(t,e){var n=s(t).toHsl(),r=(n.h+e)%360;return n.h=r<0?360+r:r,s(n)}function w(t){var e=s(t).toHsl();return e.h=(e.h+180)%360,s(e)}function x(t){var e=s(t).toHsl(),n=e.h;return[s(t),s({h:(n+120)%360,s:e.s,l:e.l}),s({h:(n+240)%360,s:e.s,l:e.l})]}function S(t){var e=s(t).toHsl(),n=e.h;return[s(t),s({h:(n+90)%360,s:e.s,l:e.l}),s({h:(n+180)%360,s:e.s,l:e.l}),s({h:(n+270)%360,s:e.s,l:e.l})]}function b(t){var e=s(t).toHsl(),n=e.h;return[s(t),s({h:(n+72)%360,s:e.s,l:e.l}),s({h:(n+216)%360,s:e.s,l:e.l})]}function _(t,e,n){e=e||6,n=n||30;var r=s(t).toHsl(),i=360/n,o=[s(t)];for(r.h=(r.h-(i*e>>1)+720)%360;--e;)r.h=(r.h+i)%360,o.push(s(r));return o}function L(t,e){e=e||6;for(var n=s(t).toHsv(),r=n.h,i=n.s,o=n.v,a=[],l=1/e;e--;)a.push(s({h:r,s:i,v:o})),o=(o+l)%1;return a}s.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(299*t.r+587*t.g+114*t.b)/1e3},getLuminance:function(){var e,n,r,i=this.toRgb();return e=i.r/255,n=i.g/255,r=i.b/255,.2126*(e<=.03928?e/12.92:t.pow((e+.055)/1.055,2.4))+.7152*(n<=.03928?n/12.92:t.pow((n+.055)/1.055,2.4))+.0722*(r<=.03928?r/12.92:t.pow((r+.055)/1.055,2.4))},setAlpha:function(t){return this._a=O(t),this._roundA=i(100*this._a)/100,this},toHsv:function(){var t=c(this._r,this._g,this._b);return{h:360*t.h,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=c(this._r,this._g,this._b),e=i(360*t.h),n=i(100*t.s),r=i(100*t.v);return 1==this._a?"hsv("+e+", "+n+"%, "+r+"%)":"hsva("+e+", "+n+"%, "+r+"%, "+this._roundA+")"},toHsl:function(){var t=u(this._r,this._g,this._b);return{h:360*t.h,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=u(this._r,this._g,this._b),e=i(360*t.h),n=i(100*t.s),r=i(100*t.l);return 1==this._a?"hsl("+e+", "+n+"%, "+r+"%)":"hsla("+e+", "+n+"%, "+r+"%, "+this._roundA+")"},toHex:function(t){return h(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(t){return function(t,e,n,r,o){var a=[A(i(t).toString(16)),A(i(e).toString(16)),A(i(n).toString(16)),A(D(r))];return o&&a[0].charAt(0)==a[0].charAt(1)&&a[1].charAt(0)==a[1].charAt(1)&&a[2].charAt(0)==a[2].charAt(1)&&a[3].charAt(0)==a[3].charAt(1)?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0)+a[3].charAt(0):a.join("")}(this._r,this._g,this._b,this._a,t)},toHex8String:function(t){return"#"+this.toHex8(t)},toRgb:function(){return{r:i(this._r),g:i(this._g),b:i(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+i(this._r)+", "+i(this._g)+", "+i(this._b)+")":"rgba("+i(this._r)+", "+i(this._g)+", "+i(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:i(100*I(this._r,255))+"%",g:i(100*I(this._g,255))+"%",b:i(100*I(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+i(100*I(this._r,255))+"%, "+i(100*I(this._g,255))+"%, "+i(100*I(this._b,255))+"%)":"rgba("+i(100*I(this._r,255))+"%, "+i(100*I(this._g,255))+"%, "+i(100*I(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(T[h(this._r,this._g,this._b,!0)]||!1)},toFilter:function(t){var e="#"+d(this._r,this._g,this._b,this._a),n=e,r=this._gradientType?"GradientType = 1, ":"";if(t){var i=s(t);n="#"+d(i._r,i._g,i._b,i._a)}return"progid:DXImageTransform.Microsoft.gradient("+r+"startColorstr="+e+",endColorstr="+n+")"},toString:function(t){var e=!!t;t=t||this._format;var n=!1,r=this._a<1&&this._a>=0;return e||!r||"hex"!==t&&"hex6"!==t&&"hex3"!==t&&"hex4"!==t&&"hex8"!==t&&"name"!==t?("rgb"===t&&(n=this.toRgbString()),"prgb"===t&&(n=this.toPercentageRgbString()),"hex"!==t&&"hex6"!==t||(n=this.toHexString()),"hex3"===t&&(n=this.toHexString(!0)),"hex4"===t&&(n=this.toHex8String(!0)),"hex8"===t&&(n=this.toHex8String()),"name"===t&&(n=this.toName()),"hsl"===t&&(n=this.toHslString()),"hsv"===t&&(n=this.toHsvString()),n||this.toHexString()):"name"===t&&0===this._a?this.toName():this.toRgbString()},clone:function(){return s(this.toString())},_applyModification:function(t,e){var n=t.apply(null,[this].concat([].slice.call(e)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(g,arguments)},brighten:function(){return this._applyModification(y,arguments)},darken:function(){return this._applyModification(m,arguments)},desaturate:function(){return this._applyModification(f,arguments)},saturate:function(){return this._applyModification(p,arguments)},greyscale:function(){return this._applyModification(v,arguments)},spin:function(){return this._applyModification(C,arguments)},_applyCombination:function(t,e){return t.apply(null,[this].concat([].slice.call(e)))},analogous:function(){return this._applyCombination(_,arguments)},complement:function(){return this._applyCombination(w,arguments)},monochromatic:function(){return this._applyCombination(L,arguments)},splitcomplement:function(){return this._applyCombination(b,arguments)},triad:function(){return this._applyCombination(x,arguments)},tetrad:function(){return this._applyCombination(S,arguments)}},s.fromRatio=function(t,e){if("object"==typeof t){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]="a"===r?t[r]:B(t[r]));t=n}return s(t,e)},s.equals=function(t,e){return!(!t||!e)&&s(t).toRgbString()==s(e).toRgbString()},s.random=function(){return s.fromRatio({r:l(),g:l(),b:l()})},s.mix=function(t,e,n){n=0===n?0:n||50;var r=s(t).toRgb(),i=s(e).toRgb(),o=n/100;return s({r:(i.r-r.r)*o+r.r,g:(i.g-r.g)*o+r.g,b:(i.b-r.b)*o+r.b,a:(i.a-r.a)*o+r.a})},s.readability=function(e,n){var r=s(e),i=s(n);return(t.max(r.getLuminance(),i.getLuminance())+.05)/(t.min(r.getLuminance(),i.getLuminance())+.05)},s.isReadable=function(t,e,n){var r,i,o,a,l,u=s.readability(t,e);switch(i=!1,(o=n,a=((o=o||{level:"AA",size:"small"}).level||"AA").toUpperCase(),l=(o.size||"small").toLowerCase(),"AA"!==a&&"AAA"!==a&&(a="AA"),"small"!==l&&"large"!==l&&(l="small"),r={level:a,size:l}).level+r.size){case"AAsmall":case"AAAlarge":i=u>=4.5;break;case"AAlarge":i=u>=3;break;case"AAAsmall":i=u>=7}return i},s.mostReadable=function(t,e,n){var r,i,o,a,l=null,u=0;i=(n=n||{}).includeFallbackColors,o=n.level,a=n.size;for(var c=0;c<e.length;c++)(r=s.readability(t,e[c]))>u&&(u=r,l=s(e[c]));return s.isReadable(t,l,{level:o,size:a})||!i?l:(n.includeFallbackColors=!1,s.mostReadable(t,["#fff","#000"],n))};var E=s.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},T=s.hexNames=function(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}(E);function O(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function I(e,n){(function(t){return"string"==typeof t&&-1!=t.indexOf(".")&&1===parseFloat(t)})(e)&&(e="100%");var r=function(t){return"string"==typeof t&&-1!=t.indexOf("%")}(e);return e=o(n,a(0,parseFloat(e))),r&&(e=parseInt(e*n,10)/100),t.abs(e-n)<1e-6?1:e%n/parseFloat(n)}function R(t){return o(1,a(0,t))}function M(t){return parseInt(t,16)}function A(t){return 1==t.length?"0"+t:""+t}function B(t){return t<=1&&(t=100*t+"%"),t}function D(e){return t.round(255*parseFloat(e)).toString(16)}function k(t){return M(t)/255}var N,P,z,H=(P="[\\s|\\(]+("+(N="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+N+")[,|\\s]+("+N+")\\s*\\)?",z="[\\s|\\(]+("+N+")[,|\\s]+("+N+")[,|\\s]+("+N+")[,|\\s]+("+N+")\\s*\\)?",{CSS_UNIT:new RegExp(N),rgb:new RegExp("rgb"+P),rgba:new RegExp("rgba"+z),hsl:new RegExp("hsl"+P),hsla:new RegExp("hsla"+z),hsv:new RegExp("hsv"+P),hsva:new RegExp("hsva"+z),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function F(t){return!!H.CSS_UNIT.exec(t)}BS.exports?BS.exports=s:window.tinycolor=s}(Math);var kS,NS,PS=DS.exports,zS=[95,85,75,30,15,0,15,30,45,60,80],HS=function(t){return PS(t).getLuminance()<=.5},FS=[{fontColorIndex:0,bgColorIndex:3},{fontColorIndex:13,bgColorIndex:8},{fontColorIndex:14,bgColorIndex:1}],WS=function(t){void 0===t&&(t={});var e=Array.from(Array(15)).fill(za),n=t.basicColorRelations,r=void 0===n?[]:n,i=function(t){for(var e=[],n=0;n<11;n++){var r=zS[n];e.push(Mx(0===r?t:PS.mix(t,n<5?"#FFFFFF":"#000000",r).toHexString()))}return e}(t.brandColor);return r.forEach((function(t){e[t.basicColorIndex]=i[t.standardColorIndex]})),FS.forEach((function(t){var n=t.fontColorIndex,r=t.bgColorIndex;e[n]=HS(e[r])?za:Pa})),bl(bl({},t),{basicColors:e})},GS=WS({brandColor:"#3471F9",semanticColors:{red:"#FF4D4F",green:"#29A294",yellow:"#FAAD14"},others:{highlight:"#87B5FF",results:"#F0F7FF"},basicColorRelations:[{basicColorIndex:1,standardColorIndex:0},{basicColorIndex:2,standardColorIndex:1},{basicColorIndex:3,standardColorIndex:5},{basicColorIndex:4,standardColorIndex:6},{basicColorIndex:5,standardColorIndex:6},{basicColorIndex:6,standardColorIndex:6},{basicColorIndex:7,standardColorIndex:5},{basicColorIndex:9,standardColorIndex:1},{basicColorIndex:10,standardColorIndex:4},{basicColorIndex:11,standardColorIndex:4},{basicColorIndex:12,standardColorIndex:5}]}),jS={default:WS({brandColor:"#326EF4",semanticColors:{red:"#FF4D4F",green:"#29A294",yellow:"#FAAD14"},others:{highlight:"#87B5FF",results:"#F0F7FF"},basicColorRelations:[{basicColorIndex:1,standardColorIndex:0},{basicColorIndex:2,standardColorIndex:1},{basicColorIndex:3,standardColorIndex:1},{basicColorIndex:4,standardColorIndex:2},{basicColorIndex:5,standardColorIndex:7},{basicColorIndex:6,standardColorIndex:5},{basicColorIndex:7,standardColorIndex:5},{basicColorIndex:9,standardColorIndex:1},{basicColorIndex:10,standardColorIndex:2},{basicColorIndex:11,standardColorIndex:5},{basicColorIndex:12,standardColorIndex:5}]}),colorful:GS,gray:WS({brandColor:"#9DA7B6",semanticColors:{red:"#FF4D4F",green:"#29A294",yellow:"#FAAD14"},others:{highlight:"#87B5FF",results:"#F0F7FF"},basicColorRelations:[{basicColorIndex:1,standardColorIndex:0},{basicColorIndex:2,standardColorIndex:1},{basicColorIndex:3,standardColorIndex:1},{basicColorIndex:4,standardColorIndex:2},{basicColorIndex:5,standardColorIndex:7},{basicColorIndex:6,standardColorIndex:8},{basicColorIndex:7,standardColorIndex:5},{basicColorIndex:9,standardColorIndex:1},{basicColorIndex:10,standardColorIndex:2},{basicColorIndex:11,standardColorIndex:3},{basicColorIndex:12,standardColorIndex:3}]})},US="Roboto, PingFangSC, BlinkMacSystemFont, Microsoft YaHei, Arial, sans-serif",YS={zh_CN:{"小计":"小计","总计":"总计","总和":"总和","项":"项","已选择":"已选择","序号":"序号","度量":"度量","数值":"数值","共计":"共计","条":"条","趋势":"趋势","隐藏":"隐藏","组内升序":"组内升序","升序":"升序","降序":"降序","组内降序":"组内降序","不排序":"不排序"},en_US:{"小计":"Total","总计":"Total","总和":"SUM","项":"items","已选择":"selected","序号":"Index","度量":"Measure","数值":"Measure","共计":"Total","条":"","隐藏":"Hide","趋势":"Trend","组内升序":"Group ASC","组内降序":"Group DESC","升序":"ASC","降序":"DESC","不排序":"No order"}},VS=function(t,e){return void 0===e&&(e=t),Fh(YS,["zh_CN",t],e)},XS="".concat(Da,"-tooltip"),qS="".concat(XS,"-container"),KS="".concat(qS,"-show"),$S="".concat(qS,"-hide"),ZS=15,QS=10;(NS=kS||(kS={}))[NS.ALL=0]="ALL",NS[NS.COL=1]="COL",NS[NS.ROW=2]="ROW";function JS(t){return"mobile"===t||/(iPhone|iPad|SymbianOS|Windows Phone|iPod|iOS|Android)/i.test(navigator.userAgent)}function tb(){return/windows/i.test(navigator.userAgent)}var eb=function(t){var e,n,r,i,o,a,l=(null==t?void 0:t.palette)||(a=null==t?void 0:t.name,jS[(a||"default").toLowerCase()]),s=l.basicColors,u=l.semanticColors,c=l.others,h=null===(e=null==t?void 0:t.spreadsheet)||void 0===e?void 0:e.isTableMode(),d=tb()?"bold":700,f=function(){var t,e;return{bolderText:{fontFamily:US,fontSize:12,fontWeight:d,fill:s[13],opacity:1,textAlign:"right",textBaseline:"middle",linkTextFill:s[6]},text:{fontFamily:US,fontSize:12,fontWeight:"normal",fill:s[13],opacity:1,textAlign:"right",textBaseline:"middle",linkTextFill:s[6]},cell:{crossBackgroundColor:s[1],backgroundColor:s[8],backgroundColorOpacity:1,horizontalBorderColor:s[9],horizontalBorderColorOpacity:1,verticalBorderColor:s[9],verticalBorderColorOpacity:1,horizontalBorderWidth:1,verticalBorderWidth:1,padding:{top:8,right:8,bottom:8,left:8},interactionState:{hover:{backgroundColor:s[2],backgroundOpacity:.6},hoverFocus:{backgroundColor:s[2],backgroundOpacity:.6,borderColor:s[14],borderWidth:1,borderOpacity:1},selected:{backgroundColor:s[2],backgroundOpacity:.6},unselected:{backgroundOpacity:.3,textOpacity:.3,opacity:.3},searchResult:{backgroundColor:null!==(t=null==c?void 0:c.results)&&void 0!==t?t:s[2],backgroundOpacity:1},highlight:{backgroundColor:null!==(e=null==c?void 0:c.highlight)&&void 0!==e?e:s[6],backgroundOpacity:1},prepareSelect:{borderColor:s[14],borderOpacity:1,borderWidth:1}}},miniChart:{line:{point:{size:2.2,fill:s[6],opacity:1},linkLine:{size:1.5,fill:s[6],opacity:.6}},bar:{intervalPadding:4,fill:s[6],opacity:1},bullet:{progressBar:{widthPercent:.6,height:10,innerHeight:6},comparativeMeasure:{width:1,height:12,fill:s[13],opacity:.25},rangeColors:{good:null==u?void 0:u.green,satisfactory:u.yellow,bad:u.red},backgroundColor:"#E9E9E9"},interval:{height:12,fill:s[7]}},icon:{fill:s[13],downIconColor:u.red,upIconColor:u.green,size:10,margin:{right:4,left:4}}}};return{cornerCell:{bolderText:{fontFamily:US,fontSize:12,fontWeight:d,fill:s[0],opacity:1,textAlign:h?"center":"left",textBaseline:"middle"},text:{fontFamily:US,fontSize:12,fontWeight:d,fill:s[0],opacity:1,textAlign:"right",textBaseline:"middle"},cell:{backgroundColor:s[3],backgroundColorOpacity:1,horizontalBorderColor:s[10],horizontalBorderColorOpacity:1,verticalBorderColor:s[10],verticalBorderColorOpacity:1,horizontalBorderWidth:1,verticalBorderWidth:1,padding:{top:0,right:8,bottom:0,left:8}},icon:{fill:s[0],size:10,margin:{right:4,left:4}}},rowCell:{seriesText:{fontFamily:US,fontSize:12,fontWeight:"normal",fill:s[14],linkTextFill:s[6],opacity:1,textBaseline:"middle",textAlign:"center"},measureText:{fontFamily:US,fontSize:12,fontWeight:"normal",fill:s[14],linkTextFill:s[6],opacity:1,textAlign:h?"center":"left",textBaseline:"top"},bolderText:{fontFamily:US,fontSize:12,fontWeight:d,fill:s[14],linkTextFill:s[6],opacity:1,textAlign:h?"center":"left",textBaseline:"top"},text:{fontFamily:US,fontSize:12,fontWeight:"normal",fill:s[14],linkTextFill:s[6],opacity:1,textBaseline:"top",textAlign:h?"center":"left"},cell:{backgroundColor:s[1],backgroundColorOpacity:1,horizontalBorderColor:s[9],horizontalBorderColorOpacity:1,verticalBorderColor:s[9],verticalBorderColorOpacity:1,horizontalBorderWidth:1,verticalBorderWidth:1,padding:{top:0,right:8,bottom:0,left:8},interactionState:{hover:{backgroundColor:s[2],backgroundOpacity:.6},selected:{backgroundColor:s[2],backgroundOpacity:.6},unselected:{backgroundOpacity:.3,textOpacity:.3,opacity:.3},prepareSelect:{borderColor:s[14],borderOpacity:1,borderWidth:1},searchResult:{backgroundColor:null!==(n=null==c?void 0:c.results)&&void 0!==n?n:s[2],backgroundOpacity:1},highlight:{backgroundColor:null!==(r=null==c?void 0:c.highlight)&&void 0!==r?r:s[6],backgroundOpacity:1}}},icon:{fill:s[14],size:10,margin:{right:4,left:4}},seriesNumberWidth:80},colCell:{measureText:{fontFamily:US,fontSize:12,fontWeight:"normal",fill:s[0],opacity:1,textAlign:"right",textBaseline:"middle"},bolderText:{fontFamily:US,fontSize:12,fontWeight:d,fill:s[0],opacity:1,textAlign:"center",textBaseline:"middle"},text:{fontFamily:US,fontSize:12,fontWeight:"normal",fill:s[0],opacity:1,textAlign:"center",textBaseline:"middle"},cell:{backgroundColor:s[3],backgroundColorOpacity:1,horizontalBorderColor:s[10],horizontalBorderColorOpacity:1,verticalBorderColor:s[10],verticalBorderColorOpacity:1,horizontalBorderWidth:1,verticalBorderWidth:1,padding:{top:0,right:8,bottom:0,left:8},interactionState:{hover:{backgroundColor:s[4],backgroundOpacity:.6},selected:{backgroundColor:s[4],backgroundOpacity:.6},unselected:{backgroundOpacity:.3,textOpacity:.3,opacity:.3},prepareSelect:{borderColor:s[14],borderOpacity:1,borderWidth:1},searchResult:{backgroundColor:null!==(i=null==c?void 0:c.results)&&void 0!==i?i:s[2],backgroundOpacity:1},highlight:{backgroundColor:null!==(o=null==c?void 0:c.highlight)&&void 0!==o?o:s[6],backgroundOpacity:1}}},icon:{fill:s[0],size:10,margin:{top:6,right:4,bottom:6,left:4}}},dataCell:f(),mergedCell:f(),resizeArea:{size:3,background:s[7],backgroundOpacity:0,guideLineColor:s[7],guideLineDisableColor:"rgba(0,0,0,0.25)",guideLineDash:[3,3],interactionState:{hover:{backgroundColor:s[7],backgroundOpacity:1}}},scrollBar:{trackColor:"rgba(0,0,0,0.01)",thumbHoverColor:"rgba(0,0,0,0.25)",thumbColor:"rgba(0,0,0,0.15)",thumbHorizontalMinSize:32,thumbVerticalMinSize:32,size:JS()?3:6,hoverSize:JS()?4:8,lineCap:"round"},splitLine:{horizontalBorderColor:s[12],horizontalBorderColorOpacity:.2,horizontalBorderWidth:2,verticalBorderColor:s[11],verticalBorderColorOpacity:.25,verticalBorderWidth:2,showShadow:!0,shadowWidth:8,shadowColors:{left:"rgba(0,0,0,0.1)",right:"rgba(0,0,0,0)"}},prepareSelectMask:{backgroundColor:s[5],backgroundOpacity:.3},background:{color:s[8],opacity:1}}},nb=function(){function t(t){this.x=0,this.y=0,this.width=0,this.height=0,this.colIndex=-1,this.level=0,this.isLeaf=!1,this.children=[],this.padding=0;var e=t.id,n=t.key,r=t.value,i=t.label,o=t.parent,a=t.level,l=t.rowIndex,s=t.isTotals,u=t.isGrandTotals,c=t.isSubTotals,h=t.isCollapsed,d=t.isTotalRoot,f=t.hierarchy,p=t.isPivotMode,v=t.seriesNumberWidth,g=t.field,y=t.spreadsheet,m=t.query,C=t.belongsCell,w=t.inCollapseNode,x=t.isTotalMeasure,S=t.isLeaf,b=t.extra;this.id=e,this.key=n,this.value=r,this.label=i||r,this.parent=o,this.level=a,this.rowIndex=l,this.isTotals=s,this.isCollapsed=h,this.hierarchy=f,this.isPivotMode=p,this.seriesNumberWidth=v,this.field=g,this.spreadsheet=y,this.query=m,this.belongsCell=C,this.inCollapseNode=w,this.isTotalMeasure=x,this.isLeaf=S,this.isGrandTotals=u,this.isSubTotals=c,this.isTotalRoot=d,this.extra=b}return t.getFieldPath=function(t,e){if(t&&!t.isTotals||t&&e){for(var n=t.parent,r=[t.field];n&&n.id!==_a;)r.push(n.field),n=n.parent;return r.reverse()}return[]},t.getAllLeaveNodes=function(t){var e=[];if(t.isLeaf)return[t];for(var n=Tl([],El(t.children),!1),r=n.shift();r;)r.isLeaf?e.push(r):n.unshift.apply(n,Tl([],El(r.children),!1)),r=n.shift();return e},t.getAllChildrenNodes=function(t){var e=[];if(t.isLeaf)return[t];for(var n=Tl([],El(t.children||[]),!1),r=n.shift();r;)e.push(r),n.unshift.apply(n,Tl([],El(r.children),!1)),r=n.shift();return e},t.getAllBranch=function(t){for(var e=[],n=this.getAllLeaveNodes(t),r=n.shift(),i=[];r;){i.unshift(r);for(var o=r.parent;o&&!wm(o,t);)i.unshift(o),o=o.parent;e.push(i),r=n.shift(),i=[]}return e},t.blankNode=function(){return new t({id:"",key:"",value:""})},t.rootNode=function(){return new t({id:"root",key:"",value:""})},t.prototype.toJSON=function(){return gC(this,["config","hierarchy","parent","spreadsheet"])},t.prototype.getHeadLeafChild=function(){for(var t=this;!Cm(t.children);)t=vy(t.children);return t},t}(),rb=function(){function t(){this.width=0,this.height=0,this.maxLevel=-1,this.sampleNodesForAllLevels=[],this.sampleNodeForLastLevel=null,this.allNodesWithoutRoot=[],this.indexNode=[]}return t.prototype.getLeaves=function(){return this.allNodesWithoutRoot.filter((function(t){return t.isLeaf}))},t.prototype.getNodes=function(t){return void 0!==t?this.allNodesWithoutRoot.filter((function(e){return e.level===t})):this.allNodesWithoutRoot},t.prototype.getNodesLessThanLevel=function(t){return this.allNodesWithoutRoot.filter((function(e){return e.level<=t}))},t.prototype.pushNode=function(t,e){void 0===e&&(e=-1),-1===e?this.allNodesWithoutRoot.push(t):this.allNodesWithoutRoot.splice(e,0,t)},t.prototype.pushIndexNode=function(t){this.indexNode.push(t)},t.prototype.getIndexNodes=function(){return this.indexNode},t}(),ib=function(t){var e=t.label,n=t.isSubTotals,r=t.isGrandTotals,i=t.isTotalRoot;this.label=e,this.isSubTotals=n,this.isGrandTotals=r,this.isTotalRoot=i};function ob(t,e){for(var n={},r=t;r&&r.key;)r.isTotalRoot&&!e||(n[r.key]=r.value),r=r.parent;return n}var ab=function(t,e,n,r){return e.layoutArrange?e.layoutArrange(e.spreadsheet,n,r,t):t},lb=function(t,e,n,r){var i,o;if(null===(o=null===(i=t.spreadsheet)||void 0===i?void 0:i.facet)||void 0===o?void 0:o.getHiddenColumnsInfo(n))return!1;var a=!0,l=function(t,n,i){void 0===n&&(n=-1),void 0===i&&(i=-1),-1===n?(e.children.push(t),r.pushNode(t)):(e.children.splice(n,0,t),r.pushNode(t,i))};if(t.layoutHierarchy){var s=t.layoutHierarchy(t.spreadsheet,n);if(s){var u=!!fm(null==s?void 0:s.delete)&&(null==s?void 0:s.delete);a=!u;var c=s.push,h=s.unshift,d=e.children.length,f=r.getNodes().length;Cm(h)||(Pg(h,(function(t){l(t)})),d=e.children.length,f=r.getNodes().length),Cm(c)||Pg(c,(function(t){l(t)})),u||l(n,d,f)}else l(n)}else l(n);return a},sb=function(t,e,n){(null==t?void 0:t.layoutCoordinate)&&((null==e?void 0:e.isLeaf)||(null==n?void 0:n.isLeaf))&&(null==t||t.layoutCoordinate(t.spreadsheet,e,n))},ub=function(t){this.label=t},cb=function(){function t(){var t=this;this.debug=!1,this.debugCallback=function(e,n){if(t.debug){performance.now();n();performance.now()}else n()},this.logger=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];t.debug}}return t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.prototype.setDebug=function(t){this.debug=t},t}(),hb=Object.freeze({__proto__:null,ArrowDown:'\n<svg width="10px" height="10px" viewBox="0 0 10 10" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n<g id="页面-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" font-family="Roboto, PingFangSC, BlinkMacSystemFont, Microsoft YaHei, Arial, sans-serif" font-size="12" font-weight="bold">\n    <text id="↓" fill="#29A294">\n        <tspan x="-0.225097656" y="8.5">↓</tspan>\n    </text>\n</g>\n</svg>',ArrowUp:'<svg width="10px" height="10px" viewBox="0 0 10 10" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n<g id="页面-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" font-family="Roboto, PingFangSC, BlinkMacSystemFont, Microsoft YaHei, Arial, sans-serif" font-size="12" font-weight="bold">\n    <text id="↑" fill="#FF4D4F">\n        <tspan x="-0.225097656" y="8.5">↑</tspan>\n    </text>\n</g>\n</svg>\n',CellDown:'<?xml version="1.0" encoding="UTF-8"?>\n<svg width="7px" height="9px" viewBox="0 0 7 9" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \x3c!-- Generator: Sketch 58 (84663) - https://sketch.com --\x3e\n    <title>down</title>\n    <desc>Created with Sketch.</desc>\n    <g id="一期开发" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <polygon id="down" fill="#58AE57" transform="translate(3.500000, 4.500000) scale(1, -1) translate(-3.500000, -4.500000) " points="3.5 0 7 9 0 9"></polygon>\n    </g>\n</svg>',CellUp:'<?xml version="1.0" encoding="UTF-8"?>\n<svg width="7px" height="9px" viewBox="0 0 7 9" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \x3c!-- Generator: Sketch 58 (84663) - https://sketch.com --\x3e\n    <title>up</title>\n    <desc>Created with Sketch.</desc>\n    <g id="一期开发" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <polygon id="up" fill="#F46649" points="3.5 0 7 9 0 9"></polygon>\n    </g>\n</svg> ',GlobalAsc:'<svg t="1557124621626" class="icon" style="" viewBox="0 0 1024 1024" version="1.1"\nxmlns="http://www.w3.org/2000/svg" p-id="17452"\nxmlns:xlink="http://www.w3.org/1999/xlink" width="14" height="14">\n<defs>\n  <style type="text/css"></style>\n</defs>\n<path d="M182.272 167.04a8 8 0 0 0-12.544 0L57.728 309.056A8 8 0 0 0 64 321.984h76.032v530.048c0 4.352 3.584 7.936 7.936 7.936h56.064a8 8 0 0 0 7.936-7.936V321.92H288a8 8 0 0 0 6.272-12.992l-112-141.888z m209.728 626.944h176c4.416 0 8 3.584 8 8v56a8 8 0 0 1-8 8h-176A8 8 0 0 1 384 857.984v-56c0-4.416 3.584-8 8-8z m0-424h368c4.416 0 8 3.648 8 8v56a8 8 0 0 1-8 8h-368A8 8 0 0 1 384 433.984v-56c0-4.352 3.584-8 8-8z m528-139.968h-528A8 8 0 0 1 384 222.016v-56c0-4.416 3.584-8 8-8h528c4.416 0 8 3.584 8 8v56a8 8 0 0 1-8 8z m-256 424h-272A8 8 0 0 1 384 646.016v-56c0-4.416 3.584-8 8-8h272c4.416 0 8 3.584 8 8v56a8 8 0 0 1-8 8z" p-id="17453"></path>\n</svg>',GlobalDesc:'<svg t="1557124685600" class="icon" style="" viewBox="0 0 1024 1024" version="1.1"\n  xmlns="http://www.w3.org/2000/svg" p-id="17561"\n  xmlns:xlink="http://www.w3.org/1999/xlink" width="14" height="14">\n  <defs>\n    <style type="text/css"></style>\n  </defs>\n  <path d="M182.272 856.96a8 8 0 0 1-12.544 0l-112-141.952A8 8 0 0 1 64 702.08h76.032V172.032c0-4.416 3.584-8 7.936-8h56.064c4.352 0 7.936 3.584 7.936 8v529.984H288c6.72 0 10.496 7.808 6.272 12.992l-112 141.888z m209.728-626.944h176A8 8 0 0 0 576 222.016v-56a8 8 0 0 0-8-8h-176A8 8 0 0 0 384 166.016v56c0 4.416 3.584 8 8 8z m0 424h368a8 8 0 0 0 8-8v-56a8 8 0 0 0-8-8h-368A8 8 0 0 0 384 590.016v56c0 4.416 3.584 8 8 8z m528 139.968h-528a8 8 0 0 0-8 8v56c0 4.416 3.584 8 8 8h528a8 8 0 0 0 8-8v-56a8 8 0 0 0-8-8z m-256-424h-272A8 8 0 0 0 384 377.984v56c0 4.416 3.584 8 8 8h272a8 8 0 0 0 8-8v-56a8 8 0 0 0-8-8z" p-id="17562"></path>\n</svg>',GroupAsc:'<svg t="1557124695786" class="icon" style="" viewBox="0 0 1024 1024" version="1.1"\n  xmlns="http://www.w3.org/2000/svg" p-id="17670"\n  xmlns:xlink="http://www.w3.org/1999/xlink" width="14" height="14">\n  <defs>\n    <style type="text/css"></style>\n  </defs>\n  <path d="M182.272 167.04a8 8 0 0 0-12.544 0L57.728 309.056A8 8 0 0 0 64 321.984h76.032v530.048c0 4.352 3.584 7.936 7.936 7.936h56.064a8 8 0 0 0 7.936-7.936V321.92H288a8 8 0 0 0 6.272-12.992l-112-141.888z m209.728 62.976h304A8 8 0 0 0 704 222.016v-56a8 8 0 0 0-8-8h-304A8 8 0 0 0 384 166.016v56c0 4.416 3.584 8 8 8z m0 424h304a8 8 0 0 0 8-8v-56a8 8 0 0 0-8-8h-304A8 8 0 0 0 384 590.016v56c0 4.416 3.584 8 8 8z m528 139.968h-528a8 8 0 0 0-8 8v56c0 4.416 3.584 8 8 8h528a8 8 0 0 0 8-8v-56a8 8 0 0 0-8-8z m0-424h-528A8 8 0 0 0 384 377.984v56c0 4.416 3.584 8 8 8h528a8 8 0 0 0 8-8v-56a8 8 0 0 0-8-8z" p-id="17671"></path>\n</svg>',GroupDesc:'<svg t="1557124710652" class="icon" style="" viewBox="0 0 1024 1024" version="1.1"\n  xmlns="http://www.w3.org/2000/svg" p-id="17779"\n  xmlns:xlink="http://www.w3.org/1999/xlink" width="14" height="14">\n  <defs>\n    <style type="text/css"></style>\n  </defs>\n  <path d="M182.272 856.96a8 8 0 0 1-12.544 0l-112-141.952A8 8 0 0 1 64 702.08h76.032V172.032c0-4.416 3.584-8 7.936-8h56.064c4.352 0 7.936 3.584 7.936 8v529.984H288c6.72 0 10.496 7.808 6.272 12.992l-112 141.888z m209.728-626.944h304A8 8 0 0 0 704 222.016v-56a8 8 0 0 0-8-8h-304A8 8 0 0 0 384 166.016v56c0 4.416 3.584 8 8 8z m0 424h304a8 8 0 0 0 8-8v-56a8 8 0 0 0-8-8h-304A8 8 0 0 0 384 590.016v56c0 4.416 3.584 8 8 8z m528 139.968h-528a8 8 0 0 0-8 8v56c0 4.416 3.584 8 8 8h528a8 8 0 0 0 8-8v-56a8 8 0 0 0-8-8z m0-424h-528A8 8 0 0 0 384 377.984v56c0 4.416 3.584 8 8 8h528a8 8 0 0 0 8-8v-56a8 8 0 0 0-8-8z" p-id="17780"></path>\n</svg>',GroupNone:'<svg width="16px" height="16px" viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n<g id="设计输出" stroke="none" stroke-width="1" fill-opacity="0.25" fill-rule="evenodd">\n    <g id="设计输出-移动端指标详情页-阅读端" transform="translate(-3275.000000, -724.000000)" fill-rule="nonzero">\n        <g id="编组-39" transform="translate(3064.500000, 667.000000)">\n            <g id="编组-36" transform="translate(80.500000, 44.000000)">\n                <g id="不排序" transform="translate(130.000000, 13.000000)">\n                    <path d="M12.0009375,12.40625 C12.0696875,12.40625 12.1259375,12.4625 12.1259375,12.53125 L12.1259375,12.53125 L12.1259375,13.40625 C12.1259375,13.475 12.0696875,13.53125 12.0009375,13.53125 L12.0009375,13.53125 L6.25093747,13.53125 C6.18218747,13.53125 6.12593747,13.475 6.12593747,13.40625 L6.12593747,13.40625 L6.12593747,12.53125 C6.12593747,12.4625 6.18218747,12.40625 6.25093747,12.40625 L6.25093747,12.40625 Z M2.93949997,2.5801875 L2.97437497,2.6109375 L4.72437497,4.828125 C4.78062497,4.89776786 4.74503823,4.99725765 4.66779698,5.02426203 L4.62593747,5.03125 L3.438,5.03089062 L3.43843747,10.9691406 L4.62593747,10.9691406 C4.73062497,10.9691406 4.78999997,11.0910156 4.72437497,11.1722656 L2.97437497,13.3894531 C2.92437497,13.4535156 2.82749997,13.4535156 2.77749997,13.3894531 L1.02749997,11.1722656 C0.961874969,11.0894531 1.02124997,10.9691406 1.12593747,10.9691406 L2.31343747,10.9691406 L2.313,5.03089062 L1.12593747,5.03125 C1.03620533,5.03125 0.979764,4.94285714 1.00679571,4.8654519 L1.02749997,4.828125 L2.77749997,2.6109375 C2.81749997,2.5596875 2.88749997,2.5494375 2.93949997,2.5801875 Z M10.5009375,9.09375 C10.5696875,9.09375 10.6259375,9.15 10.6259375,9.21875 L10.6259375,9.21875 L10.6259375,10.09375 C10.6259375,10.1625 10.5696875,10.21875 10.5009375,10.21875 L10.5009375,10.21875 L6.25093747,10.21875 C6.18218747,10.21875 6.12593747,10.1625 6.12593747,10.09375 L6.12593747,10.09375 L6.12593747,9.21875 C6.12593747,9.15 6.18218747,9.09375 6.25093747,9.09375 L6.25093747,9.09375 Z M14.5009375,5.78125 C14.5696875,5.78125 14.6259375,5.8375 14.6259375,5.90625 L14.6259375,5.90625 L14.6259375,6.78125 C14.6259375,6.85 14.5696875,6.90625 14.5009375,6.90625 L14.5009375,6.90625 L6.25093747,6.90625 C6.18218747,6.90625 6.12593747,6.85 6.12593747,6.78125 L6.12593747,6.78125 L6.12593747,5.90625 C6.12593747,5.8375 6.18218747,5.78125 6.25093747,5.78125 L6.25093747,5.78125 Z M9.00093747,2.46875 C9.06968747,2.46875 9.12593747,2.525 9.12593747,2.59375 L9.12593747,2.59375 L9.12593747,3.46875 C9.12593747,3.5375 9.06968747,3.59375 9.00093747,3.59375 L9.00093747,3.59375 L6.25093747,3.59375 C6.18218747,3.59375 6.12593747,3.5375 6.12593747,3.46875 L6.12593747,3.46875 L6.12593747,2.59375 C6.12593747,2.525 6.18218747,2.46875 6.25093747,2.46875 L6.25093747,2.46875 Z" id="形状结合"></path>\n                </g>\n            </g>\n        </g>\n    </g>q\n</g>\n</svg>',Minus:'<svg t="1557140120188" class="icon" style="" viewBox="0 0 1024 1024" version="1.1"\nxmlns="http://www.w3.org/2000/svg" p-id="16909" xmlns:xlink="http://www.w3.org/1999/xlink"\nwidth="200" height="200">\n\t<defs>\n\t\t<style type="text/css">\n\t\t</style>\n\t</defs>\n\t<path d="M328 544h368c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"\n\tp-id="16910">\n\t</path>\n\t<path d="M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32z m-40 728H184V184h656v656z"\n\tp-id="16911">\n\t</path>\n</svg>',Plus:'<svg t="1557140186692" class="icon" style="" viewBox="0 0 1024 1024" version="1.1"\nxmlns="http://www.w3.org/2000/svg" p-id="17025" xmlns:xlink="http://www.w3.org/1999/xlink"\nwidth="200" height="200">\n\t<defs>\n\t\t<style type="text/css">\n\t\t</style>\n\t</defs>\n\t<path d="M328 544h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"\n\tp-id="17026">\n\t</path>\n\t<path d="M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32z m-40 728H184V184h656v656z"\n\tp-id="17027">\n\t</path>\n</svg>',SortDown:'<svg t="1565940955886" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"\n     p-id="17472" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200">\n  <defs>\n    <style type="text/css"></style>\n  </defs>\n  <path\n    fill-opacity="0.45"\n    d="M948 392.992l-403.008 488.99200001Q532 896 512.992 896t-32-14.016L76 392.992q-18.016-20.992-7.008-46.016T108 321.98400001L916 321.98400001q28 0 39.008 24.99199999T948 392.992z"\n    p-id="17473" data-spm-anchor-id="a313x.7781069.0.i2" class="selected"></path>\n</svg>\n',SortUp:'<svg t="1565940979768" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"\n     p-id="17620" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200">\n  <defs>\n    <style type="text/css"></style>\n  </defs>\n  <path\n    fill-opacity="0.45"\n    d="M76 631.008l403.008-488.99200001Q492 128 511.008 128t32 14.016L948 631.008q18.016 20.992 7.008 46.016T916 702.01599999L108 702.01599999q-28 0-39.008-24.99199999T76 631.008z"\n    p-id="17621"></path>\n</svg>\n',SortDownSelected:'<svg t="1565940955886" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"\n     p-id="17472" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200">\n  <defs>\n    <style type="text/css"></style>\n  </defs>\n  <path\n    d="M948 392.992l-403.008 488.99200001Q532 896 512.992 896t-32-14.016L76 392.992q-18.016-20.992-7.008-46.016T108 321.98400001L916 321.98400001q28 0 39.008 24.99199999T948 392.992z"\n    p-id="17473" data-spm-anchor-id="a313x.7781069.0.i2" class="selected"></path>\n</svg>\n',SortUpSelected:'<svg t="1565940979768" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"\np-id="17620" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200">\n<defs>\n<style type="text/css"></style>\n</defs>\n<path\nd="M76 631.008l403.008-488.99200001Q492 128 511.008 128t32 14.016L948 631.008q18.016 20.992 7.008 46.016T916 702.01599999L108 702.01599999q-28 0-39.008-24.99199999T76 631.008z"\np-id="17621"></path>\n</svg>\n',InfoCircle:'<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1590389330617" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="19656" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><defs><style type="text/css"></style></defs><path d="M512 64c-247.4 0-448 200.6-448 448s200.6 448 448 448 448-200.6 448-448-200.6-448-448-448z m0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z" fill="" p-id="19657"></path><path d="M464 336c0 26.5 21.5 48 48 48s48-21.5 48-48-21.5-48-48-48-48 21.5-48 48zM536 448h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-272c0-4.4-3.6-8-8-8z" fill="" p-id="19658"></path></svg>',ExpandColIcon:'<?xml version="1.0" encoding="UTF-8"?>\n<svg width="23px" height="12px" viewBox="0 0 23 12" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <title>编组 8备份 3</title>\n    <g id="----隐藏列标注！" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="隐藏列标注" transform="translate(-275.000000, -824.000000)">\n            <rect fill="#FFFFFF" x="0" y="0" width="1333" height="1167"></rect>\n            <g id="编组-8备份-3" transform="translate(275.000000, 824.000000)">\n                <rect id="矩形" stroke-opacity="0.25" stroke="#000000" fill="#F7F7F7" x="0.5" y="0.5" width="11" height="11"></rect>\n                <rect id="矩形备份-9" stroke-opacity="0.25" stroke="#000000" fill="#F7F7F7" x="11.5" y="0.5" width="11" height="11"></rect>\n                <g id="7.Icon/arrow/15.down/fill" transform="translate(6.000000, 6.000000) rotate(90.000000) translate(-6.000000, -6.000000) " fill="#000000" fill-rule="nonzero" opacity="0.65">\n                    <path d="M7.25020811,6.37218077 L4.91348936,8.20968077 C4.82677061,8.27764952 4.69903624,8.21671202 4.69903624,8.10655577 L4.69903624,4.43272764 C4.69903624,4.32257139 4.82677061,4.26046202 4.91348936,4.32960264 L7.25020811,6.16593077 C7.31700499,6.21866514 7.31700499,6.31944639 7.25020811,6.37218077 Z" id="fill" transform="translate(5.999671, 6.269385) rotate(90.000000) translate(-5.999671, -6.269385) "></path>\n                </g>\n                <g id="7.Icon/arrow/15.down/fill" transform="translate(17.000000, 6.000000) rotate(270.000000) translate(-17.000000, -6.000000) translate(11.000000, 0.000000)" fill="#000000" fill-rule="nonzero" opacity="0.65">\n                    <path d="M7.25020811,6.37218077 L4.91348936,8.20968077 C4.82677061,8.27764952 4.69903624,8.21671202 4.69903624,8.10655577 L4.69903624,4.43272764 C4.69903624,4.32257139 4.82677061,4.26046202 4.91348936,4.32960264 L7.25020811,6.16593077 C7.31700499,6.21866514 7.31700499,6.31944639 7.25020811,6.37218077 Z" id="fill" transform="translate(5.999671, 6.269385) rotate(90.000000) translate(-5.999671, -6.269385) "></path>\n                </g>\n            </g>\n            <line x1="286.5" y1="813" x2="286.5" y2="864.5" id="路径-2备份-3" stroke="#000000" opacity="0.25"></line>\n        </g>\n    </g>\n</svg>',Trend:'<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1596433821690" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="20229" width="16" height="16" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><style type="text/css"></style></defs><path d="M888 792H200V168c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v688c0 4.4 3.6 8 8 8h752c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM305.8 637.7c3.1 3.1 8.1 3.1 11.3 0l138.3-137.6L583 628.5c3.1 3.1 8.2 3.1 11.3 0l275.4-275.3c3.1-3.1 3.1-8.2 0-11.3l-39.6-39.6c-3.1-3.1-8.2-3.1-11.3 0l-230 229.9L461.4 404c-3.1-3.1-8.2-3.1-11.3 0L266.3 586.7c-3.1 3.1-3.1 8.2 0 11.3l39.5 39.7z" p-id="20230"></path></svg>',DrillDownIcon:'<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1608030723688" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="21482" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16"><defs><style type="text/css"></style></defs><path d="M547.648 696a32 32 0 0 1 31.488 26.24l0.512 5.76v151.68l145.216-144.512a32 32 0 0 1 40.832-3.648l4.416 3.712a32 32 0 0 1 3.584 40.832l-3.712 4.48-203.072 202.24a32 32 0 0 1-40.768 3.648l-4.416-3.712-202.24-202.24a32 32 0 0 1 40.832-48.96l4.416 3.712 150.912 150.912v-158.144a32 32 0 0 1 32-32z m194.56-529.28l4.928 3.072 233.792 180.224a32 32 0 0 1 1.728 49.28l-4.864 3.52-409.792 245.568a32 32 0 0 1-27.328 2.624l-5.184-2.432-422.4-245.568a32 32 0 0 1-7.552-49.28l4.544-4.032 242.816-180.288a32 32 0 0 1 42.432 47.552l-4.288 3.84-203.84 151.296 364.16 211.648 353.28-211.712-196.608-151.552a32 32 0 0 1-8.896-40l3.136-4.864a32 32 0 0 1 40-8.96zM547.712 28.672a32 32 0 0 1 31.488 26.24l0.512 5.76v396.992a32 32 0 0 1-63.488 5.76l-0.512-5.76V60.736a32 32 0 0 1 32-32z" p-id="21483" fill="currentColor"></path></svg>\n',EyeOutlined:'<svg viewBox="64 64 896 896" focusable="false" data-icon="eye" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258c161.3 0 279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766zm-4-430c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z"></path></svg>'}),db={},fb=function(t,e){db[Fm(t)]=e},pb=function(t){return db[Fm(t)]};th(hb).forEach((function(t){fb(t,hb[t])}));var vb,gb,yb,mb,Cb,wb,xb="<svg",Sb="data:image/svg+xml",bb={},_b=function(t){function e(e){var n=t.call(this,e)||this;return n.isOnlineLink=function(t){return/^(https?:)?(\/\/)/.test(t)},n.render(),n}return Sl(e,t),e.prototype.getImage=function(t,e,n){var r=this;return new Promise((function(i,o){var a=pb(t);if(a){var l=new Image;l.onload=function(){bb[e]=l,i(l)},l.onerror=o,a.includes(Sb)||r.isOnlineLink(a)?l.src=a:(n&&(a=(a=a.replace(/fill=[\'\"]#?\w+[\'\"]/g,"")).replace(/fill>/g,">")),a=a.replace(xb,"".concat(xb,' fill="').concat(n,'"')),l.src="".concat(Sb,";utf-8,").concat(encodeURIComponent(a)))}}))},e.prototype.render=function(){var t=this.cfg,n=t.name,r=t.fill,i=Yp(this.cfg),o=bl(bl({},gC(i,"fill")),{type:e.type}),a=new bo({attrs:o});this.iconImageShape=a,this.setImageAttrs({name:n,fill:r})},e.prototype.setImageAttrs=function(t){var e=this,n=t.name,r=t.fill,i=this.iconImageShape;n=n||i.attrs.name,r=r||i.attrs.fill;var o="".concat(n,"-").concat(r),a=bb[o];a?(i.attr("img",a),this.addShape("image",i)):this.getImage(n,o,r).then((function(t){e.destroyed||(i.attr("img",t),e.addShape("image",i))})).catch((function(t){}))},e.type="__GUI_ICON__",e}(yo);(gb=vb||(vb={})).TOP="TOP",gb.BOTTOM="BOTTOM",gb.LEFT="LEFT",gb.RIGHT="RIGHT",(mb=yb||(yb={})).SUM="SUM",mb.MIN="MIN",mb.MAX="MAX",mb.AVG="AVG",(wb=Cb||(Cb={})).Row="row",wb.Col="col",wb.Series="series";var Lb=function(){function t(){this.store=new Map}return t.prototype.set=function(t,e){return this.store.set(t,e)},t.prototype.get=function(t,e){var n;return null!==(n=this.store.get(t))&&void 0!==n?n:e},t.prototype.clear=function(){this.store.clear()},t.prototype.size=function(){return this.store.size},t}(),Eb=function(t){var e,n,r=t.facetCfg,i=t.level,o=t.fields,a=r.colCfg,l=r.spreadsheet,s=r.dataSet.moreThanOneValue(),u=null===(n=null===(e=l.dataCfg.fields)||void 0===e?void 0:e.valueInCols)||void 0===n||n,c=(null==a?void 0:a.hideMeasureColumn)&&u&&!s&&Gy(o,ia)?2:1;return i===o.length-c},Tb=function(t){var e=t.addTotalMeasureInTotal,n=t.parentNode,r=t.currentField,i=t.fields,o=t.facetCfg,a=t.hierarchy,l=i.indexOf(r),s=o.dataSet,u=o.values,c=o.spreadsheet,h=[],d=s.getFieldName(r),f={},p=c.getTotalsConfig(r),v=n.isGrandTotals?p.totalsGroupDimensions:p.subTotalsGroupDimensions;if(null==v?void 0:v.includes(r)){f=ob(n);var g=s.getTotalDimensionValues(r,f);h.push.apply(h,Tl([],El((g||[]).map((function(t){return new ib({label:t,isSubTotals:n.isSubTotals,isGrandTotals:n.isGrandTotals,isTotalRoot:!1})}))),!1)),Cm(h)&&h.push(d)}else{if(!e||r!==ia)return Eb({facetCfg:o,level:l,fields:i})?(n.isLeaf=!0,a.pushIndexNode(n),void(n.rowIndex=a.getIndexNodes().length-1)):void Tb(bl(bl({},t),{currentField:i[l+1]}));f=ob(n),h.push.apply(h,Tl([],El(u.map((function(t){return new ub(t)}))),!1))}var y=h.filter((function(t){return!Mm(t)}));Mb(bl(bl({},t),{fieldValues:y,level:l,parentNode:n,query:f}))},Ob=function(t){var e,n,r=t.parentNode,i=t.currentField,o=t.fields,a=t.facetCfg,l=o.indexOf(i),s=a.dataSet,u=a.spreadsheet,c=[],h=s.getFieldName(i);n=ob(r,!0);var d=s.getDimensionValues(i,n),f=ab(d,a,r,i);c.push.apply(c,Tl([],El(f||[]),!1)),Cm(c)&&(i===ia?c.push.apply(c,Tl([],El(null===(e=s.fields)||void 0===e?void 0:e.values),!1)):c.push(h)),function(t){var e,n,r,i=t.isFirstField,o=t.currentField,a=t.fieldValues,l=t.spreadsheet,s=t.lastField,u=l.getTotalsConfig(i?o:s);i?(null==u?void 0:u.showGrandTotals)&&(n=u.reverseLayout?"unshift":"push",r=new ib({label:u.label,isSubTotals:!1,isGrandTotals:!0,isTotalRoot:!0})):(null==u?void 0:u.showSubTotals)&&(lu.size(a)>1||!1!==lu.get(u,"showSubTotals.always"))&&o!==ia&&(n=u.reverseSubLayout?"unshift":"push",r=new ib({label:u.subLabel,isSubTotals:!0,isGrandTotals:!1,isTotalRoot:!0})),null===(e=a[n])||void 0===e||e.call(a,r)}({currentField:i,lastField:o[l-1],isFirstField:0===l,fieldValues:c,spreadsheet:u});var p=c.filter((function(t){return!Mm(t)}));Mb(bl(bl({},t),{fieldValues:p,level:l,parentNode:r,query:n}))},Ib=function(t){t.parentNode.isTotals?Tb(t):Ob(t)},Rb=function(t,e){return"".concat(t).concat(La).concat(e)},Mb=function(t){var e,n,r,i,o,a,l,s,u,c,h=t.currentField,d=t.fields,f=t.fieldValues,p=t.facetCfg,v=t.hierarchy,g=t.parentNode,y=t.level,m=t.query,C=t.addMeasureInTotalQuery,w=t.addTotalMeasureInTotal,x=p.spreadsheet,S=p.collapsedCols;try{for(var b=Ll(f.entries()),_=b.next();!_.done;_=b.next()){var L=El(_.value,2),E=L[0],T=L[1],O=T instanceof ib,I=T instanceof ub,R=void 0,M=void 0,A=!1,B=!1,D=!1,k=!1,N=h;if(O){var P=T;B=P.isGrandTotals,D=P.isSubTotals,k=P.isTotalRoot,R=VS(T.label),M=k?m:bl(bl({},m),((r={})[h]=R,r)),C&&(M[ia]=null===(l=null==x?void 0:x.dataSet)||void 0===l?void 0:l.fields.values[0]),A=Eb({facetCfg:p,level:y,fields:d})}else I?(R=VS(T.label),M=bl(bl({},m),((i={})[ia]=R,i)),N=ia,B=g.isGrandTotals,D=g.isSubTotals,A=Eb({facetCfg:p,level:y,fields:d})):x.isTableMode()?(R=T,N=d[E],M=bl(bl({},m),((o={})[N]=R,o)),A=!0):(R=T,M=bl(bl({},m),((a={})[h]=R,a)),A=Eb({facetCfg:p,level:y,fields:d}));var z=Rb(g.id,R);if(!z)return;var H=!!fm(null==S?void 0:S[z])&&(null==S?void 0:S[z]),F=new nb({id:z,key:N,value:R,level:y,field:N,parent:g,isTotals:O||I,isGrandTotals:B,isSubTotals:D,isTotalMeasure:I,isCollapsed:H,isTotalRoot:k,hierarchy:v,query:M,spreadsheet:x,isLeaf:A||H}),W=lb(p,g,F,v),G=null===(s=null==x?void 0:x.facet)||void 0===s?void 0:s.getHiddenColumnsInfo(F);G&&g&&(g.hiddenChildNodeInfo=G),!(y>v.maxLevel)||B||g.isGrandTotals||g.isSubTotals||F.isSubTotals||(v.sampleNodesForAllLevels.push(F),v.maxLevel=y,v.sampleNodeForLastLevel=G?(null===(u=null==G?void 0:G.displaySiblingNode)||void 0===u?void 0:u.next)||(null===(c=null==G?void 0:G.displaySiblingNode)||void 0===c?void 0:c.prev):F),A||H||!W?(F.isLeaf=!0,v.pushIndexNode(F),F.rowIndex=v.getIndexNodes().length-1):Ib({addTotalMeasureInTotal:w,addMeasureInTotalQuery:C,parentNode:F,currentField:d[y+1],fields:d,facetCfg:p,hierarchy:v})}}catch(j){e={error:j}}finally{try{_&&!_.done&&(n=b.return)&&n.call(b)}finally{if(e)throw e.error}}},Ab=function(t,e,n,r){var i=e.facetCfg,o=e.hierarchy,a=e.parentNode,l=i.dataSet;t.forEach((function(t,s){"string"==typeof t&&(t={key:t});var u=t.key,c=u===la?VS("序号"):l.getFieldName(u),h=r||a;if(Mb({currentField:u,fields:[u],fieldValues:[c],facetCfg:i,hierarchy:o,parentNode:h,level:n,query:{},addMeasureInTotalQuery:!1,addTotalMeasureInTotal:!1}),t.children&&t.children.length){var d=h.children[s];d.isLeaf=!1,Ab(t.children,e,n+1,d)}}))},Bb=function(t,e){return e>0&&t<e},Db=function(t,e,n){return e>0&&t>=n-e},kb=function(t,e,n){return n>0&&t<e+n},Nb=function(t,e,n){return n>0&&t>=e+1-n},Pb=function(t,e,n,r,i,o){var a=sy(n,(function(e,r){var a=t-(Tm(o)?0:o)+i.x;return a>=e&&a<n[r+1]}),0);a=Math.max(a,0);var l=sy(n,(function(e,r){var o=i.width+t+i.x;return o>=e&&o<n[r+1]}),a);l=Math.min(-1===l?Infinity:l,n.length-2);var s=r.getIndexRange(e+i.y,i.height+e+i.y);return[a,l,s.start,s.end]},zb=function(t,e,n){var r,i,o=null==t?void 0:t.getMatrix(),a=null!==(r=null==o?void 0:o[6])&&void 0!==r?r:0,l=null!==(i=null==o?void 0:o[7])&&void 0!==i?i:0;null==t||t.translate(e-a,n-l)},Hb=function(t,e){var n,r=null==t?void 0:t.getMatrix(),i=null!==(n=null==r?void 0:r[6])&&void 0!==n?n:0;null==t||t.translate(e-i,0)},Fb=function(t,e,n){var r=e,i=n,o=function(t){return t.isLeaf?1:t.children?t.children.reduce((function(t,e){return t+=o(e)}),0):0};return e&&(r=t.slice(0,e).reduce((function(t,e){return t+=o(e)}),0)),n&&(i=t.slice(t.length-n).reduce((function(t,e){return t+=o(e)}),0)),{colCount:r,trailingColCount:i}},Wb=function(t,e){return t.reduce((function(t,n){"string"==typeof n&&(n={key:n});var r=bl({},n);return r.children?(r.children=Wb(r.children,e),t.push(r),t):(e[r.key]&&t.push(r),t)}),[])},Gb=function(t){return"root"===t.parent.id},jb=function(t){var e=function(t){var e=[],n=function(t){t.forEach((function(t){"string"!=typeof t&&t.children?n(t.children):e.push(t)}))};return n(t),e}(t);return e.map((function(t){return"string"==typeof t?t:t.key}))},Ub=function(t){var e=t.children[0];return e?e.isLeaf?e:Ub(e):t},Yb=function(t,e,n){return t.sort((function(t,r){n&&(t=n(t),r=n(r));var i=e.indexOf(t),o=e.indexOf(r);return-1===i&&-1===o?0:-1===i?1:-1===o?-1:i-o}))},Vb=function(t){return oy(t,(function(t){return!Mm(t)&&"undefined"!==t}))},Xb=function(t){var e;return null===(e=th(t))||void 0===e?void 0:e.reduce((function(e,n){var r=Fh(t,n);return Array.isArray(r)?e=e.concat(Xb(r)):null==e||e.push(r),e}),[])},qb=function(t){var e=[];if(Array.isArray(t))for(var n=("undefined"in t),r=t.length+(n?1:0),i=0,o=function(){var n=i===t.length?t[void 0]:t[i];i++,n&&"undefined"in n?th(n).forEach((function(t){e.push(n[t])})):Array.isArray(n)?e.push.apply(e,Tl([],El(n),!1)):e.push(n)};i<r;)o();else e.push(t);return e},Kb=function(t,e){var n=[];return null==t||t.forEach((function(t,r){void 0===t&&e[r]&&n.push(e[r])})),n},$b=function(t,e){return!ey(t,(function(t){return e[t]}))};function Zb(t,e){var n=e.rows,r=e.columns;return Rw(t,(function(t,e){return $b([].concat(n).concat(r),e)&&t.push(e),t}),[])}var Qb=function(t){return Number.parseFloat((cs(t)||0).toPrecision(16))},Jb=function(t,e,n){if(void 0===n&&(n=0),!Object.values(t).find((function(t){return t>0})))return t;var r=bl({},t);r.frozenColCount>=e&&(r.frozenColCount=e);var i=e-r.frozenColCount;r.frozenTrailingColCount>i&&(r.frozenTrailingColCount=i),r.frozenRowCount>=n&&(r.frozenRowCount=n);var o=n-r.frozenRowCount;return r.frozenTrailingRowCount>o&&(r.frozenTrailingRowCount=o),r};function t_(t,e,n){var r;return null===(r=null==t?void 0:t.addShape)||void 0===r?void 0:r.call(t,"rect",bl({zIndex:1,attrs:e},n||{}))}function e_(t,e){var n;return null===(n=null==t?void 0:t.addShape)||void 0===n?void 0:n.call(t,"circle",{attrs:e})}function n_(t,e,n,r,i,o,a,l){var s;return!Cm(e)&&t&&Pg(e,(function(e){t.contain(e)&&t.removeChild(e,!0)})),null===(s=null==t?void 0:t.addShape)||void 0===s?void 0:s.call(t,"text",{attrs:bl(bl({x:n,y:r,text:i,originalText:l},o),a)})}function r_(t,e,n){var r;return null===(r=null==t?void 0:t.addShape)||void 0===r?void 0:r.call(t,"line",{zIndex:100,attrs:bl(bl({},e),n)})}function i_(t,e,n){Cm(t)||(Xl(t)?t:[t]).forEach((function(t){Fw(t,"attrs.".concat(e),n)}))}function o_(t,e){var n=new _b(e);return null==t||t.add(n),n}function a_(t,e,n,r,i){var o=new _b(bl(bl({name:r?"Plus":"Minus"},e),{fill:n}));return ws(i)&&o.on("click",i),null==t||t.add(o),o}var l_="s2-offscreen-canvas",s_=function(t){var e;return null!==(e=null==t?void 0:t.position)&&void 0!==e?e:"right"},u_=function(t,e){var n,r,i,o=t.data,a=t.encode,l=t.type,s=e.getMeta(),u=s.x,c=s.y,h=s.height,d=s.width,f=e.getStyle(Ua.DATA_CELL),p=f.cell,v=f.miniChart,g=[],y=yy(o,(function(t){return g.push(null==t?void 0:t[a.y]),{x:t[a.x],y:t[a.y]}})),m=qm(g),C=rC(g),w=m-C,x=u+p.padding.left,S=u+d-p.padding.right,b=c+p.padding.top,_=c+h-p.padding.bottom,L=_-b,E=l===ea.Bar?(S-x-(g.length-1)*(null===(n=null==v?void 0:v.bar)||void 0===n?void 0:n.intervalPadding))/g.length+(null===(r=null==v?void 0:v.bar)||void 0===r?void 0:r.intervalPadding):null!==(i=(S-x)/(g.length-1))&&void 0!==i?i:0,T=[];return{points:yy(y,(function(t,e){var n,r,i=x+e*E;if(r=0!==w?_-((null==t?void 0:t.y)-C)/w*L:C>0?b:_,l===ea.Bar){var o=void 0,a=void 0;C<0&&m>0&&0!==w?(o=_-(0-C)/w*L,a=Math.abs(r-o),(null==t?void 0:t.y)<0&&(r=o)):(o=C<0?b:_,a=0===(w=qm([Math.abs(m),Math.abs(C)]))?L:Math.abs((null==t?void 0:t.y)-0)/w*L,r=o);var s=E-(null===(n=null==v?void 0:v.bar)||void 0===n?void 0:n.intervalPadding);T.push([s,a])}return[i,r]})),box:T}},c_=function(t,e,n){var r=Number(e)-Number(t);return Number.isNaN(r)||Number(t)<0?n.bad:r<=.1?n.good:r>.1&&r<=.2?n.satisfactory:n.bad},h_=function(t){var e,n,r,i,o,a;if(!Cm(t)){var l=t.getCellArea(),s=l.x,u=l.y,c=l.height,h=l.width,d=t.findFieldCondition(null===(e=t.cellConditions)||void 0===e?void 0:e.interval);if(d&&d.mapping){var f=t.mappingValue(d);if(!f)return;var p=f.isCompare?f:t.valueRangeByField,v=Qb(p.minValue),g=Qb(p.maxValue),y=Tm(null==f?void 0:f.fieldValue)?Qb(t.getMeta().fieldValue):Qb(null==f?void 0:f.fieldValue);if(y<v||y>g)return;var m=null!==(r=null===(n=t.getStyle().miniChart.interval)||void 0===n?void 0:n.height)&&void 0!==r?r:t.getStyle().cell.miniBarChartHeight,C=null!==(o=null===(i=t.getStyle().miniChart.interval)||void 0===i?void 0:i.fill)&&void 0!==o?o:t.getStyle().cell.miniBarChartFillColor,w=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),t=Qb(t),e=Qb(e);var n=t>=0,r=e>=0&&t<=0,i=r?0:n?t:e,o=e-t;return function(e){var a=n?0:1;return{zeroScale:r?Lf(Math.abs(0-t)/o,0,1):a,scale:Lf((e-i)/o,-1,1)}}}(v,g),x=w(y);return t_(t,{x:s+h*x.zeroScale,y:u+c/2-m/2,width:h*x.scale,height:m,fill:null!==(a=f.fill)&&void 0!==a?a:C})}}},d_=function(t,e){var n,r=e.getStyle(Ua.DATA_CELL),i=e.getMeta(),o=i.x,a=i.y,l=i.height,s=i.width,u=i.spreadsheet;if(Cm(t))n_(e,[],o+s-r.cell.padding.right,a+l/2,L_(e,u.options.placeholder),r.text);else{var c=r.miniChart.bullet,h=c.progressBar,d=c.comparativeMeasure,f=c.rangeColors,p=c.backgroundColor,v=t.measure,g=t.target,y=Math.max(Number(v),0),m=Math.max(Number(g),0),C=function(t,e){var n,r;void 0===e&&(e={min:0,max:0});var i=Number(t);if(Number.isNaN(i))return t;var o=null!==(n=null==e?void 0:e.min)&&void 0!==n?n:e,a=null!==(r=null==e?void 0:e.max)&&void 0!==r?r:e;return new Intl.NumberFormat("en-US",{minimumFractionDigits:o,maximumFractionDigits:a,useGrouping:!1,style:"percent"}).format(i)}(v,2),w=(null==h?void 0:h.widthPercent)>1?(null==h?void 0:h.widthPercent)/100:null==h?void 0:h.widthPercent,x=r.cell.padding,S=s-x.left-x.right,b=w*S,_=S-b,L=o+s-x.right-b,E=a+l/2-h.height/2;t_(e,{x:L,y:E,width:b,height:h.height,fill:p,textBaseline:r.text.textBaseline});var T=Fh(e.getMeta(),"spreadsheet.options.bullet.getRangeColor"),O=Math.max(Math.min(b*y,b),0);t_(e,{x:L,y:E+(h.height-h.innerHeight)/2,width:O,height:h.innerHeight,fill:null!==(n=null==T?void 0:T(y,m))&&void 0!==n?n:c_(y,m,f)});var I=L+b*m;r_(e,{x1:I,y1:a+(l-d.height)/2,x2:I,y2:a+(l-d.height)/2+d.height},{stroke:(null==d?void 0:d.fill)||(null==d?void 0:d.color),lineWidth:d.width,opacity:null==d?void 0:d.opacity}),n_(e,[],L-x.right,a+l/2,S_({measureTextWidth:u.measureTextWidth,text:C,maxWidth:_-x.right,fontParam:r.text}),r.text)}},f_=function(t,e){switch(null==e?void 0:e.type){case ea.Line:!function(t,e){if(!Cm(null==t?void 0:t.data)&&!Cm(e)){var n=e.getStyle(Ua.DATA_CELL).miniChart.line,r=n.point,i=n.linkLine,o=u_(t,e).points;!function(t,e){var n;null===(n=null==t?void 0:t.addShape)||void 0===n||n.call(t,"polyline",{attrs:e})}(e,{points:o,stroke:i.fill,lineWidth:i.size,opacity:i.opacity});for(var a=0;a<o.length;a++)e_(e,{x:o[a][0],y:o[a][1],r:r.size,fill:r.fill,fillOpacity:r.opacity})}}(e,t);break;case ea.Bar:!function(t,e){if(!Cm(null==t?void 0:t.data)&&!Cm(e))for(var n=e.getStyle(Ua.DATA_CELL).miniChart.bar,r=u_(t,e),i=r.points,o=r.box,a=0;a<i.length;a++)t_(e,{x:i[a][0],y:i[a][1],width:o[a][0],height:o[a][1],fill:n.fill,fillOpacity:n.opacity})}(e,t);break;default:d_(e,t)}},p_=function(t,e){var n=t.x,r=t.y,i=t.width,o=t.height,a=i-(null==e?void 0:e.left)-(null==e?void 0:e.right),l=o-(null==e?void 0:e.top)-(null==e?void 0:e.bottom);return{x:n+(null==e?void 0:e.left),y:r+(null==e?void 0:e.top),width:a,height:l}},v_=function(t){return tC({size:0,position:"right",margin:{left:0,right:0}},t)},g_=function(t,e){return t-(e=v_(e)).size-e.margin.right-e.margin.left},y_=function(t,e,n){var r=t.y,i=t.height;void 0===n&&(n=0);var o=0;switch(e){case"top":o=r;break;case"middle":o=r+i/2-n/2;break;default:o=r+i-n}return o},m_=function(t,e,n,r,i){void 0===n&&(n=0),void 0===i&&(i=1);var o,a,l=t.x,s=t.width,u=e.textAlign,c=e.textBaseline,h=v_(r),d=h.size,f=h.margin,p=h.position,v=i*(d+f.left)+(i?f.right:0);switch(u){case"left":o=l+("left"===p?v:0),a=l+("left"===p?f.left:n+f.left);break;case"center":var g=l+s/2-(v-("left"===p?f.left:f.right)+n)/2;o=g+n/2+("left"===p?v-f.left:0),a=g+("left"===p?0:n+f.left);break;default:o=l+s-("right"===p?v:0),a=l+s-("right"===p?v-f.left:n+v-f.left)}return{text:{x:o,y:y_(t,c,0)},icon:{x:a,y:y_(t,c,d)}}},C_=function(t,e,n){var r,i,o,a,l,s=e.x,u=e.y,c=e.width,h=e.height,d=n.horizontalBorderWidth,f=n.horizontalBorderColorOpacity,p=n.horizontalBorderColor,v=n.verticalBorderWidth,g=n.verticalBorderColor,y=n.verticalBorderColorOpacity;if(t===vb.TOP||t===vb.BOTTOM){var m=u;i=m=t===vb.TOP?u+v/2:u+h-v/2,a=m,r=s,o=s+c,l={lineWidth:d,stroke:p,strokeOpacity:f}}if(t===vb.LEFT||t===vb.RIGHT){var C=s;r=C=t===vb.LEFT?s+d/2:s+c-d/2,o=C,i=u,a=u+h,l={lineWidth:v,stroke:g,strokeOpacity:y}}return{position:{x1:r,x2:o,y1:i,y2:a},style:l}};Th((function(t,e){if(void 0===t&&(t=""),!e)return 0;var n,r=(n=document.getElementById(l_),n||((n=document.createElement("canvas")).id=l_,n.style.display="none",document.body.appendChild(n),n)).getContext("2d"),i=e,o=i.fontSize,a=i.fontFamily,l=i.fontWeight,s=i.fontStyle,u=i.fontVariant;return r.font=[s,u,l,"".concat(o,"px"),a].join(" ").trim(),r.measureText("".concat(t)).width}),(function(t,e){return Tl([t],El(Fy(e)),!1).join("")}));var w_,x_=function(t,e,n,r){var i,o=t(Ba,r);i=zy(e)?e:kh(e);var a,l,s=n,u=[];if(t(e,r)<=n)return e;for(var c=!0;c;){if((l=t(a=i.substr(0,16),r))+o>s&&l>s){c=!1;break}if(u.push(a),s-=l,!(i=i.substr(16)))return u.join("")}for(var h=!0;h;){if((l=t(a=i.substr(0,1),r))+o>s){h=!1;break}if(u.push(a),s-=l,!(i=i.substr(1)))return u.join("")}return"".concat(u.join(""),"...")},S_=function(t){var e=t.measureTextWidth,n=t.text,r=t.maxWidth,i=t.fontParam,o=t.priorityParam,a=t.placeholder,l={},s=null!=a?a:Ea,u=Tm(n)||""===n?s:"".concat(n),c=o;if(i&&Xl(i)?c=i:l=i||{},!c||!c.length)return x_(e,u,r,l);var h=[],d=[u];c.forEach((function(t){d.forEach((function(e,n){var r=-1,i=e.match(new RegExp(t));if(i){var o=i[0];r=i.index,h.push(o);var a=r+o.length,l=[e.slice(0,r),e.slice(a)].filter((function(t){return!!t}));d.splice.apply(d,Tl([n,1],El(l),!1))}}))})),d=h.concat(d);var f=u,p=e(Ba,l),v=r;return d.forEach((function(t){if(v<=0){var n=f.indexOf(t),r=f.slice(n-3,n);if(r&&r!==Ba){var i=e(t,l);f=f.replace(t,i>p?Ba:t)}else f=f.replace(t,"");v-=p}else{i=e(t,l);if(v<i&&i>p){var o=x_(e,t,v,l);f=f.replace(t,o),v=0}else v-=i}})),f},b_=function(t,e,n,r){void 0===r&&(r="left");var i=e.right,o=e.left,a=n||0;return"left"===r?t+i/2+a:"right"===r?t-i/2-a:t+o/2+a},__=function(t){var e=t.rowIndex,n=t.colIndex,r=t.meta,i=t.data,o=t.textStyle,a=t.textCondition,l=o.fill;return(null==a?void 0:a.mapping)&&(l=null==a?void 0:a.mapping(i,{rowIndex:e,colIndex:n,meta:r}).fill),bl(bl({},o),{fill:l})},L_=function(t,e){return ws(e)?e(t):e},E_=function(t,e,n){var r,i,o,a;void 0===n&&(n=!0);var l=t.getContentArea(),s=l.x,u=l.y,c=l.height,h=l.width,d=e||t.getMeta().fieldValue,f=d.values,p=t.getMeta().spreadsheet,v=p.options,g=p.measureTextWidth,y=v.style.cellCfg.valuesCfg,m=null===(i=null===(r=null==v?void 0:v.conditions)||void 0===r?void 0:r.text)||void 0===i?void 0:i[0],C=null===(a=null===(o=null==v?void 0:v.conditions)||void 0===o?void 0:o.icon)||void 0===a?void 0:a[0];if(Xl(f)){var w=null==y?void 0:y.widthPercent,x=0;if(null==d?void 0:d.label){var S=t.getStyle(Ua.DATA_CELL).bolderText,b=n_(t,[],s,u+(x=c/(f.length+1))/2,S_({measureTextWidth:g,text:d.label,maxWidth:h,fontParam:S}),S);t.addTextShape(b)}for(var _,L=function(t){var e,n,r=t.getMeta().isTotals,i=null===(n=(e=t).isMeasureField)||void 0===n?void 0:n.call(e),o=t.getStyle(i?Ua.COL_CELL:Ua.DATA_CELL);return{cellStyle:o,textStyle:i?o.measureText:r?o.bolderText:o.text}}(t),E=L.cellStyle,T=L.textStyle,O=null==E?void 0:E.icon,I=C&&C.mapping&&{size:null==O?void 0:O.size,margin:null==O?void 0:O.margin,position:null==C?void 0:C.position},R=function(t,e,n){for(var r,i,o,a=t.x,l=t.y,s=t.width,u=t.height/jw(e),c=[],h=0,d=yy(n,(function(t){return t>1?t/100:t})),f=0;f<jw(e);f++){i=l+u*f;var p=[];r=a,h=0;for(var v=0;v<jw(e[f]);v++)o=Cm(d)?s/jw(e[0]):s*d[v],r=b_(a,{left:0,right:0},h,"left"),h+=o,p.push({x:r,y:i,width:o,height:u});c.push(p)}return c}({x:s,y:u+x,height:c-x,width:h},f,w),M=0;M<f.length;M++)for(var A=Yp(f[M]),B=0;B<A.length;B++){_=A[B];var D=n?__({rowIndex:M,colIndex:B,meta:null==t?void 0:t.getMeta(),data:_,textStyle:T,textCondition:m}):T,k=(null==t?void 0:t.getMeta().spreadsheet.options).placeholder,N=L_(null==t?void 0:t.getMeta(),k),P=g_(R[M][B].width,O),z=S_({measureTextWidth:g,text:_,maxWidth:P,fontParam:D,placeholder:N}),H=g(z,T),F=m_(R[M][B],T,H,I,C?1:0);b=n_(t,[],F.text.x,F.text.y,z,D,{},null==_?void 0:_.toString());if(t.addTextShape(b),C&&n){var W=null==C?void 0:C.mapping(_,{rowIndex:M,colIndex:B,meta:null==t?void 0:t.getMeta()});if(W){var G=o_(t,bl(bl({},F.icon),{name:W.icon,width:null==O?void 0:O.size,height:null==O?void 0:O.size,fill:W.fill}));t.addConditionIconShape(G)}}}}else f_(t,f)},T_=function(t,e){return void 0===e&&(e=1),(null==t?void 0:t.width)*e};function O_(t,e){return e.map((function(e){var n=t[e];return void 0===n?n:"".concat(n)}))}function I_(t){return t.map((function(t){var e=null==t?void 0:t.split(La);return e[(null==e?void 0:e.length)-1]||t}))}function R_(t){var e=t.rowDimensionValues,n=t.colDimensionValues,r=t.careUndefined,i=t.isFirstCreate,o=t.onFirstCreate,a=t.rowFields,l=t.colFields,s=t.rowPivotMeta,u=t.colPivotMeta,c=function(t,e,n,s){void 0===e&&(e=!0);for(var u=e?n:s,c=e?a:l,h=[],d=0;d<t.length;d++){var f=t[d];if(!u.has(f))if(i)u.set(f,{level:u.size,children:new Map}),null==o||o({isRow:e,dimension:null==c?void 0:c[d],dimensionPath:t.slice(0,d+1)});else{var p=u.get(f);if(p&&h.push(p.level),!r)break}var v=u.get(f);Mm(f)&&r?h.push(f):h.push(null==v?void 0:v.level),v&&(i&&(v.childField=null==c?void 0:c[d+1]),u=null==v?void 0:v.children)}return h},h=c(e,!0,s,u),d=c(n,!1,s,u);return h.concat.apply(h,Tl([],El(d),!1))}function M_(t,e){return Rw(t,(function(t,n){return t.push(e[n]),t}),[])}function A_(t){var e=t.rows,n=t.columns,r=t.originData,i=void 0===r?[]:r,o=t.indexesData,a=void 0===o?[]:o,l=t.totalData,s=void 0===l?[]:l,u=t.sortedDimensionValues,c=t.rowPivotMeta,h=t.colPivotMeta,d=[],f=new Set(qy(e,n)),p=function(t){var e=t.isRow,n=t.dimension,r=t.dimensionPath;!e&&f.has(n)||(u[n]||(u[n]=[])).push(r.map((function(t){return"".concat(t)})).join(La))};return i.concat(s).forEach((function(t){var r=R_({rowDimensionValues:O_(t,e),colDimensionValues:O_(t,n),rowPivotMeta:c,colPivotMeta:h,isFirstCreate:!0,onFirstCreate:p,careUndefined:(null==s?void 0:s.length)>0,rowFields:e,colFields:n});d.push(r),Fw(a,r,t)})),{paths:d,indexesData:a,rowPivotMeta:c,colPivotMeta:h,sortedDimensionValues:u}}function B_(t,e){if(t&&e){var n=e.split(La),r=Mg(n),i=t;Pg(n,(function(t,e){var n=i.get(t);return n?(t===r?(n.children=new Map,n.childField=void 0):i=n.children,!0):0===e&&t===_a}))}}function D_(t,e,n){return{field:ia,name:e||n,formatter:function(e){return function(e){return Fh(uy(t,(function(t){return t.field===e})),"name",e)}(e)}}}function k_(t,e){return{isRowTotal:t.isGrandTotals,isRowSubTotal:t.isSubTotals,isColTotal:e.isGrandTotals,isColSubTotal:e.isSubTotals}}function N_(t,e){return!(!t||!e)&&String(t).toLowerCase()===String(e).toLowerCase()}var P_,z_,H_=function(t,e){var n=t.getColumnNodes().find((function(t){return t.id===e}));return t.isPivotMode()?null==n?void 0:n.value:null==n?void 0:n.field},F_=function(t,e){var n=e.getColumnNodes().find((function(e){return e.colIndex===t})),r=H_(e,n.id);return e.options.interaction.copyWithFormat?e.dataSet.getFieldFormatter(r):function(t){return t}},W_=function(t,e,n){var r,i;if(n.isPivotMode()){var o=El(function(t,e){var n=t.rowIndex,r=t.colIndex;return[e.getRowNodes().find((function(t){return t.rowIndex===n})),e.getColumnNodes().find((function(t){return t.colIndex===r}))]}(t,n),2),a=o[0],l=o[1],s=function(t){var e,n,r,i;return(null===(i=null===(r=null===(n=t.options)||void 0===n?void 0:n.style)||void 0===r?void 0:r.colCfg)||void 0===i?void 0:i.hideMeasureColumn)&&t.isValueInCols()?((e={})[ia]=t.dataCfg.fields.values[0],e):{}}(n),u=n.dataSet.getCellData({query:bl(bl(bl({},a.query),l.query),s),rowNode:a,isTotals:a.isTotals||a.isTotalMeasure||l.isTotals||l.isTotalMeasure,totalStatus:k_(a,l)});return null!==(r=null==u?void 0:u[ra])&&void 0!==r?r:""}var c=function(t,e){var n=e.getColumnNodes().find((function(e){return e.colIndex===t}));return H_(e,n.id)}(t.colIndex,n);return null===(i=e[t.rowIndex])||void 0===i?void 0:i[c]},G_=function(t,e,n){return F_(t.colIndex,n)(W_(t,e,n))},j_=function(t){return/\n/.test(t)?'"'+t.replace(/\r\n?/g,"\n")+'"':t},U_=function(t,e){var n=t.split(La);return e?n.slice(n.length-e):(n.shift(),n)};(z_=P_||(P_={})).PLAIN="text/plain",z_.HTML="text/html";var Y_=((w_={})[P_.PLAIN]=function(t){return{type:P_.PLAIN,content:yy(t,(function(t){return t.join("\t")})).join("\r\n")}},w_[P_.HTML]=function(t){return{type:P_.HTML,content:'<meta charset="utf-8"><table><tbody>'.concat((e=t,n="tr",e.map((function(t){return"<".concat(n,">").concat(function(t,e){return t.map((function(t){return"<".concat(e,">").concat($g(t),"</").concat(e,">")})).join("")}(t,"td"),"</").concat(n,">")})).join("")),"</tbody></table>")};var e,n},w_);function V_(t){return Y_[t]}var X_=function(t,e,n){var r,i,o,a,l,s,u=null!==(i=null===(r=t[0])||void 0===r?void 0:r.length)&&void 0!==i?i:0,c=null!==(o=null==e?void 0:e.length)&&void 0!==o?o:0,h=null!==(l=null===(a=n[0])||void 0===a?void 0:a.length)&&void 0!==l?l:0,d=null!==(s=n.length)&&void 0!==s?s:0,f=u+h,p=c+d,v=Array.from(Array(p),(function(){return new Array(f)}));return v=yy(v,(function(r,i){return yy(r,(function(r,o){return o>=0&&o<u&&i>=0&&i<c?"":o>=u&&o<=f&&i>=0&&i<c?e[i][o-u]:o>=0&&o<u&&i>=c&&i<p?t[i-c][o]:o>=u&&o<=f&&i>=c&&i<p?n[i-c][o-u]:void 0}))})),[V_(P_.PLAIN)(v),V_(P_.HTML)(v)]},q_=function(t,e,n){return yy(t,(function(t){return e.map((function(e){var r,i=n.dataSet.getCellData({query:bl(bl({},t.query),e.query),rowNode:t,isTotals:t.isTotals||t.isTotalMeasure||e.isTotals||e.isTotalMeasure,totalStatus:k_(t,e)});return F_(e.colIndex,n)(null!==(r=null==i?void 0:i[ra])&&void 0!==r?r:"")}))}))};function K_(t,e,n){return t.options.interaction.copyWithHeader?function(t,e,n){var r=yy(e,(function(t){return U_(t.id)})),i=aS.apply(void 0,Tl([],El(yy(n,(function(t){return U_(t.id)}))),!1)),o=q_(e,n,t);return X_(r,i,o)}(t,e,n):function(t,e,n){var r=q_(e,n,t);return[V_(P_.PLAIN)(r),V_(P_.HTML)(r)]}(t,e,n)}var $_=function(t,e,n){return e.isPivotMode()?function(t,e){var n=t.getRowNodes().filter((function(e){return e.isLeaf||t.isHierarchyTreeType()})),r=t.getColumnNodes().filter((function(t){return t.isLeaf})),i=e.length?e.reduce((function(t,e){return t.push.apply(t,Tl([],El(r.filter((function(t){return t.id.startsWith(e.id)}))),!1)),t}),[]):r;return K_(t,n,i)}(e,n):function(t,e){var n=t.dataSet.getDisplayDataSet(),r=e.length?e.map((function(e){return{field:H_(t,e.id),formatter:F_(e.colIndex,t)}})):t.dataCfg.fields.columns.map((function(e){return t.getColumnNodes().find((function(t){return t.field===e}))})).map((function(e){return{field:H_(t,e.id),formatter:F_(e.colIndex,t)}})),i=n.map((function(t){return r.map((function(e){var n=e.field,r=e.formatter;return j_(r(t[n]))}))}));return[V_(P_.PLAIN)(i),V_(P_.HTML)(i)]}(e,n)},Z_=function(t,e,n){return e.isPivotMode()?function(t,e){var n=t.getRowNodes().filter((function(e){return e.isLeaf||t.isHierarchyTreeType()})),r=t.getColumnNodes().filter((function(t){return t.isLeaf})),i=e.reduce((function(t,e){return t.push.apply(t,Tl([],El(n.filter((function(t){return t.id.startsWith(e.id)}))),!1)),t}),[]);return K_(t,i,r)}(e,n):function(t,e){var n=t.dataSet.getDisplayDataSet().filter((function(t,n){return e.map((function(t){return t.rowIndex})).includes(n)})).map((function(e){var n=t.getColumnNodes().reduce((function(t,e,n){return t[e.field]=n,t}),{});return Object.keys(e).sort((function(t,e){return n[t]-n[e]})).map((function(e){return t.getColumnNodes().find((function(t){return t.field===e}))})).filter(Boolean).map((function(n){return j_(F_(n.colIndex,t)(e[n.field]))}))}));return[V_(P_.PLAIN)(n),V_(P_.HTML)(n)]}(e,n)};function Q_(t,e,n){return yy(t,(function(t){var r=t.getMeta(),i=r.id,o=r.label,a=i;r.isTotals&&(a=function(t,e){for(var n=t,r={level:e},i=n.label;n.level>=0;){for(var o=r.level-n.level;o>0;)i="".concat(n.label).concat(La).concat(i),o--;r=n,n=n.parent}return i}(r,e));var l=t.getActualText();return yy(U_(a,n.size),(function(t){return wm(t,o)?l:t}))}))}function J_(t){var e,n=function(t){var e=new Set;return Pg(t,(function(t){var n=t.getMeta().level;e.has(n)||e.add(n)})),e}(t),r=null!==(e=qm(Array.from(n)))&&void 0!==e?e:0,i=function(t,e){return oy(t,(function(t){var n=t.getMeta(),r=n.level===e,i=n.isTotals&&Cm(n.children);return r||i}))}(t,r),o=t[0].cellType===Ua.COL_CELL,a=Q_(i,r,n);return o&&(a=aS.apply(void 0,Tl([],El(a),!1))),[V_(P_.PLAIN)(a),V_(P_.HTML)(a)]}var tL=function(t,e,n){return yy(e,(function(e){var r;return null!==(r=t[e])&&void 0!==r?r:n}))};function eL(t,e){var n,r,i=e.filter((function(t){return t.type===Ua.COL_CELL})),o=e.filter((function(t){return t.type===Ua.ROW_CELL})),a=t.dataSet.getDisplayDataSet();if(t.interaction.getCurrentStateName()===Ga.ALL_SELECTED)r=$_(0,t,[]);else if(i.length)r=$_(0,t,i);else if(o.length)r=Z_(0,t,o);else{if(!e.length)return;var l=function(t){if(!(null==t?void 0:t.length))return[];var e=El([{row:Infinity,col:Infinity},{row:0,col:0}],2),n=e[0],r=e[1];t.forEach((function(t){var e=t.rowIndex,i=t.colIndex;n.col=Math.min(i,n.col),n.row=Math.min(e,n.row),r.col=Math.max(i,r.col),r.row=Math.max(e,r.row)}));var i=El([r.row-n.row+1,r.col-n.col+1],2),o=i[0],a=i[1],l=new Array(o).fill("").map((function(){return new Array(a).fill("")}));return t.forEach((function(t){var e=t.rowIndex,r=t.colIndex,i=El([e-n.row,r-n.col],2),o=i[0],a=i[1];l[o][a]=t})),l}(e);if(t.interaction.getSelectedCellHighlight().currentRow){var s=SC(e,"rowIndex","asc").map((function(e){return t.dataSet.getRowData(e)}));r=function(t,e){var n=t.options.placeholder,r=t.dataCfg.fields,i=r.rows,o=r.columns,a=r.values,l=L_(t,n),s=t.getColumnLeafNodes(),u=[];if(t.isTableMode()){var c=oy(s,(function(t){return t.field!==la}));u=yy(e,(function(t){return yy(c,(function(e){var n;return null!==(n=null==t?void 0:t[e.field])&&void 0!==n?n:l}))}))}else if(t.isPivotMode()){var h=Tl(Tl(Tl([],El(i),!1),El(o),!1),El(a),!1);u=Rw(Xb(e).filter((function(t){return Tl(Tl([],El(i),!1),El(o),!1).every((function(e){return!Tm(t[e])}))})),(function(t,e){return Tl(Tl([],El(t),!1),[tL(e,h,l)],!1)}),[])}return[V_(P_.PLAIN)(u),V_(P_.HTML)(u)]}(t,s)}else r=(null===(n=t.options.interaction)||void 0===n?void 0:n.copyWithHeader)?function(t,e,n){var r=aS.apply(void 0,Tl([],El(yy(t[0],(function(t){var e,n,r=null!==(n=null===(e=t.id.split(Ea))||void 0===e?void 0:e[1])&&void 0!==n?n:"";return U_(r)}))),!1)),i=yy(t,(function(t){var e,n,r=null!==(n=null===(e=t[0].id.split(Ea))||void 0===e?void 0:e[0])&&void 0!==n?n:"";return U_(r)})),o=yy(t,(function(t){return yy(t,(function(t){return G_(t,e,n)}))}));return X_(i,r,o)}(l,a,t):function(t,e,n){var r=e.map((function(e){return e.map((function(e){return e?j_(G_(e,t,n)):""}))}));return[V_(P_.PLAIN)(r),V_(P_.HTML)(r)]}(a,l,t)}return r}var nL=function(t){var e,n,r,i,o=t.interaction,a=o.getState().cells||[],l=null!==(e=o.getInteractedCells())&&void 0!==e?e:[];return(n=!Cm(l)&&ey(l,(function(t){return t.cellType===Ua.ROW_CELL||t.cellType===Ua.COL_CELL}))?J_(l):eL(t,a))&&iL(n),r=n,void 0===(i=P_.PLAIN)&&(i=P_.PLAIN),Array.isArray(i)?[].concat(r).filter((function(t){return i.includes(t.type)})).map((function(t){return t.content})):[].concat(r).filter((function(t){return(null==t?void 0:t.type)===i})).map((function(t){return t.content}))[0]||""},rL=function(t){return new Promise((function(e,n){var r;r=Array.isArray(t)?Fh(t.filter((function(t){return t.type===P_.PLAIN})),"[0].content",""):t.content||"";var i=document.createElement("textarea");i.value=r,document.body.appendChild(i),i.focus({preventScroll:!0}),i.select();var o=document.execCommand("copy");document.body.removeChild(i),o?e():n()}))},iL=function(t,e){var n;return void 0===e&&(e=!1),n="string"==typeof t?{content:t,type:P_.PLAIN}:t,navigator.clipboard&&window.ClipboardItem&&!e?function(t){return navigator.clipboard.write([new ClipboardItem([].concat(t).reduce((function(t,e){var n,r=e.type,i=e.content.replace(/\x00/g,"");return bl(bl({},t),((n={})[r]=new Blob([i],{type:r}),n))}),{}))]).catch((function(){return rL(t)}))}(n):rL(n)},oL=function(t,e,n){var r,i=t.split(La);if(n)r=[t];else{r=[Rb(i[0],i[1])];for(var o=2;o<i.length;o+=1)r.push(Rb(r[o-2],i[o]))}return oy(e,(function(t){var e;return r.includes(null===(e=t.getMeta())||void 0===e?void 0:e.id)}))},aL=function(t,e,n){t&&Pg(oL(t,e),(function(t){t.updateByState(n)}))},lL=function(t){function e(e,n){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];var o=t.call(this,{})||this;return o.textShapes=[],o.actualTextWidth=0,o.conditionIconShapes=[],o.stateShapes=new Map,o.meta=e,o.spreadsheet=n,o.theme=n.theme,o.conditions=o.spreadsheet.options.conditions,o.handleRestOptions.apply(o,Tl([],El(r),!1)),o.shouldInit()&&o.initCell(),o}return Sl(e,t),e.prototype.getMeta=function(){return this.meta},e.prototype.setMeta=function(t){this.meta=t},e.prototype.getIconStyle=function(){return this.theme[this.cellType].icon},e.prototype.getTextAndIconPosition=function(t){void 0===t&&(t=1);var e=this.getTextStyle(),n=this.getIconStyle();return m_(this.getContentArea(),e,this.actualTextWidth,n,t)},e.prototype.getActualText=function(){return this.actualText},e.prototype.getFieldValue=function(){return this.getFormattedFieldValue().formattedValue},e.prototype.handleRestOptions=function(){},e.prototype.shouldInit=function(){var t=this.meta,e=t.width,n=t.height;return e>0&&n>0},e.prototype.getStyle=function(t){return Fh(this.theme,t||this.cellType)},e.prototype.getResizeAreaStyle=function(){return this.getStyle("resizeArea")},e.prototype.shouldDrawResizeAreaByType=function(t,e){var n=this.spreadsheet.options.interaction.resize;return fm(n)?n:ws(n.visible)?n.visible(e):n[t]},e.prototype.getCellArea=function(){var t=this.meta;return{x:t.x,y:t.y,height:t.height,width:t.width}},e.prototype.getContentArea=function(){var t=this.getStyle()||this.theme.dataCell,e=(null==t?void 0:t.cell).padding;return p_(this.getCellArea(),e)},e.prototype.getIconPosition=function(t){return void 0===t&&(t=1),this.getTextAndIconPosition(t).icon},e.prototype.drawTextShape=function(){var t=this.getFormattedFieldValue().formattedValue,e=this.getMaxTextWidth(),n=this.getTextStyle(),r=this.spreadsheet,i=r.options.placeholder,o=r.measureTextWidth,a=L_(this,i),l=S_({measureTextWidth:o,text:t,maxWidth:e,fontParam:n,placeholder:a});this.actualText=l,this.actualTextWidth=o(l,n);var s=this.getTextPosition();this.textShape=n_(this,[this.textShape],s.x,s.y,l,n),this.textShapes.push(this.textShape)},e.prototype.drawLinkFieldShape=function(t,e){if(t){if(!JS(this.spreadsheet.options.style.device)){var n=this.getTextStyle(),r=this.getTextPosition().x;"center"===n.textAlign?r-=this.actualTextWidth/2:"right"===n.textAlign&&(r-=this.actualTextWidth);var i=this.textShape.getBBox().maxY;this.linkFieldShape=r_(this,{x1:r,y1:i+1,x2:r+this.actualTextWidth,y2:i+1},{stroke:e,lineWidth:1})}this.textShape.attr({fill:e,cursor:"pointer",appendInfo:{isLinkFieldText:!0,cellData:this.meta}})}},e.prototype.getLinkFieldStyle=function(){return this.getTextStyle().linkTextFill},e.prototype.drawLinkField=function(t){var e=this.spreadsheet.options.interaction.linkFields,n=void 0===e?[]:e,r=this.getLinkFieldStyle(),i=function(t,e){return"function"==typeof t?t(e):t.some((function(t){return t===e.key||t===e.id||t===e.valueField}))}(n,t);this.drawLinkFieldShape(i,r)},e.prototype.updateByState=function(t,e){var n=this;this.spreadsheet.interaction.setInteractedCells(e),Pg(Fh(this.theme,"".concat(this.cellType,".cell.interactionState.").concat(t)),(function(t,e){th(CC(nl,(function(t){return Gy(t,e)}))).forEach((function(r){var i=n.stateShapes.has(r),o=i?n.stateShapes.get(r):n[r],a=Xl(o)?o:[o];(i&&a.forEach((function(t){t.set("visible",!0)})),"interactiveBorderShape"===r&&"borderWidth"===e)&&(_m(t)&&Pg(n.getInteractiveBorderShapeStyle(t),(function(t,e){i_(a,e,t)})));i_(a,el[e],t)}))}))},e.prototype.getInteractiveBorderShapeStyle=function(t){var e=this.getCellArea(),n=e.x,r=e.y,i=e.height,o=e.width,a=this.theme.dataCell.cell,l=a.horizontalBorderWidth,s=a.verticalBorderWidth;return{x:n+s/2+t/2,y:r+l/2+t/2,width:o-s-t,height:i-l-t}},e.prototype.hideInteractionShape=function(){this.stateShapes.forEach((function(t){i_(t,el.backgroundOpacity,0),i_(t,el.backgroundColor,"transparent"),i_(t,el.borderOpacity,0),i_(t,el.borderWidth,1),i_(t,el.borderColor,"transparent")}))},e.prototype.clearUnselectedState=function(){i_(this.backgroundShape,el.backgroundOpacity,1),i_(this.textShapes,el.textOpacity,1),i_(this.linkFieldShape,el.opacity,1)},e.prototype.getTextShape=function(){return this.textShape},e.prototype.getTextShapes=function(){return this.textShapes||[this.textShape]},e.prototype.addTextShape=function(t){t&&this.textShapes.push(t)},e.prototype.getConditionIconShape=function(){return this.conditionIconShape},e.prototype.getConditionIconShapes=function(){return this.conditionIconShapes||[this.conditionIconShape]},e.prototype.addConditionIconShape=function(t){t&&this.conditionIconShapes.push(t)},e.prototype.resetTextAndConditionIconShapes=function(){this.textShapes=[],this.conditionIconShapes=[]},Object.defineProperty(e.prototype,"cellConditions",{get:function(){return this.conditions},enumerable:!1,configurable:!0}),e.prototype.drawConditionIconShapes=function(){var t,e=this.findFieldCondition(null===(t=this.conditions)||void 0===t?void 0:t.icon);if(e&&e.mapping){var n=this.mappingValue(e),r=this.getIconPosition(),i=this.theme.dataCell.icon.size;Cm(null==n?void 0:n.icon)||(this.conditionIconShape=o_(this,bl(bl({},r),{name:n.icon,width:i,height:i,fill:n.fill})),this.addConditionIconShape(this.conditionIconShape))}},e.prototype.getTextConditionFill=function(t){var e,n,r=t.fill,i=this.findFieldCondition(null===(e=this.conditions)||void 0===e?void 0:e.text);return(null==i?void 0:i.mapping)&&(r=(null===(n=this.mappingValue(i))||void 0===n?void 0:n.fill)||t.fill),r},e.prototype.getCrossBackgroundColor=function(t){var e=this.getStyle().cell,n=e.crossBackgroundColor,r=e.backgroundColorOpacity;return n&&t%2==0?{backgroundColorOpacity:r,backgroundColor:n}:{backgroundColorOpacity:r,backgroundColor:this.getStyle().cell.backgroundColor}},e}(yo),sL=function(t,e){return e?e(t[ia],t[ra]):t[ra]},uL=function(t,e){var n=e.getMeta().id;return t.some((function(t){return wm(t.id,n)}))},cL=function(t,e){return"".concat(t).concat(Ea).concat(e)},hL=function(t){return t.type===Ua.DATA_CELL},dL=function(t,e,n){var r=n.interaction.getSelectedCellHighlight(),i=r.rowHeader,o=r.colHeader,a=r.currentRow,l=r.currentCol,s=e.cellType===Ua.ROW_CELL,u=n.isTableMode()&&n.options.showSeriesNumber&&i&&s;(a||u)&&function(t,e){Pg(t,(function(t){hL(t)&&t.rowIndex===e.getMeta().rowIndex&&e.updateByState(Ga.SELECTED)}))}(t,e),l&&function(t,e){Pg(t,(function(t){hL(t)&&t.colIndex===e.getMeta().colIndex&&e.updateByState(Ga.SELECTED)}))}(t,e),(i||o)&&function(t,e){Pg(t,(function(t){hL(t)&&t.rowIndex===e.getMeta().rowIndex&&t.colIndex===e.getMeta().colIndex&&e.updateByState(Ga.SELECTED)}))}(t,e)},fL=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Sl(e,t),Object.defineProperty(e.prototype,"cellType",{get:function(){return Ua.DATA_CELL},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"valueRangeByField",{get:function(){return this.spreadsheet.dataSet.getValueRangeByField(this.meta.valueField)},enumerable:!1,configurable:!0}),e.prototype.handleByStateName=function(t,e){uL(t,this)&&this.updateByState(e)},e.prototype.handleSearchResult=function(t){uL(t,this)&&(uy(t,(function(t){return null==t?void 0:t.isTarget})).id===this.getMeta().id?this.updateByState(Ga.HIGHLIGHT):this.updateByState(Ga.SEARCH_RESULT))},e.prototype.handleSelect=function(t){var e;switch(null===(e=null==t?void 0:t[0])||void 0===e?void 0:e.type){case Ua.COL_CELL:this.changeRowColSelectState("colIndex");break;case Ua.ROW_CELL:this.changeRowColSelectState("rowIndex");break;case Ua.DATA_CELL:!function(t){var e=t.interaction.getSelectedCellHighlight(),n=e.currentRow,r=e.currentCol,i=e.rowHeader,o=e.colHeader;return n||r||i||o}(this.spreadsheet)?uL(t,this)?this.updateByState(Ga.SELECTED):this.spreadsheet.options.interaction.selectedCellsSpotlight&&this.updateByState(Ga.UNSELECTED):dL(t,this,this.spreadsheet)}},e.prototype.handleHover=function(t){var e=vy(t);if(e.type===Ua.DATA_CELL){var n=this.spreadsheet.interaction.getHoverHighlight(),r=n.currentRow,i=n.currentCol;if(r||i){var o=this.meta.colIndex,a=this.meta.rowIndex;i&&o===(null==e?void 0:e.colIndex)||r&&a===(null==e?void 0:e.rowIndex)?this.updateByState(Ga.HOVER):this.hideInteractionShape()}var l=this.getMeta(),s=l.id,u=l.rowIndex,c=l.colIndex;wm(e.id,s)&&wm(e.rowIndex,u)&&wm(e.colIndex,c)&&this.updateByState(Ga.HOVER_FOCUS)}else this.hideInteractionShape()},e.prototype.update=function(){var t=this.spreadsheet.interaction.getCurrentStateName(),e=this.spreadsheet.interaction.getCells();if(t!==Ga.ALL_SELECTED){if(!Cm(e)&&t)switch(t){case Ga.SELECTED:this.handleSelect(e);break;case Ga.HOVER_FOCUS:case Ga.HOVER:this.handleHover(e);break;case Ga.SEARCH_RESULT:this.handleSearchResult(e);break;default:this.handleByStateName(e,t)}}else this.updateByState(Ga.SELECTED)},e.prototype.setMeta=function(e){t.prototype.setMeta.call(this,e),this.initCell()},e.prototype.drawTextShape=function(){t.prototype.drawTextShape.call(this),this.drawLinkField(this.meta)},e.prototype.initCell=function(){this.resetTextAndConditionIconShapes(),this.drawBackgroundShape(),this.drawInteractiveBgShape(),this.shouldHideRowSubtotalData()||(this.drawConditionIntervalShape(),this.drawTextShape(),this.drawConditionIconShapes()),this.drawInteractiveBorderShape(),this.meta.isFrozenCorner&&this.drawBorderShape(),this.update()},e.prototype.getDefaultTextFill=function(t){var e=t.fill,n=this.getBackgroundColor(),r=n.backgroundColor,i=n.intelligentReverseTextColor;return HS(r)&&t.fill===Pa&&i&&(e=za),e},e.prototype.getTextStyle=function(){var t=this.meta.isTotals?this.theme.dataCell.bolderText:this.theme.dataCell.text,e=this.getTextConditionFill(bl(bl({},t),{fill:this.getDefaultTextFill(t)}));return bl(bl({},t),{fill:e})},e.prototype.getIconStyle=function(){var t,e=this.theme.dataCell.icon,n=e.size,r=e.margin,i=this.findFieldCondition(null===(t=this.conditions)||void 0===t?void 0:t.icon);return i&&i.mapping&&{size:n,margin:r,position:s_(i)}},e.prototype.drawConditionIntervalShape=function(){this.conditionIntervalShape=h_(this)},e.prototype.shouldHideRowSubtotalData=function(){var t,e=(null!==(t=this.spreadsheet.options.totals)&&void 0!==t?t:{}).row,n=void 0===e?{}:e,r=this.meta.rowIndex,i=this.spreadsheet.facet.layoutResult.rowLeafNodes[r],o=!(null==i?void 0:i.isGrandTotals)&&(null==i?void 0:i.isTotals);return"tree"===this.spreadsheet.options.hierarchyType&&!n.showSubTotals&&o},e.prototype.getFormattedFieldValue=function(){if(this.shouldHideRowSubtotalData())return{value:null,formattedValue:Ea};var t=this.meta,e=t.rowId,n=t.valueField,r=t.fieldValue,i=t.data,o=this.spreadsheet.dataSet.getFieldMeta(e)?e:n;return{value:r,formattedValue:this.spreadsheet.dataSet.getFieldFormatter(o)(r,i,this.meta)}},e.prototype.getMaxTextWidth=function(){var t=this.getContentArea().width;return g_(t,this.getIconStyle())},e.prototype.getTextPosition=function(){return this.getTextAndIconPosition().text},e.prototype.getBackgroundColor=function(){var t,e=this.getCrossBackgroundColor(this.meta.rowIndex),n=e.backgroundColor,r=e.backgroundColorOpacity;if(this.shouldHideRowSubtotalData())return{backgroundColor:n,backgroundColorOpacity:r};var i=this.findFieldCondition(null===(t=this.conditions)||void 0===t?void 0:t.background),o=!1;if(i&&i.mapping){var a=this.mappingValue(i);a&&(n=a.fill,o=a.intelligentReverseTextColor)}return{backgroundColor:n,backgroundColorOpacity:r,intelligentReverseTextColor:o}},e.prototype.drawBackgroundShape=function(){var t=this.getBackgroundColor(),e=t.backgroundColor,n=t.backgroundColorOpacity;this.backgroundShape=t_(this,bl(bl({},this.getCellArea()),{fill:e,fillOpacity:n}))},e.prototype.drawInteractiveBorderShape=function(){var t=this.getCellArea(),e=t.x,n=t.y,r=t.height,i=t.width;this.stateShapes.set("interactiveBorderShape",t_(this,{x:e+1,y:n+1,width:i-2,height:r-2},{capture:!1,visible:!1}))},e.prototype.drawInteractiveBgShape=function(){this.stateShapes.set("interactiveBgShape",t_(this,bl({},this.getCellArea()),{visible:!1}))},e.prototype.changeRowColSelectState=function(t){var e=this.spreadsheet.interaction,n=Fh(this.meta,t),r=e.getState(),i=r.nodes,o=void 0===i?[]:i,a=r.cells,l=void 0===a?[]:a,s=!1;this.spreadsheet.isTableMode()&&o.length?s=o[0].hierarchy.getLeaves().some((function(t,e){return!!o.some((function(e){return e===t}))&&e===n})):s=Tl(Tl([],El(o),!1),El(l),!1).some((function(e){return Fh(e,t)===n}));s?this.updateByState(Ga.SELECTED):this.spreadsheet.options.interaction.selectedCellsSpotlight?this.updateByState(Ga.UNSELECTED):this.hideInteractionShape()},e.prototype.drawBorderShape=function(){var t=this;[vb.BOTTOM,vb.RIGHT].forEach((function(e){var n=C_(e,t.getCellArea(),t.getStyle().cell),r=n.position,i=n.style;r_(t,r,i)}))},e.prototype.findFieldCondition=function(t){var e=this;return py(t,(function(t){return t.field instanceof RegExp?t.field.test(e.meta.valueField):t.field===e.meta.valueField}))},e.prototype.mappingValue=function(t){var e=this.meta.fieldValue,n=this.spreadsheet.isTableMode()?this.spreadsheet.dataSet.getCellData({query:{rowIndex:this.meta.rowIndex}}):this.meta.data;return null==t?void 0:t.mapping(e,n)},e.prototype.updateByState=function(e){if(t.prototype.updateByState.call(this,e,this),e===Ga.UNSELECTED){var n=Fh(this.theme,"".concat(this.cellType,".cell.interactionState.").concat(e));n&&this.toggleConditionIntervalShapeOpacity(n.opacity)}},e.prototype.clearUnselectedState=function(){t.prototype.clearUnselectedState.call(this),this.toggleConditionIntervalShapeOpacity(1)},e.prototype.toggleConditionIntervalShapeOpacity=function(t){i_(this.conditionIntervalShape,el.backgroundOpacity,t),i_(this.conditionIconShapes,el.opacity,t)},e.prototype.drawLeftBorder=function(){var t=C_(vb.LEFT,this.getCellArea(),this.getStyle().cell);r_(this,t.position,t.style)},e}(lL),pL=function(t){function e(e,n,r){return t.call(this,r,e,n)||this}return Sl(e,t),e.prototype.handleRestOptions=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=El(t,1)[0];this.cells=n},Object.defineProperty(e.prototype,"cellType",{get:function(){return Ua.MERGED_CELL},enumerable:!1,configurable:!0}),e.prototype.update=function(){},e.prototype.initCell=function(){this.resetTextAndConditionIconShapes(),this.conditions=this.spreadsheet.options.conditions,this.drawBackgroundShape(),this.drawTextShape()},e.prototype.drawBackgroundShape=function(){var t,e,n,r=gL(this.cells),i=this.theme.dataCell.cell;this.backgroundShape=(t=this,e={points:r,stroke:i.horizontalBorderColor,fill:i.backgroundColor,lineHeight:i.horizontalBorderWidth},null===(n=null==t?void 0:t.addShape)||void 0===n?void 0:n.call(t,"polygon",{attrs:e}))},e.prototype.drawTextShape=function(){Cm(this.meta)||(is(this.meta.fieldValue)?E_(this):t.prototype.drawTextShape.call(this))},e}(fL),vL=function(t,e){return uy(e,(function(e){return wm(e[0],t[1])}))},gL=function(t){var e=[];t.forEach((function(t){var n=t.getMeta(),r=n.x,i=n.y,o=n.width,a=n.height;e=e.concat(function(t,e,n,r){var i=[t,e],o=[t+n,e],a=[t+n,e+r],l=[t,e+r];return[[i,o],[o,a],[a,l],[l,i]]}(r,i,o,a))})),e=function(t){var e=[];return Pg(t,(function(n){var r=[n[1],n[0]];JSON.stringify(t).includes(JSON.stringify(r))||e.push(n)})),e}(e);for(var n=[],r=e[0],i=r,o=[];!wm(r,o);)n=n.concat(i),i=o=vL(i,e);return n},yL=function(t,e,n){var r;void 0===n&&(n=[]);var i=function(t,e){var n,r=[],i=[];return Pg(t,(function(t){var o=uy(e,(function(e){var n,r=null===(n=null==e?void 0:e.getMeta)||void 0===n?void 0:n.call(e);if((null==r?void 0:r.colIndex)===(null==t?void 0:t.colIndex)&&(null==r?void 0:r.rowIndex)===(null==t?void 0:t.rowIndex))return e}));o?(r.push(o),n=(null==t?void 0:t.showText)?null==o?void 0:o.getMeta():n):i.push(t)})),{cells:r,invisibleCellInfo:i,cellsMeta:n}}(n,t),o=i.cellsMeta,a=i.cells,l=i.invisibleCellInfo,s=o,u=a;if((null==l?void 0:l.length)>0&&l.length<n.length){var c=function(t,e){var n,r=[];return Pg(t,(function(t){var i,o,a,l=null===(o=null===(i=null==e?void 0:e.facet)||void 0===i?void 0:i.layoutResult)||void 0===o?void 0:o.getCellMeta(t.rowIndex,t.colIndex);if(l){var s=null===(a=null==e?void 0:e.facet)||void 0===a?void 0:a.cfg.dataCell(l);n=(null==t?void 0:t.showText)?l:n,r.push(s)}})),{cells:r,cellsMeta:n}}(l,e),h=c.cells,d=c.cellsMeta;s=s||d,u=a.concat(h)}return Cm(a)||s||(s=null===(r=u[0])||void 0===r?void 0:r.getMeta()),{cells:u,viewMeta:s}},mL=function(t,e,n){return t.options.mergedCell?t.options.mergedCell(t,e,n):new pL(t,e,n)},CL=function(t,e,n){var r,i=e||function(t){var e=t.interaction.getActiveCells(),n=[];return Pg(e,(function(t,e){var r=t.getMeta(),i=0===e?{showText:!0}:{};n.push(bl(bl({},i),{colIndex:null==r?void 0:r.colIndex,rowIndex:null==r?void 0:r.rowIndex}))})),n}(t);if(!((null==i?void 0:i.length)<=1)){var o=t.interaction.getPanelGroupAllDataCells(),a=yL(o,t,i),l=a.cells,s=a.viewMeta;if(!Cm(l)){var u=(null===(r=t.options)||void 0===r?void 0:r.mergedCellsInfo)||[];u.push(i),t.setOptions({mergedCellsInfo:u});var c=n?void 0:s;t.panelScrollGroup.addMergeCell(mL(t,l,c))}}},wL=function(t,e){var n,r,i;if(e&&e.cellType===Ua.MERGED_CELL){var o,a,l,s=(o=e,a=null===(n=t.options)||void 0===n?void 0:n.mergedCellsInfo,l=yy(o.cells,(function(t){return{colIndex:t.getMeta().colIndex,rowIndex:t.getMeta().rowIndex}})),oy(a,(function(t){return!wm(t.map((function(t){return t.showText?{colIndex:t.colIndex,rowIndex:t.rowIndex}:t})),l)})));(null==s?void 0:s.length)!==(null===(i=null===(r=t.options)||void 0===r?void 0:r.mergedCellsInfo)||void 0===i?void 0:i.length)&&(t.setOptions({mergedCellsInfo:s}),e.remove(!0))}},xL=function(t,e){return Bg(t,e,(function(t,e){return wm(t.viewMeta.id,e.viewMeta.id)}))},SL=function(t,e){var n,r=null===(n=t.options)||void 0===n?void 0:n.mergedCellsInfo;if(!Cm(r)){var i=t.interaction.getPanelGroupAllDataCells();if(!Cm(i)){var o=[];r.forEach((function(e){var n=yL(i,t,e);n.cells.length>0&&o.push(n)}));var a=e.getChildren(),l=function(t){return yy(t,(function(t){return{cells:t.cells,viewMeta:t.getMeta()}}))}(a),s=xL(l,o),u=xL(o,l);Pg(s,(function(t){var e=uy(a,(function(e){return wm(e.getMeta().id,t.viewMeta.id)}));null==e||e.remove(!0)})),Pg(u,(function(n){var r=n.cells,i=n.viewMeta;e.add(mL(t,r,i))}))}}},bL=function(t){return t.includes(La)?"id":"field"},_L=function(t,e){void 0===e&&(e=[]);var n=t.getInitColumnLeafNodes();return Xp(e.map((function(t){var e=bL(t);return n.find((function(n){return n[e]===t}))})))},LL=function(t,e,n){void 0===e&&(e=[]),void 0===n&&(n=!1);var r=function(e,n){void 0===e&&(e=[]),void 0===n&&(n=[]),t.setOptions({interaction:{hiddenColumnFields:e}}),t.interaction.reset(),t.store.set("hiddenColumnsDetail",n),t.render(!1,{reBuildHiddenColumnsDetail:!1})};if(Cm(e)&&n)r();else{var i=t.store.get("hiddenColumnsDetail",[]),o=t.options.interaction.hiddenColumnFields;if(!wm(e,o)||n){var a=Yx(Tl(Tl([],El(e),!1),El(o),!1)),l=_L(t,a).every((function(t,e,n){var r=n[e+1];return!r||1===Math.abs(t.colIndex-r.colIndex)})),s=function(t,e){if(void 0===e&&(e=[]),Cm(e))return{prev:null,next:null};var n=t.getInitColumnLeafNodes(),r=_L(t,e).map((function(t){return null==t?void 0:t.colIndex})),i=Math.max.apply(Math,Tl([],El(r),!1)),o=Math.min.apply(Math,Tl([],El(r),!1)),a=n.find((function(t){return t.colIndex===i+1}));return{prev:n.find((function(t){return t.colIndex===o-1}))||null,next:a||null}}(t,l?a:e),u={hideColumnNodes:_L(t,e),displaySiblingNode:s},c=Tl(Tl([],El(i),!1),[u],!1);t.emit(Qo.LAYOUT_COLS_HIDDEN,u,c),r(a,c)}}},EL=function(t,e,n){void 0===e&&(e=[]),void 0===n&&(n=!1),Cm(e)&&n&&LL(t,e,!0);var r=function(t){var e=t.dataCfg.fields.columns,n=void 0===e?[]:e;return t.isTableMode()?n:t.getInitColumnLeafNodes().map((function(t){return t.id}))}(t),i=function(t,e){if(Cm(e))return[];var n=Number.NEGATIVE_INFINITY;return t.reduce((function(t,r,i){if(!e.includes(r))return t;if(i===n+1)Mg(t).push(r);else{var o=[r];t.push(o)}return n=i,t}),[])}(jb(r),e);i.forEach((function(e){LL(t,e,n)}))},TL=function(t,e){return function(t){var e=function(t){return(null==t?void 0:t.next)||(null==t?void 0:t.prev)}(t);return null==e?void 0:e.id}(t)===e},OL=function(t){var e=t.type,n=t.id,r=t.theme,i=t.width,o=t.height,a=_l(t,["type","id","theme","width","height"]),l=e===hl.Horizontal?r.size:null,s=e===hl.Vertical?r.size:null;return{fill:r.background,fillOpacity:r.backgroundOpacity,cursor:"".concat(e,"-resize"),width:l,height:s,appendInfo:bl(bl({},a),{isResizeArea:!0,type:e,id:n,width:i,height:o,size:r.size})}},IL=function(t,e){if(t.foregroundGroup)return t.foregroundGroup.findById(e)||t.foregroundGroup.addGroup({id:e,zIndex:5})},RL=function(t,e,n){var r=null!=n?n:{},i=r.scrollX,o=void 0===i?0:i,a=r.scrollY,l=void 0===a?0:a,s=!(t.x-o>e.x+e.width||t.x+t.width-o<e.x),u=!(t.y-l>e.y+e.height||t.y+t.height-l<e.y);return s&&u},ML=function(t,e,n){var r=uy(t,(function(t){return function(t,e,n){if(!t)return!1;var r=t.iconNames,i=t.displayCondition,o=t.belongsCell;return!Cm(r)&&o===n&&(!i||r.some((function(t){return i(e,t)})))}(t,e,n)}));if(r){var i=r.iconNames;return r.displayCondition&&(i=i.filter((function(t){return r.displayCondition(e,t)}))),bl(bl({},r),{iconNames:i})}},AL=function(t,e){var n=t.label;return wm(t.field,ia)?{formattedValue:e||n,value:n}:{formattedValue:n,value:n}},BL=function(t){return"ASC"===Mx(t)},DL=function(t){return"DESC"===Mx(t)},kL=function(t){return!Lm(Number(t))},NL=function(t,e,n){var r=BL(e)?1:-1,i=["-",void 0];return null==t?void 0:t.sort((function(t,e){var o=t,a=e;if(n){if(o=t[n],a=e[n],kL(o)&&kL(a))return(Number(o)-Number(a))*r;if(o&&(null==i?void 0:i.includes(null==o?void 0:o.toString())))return-r;if(Number(o)&&(null==i?void 0:i.includes(null==a?void 0:a.toString())))return r}return Tm(o)||Tm(a)?o?r:-r:o.toString().localeCompare(a.toString(),"zh")*r}))},PL=function(t,e,n){return n?(r=e,i=Yx(t),null===(o=null==r?void 0:r.filter((function(t){return!(null==i?void 0:i.includes(t))})))||void 0===o?void 0:o.concat(i)):Tl([],El(new Set(Tl(Tl([],El(t),!1),El(e),!1))),!1);var r,i,o},zL=function(t){var e=t.sortByValues,n=t.originValues,r=n.filter((function(t){return e.find((function(e){return jg(t,e)}))})).map((function(t){var e=t.split(La);return e.length>1?[e.slice(0,e.length-1).join(La),e[e.length-1]]:e})),i=Array.from(new Set(r.map((function(t){return t[0]}))));r.sort((function(t,n){var r=t.slice(0,t.length-1),o=n.slice(0,n.length-1);return r.join()!==o.join()?i.indexOf(r[0])-i.indexOf(o[0]):e.indexOf(t[t.length-1])-e.indexOf(n[n.length-1])}));var o=r.map((function(t){return t.join(La)}));return Yb(n,o)},HL=function(t){var e,n=t.sortParam,r=t.measureValues,i=t.originValues,o=t.dataSet,a=n.sortByMeasure,l=n.query,s=n.sortFieldId,u=n.sortMethod,c=o.fields,h=c.rows,d=c.columns,f=h.includes(s);if(a){var p=NL(r,u,a===aa?l[ia]:a);e=function(t,e,n){var r,i=e.slice(0,e.indexOf(t)+1);return null===(r=n.map((function(t){return i.map((function(e){return t[e]})).join("".concat(La))})))||void 0===r?void 0:r.filter((function(t){return t}))}(s,f?h:jb(d),p)}else e=yy(NL(r,u));return PL(e,i,BL(u))},FL=function(t){var e=t.sortParam,n=t.originValues,r=t.measureValues,i=t.dataSet,o=e.sortFunc,a=e.sortMethod,l=e.sortBy,s=n,u={originValues:n,measureValues:r,sortParam:e,dataSet:i};return o?s=function(t){var e=t.originValues,n=t.measureValues,r=t.sortParam,i=t.dataSet,o=r.sortFunc,a=r.sortFieldId,l=r.sortMethod,s=o(bl({data:n},r));return(null==s?void 0:s.length)?(i.fields.rows.indexOf(a)>0||i.fields.columns.indexOf(a)>0)&&!Gy(s[0],La)?zL({sortByValues:s,originValues:e}):PL(s,e,BL(l)):e}(u):l?s=zL({sortByValues:l,originValues:n}):(BL(a)||DL(a))&&(s=HL(u)),s},WL=function(t){return t.filter((function(t){return t!==ia}))},GL=function(t){var e=t.dataSet,n=t.sortParam,r=t.originValues,i=e.fields,o=n.sortByMeasure,a=n.query,l=n.sortFieldId,s=e.getMultiData(a),u=jb(i.columns);if(o!==aa){var c=qp(i.rows,u);return s.filter((function(t){var e=new Set(th(t));return c.every((function(t){return e.has(t)}))}))}var h=Gy(i.rows,l),d=WL(h?i.rows:u),f=WL(h?u:i.rows),p=d[d.indexOf(l)+1],v=th(a),g=f.filter((function(t){return!v.includes(t)})),y=s.filter((function(t){var e=new Set(th(t));return!!e.has(l)&&(!e.has(p)&&g.every((function(t){return!e.has(t)})))}));return Cm(y)?Xp(yy(r,(function(t){var n=function(t,e,n){var r,i={};if(Gy(t,La))for(var o=nx(t,La),a=(null===(r=null==e?void 0:e.rows)||void 0===r?void 0:r.includes(n))?e.rows:jb(e.columns),l=0;l<=Uy(a,n);l++)i[a[l]]=o[l];else i[n]=t;return i}(t,i,l);return e.getTotalValue(bl(bl({},a),n))}))):y},jL=function(t,e){if(null==t?void 0:t.sortMethod){if(BL(null==t?void 0:t.sortMethod))return"groupAsc";if(DL(null==t?void 0:t.sortMethod))return"groupDesc"}if(e)return"SortDown"},UL=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Sl(e,t),e.prototype.handleRestOptions=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=El(t,1)[0];this.headerConfig=bl({},n);var r=this.meta,i=r.value,o=r.query,a=this.spreadsheet.dataCfg.sortParams,l=this.isSortCell(),s=uy(Tl([],El(a),!1).reverse(),(function(t){return l&&(null==t?void 0:t.sortByMeasure)===i&&wm(Fh(t,"query"),o)})),u=jL(s,l);this.headerConfig.sortParam=bl(bl(bl({},this.headerConfig.sortParam),s||{query:o}),{type:u})},e.prototype.initCell=function(){this.resetTextAndConditionIconShapes(),this.actionIcons=[],this.hasDefaultHiddenIcon=!1},e.prototype.getInteractiveBorderShapeStyle=function(t){var e=this.getCellArea(),n=e.x,r=e.y,i=e.height;return{x:n+t,y:r+t,width:e.width-2*t,height:i-2*t}},e.prototype.getFormattedFieldValue=function(){var t=this.meta,e=t.label,n=t.isTotalRoot,r=t.isGrandTotals,i=this.spreadsheet.dataSet.getFieldFormatter(this.meta.field);return{formattedValue:!this.spreadsheet.isTableMode()&&(this.spreadsheet.isHierarchyTreeType()?!(r&&n):!n)&&i?i(e,void 0,this.meta):e,value:e}},e.prototype.getActionIconCfg=function(){return ML(this.spreadsheet.options.headerActionIcons,this.meta,this.cellType)},e.prototype.showSortIcon=function(){var t=this.spreadsheet,e=t.options,n=Cm(t.dataCfg.fields.values);if(e.showDefaultHeaderActionIcon&&!n){var r=this.headerConfig.sortParam,i=this.meta.query;return i&&wm(null==r?void 0:r.query,i)&&(null==r?void 0:r.type)&&"none"!==(null==r?void 0:r.type)}return!1},e.prototype.getActionIconsCount=function(){if(this.showSortIcon())return 1;var t=this.getActionIconCfg();return t?t.iconNames.length:0},e.prototype.getActionIconsWidth=function(){var t=this.getStyle().icon;return(t.size+t.margin.left)*this.getActionIconsCount()},e.prototype.drawSortIcons=function(){var t=this;if(this.showSortIcon()){var e=this.getStyle(),n=e.icon,r=e.text,i=this.getTextConditionFill(r),o=this.headerConfig.sortParam,a=this.getIconPosition(),l=new _b(bl(bl({name:Fh(o,"type","none")},a),{width:n.size,height:n.size,fill:i}));l.on("click",(function(e){t.spreadsheet.emit(Qo.GLOBAL_ACTION_ICON_CLICK,e),t.spreadsheet.handleGroupSort(e,t.meta)})),this.add(l),this.actionIcons.push(l)}},e.prototype.hasDefaultHideActionIcon=function(){return this.hasDefaultHiddenIcon},e.prototype.addActionIcon=function(t){var e=this,n=t.x,r=t.y,i=t.iconName,o=t.defaultHide,a=t.action,l=t.onClick,s=t.onHover,u=this.getStyle(),c=u.icon,h=u.text,d=this.getTextConditionFill(h),f=(null==c?void 0:c.fill)||d,p=new _b({name:i,x:n,y:r,width:null==c?void 0:c.size,height:null==c?void 0:c.size,fill:f});p.set("visible",!o),p.on("mouseover",(function(t){e.spreadsheet.emit(Qo.GLOBAL_ACTION_ICON_HOVER,t),null==s||s({hovering:!0,iconName:i,meta:e.meta,event:t})})),p.on("mouseleave",(function(t){e.spreadsheet.emit(Qo.GLOBAL_ACTION_ICON_HOVER_OFF,t),null==s||s({hovering:!1,iconName:i,meta:e.meta,event:t})})),p.on("click",(function(t){var n;e.spreadsheet.emit(Qo.GLOBAL_ACTION_ICON_CLICK,t),null===(n=l||a)||void 0===n||n({iconName:i,meta:e.meta,event:t})})),this.actionIcons.push(p),this.add(p)},e.prototype.drawActionIcons=function(){var t=this;if(this.showSortIcon())this.drawSortIcons();else{var e=this.getActionIconCfg();if(e){var n=e.iconNames,r=e.action,i=e.onClick,o=e.onHover,a=e.defaultHide,l=this.getIconPosition(n.length),s=this.getStyle().icon,u=s.size,c=s.margin;Pg(n,(function(e,n){var s=l.x+n*u+n*c.left,h=l.y,d="function"==typeof a?a(t.meta,e):a;d&&(t.hasDefaultHiddenIcon=!0),t.addActionIcon({iconName:e,x:s,y:h,defaultHide:d,action:r,onClick:i,onHover:o})}))}}},e.prototype.drawBackgroundShape=function(){var t=this.getBackgroundColor(),e=t.backgroundColor,n=t.backgroundColorOpacity;this.backgroundShape=t_(this,bl(bl({},this.getCellArea()),{fill:e,fillOpacity:n}))},e.prototype.isSortCell=function(){var t,e,n,r=null===(e=null===(t=this.meta.spreadsheet)||void 0===t?void 0:t.isValueInCols)||void 0===e?void 0:e.call(t),i=this.meta.level===(null===(n=this.meta.hierarchy)||void 0===n?void 0:n.maxLevel);return r?i&&this.cellType===Ua.COL_CELL:i&&this.cellType===Ua.ROW_CELL},e.prototype.handleByStateName=function(t,e){uL(t,this)&&this.updateByState(e)},e.prototype.handleSearchResult=function(t){uL(t,this)&&(uy(t,(function(t){return null==t?void 0:t.isTarget})).id===this.getMeta().id?this.updateByState(Ga.HIGHLIGHT):this.updateByState(Ga.SEARCH_RESULT))},e.prototype.handleHover=function(t){var e;uL(t,this)&&(this.updateByState(Ga.HOVER),this.hasDefaultHideActionIcon()&&this.toggleActionIcon(null===(e=null==t?void 0:t[0])||void 0===e?void 0:e.id))},e.prototype.handleSelect=function(t,e){uL(t,this)&&this.updateByState(Ga.SELECTED),Gy(yy(e,"id"),this.meta.id)&&this.updateByState(Ga.SELECTED)},e.prototype.getTextStyle=function(){var t,e=this.getStyle(),n=e.text,r=e.bolderText,i=e.measureText;t=this.isMeasureField()?i||n:this.isBolderText()?r:n;var o=this.getTextConditionFill(t);return bl(bl({},t),{fill:o})},e.prototype.getBackgroundColor=function(){var t,e=(null===(t=this.getStyle())||void 0===t?void 0:t.cell)||{},n=e.backgroundColor,r=e.backgroundColorOpacity;return this.getBackgroundColorByCondition(n,r)},e.prototype.getBackgroundColorByCondition=function(t,e){var n,r=t,i=this.findFieldCondition(null===(n=this.conditions)||void 0===n?void 0:n.background);if(i&&i.mapping){var o=this.mappingValue(i);o&&(r=o.fill)}return{backgroundColor:r,backgroundColorOpacity:e}},e.prototype.toggleActionIcon=function(t){if(this.getMeta().id===t){var e=[];Pg(this.actionIcons,(function(t){t.get("visible")||(t.set("visible",!0),e.push(t))})),this.spreadsheet.store.set("visibleActionIcons",e)}},e.prototype.update=function(){var t=this.spreadsheet.interaction,e=null==t?void 0:t.getState(),n=null==t?void 0:t.getCells([Ua.CORNER_CELL,Ua.COL_CELL,Ua.ROW_CELL]);if(vy(n))switch(null==e?void 0:e.stateName){case Ga.SELECTED:this.handleSelect(n,null==e?void 0:e.nodes);break;case Ga.HOVER_FOCUS:case Ga.HOVER:this.handleHover(n);break;case Ga.SEARCH_RESULT:this.handleSearchResult(n);break;default:this.handleByStateName(n,null==e?void 0:e.stateName)}},e.prototype.updateByState=function(e){t.prototype.updateByState.call(this,e,this)},e.prototype.hideInteractionShape=function(){t.prototype.hideInteractionShape.call(this)},e.prototype.isMeasureField=function(){return[ia,oa].includes(this.meta.field)},e.prototype.mappingValue=function(t){var e=this.getMeta().label;return null==t?void 0:t.mapping(e,this.meta)},e.prototype.findFieldCondition=function(t){var e=this;return py(t,(function(t){return t.field instanceof RegExp?t.field.test(e.meta.field):t.field===e.meta.field}))},e}(lL),YL=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Sl(e,t),Object.defineProperty(e.prototype,"cellType",{get:function(){return Ua.COL_CELL},enumerable:!1,configurable:!0}),e.prototype.initCell=function(){t.prototype.initCell.call(this),this.drawBackgroundShape(),this.drawInteractiveBgShape(),this.drawInteractiveBorderShape(),this.drawTextShape(),this.drawConditionIconShapes(),this.drawActionIcons(),this.drawBorders(),this.drawResizeArea(),this.addExpandColumnIconShapes(),this.update()},e.prototype.drawInteractiveBgShape=function(){this.stateShapes.set("interactiveBgShape",t_(this,bl({},this.getCellArea()),{visible:!1}))},e.prototype.drawInteractiveBorderShape=function(){this.stateShapes.set("interactiveBorderShape",t_(this,this.getInteractiveBorderShapeStyle(2),{visible:!1}))},e.prototype.getMaxTextWidth=function(){return this.getContentArea().width-this.getActionIconsWidth()},e.prototype.getIconPosition=function(){if(this.meta.isLeaf)return t.prototype.getIconPosition.call(this,this.getActionIconsCount());var e=this.getIconStyle(),n=e.margin.left,r=this.getTextStyle(),i=this.textPosition,o=i.x,a=i.y-e.size/2;return"left"===r.textAlign?{x:o+this.actualTextWidth+n,y:a}:"right"===r.textAlign?{x:o+n,y:a}:{x:o+this.actualTextWidth/2+n,y:a}},e.prototype.isBolderText=function(){var t=this.meta,e=t.isLeaf;return!(!t.isTotals&&e)},e.prototype.getTextPosition=function(){var t,e=this.meta.isLeaf,n=this.headerConfig,r=n.width,i=n.scrollContainsRowHeader,o=n.cornerWidth,a=n.scrollX,l=this.getTextStyle(),s=this.getContentArea(),u=this.getIconStyle();if(e)return m_(s,l,this.actualTextWidth,u,this.getActionIconsCount()).text;var c={start:a-(i?o:0),width:r+(i?o:0)},h=this.getTextStyle().textAlign,d=function(t,e,n){void 0===n&&(n={left:0,right:0});var r=bl({},t);return"left"===e?(r.start+=n.left,r.width-=n.left):"right"===e&&(r.width-=n.right),r}(c,h,null===(t=this.getStyle().cell)||void 0===t?void 0:t.padding),f=this.getActionIconsWidth(),p=this.actualTextWidth+f,v=function(t,e,n){var r,i,o=e.start+e.width,a=t.start+t.width;if(e.start<=t.start&&o>=a)r=t.start+t.width/2,i=t.width;else if(e.start<=t.start)r=(l=e.width-(t.start-e.start))<n?o-n/2:o-l/2,i=l;else if(o>=a){var l;r=(l=e.width-(o-a))<n?e.start+n/2:e.start+l/2,i=l}else r=e.start+e.width/2,i=e.width;return{start:r,width:i}}(d,{start:s.x,width:s.width},p),g=function(t,e,n,r){var i=e+n,o=t.start;if("center"===r)return o-n/2;var a=t.width-i>0?t.width/2:i/2;return"left"===r?o-a:o+a-n}(v,this.actualTextWidth,f,h),y=s.y+s.height/2;return this.textPosition={x:g,y:y},this.textPosition},e.prototype.getActionIconsWidth=function(){var t=this.getStyle().icon,e=t.size,n=t.margin,r=this.getActionIconsCount();return(e+n.left)*r+(r>0?n.right:0)},e.prototype.getColResizeAreaKey=function(){return this.meta.key},e.prototype.getColResizeArea=function(){return IL(this.spreadsheet,wa)},e.prototype.getHorizontalResizeAreaName=function(){return"".concat(ba).concat(this.meta.key)},e.prototype.drawHorizontalResizeArea=function(){var t,e;if(!(0===(null===(e=null===(t=this.spreadsheet.options.style)||void 0===t?void 0:t.colCfg)||void 0===e?void 0:e.height))&&this.shouldDrawResizeAreaByType("colCellVertical",this)){var n=this.headerConfig,r=n.cornerWidth,i=n.viewportWidth,o=this.meta,a=o.y,l=o.height,s=this.getResizeAreaStyle(),u=this.getColResizeArea(),c=this.getHorizontalResizeAreaName();if(!u.find((function(t){return t.attrs.name===c}))){var h=r+i;u.addShape("rect",{attrs:bl(bl({},OL({theme:s,type:hl.Vertical,id:this.getColResizeAreaKey(),effect:fl.Field,offsetX:0,offsetY:a,width:h,height:l,meta:this.meta})),{name:c,x:0,y:a+l-s.size/2,width:h})})}}},e.prototype.shouldAddVerticalResizeArea=function(){var t=this.meta,e=t.x,n=t.y,r=t.width,i=t.height,o=this.headerConfig,a=o.scrollX,l=o.scrollY,s=o.scrollContainsRowHeader,u=o.cornerWidth,c=o.height,h=o.width,d=this.getResizeAreaStyle(),f={x:e+r-d.size/2,y:n,width:d.size,height:i};return RL(f,{x:s?-u:0,y:0,width:s?u+h:h,height:c},{scrollX:a,scrollY:l})},e.prototype.getVerticalResizeAreaOffset=function(){var t=this.meta,e=t.x,n=t.y,r=this.headerConfig,i=r.scrollX,o=r.position;return{x:o.x+e-i,y:o.y+n}},e.prototype.drawVerticalResizeArea=function(){if(this.meta.isLeaf&&this.shouldDrawResizeAreaByType("colCellHorizontal",this)){var t=this.meta,e=t.label,n=t.width,r=t.height,i=this.getResizeAreaStyle(),o=this.getColResizeArea();if(this.shouldAddVerticalResizeArea()){var a=this.getVerticalResizeAreaOffset(),l=a.x,s=a.y;o.addShape("rect",{attrs:bl(bl({},OL({theme:i,type:hl.Horizontal,effect:fl.Cell,id:e,offsetX:l,offsetY:s,width:n,height:r,meta:this.meta})),{x:l+n-i.size/2,y:s,height:r})})}}},e.prototype.drawResizeArea=function(){this.drawHorizontalResizeArea(),this.drawVerticalResizeArea()},e.prototype.drawHorizontalBorder=function(){var t=C_(vb.TOP,this.meta,this.theme.colCell.cell);r_(this,t.position,t.style)},e.prototype.drawVerticalBorder=function(t){var e=C_(t,this.meta,this.theme.colCell.cell);r_(this,e.position,e.style)},e.prototype.drawBorders=function(){var t=this.spreadsheet,e=t.options,n=t.isTableMode;0===this.meta.colIndex&&n()&&!e.showSeriesNumber&&this.drawVerticalBorder(vb.LEFT),this.drawHorizontalBorder(),this.drawVerticalBorder(vb.RIGHT)},e.prototype.hasHiddenColumnCell=function(){var t=this,e=this.spreadsheet.options,n=e.interaction.hiddenColumnFields,r=void 0===n?[]:n,i=e.tooltip.operation,o=this.spreadsheet.store.get("hiddenColumnsDetail",[]);return!(Cm(o)||Cm(r)||!i.hiddenColumns)&&!!o.find((function(e){return TL(null==e?void 0:e.displaySiblingNode,t.meta.id)}))},e.prototype.getExpandIconTheme=function(){return this.getStyle().icon},e.prototype.addExpandColumnSplitLine=function(){var t=this.meta,e=t.x,n=t.y,r=t.width,i=t.height,o=this.theme.splitLine,a=o.horizontalBorderColor,l=o.horizontalBorderWidth,s=o.horizontalBorderColorOpacity,u=this.isLastColumn()?e+r-l:e;r_(this,{x1:u,y1:n,x2:u,y2:n+i},{stroke:a,lineWidth:l,strokeOpacity:s})},e.prototype.addExpandColumnIconShapes=function(){this.hasHiddenColumnCell()&&(this.addExpandColumnSplitLine(),this.addExpandColumnIcons())},e.prototype.addExpandColumnIcons=function(){var t=this.isLastColumn();this.addExpandColumnIcon(t),this.isAllDisplaySiblingNodeHidden()&&t&&this.addExpandColumnIcon(!1)},e.prototype.addExpandColumnIcon=function(t){var e=this,n=this.getExpandColumnIconConfig(t);o_(this,bl(bl({},n),{name:"ExpandColIcon",cursor:"pointer"})).on("click",(function(){e.spreadsheet.emit(Qo.LAYOUT_COLS_EXPANDED,e.meta)}))},e.prototype.getExpandColumnIconConfig=function(t){var e=this.getExpandIconTheme().size,n=this.getCellArea(),r=n.x,i=n.y,o=n.width,a=r-e;return{x:t?a+o:a,y:i+n.height/2-e/2,width:2*e,height:e}},e.prototype.isLastColumn=function(){return t=this.spreadsheet,e=this.meta.id,n=t.getColumnLeafNodes(),r=t.getInitColumnLeafNodes(),i=bL(e),Fh(Mg(n),i)===e&&Fh(Mg(r),i)!==e;var t,e,n,r,i},e.prototype.isAllDisplaySiblingNodeHidden=function(){var t=this.meta.id,e=this.spreadsheet.store.get("hiddenColumnsDetail",[]),n=e.find((function(e){var n,r=e.displaySiblingNode;return(null===(n=null==r?void 0:r.next)||void 0===n?void 0:n.id)===t}));return e.find((function(e){var n,r=e.displaySiblingNode;return(null===(n=null==r?void 0:r.prev)||void 0===n?void 0:n.id)===t}))&&n},e}(UL),VL=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Sl(e,t),e.prototype.isBolderText=function(){return this.meta.cornerType===Cb.Col},Object.defineProperty(e.prototype,"cellType",{get:function(){return Ua.CORNER_CELL},enumerable:!1,configurable:!0}),e.prototype.initCell=function(){t.prototype.initCell.call(this),this.resetTextAndConditionIconShapes(),this.drawBackgroundShape(),this.drawTreeIcon(),this.drawCellText(),this.drawConditionIconShapes(),this.drawActionIcons(),this.drawBorderShape(),this.drawResizeArea(),this.update()},e.prototype.drawCellText=function(){this.drawTextShape()},e.prototype.drawTextShape=function(){var t=this.getContentArea().x,e=this.getCellArea(),n=e.y,r=e.height,i=this.getTextStyle(),o=this.getCornerText(),a=this.getMaxTextWidth(),l=L_(this.meta,this.spreadsheet.options.placeholder),s=this.spreadsheet.measureTextWidth,u=S_({measureTextWidth:s,text:o,maxWidth:a,fontParam:i,placeholder:l});this.actualText=u;var c=u.indexOf(Ba),h=u,d="";if(-1!==c&&this.spreadsheet.isHierarchyTreeType()){var f=c+(/iPhone/gi.test(navigator.userAgent)&&812===window.screen.height&&375===window.screen.width?1:0);h=o.substr(0,f),d=o.slice(f),d=S_({measureTextWidth:s,text:d,maxWidth:a,fontParam:i})}var p,v,g=(p={x:t+this.getTreeIconWidth(),y:n,width:a,height:r},v=i,m_(p,v).text).x,y=n+(Cm(d)?r/2:r/4);this.addTextShape(n_(this,[this.textShapes[0]],g,y,h,i)),Cm(d)||this.addTextShape(n_(this,[this.textShapes[1]],g,n+.75*r,d,i)),this.actualTextWidth=qm([s(h,i),s(d,i)])},e.prototype.drawTreeIcon=function(){var t=this;if(this.showTreeIcon()&&this.meta.cornerType!==Cb.Col){var e=this.headerConfig.hierarchyCollapse,n=this.getStyle().icon.size,r=this.getTextStyle(),i=r.textBaseline,o=r.fill,a=this.getContentArea();this.treeIcon=a_(this,{x:a.x,y:y_(a,i,n),width:n,height:n},o,e,(function(){t.headerConfig.spreadsheet.store.set("scrollY",0),t.headerConfig.spreadsheet.emit(Qo.LAYOUT_TREE_ROWS_COLLAPSE_ALL,e)}))}},e.prototype.drawBorderShape=function(){var t=this;[vb.TOP,vb.LEFT].forEach((function(e){var n=C_(e,t.getCellArea(),t.getStyle().cell),r=n.position,i=n.style;r_(t,r,i)}))},e.prototype.isLastRowCornerCell=function(){var t=this.meta,e=t.cornerType,n=t.field,r=this.headerConfig.rows;return e===Cb.Row&&(this.spreadsheet.isHierarchyTreeType()||Mg(r)===n)},e.prototype.getResizeAreaEffect=function(){return this.meta.cornerType===Cb.Series?fl.Series:this.isLastRowCornerCell()&&this.spreadsheet.isHierarchyTreeType()?fl.Tree:fl.Field},e.prototype.drawResizeArea=function(){if(this.shouldDrawResizeAreaByType("cornerCellHorizontal",this)){var t=this.getResizeAreaStyle(),e=IL(this.spreadsheet,Ca),n=this.headerConfig,r=n.position,i=n.scrollX,o=n.scrollY,a=n.width,l=n.height,s=this.meta,u=s.x,c=s.y,h=s.width,d=s.height,f=s.field,p=s.cornerType,v={x:u+h-t.size/2,y:c,width:t.size,height:d},g={x:0,y:0,width:a,height:l};if(p!==Cb.Col&&RL(v,g,{scrollX:i,scrollY:o})){var y=r.x+u-i,m=r.y+(this.isLastRowCornerCell()?0:c);e.addShape("rect",{attrs:bl(bl({},OL({theme:t,id:f,type:hl.Horizontal,effect:this.getResizeAreaEffect(),offsetX:y,offsetY:m,width:h,height:d,meta:this.meta})),{x:y+h-t.size/2,y:m,height:this.isLastRowCornerCell()?l:d})})}}},e.prototype.showTreeIcon=function(){var t;return this.spreadsheet.isHierarchyTreeType()&&0===(null===(t=this.meta)||void 0===t?void 0:t.x)},e.prototype.getIconPosition=function(){var t,e,n=null===(e=null===(t=this.textShapes)||void 0===t?void 0:t[0])||void 0===e?void 0:e.cfg.attrs,r=this.getTextStyle(),i=r.textBaseline,o=r.textAlign,a=this.getStyle().icon,l=a.size,s=a.margin;return{x:(null==n?void 0:n.x)+jv([[Vm("center"),vu(this.actualTextWidth/2)],[Vm("right"),vu(0)],[ax,vu(this.actualTextWidth)]])(o)+s.left,y:y_(this.getContentArea(),i,l)}},e.prototype.getTreeIconWidth=function(){var t=this.getStyle().icon,e=t.size,n=t.margin;return this.showTreeIcon()?e+n.right:0},e.prototype.getTextStyle=function(){var t=this.getStyle(),e=t.text,n=t.bolderText,r=this.isBolderText()?e:n,i=this.getTextConditionFill(r);return bl(bl({},r),{fill:i})},e.prototype.getMaxTextWidth=function(){return this.getContentArea().width-this.getTreeIconWidth()-this.getActionIconsWidth()},e.prototype.getTextPosition=function(){return{x:0,y:0}},e.prototype.getFormattedFieldValue=function(){return AL(this.meta,this.spreadsheet.dataSet.getFieldName(this.meta.label))},e.prototype.getCornerText=function(){return this.getFormattedFieldValue().formattedValue},e}(UL),XL=function(){function t(t){this.EVENT="gesture",this.gm=t}return t.prototype.do=function(t){switch(t.type){case"touchstart":this.onTouchStart(t);break;case"touchmove":this.onTouchMove(t);break;case"touchend":this.onTouchEnd(t);break;case"touchcancel":this.onTouchCancel(t);break;default:return}},t.prototype.emit=function(t){this.gm.emit(this.EVENT,t)},t}(),qL=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.EVENT="pan",e}return Sl(e,t),e.prototype.onTouchCancel=function(t){},e.prototype.onTouchEnd=function(t){},e.prototype.onTouchMove=function(t){var e=t.x,n=t.y,r=e-this.preX,i=n-this.preY;this.preX=e,this.preY=n,this.emit({x:e,y:n,deltaX:r,deltaY:i,event:t})},e.prototype.onTouchStart=function(t){var e=t.x,n=t.y;this.preX=e,this.preY=n},e}(XL),KL="object"==typeof performance&&performance.now?performance:Date,$L=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.EVENT="press",e}return Sl(e,t),e.prototype.onTouchCancel=function(t){this.clearTimeout()},e.prototype.onTouchEnd=function(t){this.clearTimeout()},e.prototype.onTouchMove=function(t){var e=t.x,n=t.y;(e-this.touchStartX>10||n-this.touchStartY>10)&&this.clearTimeout()},e.prototype.onTouchStart=function(t){var e=this;this.clearTimeout();var n=t.x,r=t.y;this.touchStartTime=KL.now(),this.touchStartX=n,this.touchStartY=r,this.pressTimeout=window.setTimeout((function(){e.emit({x:n,y:r,event:t})}),300)},e.prototype.clearTimeout=function(){window.clearTimeout(this.pressTimeout)},e}(XL),ZL=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.EVENT="swipe",e.latestMoveTime=0,e.ms=0,e.speedX=0,e.speedY=0,e.preX=0,e.preY=0,e}return Sl(e,t),e.prototype.onTouchCancel=function(t){},e.prototype.onTouchEnd=function(t){var e=this.speedX,n=this.speedY;if(KL.now()-this.latestMoveTime<100){var r=t.x,i=t.y;this.emit({x:r,y:i,speedX:e,speedY:n,event:t})}},e.prototype.onTouchMove=function(t){var e=t.x,n=t.y,r=KL.now(),i=e-this.preX,o=n-this.preY,a=r-this.ms;this.speedX=i/a,this.speedY=o/a,this.latestMoveTime=r},e.prototype.onTouchStart=function(t){var e=t.x,n=t.y;this.speedX=this.speedY=0,this.preX=e,this.preY=n,this.ms=KL.now()},e}(XL),QL={Pan:qL,Press:$L,Swipe:ZL,Tap:function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.EVENT="tap",e}return Sl(e,t),e.prototype.onTouchCancel=function(t){},e.prototype.onTouchEnd=function(t){var e=t.x,n=t.y;e-this.touchStartX<2&&n-this.touchStartY<2&&KL.now()-this.touchStartTime<300&&this.emit({x:e,y:n,event:t})},e.prototype.onTouchMove=function(t){},e.prototype.onTouchStart=function(t){var e=t.x,n=t.y;this.touchStartTime=KL.now(),this.touchStartX=e,this.touchStartY=n},e}(XL)},JL=function(t){function e(e,n){void 0===n&&(n={});var r=t.call(this)||this;return r.onTouchStart=function(t){r.preventEvent(t),r.element.on("touchmove",r.onTouchMove),r.element.on("touchend",r.onTouchEnd),r.element.on("touchcancel",r.onTouchCancel),r.emit("touchdown",t),r.doGestures(t)},r.onTouchMove=function(t){r.preventEvent(t),r.emit("touchmove",t),r.doGestures(t)},r.onTouchEnd=function(t){r.preventEvent(t),r.emit("touchend",t),r.element.off("touchmove",r.onTouchMove),r.element.off("touchend",r.onTouchEnd),r.element.off("touchcancel",r.onTouchCancel),r.doGestures(t)},r.onTouchCancel=function(t){r.preventEvent(t),r.emit("touchcancel",t),r.element.off("touchmove",r.onTouchMove),r.element.off("touchend",r.onTouchEnd),r.element.off("touchcancel",r.onTouchCancel),r.doGestures(t)},r.element=e,r.options=n,r.initialGestures(),r.bindTouchStart(),r}return Sl(e,t),e.prototype.destroy=function(){this.element.off("touchstart",this.onTouchStart),this.off()},e.prototype.initialGestures=function(){var t=this,e=this.options.gestures||["Pan","Press","Swipe","Tap"];this.gestures=e.map((function(e){return new(0,QL[e])(t)}))},e.prototype.bindTouchStart=function(){this.element.on("touchstart",this.onTouchStart)},e.prototype.preventEvent=function(t){var e=t.type;(this.options.prevents||[]).includes(e)&&t.preventDefault()},e.prototype.doGestures=function(t){this.gestures.forEach((function(e){e.do(t)}))},e}(Vt),tE=jn,eE="wheel",nE=function(t){function e(e){var n=t.call(this)||this;return n.rafMs=0,n.onPan=function(t){n.raf&&cancelAnimationFrame(n.raf);var e=t.deltaX,r=t.deltaY,i=n.getWrapperEvent(t,e,r);n.emit(eE,i)},n.onSwipe=function(t){var e=t.speedX,r=t.speedY;n.rafMs=KL.now(),n.ms=n.rafMs,0===e&&0===r||n.rafInertia(t)},n.element=e,n.gm=new JL(e,{gestures:["Pan","Swipe"]}),n.gm.on("swipe",n.onSwipe),n.gm.on("pan",n.onPan),n}return Sl(e,t),e.prototype.destroy=function(){window.cancelAnimationFrame(this.raf),this.gm.destroy(),this.off()},e.prototype.rafInertia=function(t){var e=this,n=t.speedX,r=t.speedY;this.raf=window.requestAnimationFrame((function(){var i=KL.now(),o=(i-e.ms)/800;if(o<1){o=tE(1-o);var a=i-e.rafMs,l=n*o*a,s=r*o*a,u=e.getWrapperEvent(t,l,s);e.emit(eE,u),e.rafMs=i,e.rafInertia(t)}}))},e.prototype.getWrapperEvent=function(t,e,n){return bl(bl({},t),{deltaX:-e,deltaY:-n})},e}(Vt),rE=function(t,e,n,r,i){var o=n+r;return t+i>=o?t:o<t+(e+i)/2?n+r-i:n>t+(e-i)/2?t+e-n>i?n:t+e-i:t+(e-i)/2},iE=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Sl(e,t),Object.defineProperty(e.prototype,"cellType",{get:function(){return Ua.ROW_CELL},enumerable:!1,configurable:!0}),e.prototype.destroy=function(){var e;t.prototype.destroy.call(this),null===(e=this.gm)||void 0===e||e.destroy()},e.prototype.initCell=function(){t.prototype.initCell.call(this),this.drawBackgroundShape(),this.drawInteractiveBgShape(),this.drawInteractiveBorderShape(),this.drawTextShape(),this.drawConditionIconShapes(),this.drawTreeIcon(),this.drawTreeLeafNodeAlignDot(),this.drawRectBorder(),this.drawResizeAreaInLeaf(),this.drawActionIcons(),this.update()},e.prototype.getBackgroundColor=function(){var t=this.getCrossBackgroundColor(this.meta.rowIndex),e=t.backgroundColor,n=t.backgroundColorOpacity;return this.getBackgroundColorByCondition(e,n)},e.prototype.drawInteractiveBorderShape=function(){this.stateShapes.set("interactiveBorderShape",t_(this,this.getInteractiveBorderShapeStyle(2),{visible:!1}))},e.prototype.drawInteractiveBgShape=function(){this.stateShapes.set("interactiveBgShape",t_(this,bl({},this.getCellArea()),{visible:!1}))},e.prototype.showTreeIcon=function(){return this.spreadsheet.isHierarchyTreeType()&&!this.meta.isLeaf},e.prototype.showTreeLeafNodeAlignDot=function(){var t;return(null===(t=this.spreadsheet.options.style)||void 0===t?void 0:t.showTreeLeafNodeAlignDot)&&this.spreadsheet.isHierarchyTreeType()},e.prototype.getParentTreeIconCfg=function(){if(this.showTreeLeafNodeAlignDot()&&this.spreadsheet.isHierarchyTreeType()&&this.meta.isLeaf)return Fh(this.meta,"parent.belongsCell.treeIcon.cfg")},e.prototype.drawTreeIcon=function(){var t=this;if(this.showTreeIcon()){var e=this.meta,n=e.isCollapsed,r=e.id,i=e.hierarchy,o=this.getContentArea().x,a=this.getTextStyle().fill,l=this.getStyle().icon.size,s=o+this.getContentIndent(),u=this.getIconYPosition();this.treeIcon=a_(this,{x:s,y:u,width:l,height:l},a,n,(function(){if(!JS()){if(!n){var e=t.spreadsheet.store.get("scrollY"),o=t.spreadsheet.facet.panelBBox.viewportHeight||0,a=(u=t.meta,c=0,null==(h=u.children)||h.forEach((function(t){c+=t.height||0})),c),l=i.height-a;if(e>0&&e+o>l){var s=l-o;t.spreadsheet.store.set("scrollY",s>0?s:0)}}var u,c,h;t.spreadsheet.emit(Qo.ROW_CELL_COLLAPSE_TREE_ROWS,{id:r,isCollapsed:!n,node:t.meta})}})),JS()&&(this.gm=new JL(this,{gestures:["Tap"]}),this.gm.on("tap",(function(){t.spreadsheet.emit(Qo.ROW_CELL_COLLAPSE_TREE_ROWS,{id:r,isCollapsed:!n,node:t.meta})})))}},e.prototype.drawTreeLeafNodeAlignDot=function(){var t=this.getParentTreeIconCfg();if(t){var e=this.getStyle().icon,n=e.size,r=e.margin,i=t.x+n+r.right,o=this.getTextPosition().y,a=this.getTextStyle(),l=a.fill,s=a.fontSize,u=n/5;this.treeLeafNodeAlignDot=e_(this,{x:i+n/2,y:o+(s-u)/2,r:u,fill:l,fillOpacity:.3})}},e.prototype.isBolderText=function(){var t=this.meta,e=t.isLeaf,n=t.isTotals,r=t.level;return!e&&0===r||n},e.prototype.drawTextShape=function(){t.prototype.drawTextShape.call(this),this.drawLinkField(this.meta)},e.prototype.drawRectBorder=function(){var t=this,e=this.getCellArea().x,n=this.getContentIndent(),r=this.spreadsheet.isHierarchyTreeType()?e:e+n;[vb.BOTTOM,vb.LEFT].forEach((function(e){var n=C_(e,bl(bl({},t.getCellArea()),{x:r}),t.getStyle().cell),i=n.position,o=n.style;r_(t,i,o)}))},e.prototype.drawResizeAreaInLeaf=function(){if(this.meta.isLeaf&&this.shouldDrawResizeAreaByType("rowCellVertical",this)){var t=this.getCellArea(),e=t.x,n=t.y,r=t.width,i=t.height,o=this.getResizeAreaStyle(),a=IL(this.spreadsheet,va),l=this.headerConfig,s=l.position,u=l.seriesNumberWidth,c=l.width,h=l.viewportHeight,d=l.scrollX,f=l.scrollY,p={x:e,y:n+i-o.size/2,width:r,height:o.size};if(RL(p,{x:0,y:0,width:c,height:h},{scrollX:d,scrollY:f})){var v=(null==s?void 0:s.x)+e-d+u,g=(null==s?void 0:s.y)+n-f,y=this.spreadsheet.isFrozenRowHeader()?c-u-(e-d):r;a.addShape("rect",{attrs:bl(bl({},OL({id:this.meta.id,theme:o,type:hl.Vertical,effect:fl.Cell,offsetX:v,offsetY:g,width:r,height:i,meta:this.meta})),{x:v,y:g+i-o.size/2,width:y})})}}},e.prototype.getContentIndent=function(){if(!this.spreadsheet.isHierarchyTreeType())return 0;for(var t=this.getStyle(),e=t.icon,n=t.cell,r=e.size+e.margin.right,i=this.meta.parent,o=0;i;)0!==i.height&&(o+=r),i=i.parent;return this.showTreeLeafNodeAlignDot()&&(o+=this.isTreeLevel()?0:n.padding.right+e.margin.right),o},e.prototype.getTextIndent=function(){var t=this.getStyle().icon,e=t.size,n=t.margin;return this.getContentIndent()+(this.showTreeIcon()||this.isTreeLevel()&&this.showTreeLeafNodeAlignDot()?e+n.right:0)},e.prototype.isTreeLevel=function(){return uy(Fh(this.meta,"parent.children"),(function(t){return!t.isLeaf}))},e.prototype.getIconPosition=function(){var t=this.textShape.cfg.attrs,e=t.x,n=t.y,r=t.textAlign,i=this.getStyle().icon.margin.left;return"left"===r?{x:e+this.actualTextWidth+i,y:n}:"right"===r?{x:e+i,y:n}:{x:e+this.actualTextWidth/2+i,y:n}},e.prototype.getMaxTextWidth=function(){return this.getContentArea().width-this.getTextIndent()-this.getActionIconsWidth()},e.prototype.getTextArea=function(){var t=this.getContentArea(),e=this.getTextIndent();return bl(bl({},t),{x:t.x+e,width:t.width-e})},e.prototype.getAdjustTextAreaHeight=function(t,e,n){var r=t.height;return!this.spreadsheet.facet.vScrollBar&&t.y+t.height>e+n&&(r=e+n-t.y),r},e.prototype.getTextPosition=function(){var t=this.getTextArea(),e=this.headerConfig,n=e.scrollY,r=e.viewportHeight,i=this.getAdjustTextAreaHeight(t,n,r),o=this.getTextStyle().fontSize,a=rE(t.y,i,n,r,o);return{x:m_(t,this.getTextStyle(),0,this.getIconStyle(),this.getActionIconsCount()).text.x,y:a}},e.prototype.getIconYPosition=function(){var t=this.getTextPosition().y,e=this.getStyle().icon.size;return t+(this.getTextStyle().fontSize-e)/2},e}(UL),oE=function(t,e,n){var r,i,o=(null===(r=n.icon.margin)||void 0===r?void 0:r.left)||0,a=(null===(i=n.icon.margin)||void 0===i?void 0:i.right)||0,l=t.store.get("hiddenColumnsDetail",[]),s=!1,u=!1;l.forEach((function(t){var n,r,i,o;(null===(r=null===(n=null==t?void 0:t.displaySiblingNode)||void 0===n?void 0:n.prev)||void 0===r?void 0:r.field)===e&&(s=!0),(null===(o=null===(i=null==t?void 0:t.displaySiblingNode)||void 0===i?void 0:i.next)||void 0===o?void 0:o.field)===e&&(u=!0)}));var c=Fh(n,"icon.size");return{left:u?c+a:0,right:s?c+o:0}},aE=function(t,e,n){var r=Fh(n,"cell.padding"),i=oE(t,e.field,n);return r.left+r.right+function(t,e,n,r){var i,o,a=Fh(r,"size"),l=Fh(r,"margin"),s=0;return(s=t.options.showDefaultHeaderActionIcon?1:null!==(o=null===(i=ML(t.options.headerActionIcons,e,n))||void 0===i?void 0:i.iconNames.length)&&void 0!==o?o:0)*(a+l.left)+(s>0?l.right:0)}(t,e,Ua.COL_CELL,Fh(n,"icon"))+i.left+i.right},lE=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Sl(e,t),e.prototype.handleRestOptions=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=El(t,1)[0];this.headerConfig=bl({},n);var r=this.meta.field,i=this.spreadsheet.dataCfg.sortParams,o=uy(i,(function(t){return(null==t?void 0:t.sortFieldId)===r})),a=jL(o,!0);this.headerConfig.sortParam=bl(bl(bl({},this.headerConfig.sortParam),o||{}),{type:a})},e.prototype.isFrozenCell=function(){var t=this.spreadsheet.options,e=t.frozenColCount,n=t.frozenTrailingColCount,r=this.spreadsheet.facet.layoutResult.colNodes.filter((function(t){return Gb(t)})),i=function(t){for(;!Gb(t);)t=t.parent;return t}(this.meta).colIndex;return Bb(i,e)||Db(i,n,r.length)},e.prototype.getFormattedFieldValue=function(){return AL(this.meta,this.spreadsheet.dataSet.getFieldName(this.meta.label))},e.prototype.shouldAddVerticalResizeArea=function(){return!!this.isFrozenCell()||t.prototype.shouldAddVerticalResizeArea.call(this)},e.prototype.getVerticalResizeAreaOffset=function(){var t=this.meta,e=t.x,n=t.y,r=this.headerConfig,i=r.scrollX,o=r.position;return this.isFrozenCell()?{x:e,y:n}:{x:o.x+e-i,y:o.y+n}},e.prototype.getColResizeArea=function(){return this.isFrozenCell()?IL(this.spreadsheet,xa):t.prototype.getColResizeArea.call(this)},e.prototype.isSortCell=function(){return!0},e.prototype.showSortIcon=function(){return this.spreadsheet.options.showDefaultHeaderActionIcon},e.prototype.getTextStyle=function(){var t=this.getStyle();return null==t?void 0:t.bolderText},e.prototype.getContentArea=function(){var t,e=((null===(t=this.getStyle())||void 0===t?void 0:t.cell)||this.theme.dataCell.cell).padding,n=bl({},e),r=oE(this.spreadsheet,this.meta.field,this.getStyle());return r.left&&(n.left=(n.left||0)+r.left),r.right&&(n.right=(n.right||0)+r.right),p_(this.getCellArea(),n)},e.prototype.getHorizontalResizeAreaName=function(){return"".concat(ba).concat("table-col-cell")},e.prototype.drawBackgroundShape=function(){var t=this.getStyle().cell.backgroundColor;this.backgroundShape=t_(this,bl(bl({},this.getCellArea()),{fill:t}))},e}(YL),sE=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Sl(e,t),e.prototype.getStyle=function(t){return t?this.theme[t]:Fh(this,"theme.cornerCell")},e.prototype.showSortIcon=function(){return!1},e.prototype.drawLeftBorder=function(){var t=C_(vb.LEFT,this.getCellArea(),this.getStyle().cell);r_(this,t.position,t.style)},e.prototype.drawBorders=function(){t.prototype.drawBorders.call(this),0===this.meta.colIndex&&this.drawLeftBorder()},e}(lE),uE=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Sl(e,t),e.prototype.getLinkFieldStyle=function(){return this.theme.rowCell.text.linkTextFill},e.prototype.drawBorderShape=function(){t.prototype.drawBorderShape.call(this),0===this.meta.colIndex&&this.drawLeftBorder()},e.prototype.shouldDrawResizeArea=function(){return 0===this.meta.colIndex},e.prototype.drawResizeArea=function(){if(this.shouldDrawResizeArea()){var t=this.getCellArea(),e=t.x,n=t.y,r=t.width,i=t.height,o=this.meta.rowIndex,a=this.getResizeAreaStyle(),l=this.spreadsheet.options,s=l.frozenRowCount,u=l.frozenTrailingRowCount,c=this.spreadsheet.facet.getCellRange(),h=kb(o,c.start,s),d=Nb(o,c.end,u),f=h||d?ga:va,p=IL(this.spreadsheet,f),v=this.spreadsheet.facet.layoutResult.colsHierarchy.height,g=this.spreadsheet.facet.getScrollOffset().scrollY,y=this.spreadsheet.facet.getPaginationScrollY(),m=n+(d?0:v);d||(m-=h?y:g+y),p.addShape("rect",{attrs:bl(bl({},OL({id:String(this.meta.rowIndex),theme:a,type:hl.Vertical,effect:fl.Cell,offsetX:e,offsetY:m,width:r,height:i,meta:this.meta})),{x:e,y:m+i-a.size/2,width:r})})}},e}(fL),cE=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Sl(e,t),Object.defineProperty(e.prototype,"cellType",{get:function(){return Ua.ROW_CELL},enumerable:!1,configurable:!0}),e.prototype.getTextStyle=function(){return this.theme.rowCell.seriesText},e}(uE),hE=function(t){return[Ka.META,Ka.CONTROL].includes(t.key)},dE=function(t){return t.ctrlKey||t.metaKey},fE=function(t){var e=t.getMeta()||{},n=e.id,r=e.colIndex,i=e.rowIndex,o=e.rowQuery;return{id:n,colIndex:r,rowIndex:i,type:t.cellType,rowQuery:o}};function pE(t,e){var n=Math.min(t.rowIndex,e.rowIndex),r=Math.max(t.rowIndex,e.rowIndex);return{start:{rowIndex:n,colIndex:Math.min(t.colIndex,e.colIndex)},end:{rowIndex:r,colIndex:Math.max(t.colIndex,e.colIndex)}}}var vE,gE,yE=function(t,e){var n=t.getSelectedCellHighlight(),r=n.colHeader,i=n.rowHeader;r&&t.updateCells(t.getAllColHeaderCells()),i&&t.updateCells(t.getAllRowHeaderCells()),e()},mE=function(t){var e=t.store.get("visibleActionIcons"),n=t.interaction.getInteractedCells(),r=t.interaction.getState().cells;if(Cm(n)&&Cm(r)&&Cm(e))return!1;(Pg(e,(function(t){t.set("visible",!1)})),t.store.set("visibleActionIcons",[]),Pg(n,(function(t){t.hideInteractionShape()})),t.interaction.resetState(),t.options.interaction.selectedCellsSpotlight)&&Pg(t.interaction.getPanelGroupAllUnSelectedDataCells()||[],(function(t){t.clearUnselectedState()}));return!0},CE=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Tl(Tl([],El(t),!1),[function(t,e){if(Xl(t)&&Xl(e))return e}],!1);return wg.apply(void 0,Tl([{}],El(n),!1))},wE=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=CE.apply(void 0,Tl([Ha],El(t),!1));return n.fields=function(t){var e=["rows","columns","values"].reduce((function(e,n){var r=t[n],i=Yx(r);return wm(i,r),e[n]=i,e}),{});return bl(bl({},t),e)}(n.fields),Cm(n.fields.customTreeItems)&&!Cm(n.fields.values)||(n.fields.valueInCols=!1),n},xE=function(t){return CE(wl,t)},SE=9e15,bE=1e9,_E="0123456789abcdef",LE="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",EE="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",TE={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-SE,maxE:SE,crypto:!1},OE=!0,IE="[DecimalError] ",RE=IE+"Invalid argument: ",ME=IE+"Precision limit exceeded",AE=IE+"crypto unavailable",BE="[object Decimal]",DE=Math.floor,kE=Math.pow,NE=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,PE=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,zE=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,HE=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,FE=1e7,WE=7,GE=LE.length-1,jE=EE.length-1,UE={toStringTag:BE};function YE(t){var e,n,r,i=t.length-1,o="",a=t[0];if(i>0){for(o+=a,e=1;e<i;e++)r=t[e]+"",(n=WE-r.length)&&(o+=nT(n)),o+=r;a=t[e],(n=WE-(r=a+"").length)&&(o+=nT(n))}else if(0===a)return"0";for(;a%10==0;)a/=10;return o+a}function VE(t,e,n){if(t!==~~t||t<e||t>n)throw Error(RE+t)}function XE(t,e,n,r){var i,o,a,l;for(o=t[0];o>=10;o/=10)--e;return--e<0?(e+=WE,i=0):(i=Math.ceil((e+1)/WE),e%=WE),o=kE(10,WE-e),l=t[i]%o|0,null==r?e<3?(0==e?l=l/100|0:1==e&&(l=l/10|0),a=n<4&&99999==l||n>3&&49999==l||5e4==l||0==l):a=(n<4&&l+1==o||n>3&&l+1==o/2)&&(t[i+1]/o/100|0)==kE(10,e-2)-1||(l==o/2||0==l)&&0==(t[i+1]/o/100|0):e<4?(0==e?l=l/1e3|0:1==e?l=l/100|0:2==e&&(l=l/10|0),a=(r||n<4)&&9999==l||!r&&n>3&&4999==l):a=((r||n<4)&&l+1==o||!r&&n>3&&l+1==o/2)&&(t[i+1]/o/1e3|0)==kE(10,e-3)-1,a}function qE(t,e,n){for(var r,i,o=[0],a=0,l=t.length;a<l;){for(i=o.length;i--;)o[i]*=e;for(o[0]+=_E.indexOf(t.charAt(a++)),r=0;r<o.length;r++)o[r]>n-1&&(void 0===o[r+1]&&(o[r+1]=0),o[r+1]+=o[r]/n|0,o[r]%=n)}return o.reverse()}UE.absoluteValue=UE.abs=function(){var t=new this.constructor(this);return t.s<0&&(t.s=1),$E(t)},UE.ceil=function(){return $E(new this.constructor(this),this.e+1,2)},UE.clampedTo=UE.clamp=function(t,e){var n=this,r=n.constructor;if(t=new r(t),e=new r(e),!t.s||!e.s)return new r(NaN);if(t.gt(e))throw Error(RE+e);return n.cmp(t)<0?t:n.cmp(e)>0?e:new r(n)},UE.comparedTo=UE.cmp=function(t){var e,n,r,i,o=this,a=o.d,l=(t=new o.constructor(t)).d,s=o.s,u=t.s;if(!a||!l)return s&&u?s!==u?s:a===l?0:!a^s<0?1:-1:NaN;if(!a[0]||!l[0])return a[0]?s:l[0]?-u:0;if(s!==u)return s;if(o.e!==t.e)return o.e>t.e^s<0?1:-1;for(e=0,n=(r=a.length)<(i=l.length)?r:i;e<n;++e)if(a[e]!==l[e])return a[e]>l[e]^s<0?1:-1;return r===i?0:r>i^s<0?1:-1},UE.cosine=UE.cos=function(){var t,e,n=this,r=n.constructor;return n.d?n.d[0]?(t=r.precision,e=r.rounding,r.precision=t+Math.max(n.e,n.sd())+WE,r.rounding=1,n=function(t,e){var n,r,i;if(e.isZero())return e;r=e.d.length,r<32?i=(1/hT(4,n=Math.ceil(r/3))).toString():(n=16,i="2.3283064365386962890625e-10");t.precision+=n,e=cT(t,1,e.times(i),new t(1));for(var o=n;o--;){var a=e.times(e);e=a.times(a).minus(a).times(8).plus(1)}return t.precision-=n,e}(r,dT(r,n)),r.precision=t,r.rounding=e,$E(2==gE||3==gE?n.neg():n,t,e,!0)):new r(1):new r(NaN)},UE.cubeRoot=UE.cbrt=function(){var t,e,n,r,i,o,a,l,s,u,c=this,h=c.constructor;if(!c.isFinite()||c.isZero())return new h(c);for(OE=!1,(o=c.s*kE(c.s*c,1/3))&&Math.abs(o)!=1/0?r=new h(o.toString()):(n=YE(c.d),(o=((t=c.e)-n.length+1)%3)&&(n+=1==o||-2==o?"0":"00"),o=kE(n,1/3),t=DE((t+1)/3)-(t%3==(t<0?-1:2)),(r=new h(n=o==1/0?"5e"+t:(n=o.toExponential()).slice(0,n.indexOf("e")+1)+t)).s=c.s),a=(t=h.precision)+3;;)if(u=(s=(l=r).times(l).times(l)).plus(c),r=KE(u.plus(c).times(l),u.plus(s),a+2,1),YE(l.d).slice(0,a)===(n=YE(r.d)).slice(0,a)){if("9999"!=(n=n.slice(a-3,a+1))&&(i||"4999"!=n)){+n&&(+n.slice(1)||"5"!=n.charAt(0))||($E(r,t+1,1),e=!r.times(r).times(r).eq(c));break}if(!i&&($E(l,t+1,0),l.times(l).times(l).eq(c))){r=l;break}a+=4,i=1}return OE=!0,$E(r,t,h.rounding,e)},UE.decimalPlaces=UE.dp=function(){var t,e=this.d,n=NaN;if(e){if(n=((t=e.length-1)-DE(this.e/WE))*WE,t=e[t])for(;t%10==0;t/=10)n--;n<0&&(n=0)}return n},UE.dividedBy=UE.div=function(t){return KE(this,new this.constructor(t))},UE.dividedToIntegerBy=UE.divToInt=function(t){var e=this.constructor;return $E(KE(this,new e(t),0,1,1),e.precision,e.rounding)},UE.equals=UE.eq=function(t){return 0===this.cmp(t)},UE.floor=function(){return $E(new this.constructor(this),this.e+1,3)},UE.greaterThan=UE.gt=function(t){return this.cmp(t)>0},UE.greaterThanOrEqualTo=UE.gte=function(t){var e=this.cmp(t);return 1==e||0===e},UE.hyperbolicCosine=UE.cosh=function(){var t,e,n,r,i,o=this,a=o.constructor,l=new a(1);if(!o.isFinite())return new a(o.s?1/0:NaN);if(o.isZero())return l;n=a.precision,r=a.rounding,a.precision=n+Math.max(o.e,o.sd())+4,a.rounding=1,(i=o.d.length)<32?e=(1/hT(4,t=Math.ceil(i/3))).toString():(t=16,e="2.3283064365386962890625e-10"),o=cT(a,1,o.times(e),new a(1),!0);for(var s,u=t,c=new a(8);u--;)s=o.times(o),o=l.minus(s.times(c.minus(s.times(c))));return $E(o,a.precision=n,a.rounding=r,!0)},UE.hyperbolicSine=UE.sinh=function(){var t,e,n,r,i=this,o=i.constructor;if(!i.isFinite()||i.isZero())return new o(i);if(e=o.precision,n=o.rounding,o.precision=e+Math.max(i.e,i.sd())+4,o.rounding=1,(r=i.d.length)<3)i=cT(o,2,i,i,!0);else{t=(t=1.4*Math.sqrt(r))>16?16:0|t,i=cT(o,2,i=i.times(1/hT(5,t)),i,!0);for(var a,l=new o(5),s=new o(16),u=new o(20);t--;)a=i.times(i),i=i.times(l.plus(a.times(s.times(a).plus(u))))}return o.precision=e,o.rounding=n,$E(i,e,n,!0)},UE.hyperbolicTangent=UE.tanh=function(){var t,e,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+7,r.rounding=1,KE(n.sinh(),n.cosh(),r.precision=t,r.rounding=e)):new r(n.s)},UE.inverseCosine=UE.acos=function(){var t,e=this,n=e.constructor,r=e.abs().cmp(1),i=n.precision,o=n.rounding;return-1!==r?0===r?e.isNeg()?tT(n,i,o):new n(0):new n(NaN):e.isZero()?tT(n,i+4,o).times(.5):(n.precision=i+6,n.rounding=1,e=e.asin(),t=tT(n,i+4,o).times(.5),n.precision=i,n.rounding=o,t.minus(e))},UE.inverseHyperbolicCosine=UE.acosh=function(){var t,e,n=this,r=n.constructor;return n.lte(1)?new r(n.eq(1)?0:NaN):n.isFinite()?(t=r.precision,e=r.rounding,r.precision=t+Math.max(Math.abs(n.e),n.sd())+4,r.rounding=1,OE=!1,n=n.times(n).minus(1).sqrt().plus(n),OE=!0,r.precision=t,r.rounding=e,n.ln()):new r(n)},UE.inverseHyperbolicSine=UE.asinh=function(){var t,e,n=this,r=n.constructor;return!n.isFinite()||n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+2*Math.max(Math.abs(n.e),n.sd())+6,r.rounding=1,OE=!1,n=n.times(n).plus(1).sqrt().plus(n),OE=!0,r.precision=t,r.rounding=e,n.ln())},UE.inverseHyperbolicTangent=UE.atanh=function(){var t,e,n,r,i=this,o=i.constructor;return i.isFinite()?i.e>=0?new o(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(t=o.precision,e=o.rounding,r=i.sd(),Math.max(r,t)<2*-i.e-1?$E(new o(i),t,e,!0):(o.precision=n=r-i.e,i=KE(i.plus(1),new o(1).minus(i),n+t,1),o.precision=t+4,o.rounding=1,i=i.ln(),o.precision=t,o.rounding=e,i.times(.5))):new o(NaN)},UE.inverseSine=UE.asin=function(){var t,e,n,r,i=this,o=i.constructor;return i.isZero()?new o(i):(e=i.abs().cmp(1),n=o.precision,r=o.rounding,-1!==e?0===e?((t=tT(o,n+4,r).times(.5)).s=i.s,t):new o(NaN):(o.precision=n+6,o.rounding=1,i=i.div(new o(1).minus(i.times(i)).sqrt().plus(1)).atan(),o.precision=n,o.rounding=r,i.times(2)))},UE.inverseTangent=UE.atan=function(){var t,e,n,r,i,o,a,l,s,u=this,c=u.constructor,h=c.precision,d=c.rounding;if(u.isFinite()){if(u.isZero())return new c(u);if(u.abs().eq(1)&&h+4<=jE)return(a=tT(c,h+4,d).times(.25)).s=u.s,a}else{if(!u.s)return new c(NaN);if(h+4<=jE)return(a=tT(c,h+4,d).times(.5)).s=u.s,a}for(c.precision=l=h+10,c.rounding=1,t=n=Math.min(28,l/WE+2|0);t;--t)u=u.div(u.times(u).plus(1).sqrt().plus(1));for(OE=!1,e=Math.ceil(l/WE),r=1,s=u.times(u),a=new c(u),i=u;-1!==t;)if(i=i.times(s),o=a.minus(i.div(r+=2)),i=i.times(s),void 0!==(a=o.plus(i.div(r+=2))).d[e])for(t=e;a.d[t]===o.d[t]&&t--;);return n&&(a=a.times(2<<n-1)),OE=!0,$E(a,c.precision=h,c.rounding=d,!0)},UE.isFinite=function(){return!!this.d},UE.isInteger=UE.isInt=function(){return!!this.d&&DE(this.e/WE)>this.d.length-2},UE.isNaN=function(){return!this.s},UE.isNegative=UE.isNeg=function(){return this.s<0},UE.isPositive=UE.isPos=function(){return this.s>0},UE.isZero=function(){return!!this.d&&0===this.d[0]},UE.lessThan=UE.lt=function(t){return this.cmp(t)<0},UE.lessThanOrEqualTo=UE.lte=function(t){return this.cmp(t)<1},UE.logarithm=UE.log=function(t){var e,n,r,i,o,a,l,s,u=this,c=u.constructor,h=c.precision,d=c.rounding;if(null==t)t=new c(10),e=!0;else{if(n=(t=new c(t)).d,t.s<0||!n||!n[0]||t.eq(1))return new c(NaN);e=t.eq(10)}if(n=u.d,u.s<0||!n||!n[0]||u.eq(1))return new c(n&&!n[0]?-1/0:1!=u.s?NaN:n?0:1/0);if(e)if(n.length>1)o=!0;else{for(i=n[0];i%10==0;)i/=10;o=1!==i}if(OE=!1,a=lT(u,l=h+5),r=e?JE(c,l+10):lT(t,l),XE((s=KE(a,r,l,1)).d,i=h,d))do{if(a=lT(u,l+=10),r=e?JE(c,l+10):lT(t,l),s=KE(a,r,l,1),!o){+YE(s.d).slice(i+1,i+15)+1==1e14&&(s=$E(s,h+1,0));break}}while(XE(s.d,i+=10,d));return OE=!0,$E(s,h,d)},UE.minus=UE.sub=function(t){var e,n,r,i,o,a,l,s,u,c,h,d,f=this,p=f.constructor;if(t=new p(t),!f.d||!t.d)return f.s&&t.s?f.d?t.s=-t.s:t=new p(t.d||f.s!==t.s?f:NaN):t=new p(NaN),t;if(f.s!=t.s)return t.s=-t.s,f.plus(t);if(u=f.d,d=t.d,l=p.precision,s=p.rounding,!u[0]||!d[0]){if(d[0])t.s=-t.s;else{if(!u[0])return new p(3===s?-0:0);t=new p(f)}return OE?$E(t,l,s):t}if(n=DE(t.e/WE),c=DE(f.e/WE),u=u.slice(),o=c-n){for((h=o<0)?(e=u,o=-o,a=d.length):(e=d,n=c,a=u.length),o>(r=Math.max(Math.ceil(l/WE),a)+2)&&(o=r,e.length=1),e.reverse(),r=o;r--;)e.push(0);e.reverse()}else{for((h=(r=u.length)<(a=d.length))&&(a=r),r=0;r<a;r++)if(u[r]!=d[r]){h=u[r]<d[r];break}o=0}for(h&&(e=u,u=d,d=e,t.s=-t.s),a=u.length,r=d.length-a;r>0;--r)u[a++]=0;for(r=d.length;r>o;){if(u[--r]<d[r]){for(i=r;i&&0===u[--i];)u[i]=FE-1;--u[i],u[r]+=FE}u[r]-=d[r]}for(;0===u[--a];)u.pop();for(;0===u[0];u.shift())--n;return u[0]?(t.d=u,t.e=QE(u,n),OE?$E(t,l,s):t):new p(3===s?-0:0)},UE.modulo=UE.mod=function(t){var e,n=this,r=n.constructor;return t=new r(t),!n.d||!t.s||t.d&&!t.d[0]?new r(NaN):!t.d||n.d&&!n.d[0]?$E(new r(n),r.precision,r.rounding):(OE=!1,9==r.modulo?(e=KE(n,t.abs(),0,3,1)).s*=t.s:e=KE(n,t,0,r.modulo,1),e=e.times(t),OE=!0,n.minus(e))},UE.naturalExponential=UE.exp=function(){return aT(this)},UE.naturalLogarithm=UE.ln=function(){return lT(this)},UE.negated=UE.neg=function(){var t=new this.constructor(this);return t.s=-t.s,$E(t)},UE.plus=UE.add=function(t){var e,n,r,i,o,a,l,s,u,c,h=this,d=h.constructor;if(t=new d(t),!h.d||!t.d)return h.s&&t.s?h.d||(t=new d(t.d||h.s===t.s?h:NaN)):t=new d(NaN),t;if(h.s!=t.s)return t.s=-t.s,h.minus(t);if(u=h.d,c=t.d,l=d.precision,s=d.rounding,!u[0]||!c[0])return c[0]||(t=new d(h)),OE?$E(t,l,s):t;if(o=DE(h.e/WE),r=DE(t.e/WE),u=u.slice(),i=o-r){for(i<0?(n=u,i=-i,a=c.length):(n=c,r=o,a=u.length),i>(a=(o=Math.ceil(l/WE))>a?o+1:a+1)&&(i=a,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for((a=u.length)-(i=c.length)<0&&(i=a,n=c,c=u,u=n),e=0;i;)e=(u[--i]=u[i]+c[i]+e)/FE|0,u[i]%=FE;for(e&&(u.unshift(e),++r),a=u.length;0==u[--a];)u.pop();return t.d=u,t.e=QE(u,r),OE?$E(t,l,s):t},UE.precision=UE.sd=function(t){var e,n=this;if(void 0!==t&&t!==!!t&&1!==t&&0!==t)throw Error(RE+t);return n.d?(e=eT(n.d),t&&n.e+1>e&&(e=n.e+1)):e=NaN,e},UE.round=function(){var t=this,e=t.constructor;return $E(new e(t),t.e+1,e.rounding)},UE.sine=UE.sin=function(){var t,e,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+Math.max(n.e,n.sd())+WE,r.rounding=1,n=function(t,e){var n,r=e.d.length;if(r<3)return e.isZero()?e:cT(t,2,e,e);n=(n=1.4*Math.sqrt(r))>16?16:0|n,e=e.times(1/hT(5,n)),e=cT(t,2,e,e);for(var i,o=new t(5),a=new t(16),l=new t(20);n--;)i=e.times(e),e=e.times(o.plus(i.times(a.times(i).minus(l))));return e}(r,dT(r,n)),r.precision=t,r.rounding=e,$E(gE>2?n.neg():n,t,e,!0)):new r(NaN)},UE.squareRoot=UE.sqrt=function(){var t,e,n,r,i,o,a=this,l=a.d,s=a.e,u=a.s,c=a.constructor;if(1!==u||!l||!l[0])return new c(!u||u<0&&(!l||l[0])?NaN:l?a:1/0);for(OE=!1,0==(u=Math.sqrt(+a))||u==1/0?(((e=YE(l)).length+s)%2==0&&(e+="0"),u=Math.sqrt(e),s=DE((s+1)/2)-(s<0||s%2),r=new c(e=u==1/0?"5e"+s:(e=u.toExponential()).slice(0,e.indexOf("e")+1)+s)):r=new c(u.toString()),n=(s=c.precision)+3;;)if(r=(o=r).plus(KE(a,o,n+2,1)).times(.5),YE(o.d).slice(0,n)===(e=YE(r.d)).slice(0,n)){if("9999"!=(e=e.slice(n-3,n+1))&&(i||"4999"!=e)){+e&&(+e.slice(1)||"5"!=e.charAt(0))||($E(r,s+1,1),t=!r.times(r).eq(a));break}if(!i&&($E(o,s+1,0),o.times(o).eq(a))){r=o;break}n+=4,i=1}return OE=!0,$E(r,s,c.rounding,t)},UE.tangent=UE.tan=function(){var t,e,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+10,r.rounding=1,(n=n.sin()).s=1,n=KE(n,new r(1).minus(n.times(n)).sqrt(),t+10,0),r.precision=t,r.rounding=e,$E(2==gE||4==gE?n.neg():n,t,e,!0)):new r(NaN)},UE.times=UE.mul=function(t){var e,n,r,i,o,a,l,s,u,c=this,h=c.constructor,d=c.d,f=(t=new h(t)).d;if(t.s*=c.s,!(d&&d[0]&&f&&f[0]))return new h(!t.s||d&&!d[0]&&!f||f&&!f[0]&&!d?NaN:d&&f?0*t.s:t.s/0);for(n=DE(c.e/WE)+DE(t.e/WE),(s=d.length)<(u=f.length)&&(o=d,d=f,f=o,a=s,s=u,u=a),o=[],r=a=s+u;r--;)o.push(0);for(r=u;--r>=0;){for(e=0,i=s+r;i>r;)l=o[i]+f[r]*d[i-r-1]+e,o[i--]=l%FE|0,e=l/FE|0;o[i]=(o[i]+e)%FE|0}for(;!o[--a];)o.pop();return e?++n:o.shift(),t.d=o,t.e=QE(o,n),OE?$E(t,h.precision,h.rounding):t},UE.toBinary=function(t,e){return fT(this,2,t,e)},UE.toDecimalPlaces=UE.toDP=function(t,e){var n=this,r=n.constructor;return n=new r(n),void 0===t?n:(VE(t,0,bE),void 0===e?e=r.rounding:VE(e,0,8),$E(n,t+n.e+1,e))},UE.toExponential=function(t,e){var n,r=this,i=r.constructor;return void 0===t?n=ZE(r,!0):(VE(t,0,bE),void 0===e?e=i.rounding:VE(e,0,8),n=ZE(r=$E(new i(r),t+1,e),!0,t+1)),r.isNeg()&&!r.isZero()?"-"+n:n},UE.toFixed=function(t,e){var n,r,i=this,o=i.constructor;return void 0===t?n=ZE(i):(VE(t,0,bE),void 0===e?e=o.rounding:VE(e,0,8),n=ZE(r=$E(new o(i),t+i.e+1,e),!1,t+r.e+1)),i.isNeg()&&!i.isZero()?"-"+n:n},UE.toFraction=function(t){var e,n,r,i,o,a,l,s,u,c,h,d,f=this,p=f.d,v=f.constructor;if(!p)return new v(f);if(u=n=new v(1),r=s=new v(0),a=(o=(e=new v(r)).e=eT(p)-f.e-1)%WE,e.d[0]=kE(10,a<0?WE+a:a),null==t)t=o>0?e:u;else{if(!(l=new v(t)).isInt()||l.lt(u))throw Error(RE+l);t=l.gt(e)?o>0?e:u:l}for(OE=!1,l=new v(YE(p)),c=v.precision,v.precision=o=p.length*WE*2;h=KE(l,e,0,1,1),1!=(i=n.plus(h.times(r))).cmp(t);)n=r,r=i,i=u,u=s.plus(h.times(i)),s=i,i=e,e=l.minus(h.times(i)),l=i;return i=KE(t.minus(n),r,0,1,1),s=s.plus(i.times(u)),n=n.plus(i.times(r)),s.s=u.s=f.s,d=KE(u,r,o,1).minus(f).abs().cmp(KE(s,n,o,1).minus(f).abs())<1?[u,r]:[s,n],v.precision=c,OE=!0,d},UE.toHexadecimal=UE.toHex=function(t,e){return fT(this,16,t,e)},UE.toNearest=function(t,e){var n=this,r=n.constructor;if(n=new r(n),null==t){if(!n.d)return n;t=new r(1),e=r.rounding}else{if(t=new r(t),void 0===e?e=r.rounding:VE(e,0,8),!n.d)return t.s?n:t;if(!t.d)return t.s&&(t.s=n.s),t}return t.d[0]?(OE=!1,n=KE(n,t,0,e,1).times(t),OE=!0,$E(n)):(t.s=n.s,n=t),n},UE.toNumber=function(){return+this},UE.toOctal=function(t,e){return fT(this,8,t,e)},UE.toPower=UE.pow=function(t){var e,n,r,i,o,a,l=this,s=l.constructor,u=+(t=new s(t));if(!(l.d&&t.d&&l.d[0]&&t.d[0]))return new s(kE(+l,u));if((l=new s(l)).eq(1))return l;if(r=s.precision,o=s.rounding,t.eq(1))return $E(l,r,o);if((e=DE(t.e/WE))>=t.d.length-1&&(n=u<0?-u:u)<=9007199254740991)return i=rT(s,l,n,r),t.s<0?new s(1).div(i):$E(i,r,o);if((a=l.s)<0){if(e<t.d.length-1)return new s(NaN);if(0==(1&t.d[e])&&(a=1),0==l.e&&1==l.d[0]&&1==l.d.length)return l.s=a,l}return(e=0!=(n=kE(+l,u))&&isFinite(n)?new s(n+"").e:DE(u*(Math.log("0."+YE(l.d))/Math.LN10+l.e+1)))>s.maxE+1||e<s.minE-1?new s(e>0?a/0:0):(OE=!1,s.rounding=l.s=1,n=Math.min(12,(e+"").length),(i=aT(t.times(lT(l,r+n)),r)).d&&XE((i=$E(i,r+5,1)).d,r,o)&&(e=r+10,+YE((i=$E(aT(t.times(lT(l,e+n)),e),e+5,1)).d).slice(r+1,r+15)+1==1e14&&(i=$E(i,r+1,0))),i.s=a,OE=!0,s.rounding=o,$E(i,r,o))},UE.toPrecision=function(t,e){var n,r=this,i=r.constructor;return void 0===t?n=ZE(r,r.e<=i.toExpNeg||r.e>=i.toExpPos):(VE(t,1,bE),void 0===e?e=i.rounding:VE(e,0,8),n=ZE(r=$E(new i(r),t,e),t<=r.e||r.e<=i.toExpNeg,t)),r.isNeg()&&!r.isZero()?"-"+n:n},UE.toSignificantDigits=UE.toSD=function(t,e){var n=this.constructor;return void 0===t?(t=n.precision,e=n.rounding):(VE(t,1,bE),void 0===e?e=n.rounding:VE(e,0,8)),$E(new n(this),t,e)},UE.toString=function(){var t=this,e=t.constructor,n=ZE(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()&&!t.isZero()?"-"+n:n},UE.truncated=UE.trunc=function(){return $E(new this.constructor(this),this.e+1,1)},UE.valueOf=UE.toJSON=function(){var t=this,e=t.constructor,n=ZE(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()?"-"+n:n};var KE=function(){function t(t,e,n){var r,i=0,o=t.length;for(t=t.slice();o--;)r=t[o]*e+i,t[o]=r%n|0,i=r/n|0;return i&&t.unshift(i),t}function e(t,e,n,r){var i,o;if(n!=r)o=n>r?1:-1;else for(i=o=0;i<n;i++)if(t[i]!=e[i]){o=t[i]>e[i]?1:-1;break}return o}function n(t,e,n,r){for(var i=0;n--;)t[n]-=i,i=t[n]<e[n]?1:0,t[n]=i*r+t[n]-e[n];for(;!t[0]&&t.length>1;)t.shift()}return function(r,i,o,a,l,s){var u,c,h,d,f,p,v,g,y,m,C,w,x,S,b,_,L,E,T,O,I=r.constructor,R=r.s==i.s?1:-1,M=r.d,A=i.d;if(!(M&&M[0]&&A&&A[0]))return new I(r.s&&i.s&&(M?!A||M[0]!=A[0]:A)?M&&0==M[0]||!A?0*R:R/0:NaN);for(s?(f=1,c=r.e-i.e):(s=FE,f=WE,c=DE(r.e/f)-DE(i.e/f)),T=A.length,L=M.length,m=(y=new I(R)).d=[],h=0;A[h]==(M[h]||0);h++);if(A[h]>(M[h]||0)&&c--,null==o?(S=o=I.precision,a=I.rounding):S=l?o+(r.e-i.e)+1:o,S<0)m.push(1),p=!0;else{if(S=S/f+2|0,h=0,1==T){for(d=0,A=A[0],S++;(h<L||d)&&S--;h++)b=d*s+(M[h]||0),m[h]=b/A|0,d=b%A|0;p=d||h<L}else{for((d=s/(A[0]+1)|0)>1&&(A=t(A,d,s),M=t(M,d,s),T=A.length,L=M.length),_=T,w=(C=M.slice(0,T)).length;w<T;)C[w++]=0;(O=A.slice()).unshift(0),E=A[0],A[1]>=s/2&&++E;do{d=0,(u=e(A,C,T,w))<0?(x=C[0],T!=w&&(x=x*s+(C[1]||0)),(d=x/E|0)>1?(d>=s&&(d=s-1),1==(u=e(v=t(A,d,s),C,g=v.length,w=C.length))&&(d--,n(v,T<g?O:A,g,s))):(0==d&&(u=d=1),v=A.slice()),(g=v.length)<w&&v.unshift(0),n(C,v,w,s),-1==u&&(u=e(A,C,T,w=C.length))<1&&(d++,n(C,T<w?O:A,w,s)),w=C.length):0===u&&(d++,C=[0]),m[h++]=d,u&&C[0]?C[w++]=M[_]||0:(C=[M[_]],w=1)}while((_++<L||void 0!==C[0])&&S--);p=void 0!==C[0]}m[0]||m.shift()}if(1==f)y.e=c,vE=p;else{for(h=1,d=m[0];d>=10;d/=10)h++;y.e=h+c*f-1,$E(y,l?o+y.e+1:o,a,p)}return y}}();function $E(t,e,n,r){var i,o,a,l,s,u,c,h,d,f=t.constructor;t:if(null!=e){if(!(h=t.d))return t;for(i=1,l=h[0];l>=10;l/=10)i++;if((o=e-i)<0)o+=WE,a=e,s=(c=h[d=0])/kE(10,i-a-1)%10|0;else if((d=Math.ceil((o+1)/WE))>=(l=h.length)){if(!r)break t;for(;l++<=d;)h.push(0);c=s=0,i=1,a=(o%=WE)-WE+1}else{for(c=l=h[d],i=1;l>=10;l/=10)i++;s=(a=(o%=WE)-WE+i)<0?0:c/kE(10,i-a-1)%10|0}if(r=r||e<0||void 0!==h[d+1]||(a<0?c:c%kE(10,i-a-1)),u=n<4?(s||r)&&(0==n||n==(t.s<0?3:2)):s>5||5==s&&(4==n||r||6==n&&(o>0?a>0?c/kE(10,i-a):0:h[d-1])%10&1||n==(t.s<0?8:7)),e<1||!h[0])return h.length=0,u?(e-=t.e+1,h[0]=kE(10,(WE-e%WE)%WE),t.e=-e||0):h[0]=t.e=0,t;if(0==o?(h.length=d,l=1,d--):(h.length=d+1,l=kE(10,WE-o),h[d]=a>0?(c/kE(10,i-a)%kE(10,a)|0)*l:0),u)for(;;){if(0==d){for(o=1,a=h[0];a>=10;a/=10)o++;for(a=h[0]+=l,l=1;a>=10;a/=10)l++;o!=l&&(t.e++,h[0]==FE&&(h[0]=1));break}if(h[d]+=l,h[d]!=FE)break;h[d--]=0,l=1}for(o=h.length;0===h[--o];)h.pop()}return OE&&(t.e>f.maxE?(t.d=null,t.e=NaN):t.e<f.minE&&(t.e=0,t.d=[0])),t}function ZE(t,e,n){if(!t.isFinite())return sT(t);var r,i=t.e,o=YE(t.d),a=o.length;return e?(n&&(r=n-a)>0?o=o.charAt(0)+"."+o.slice(1)+nT(r):a>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(t.e<0?"e":"e+")+t.e):i<0?(o="0."+nT(-i-1)+o,n&&(r=n-a)>0&&(o+=nT(r))):i>=a?(o+=nT(i+1-a),n&&(r=n-i-1)>0&&(o=o+"."+nT(r))):((r=i+1)<a&&(o=o.slice(0,r)+"."+o.slice(r)),n&&(r=n-a)>0&&(i+1===a&&(o+="."),o+=nT(r))),o}function QE(t,e){var n=t[0];for(e*=WE;n>=10;n/=10)e++;return e}function JE(t,e,n){if(e>GE)throw OE=!0,n&&(t.precision=n),Error(ME);return $E(new t(LE),e,1,!0)}function tT(t,e,n){if(e>jE)throw Error(ME);return $E(new t(EE),e,n,!0)}function eT(t){var e=t.length-1,n=e*WE+1;if(e=t[e]){for(;e%10==0;e/=10)n--;for(e=t[0];e>=10;e/=10)n++}return n}function nT(t){for(var e="";t--;)e+="0";return e}function rT(t,e,n,r){var i,o=new t(1),a=Math.ceil(r/WE+4);for(OE=!1;;){if(n%2&&pT((o=o.times(e)).d,a)&&(i=!0),0===(n=DE(n/2))){n=o.d.length-1,i&&0===o.d[n]&&++o.d[n];break}pT((e=e.times(e)).d,a)}return OE=!0,o}function iT(t){return 1&t.d[t.d.length-1]}function oT(t,e,n){for(var r,i=new t(e[0]),o=0;++o<e.length;){if(!(r=new t(e[o])).s){i=r;break}i[n](r)&&(i=r)}return i}function aT(t,e){var n,r,i,o,a,l,s,u=0,c=0,h=0,d=t.constructor,f=d.rounding,p=d.precision;if(!t.d||!t.d[0]||t.e>17)return new d(t.d?t.d[0]?t.s<0?0:1/0:1:t.s?t.s<0?0:t:NaN);for(null==e?(OE=!1,s=p):s=e,l=new d(.03125);t.e>-2;)t=t.times(l),h+=5;for(s+=r=Math.log(kE(2,h))/Math.LN10*2+5|0,n=o=a=new d(1),d.precision=s;;){if(o=$E(o.times(t),s,1),n=n.times(++c),YE((l=a.plus(KE(o,n,s,1))).d).slice(0,s)===YE(a.d).slice(0,s)){for(i=h;i--;)a=$E(a.times(a),s,1);if(null!=e)return d.precision=p,a;if(!(u<3&&XE(a.d,s-r,f,u)))return $E(a,d.precision=p,f,OE=!0);d.precision=s+=10,n=o=l=new d(1),c=0,u++}a=l}}function lT(t,e){var n,r,i,o,a,l,s,u,c,h,d,f=1,p=t,v=p.d,g=p.constructor,y=g.rounding,m=g.precision;if(p.s<0||!v||!v[0]||!p.e&&1==v[0]&&1==v.length)return new g(v&&!v[0]?-1/0:1!=p.s?NaN:v?0:p);if(null==e?(OE=!1,c=m):c=e,g.precision=c+=10,r=(n=YE(v)).charAt(0),!(Math.abs(o=p.e)<15e14))return u=JE(g,c+2,m).times(o+""),p=lT(new g(r+"."+n.slice(1)),c-10).plus(u),g.precision=m,null==e?$E(p,m,y,OE=!0):p;for(;r<7&&1!=r||1==r&&n.charAt(1)>3;)r=(n=YE((p=p.times(t)).d)).charAt(0),f++;for(o=p.e,r>1?(p=new g("0."+n),o++):p=new g(r+"."+n.slice(1)),h=p,s=a=p=KE(p.minus(1),p.plus(1),c,1),d=$E(p.times(p),c,1),i=3;;){if(a=$E(a.times(d),c,1),YE((u=s.plus(KE(a,new g(i),c,1))).d).slice(0,c)===YE(s.d).slice(0,c)){if(s=s.times(2),0!==o&&(s=s.plus(JE(g,c+2,m).times(o+""))),s=KE(s,new g(f),c,1),null!=e)return g.precision=m,s;if(!XE(s.d,c-10,y,l))return $E(s,g.precision=m,y,OE=!0);g.precision=c+=10,u=a=p=KE(h.minus(1),h.plus(1),c,1),d=$E(p.times(p),c,1),i=l=1}s=u,i+=2}}function sT(t){return String(t.s*t.s/0)}function uT(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;48===e.charCodeAt(r);r++);for(i=e.length;48===e.charCodeAt(i-1);--i);if(e=e.slice(r,i)){if(i-=r,t.e=n=n-r-1,t.d=[],r=(n+1)%WE,n<0&&(r+=WE),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=WE;r<i;)t.d.push(+e.slice(r,r+=WE));e=e.slice(r),r=WE-e.length}else r-=i;for(;r--;)e+="0";t.d.push(+e),OE&&(t.e>t.constructor.maxE?(t.d=null,t.e=NaN):t.e<t.constructor.minE&&(t.e=0,t.d=[0]))}else t.e=0,t.d=[0];return t}function cT(t,e,n,r,i){var o,a,l,s,u=t.precision,c=Math.ceil(u/WE);for(OE=!1,s=n.times(n),l=new t(r);;){if(a=KE(l.times(s),new t(e++*e++),u,1),l=i?r.plus(a):r.minus(a),r=KE(a.times(s),new t(e++*e++),u,1),void 0!==(a=l.plus(r)).d[c]){for(o=c;a.d[o]===l.d[o]&&o--;);if(-1==o)break}o=l,l=r,r=a,a=o}return OE=!0,a.d.length=c+1,a}function hT(t,e){for(var n=t;--e;)n*=t;return n}function dT(t,e){var n,r=e.s<0,i=tT(t,t.precision,1),o=i.times(.5);if((e=e.abs()).lte(o))return gE=r?4:1,e;if((n=e.divToInt(i)).isZero())gE=r?3:2;else{if((e=e.minus(n.times(i))).lte(o))return gE=iT(n)?r?2:3:r?4:1,e;gE=iT(n)?r?1:4:r?3:2}return e.minus(i).abs()}function fT(t,e,n,r){var i,o,a,l,s,u,c,h,d,f=t.constructor,p=void 0!==n;if(p?(VE(n,1,bE),void 0===r?r=f.rounding:VE(r,0,8)):(n=f.precision,r=f.rounding),t.isFinite()){for(p?(i=2,16==e?n=4*n-3:8==e&&(n=3*n-2)):i=e,(a=(c=ZE(t)).indexOf("."))>=0&&(c=c.replace(".",""),(d=new f(1)).e=c.length-a,d.d=qE(ZE(d),10,i),d.e=d.d.length),o=s=(h=qE(c,10,i)).length;0==h[--s];)h.pop();if(h[0]){if(a<0?o--:((t=new f(t)).d=h,t.e=o,h=(t=KE(t,d,n,r,0,i)).d,o=t.e,u=vE),a=h[n],l=i/2,u=u||void 0!==h[n+1],u=r<4?(void 0!==a||u)&&(0===r||r===(t.s<0?3:2)):a>l||a===l&&(4===r||u||6===r&&1&h[n-1]||r===(t.s<0?8:7)),h.length=n,u)for(;++h[--n]>i-1;)h[n]=0,n||(++o,h.unshift(1));for(s=h.length;!h[s-1];--s);for(a=0,c="";a<s;a++)c+=_E.charAt(h[a]);if(p){if(s>1)if(16==e||8==e){for(a=16==e?4:3,--s;s%a;s++)c+="0";for(s=(h=qE(c,i,e)).length;!h[s-1];--s);for(a=1,c="1.";a<s;a++)c+=_E.charAt(h[a])}else c=c.charAt(0)+"."+c.slice(1);c=c+(o<0?"p":"p+")+o}else if(o<0){for(;++o;)c="0"+c;c="0."+c}else if(++o>s)for(o-=s;o--;)c+="0";else o<s&&(c=c.slice(0,o)+"."+c.slice(o))}else c=p?"0p+0":"0";c=(16==e?"0x":2==e?"0b":8==e?"0o":"")+c}else c=sT(t);return t.s<0?"-"+c:c}function pT(t,e){if(t.length>e)return t.length=e,!0}function vT(t){return new this(t).abs()}function gT(t){return new this(t).acos()}function yT(t){return new this(t).acosh()}function mT(t,e){return new this(t).plus(e)}function CT(t){return new this(t).asin()}function wT(t){return new this(t).asinh()}function xT(t){return new this(t).atan()}function ST(t){return new this(t).atanh()}function bT(t,e){t=new this(t),e=new this(e);var n,r=this.precision,i=this.rounding,o=r+4;return t.s&&e.s?t.d||e.d?!e.d||t.isZero()?(n=e.s<0?tT(this,r,i):new this(0)).s=t.s:!t.d||e.isZero()?(n=tT(this,o,1).times(.5)).s=t.s:e.s<0?(this.precision=o,this.rounding=1,n=this.atan(KE(t,e,o,1)),e=tT(this,o,1),this.precision=r,this.rounding=i,n=t.s<0?n.minus(e):n.plus(e)):n=this.atan(KE(t,e,o,1)):(n=tT(this,o,1).times(e.s>0?.25:.75)).s=t.s:n=new this(NaN),n}function _T(t){return new this(t).cbrt()}function LT(t){return $E(t=new this(t),t.e+1,2)}function ET(t,e,n){return new this(t).clamp(e,n)}function TT(t){if(!t||"object"!=typeof t)throw Error(IE+"Object expected");var e,n,r,i=!0===t.defaults,o=["precision",1,bE,"rounding",0,8,"toExpNeg",-SE,0,"toExpPos",0,SE,"maxE",0,SE,"minE",-SE,0,"modulo",0,9];for(e=0;e<o.length;e+=3)if(n=o[e],i&&(this[n]=TE[n]),void 0!==(r=t[n])){if(!(DE(r)===r&&r>=o[e+1]&&r<=o[e+2]))throw Error(RE+n+": "+r);this[n]=r}if(n="crypto",i&&(this[n]=TE[n]),void 0!==(r=t[n])){if(!0!==r&&!1!==r&&0!==r&&1!==r)throw Error(RE+n+": "+r);if(r){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw Error(AE);this[n]=!0}else this[n]=!1}return this}function OT(t){return new this(t).cos()}function IT(t){return new this(t).cosh()}function RT(t,e){return new this(t).div(e)}function MT(t){return new this(t).exp()}function AT(t){return $E(t=new this(t),t.e+1,3)}function BT(){var t,e,n=new this(0);for(OE=!1,t=0;t<arguments.length;)if((e=new this(arguments[t++])).d)n.d&&(n=n.plus(e.times(e)));else{if(e.s)return OE=!0,new this(1/0);n=e}return OE=!0,n.sqrt()}function DT(t){return t instanceof nO||t&&t.toStringTag===BE||!1}function kT(t){return new this(t).ln()}function NT(t,e){return new this(t).log(e)}function PT(t){return new this(t).log(2)}function zT(t){return new this(t).log(10)}function HT(){return oT(this,arguments,"lt")}function FT(){return oT(this,arguments,"gt")}function WT(t,e){return new this(t).mod(e)}function GT(t,e){return new this(t).mul(e)}function jT(t,e){return new this(t).pow(e)}function UT(t){var e,n,r,i,o=0,a=new this(1),l=[];if(void 0===t?t=this.precision:VE(t,1,bE),r=Math.ceil(t/WE),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(r));o<r;)(i=e[o])>=429e7?e[o]=crypto.getRandomValues(new Uint32Array(1))[0]:l[o++]=i%1e7;else{if(!crypto.randomBytes)throw Error(AE);for(e=crypto.randomBytes(r*=4);o<r;)(i=e[o]+(e[o+1]<<8)+(e[o+2]<<16)+((127&e[o+3])<<24))>=214e7?crypto.randomBytes(4).copy(e,o):(l.push(i%1e7),o+=4);o=r/4}else for(;o<r;)l[o++]=1e7*Math.random()|0;for(r=l[--o],t%=WE,r&&t&&(i=kE(10,WE-t),l[o]=(r/i|0)*i);0===l[o];o--)l.pop();if(o<0)n=0,l=[0];else{for(n=-1;0===l[0];n-=WE)l.shift();for(r=1,i=l[0];i>=10;i/=10)r++;r<WE&&(n-=WE-r)}return a.e=n,a.d=l,a}function YT(t){return $E(t=new this(t),t.e+1,this.rounding)}function VT(t){return(t=new this(t)).d?t.d[0]?t.s:0*t.s:t.s||NaN}function XT(t){return new this(t).sin()}function qT(t){return new this(t).sinh()}function KT(t){return new this(t).sqrt()}function $T(t,e){return new this(t).sub(e)}function ZT(){var t=0,e=arguments,n=new this(e[t]);for(OE=!1;n.s&&++t<e.length;)n=n.plus(e[t]);return OE=!0,$E(n,this.precision,this.rounding)}function QT(t){return new this(t).tan()}function JT(t){return new this(t).tanh()}function tO(t){return $E(t=new this(t),t.e+1,1)}UE[Symbol.for("nodejs.util.inspect.custom")]=UE.toString,UE[Symbol.toStringTag]="Decimal";var eO,nO=UE.constructor=function t(e){var n,r,i;function o(t){var e,n,r,i=this;if(!(i instanceof o))return new o(t);if(i.constructor=o,DT(t))return i.s=t.s,void(OE?!t.d||t.e>o.maxE?(i.e=NaN,i.d=null):t.e<o.minE?(i.e=0,i.d=[0]):(i.e=t.e,i.d=t.d.slice()):(i.e=t.e,i.d=t.d?t.d.slice():t.d));if("number"===(r=typeof t)){if(0===t)return i.s=1/t<0?-1:1,i.e=0,void(i.d=[0]);if(t<0?(t=-t,i.s=-1):i.s=1,t===~~t&&t<1e7){for(e=0,n=t;n>=10;n/=10)e++;return void(OE?e>o.maxE?(i.e=NaN,i.d=null):e<o.minE?(i.e=0,i.d=[0]):(i.e=e,i.d=[t]):(i.e=e,i.d=[t]))}return 0*t!=0?(t||(i.s=NaN),i.e=NaN,void(i.d=null)):uT(i,t.toString())}if("string"!==r)throw Error(RE+t);return 45===(n=t.charCodeAt(0))?(t=t.slice(1),i.s=-1):(43===n&&(t=t.slice(1)),i.s=1),HE.test(t)?uT(i,t):function(t,e){var n,r,i,o,a,l,s,u,c;if(e.indexOf("_")>-1){if(e=e.replace(/(\d)_(?=\d)/g,"$1"),HE.test(e))return uT(t,e)}else if("Infinity"===e||"NaN"===e)return+e||(t.s=NaN),t.e=NaN,t.d=null,t;if(PE.test(e))n=16,e=e.toLowerCase();else if(NE.test(e))n=2;else{if(!zE.test(e))throw Error(RE+e);n=8}for((o=e.search(/p/i))>0?(s=+e.slice(o+1),e=e.substring(2,o)):e=e.slice(2),a=(o=e.indexOf("."))>=0,r=t.constructor,a&&(o=(l=(e=e.replace(".","")).length)-o,i=rT(r,new r(n),o,2*o)),o=c=(u=qE(e,n,FE)).length-1;0===u[o];--o)u.pop();return o<0?new r(0*t.s):(t.e=QE(u,c),t.d=u,OE=!1,a&&(t=KE(t,i,4*l)),s&&(t=t.times(Math.abs(s)<54?kE(2,s):nO.pow(2,s))),OE=!0,t)}(i,t)}if(o.prototype=UE,o.ROUND_UP=0,o.ROUND_DOWN=1,o.ROUND_CEIL=2,o.ROUND_FLOOR=3,o.ROUND_HALF_UP=4,o.ROUND_HALF_DOWN=5,o.ROUND_HALF_EVEN=6,o.ROUND_HALF_CEIL=7,o.ROUND_HALF_FLOOR=8,o.EUCLID=9,o.config=o.set=TT,o.clone=t,o.isDecimal=DT,o.abs=vT,o.acos=gT,o.acosh=yT,o.add=mT,o.asin=CT,o.asinh=wT,o.atan=xT,o.atanh=ST,o.atan2=bT,o.cbrt=_T,o.ceil=LT,o.clamp=ET,o.cos=OT,o.cosh=IT,o.div=RT,o.exp=MT,o.floor=AT,o.hypot=BT,o.ln=kT,o.log=NT,o.log10=zT,o.log2=PT,o.max=HT,o.min=FT,o.mod=WT,o.mul=GT,o.pow=jT,o.random=UT,o.round=YT,o.sign=VT,o.sin=XT,o.sinh=qT,o.sqrt=KT,o.sub=$T,o.sum=ZT,o.tan=QT,o.tanh=JT,o.trunc=tO,void 0===e&&(e={}),e&&!0!==e.defaults)for(i=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],n=0;n<i.length;)e.hasOwnProperty(r=i[n++])||(e[r]=this[r]);return o.config(e),o}(TE);LE=new nO(LE),EE=new nO(EE);var rO,iO,oO=function(t){return"number"==typeof t?Number.isNaN(t):!t||("string"!=typeof t||Number.isNaN(Number(t)))},aO=function(t,e,n){return void 0===n&&(n=!1),(null==t?void 0:t.length)?t.reduce((function(t,r){var i=Fh(r,e),o=oO(i);if(n&&o)return t;var a=o?0:i;return t.push(new nO(a)),t}),[]):[]},lO=function(t,e){var n=aO(t,e);return n.length?nO.sum.apply(nO,Tl([],El(n),!1)).toNumber():0},sO=function(t,e,n){var r=aO(e,n,!0);if(null==r?void 0:r.length)return nO[t].apply(nO,Tl([],El(r),!1)).toNumber()},uO=((eO={})[yb.SUM]=lO,eO[yb.MIN]=function(t,e){return sO("min",t,e)},eO[yb.MAX]=function(t,e){return sO("max",t,e)},eO[yb.AVG]=function(t,e){var n=aO(t,e);return(null==n?void 0:n.length)?nO.sum.apply(nO,Tl([],El(n),!1)).dividedBy(n.length).toNumber():0},eO),cO=function(t){return bl({operator:{onClick:Zs,menus:[]},enterable:!0,enableFormat:!0},t)},hO=function(t){return bl(bl({},null==t?void 0:t.colQuery),null==t?void 0:t.rowQuery)},dO=function(t,e){var n;if(t){var r=e.style,i=e.className,o=void 0===i?[]:i,a=e.visible;if(r&&Object.assign(t.style,r),o.length){var l=o.filter(Boolean);(n=t.classList).add.apply(n,Tl([],El(l),!1))}t.classList.toggle(KS,a),t.classList.toggle($S,!a)}},fO=function(t,e){var n,r=null===(n=null==t?void 0:t.dataSet)||void 0===n?void 0:n.getFieldFormatter(e);return function(t,e){return n=r(t,e),i=_m(n)&&Number.isNaN(n),o=""===n,Tm(n)||i||o?"-":n;var n,i,o}},pO=function(t,e){var n,r=e.data,i=e.field,o=e.valueField,a=e.useCompleteDataForFormatter,l=void 0===a||a,s=null===(n=null==t?void 0:t.dataSet)||void 0===n?void 0:n.getFieldName(i),u=fO(t,i),c=is(r[i])?JSON.stringify(r[i]):r[i];return{name:s,value:u(o||c,l?r:void 0)}},vO=function(t,e,n){return yy(oy(qp([],e),(function(t){return t!==ia&&n[t]})),(function(e){return pO(t,{data:n,field:e,useCompleteDataForFormatter:!1})}))},gO=function(t,e,n){if(e){var r=n.isTotals,i=e[ia],o=e[i],a=[];if(r)a.push(pO(t,{data:e,field:i,valueField:Fh(e,ra)}));else if(function(t){return is(t)&&"values"in t}(o)&&t.getTooltipDataItemMappingCallback()){var l=sL(e,t.getTooltipDataItemMappingCallback());Pg(l,(function(e,n){a.push(pO(t,{data:l,field:n}))}))}else a.push(pO(t,{data:e,field:i}));return a}},yO=function(t,e,n){void 0===n&&(n=!0);var r=[];return Pg(e,(function(e,i){Pg(t,(function(t){n||-1===t.colIndex?n&&-1!==t.rowIndex&&r.push([t.rowIndex,i]):r.push([i,t.colIndex])}))})),r},mO=function(t,e,n){var r,i=null===(r=t.facet)||void 0===r?void 0:r.layoutResult,o=function(t){var n=null==e?void 0:e.getMeta(),r=null==n?void 0:n.isTotals,o=(null==e?void 0:e.cellType)===Ua.COL_CELL,a=(null==e?void 0:e.cellType)===Ua.ROW_CELL;if(!o&&!a)return!1;var l=i.colNodes.find((function(e){return e.colIndex===t.colIndex})),s=i.rowNodes.find((function(e){return e.rowIndex===t.rowIndex})),u=o?null==s?void 0:s.isTotals:null==l?void 0:l.isTotals;return!r&&(null==t?void 0:t.isTotals)||r&&u};if(n){var a=function(t,e){var n,r=e.rowLeafNodes,i=e.colLeafNodes,o=t.interaction.getState(),a=o.nodes,l=void 0===a?[]:a,s=o.cells,u=void 0===s?[]:s,c=null===(n=null==u?void 0:u[0])||void 0===n?void 0:n.type;return c===Ua.COL_CELL?yO(l,r,!1):c===Ua.ROW_CELL?yO(l,i):[]}(t,i);return Xp(yy(a,(function(t){var e=El(t,2),n=e[0],r=e[1],a=i.getCellMeta(n,r);if(!o(a))return(null==a?void 0:a.data)||hO(a)})))}return t.interaction.getCells().filter((function(t){var e=i.getCellMeta(t.rowIndex,t.colIndex);return!o(e)})).map((function(t){var e=i.getCellMeta(t.rowIndex,t.colIndex);return(null==e?void 0:e.data)||hO(e)}))},CO=function(t){var e=t.spreadsheet,n=t.targetCell,r=t.options,i=void 0===r?{}:r,o=[],a={};return e.isTableMode()&&(null==i?void 0:i.showSingleTips)?[{selectedData:e.dataSet.getMultiData({}),name:"",value:""}]:(Pg(mO(e,n,i.showSingleTips),(function(t){var e;a[null==t?void 0:t[ia]]?null===(e=a[null==t?void 0:t[ia]])||void 0===e||e.push(t):a[null==t?void 0:t[ia]]=[t]})),Ym(a,(function(t,n){var r,l=function(t,e,n){var r;if(n)return VS("总计");var i=null===(r=null==t?void 0:t.dataSet)||void 0===r?void 0:r.getFieldName(e);return i&&"undefined"!==i?i:""}(e,n,null==i?void 0:i.isTotals),s="",u="";if(ey(t,(function(t){return oO(Fh(t,ra))}))){var c=e.options.placeholder,h=L_(a,c);s=h,u=h}else{var d=fO(e,n),f=lO(t,ra);u=f,s=null!==(r=null==d?void 0:d(f,t))&&void 0!==r?r:parseFloat(f.toPrecision(16))}o.push({selectedData:t,name:l,value:s,originValue:u})})),o)},wO=function(t){var e=t.spreadsheet,n=t.cellInfos,r=void 0===n?[]:n,i=t.options,o=void 0===i?{}:i,a=t.targetCell,l=null,s=null,u=null,c=function(t){if(t){var e=t.getMeta();if(!e.isTotals){var n=uy(e.spreadsheet.dataCfg.meta,{field:e.field||e.value||e.valueField}),r=null==n?void 0:n.field;return e.spreadsheet.dataSet.getFieldDescription(r)}}}(a),h=r[0]||{};if(null==o?void 0:o.hideSummary)if(o.showSingleTips){var d=fO(e,h.valueField)(h.value),f=o.enableFormat?e.dataSet.getFieldName(h.value)||d:e.dataSet.getFieldName(h.valueField);h.name=f||""}else s=function(t,e,n){var r,i,o,a,l=(n||{}).isTotals,s=[],u=[];if(e){var c=null===(i=null===(r=null==t?void 0:t.dataSet)||void 0===r?void 0:r.fields)||void 0===i?void 0:i.columns,h=null===(a=null===(o=null==t?void 0:t.dataSet)||void 0===o?void 0:o.fields)||void 0===a?void 0:a.rows;s=vO(t,jb(c||[]),e),u=vO(t,h,e)}return Cm(s)&&Cm(u)&&l&&(s=[{value:VS("总计")}]),{cols:s,rows:u}}(e,h,o),u=gO(e,h,o);else l=CO({spreadsheet:e,options:o,targetCell:a});var p=h||{};return{summaries:l,interpretation:p.interpretation,infos:p.infos,tips:p.tips,name:p.name,headInfo:s,details:u,description:c}},xO=function(t){if(!t.interaction.isSelectedState())return[];var e=t.dataCfg.fields.valueInCols;return t.interaction.getCells().reduce((function(n,r){var i=t.facet.layoutResult.getCellMeta(null==r?void 0:r.rowIndex,null==r?void 0:r.colIndex),o=hO(i);if(Cm(i)||Cm(o))return[];var a=bl(bl({},o),{colIndex:e?i.colIndex:null,rowIndex:e?null:i.rowIndex});return n.find((function(t){return wm(a,t)}))||n.push(a),n}),[])},SO=function(t,e){var n;if(e&&t){var r=null===(n=t.getCellType)||void 0===n?void 0:n.call(t,null==e?void 0:e.target);return function(t,e){void 0===t&&(t={});var n=function(e){return CE(t,e)},r=t.col,i=t.row,o=t.data,a=t.corner;return e===Ua.COL_CELL?n(r):e===Ua.ROW_CELL?n(i):e===Ua.DATA_CELL?n(o):e===Ua.CORNER_CELL?n(a):bl({},t)}(t.options.tooltip,r)}},bO=function(t,e){var n=e.defaultMenus,r=void 0===n?[]:n,i=e.cell,o=function(t){return void 0===t&&(t=[]),t.filter((function(t){var e;return ws(t.visible)?t.visible(i):null===(e=t.visible)||void 0===e||e})).map((function(t){return t.children&&(t.children=o(t.children)),t}))},a=o(t.menus);return{onClick:t.onClick,menus:Xp(Tl(Tl([],El(r),!1),El(a),!1))}},_O=function(){function t(t){var e=this;this.getFieldMeta=Th((function(t,n){return uy(e.meta||n,(function(e){return e.field===t}))})),this.spreadsheet=t}return t.prototype.getFieldName=function(t){return Fh(this.getFieldMeta(t,this.meta),"name",t)},t.prototype.getFieldFormatter=function(t){return Fh(this.getFieldMeta(t,this.meta),"formatter",vs)},t.prototype.getFieldDescription=function(t){return Fh(this.getFieldMeta(t,this.meta),"description")},t.prototype.setDataCfg=function(t){this.getFieldMeta.cache.clear();var e=this.processDataCfg(t),n=e.fields,r=e.meta,i=e.data,o=e.totalData,a=e.sortParams,l=e.filterParams;this.fields=n,this.meta=r,this.originData=i,this.totalData=o,this.sortParams=a,this.filterParams=l,this.displayData=this.originData,this.indexesData=[]},t.prototype.processMeta=function(t,e){var n,r;return void 0===t&&(t=[]),Tl(Tl([],El(t),!1),[D_(t,null===(r=null===(n=this.spreadsheet)||void 0===n?void 0:n.options)||void 0===r?void 0:r.cornerExtraFieldText,e)],!1)},t.prototype.getDisplayDataSet=function(){return this.displayData},t.prototype.getValueRangeByField=function(t){var e,n,r,i=(n=this.spreadsheet,r=t,n.store.get(ka,Na)[r]);if(i)return i;var o=Xp(yy(this.originData,(function(e){var n=e[t];return Tm(n)?null:Number.parseFloat(n)}))),a={maxValue:qm(o),minValue:rC(o)};return function(t,e){var n=t.store.get(ka,Na);t.store.set(ka,bl(bl({},n),e))}(this.spreadsheet,((e={})[t]=a,e)),a},t.prototype.moreThanOneValue=function(){var t,e;return(null===(e=null===(t=this.fields)||void 0===t?void 0:t.values)||void 0===e?void 0:e.length)>1},t}(),LO=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.handleDimensionValuesSort=function(){Pg(e.sortParams,(function(t){var n=t.sortFieldId,r=t.sortByMeasure;if(n){var i=Tl([],El(e.sortedDimensionValues[n]||[]),!1),o=function(t){var e,n=t.dataSet,r=t.sortParam,i=t.originValues;return e=t.isSortByMeasure?GL(t):i,FL({sortParam:r,originValues:i,measureValues:e,dataSet:n})}({dataSet:e,sortParam:t,originValues:i,isSortByMeasure:!Cm(r)});e.sortedDimensionValues[n]=o}}))},e.getCustomData=function(t){for(var n,r=!1,i=e.indexesData,o=function(e){var o=t[e];r?i=Mm(o)?qb(i):null===(n=Fy(i))||void 0===n?void 0:n.map((function(t){return t&&Fh(t,o)})):Mm(o)?r=!0:i=null==i?void 0:i[o]},a=0;a<t.length;a++)o(a);return i},e.getTotalStatus=function(t){var n=e.fields,r=n.columns,i=n.rows,o=function(e,n){if(n){var r=uy(e,(function(e){return!By(t,e)}));return r&&r!==vy(e)}return ey(e,(function(e){return!By(t,e)}))},a=function(t,e){return e?t.filter((function(t){return t!==ia})):t};return{isRowTotal:o(a(i,!e.spreadsheet.isValueInCols())),isRowSubTotal:o(i,!0),isColTotal:o(a(r,e.spreadsheet.isValueInCols())),isColSubTotal:o(r,!0)}},e}return Sl(e,t),e.prototype.setDataCfg=function(e){var n=this;t.prototype.setDataCfg.call(this,e),this.sortedDimensionValues={},this.rowPivotMeta=new Map,this.colPivotMeta=new Map,this.totalData=[].concat(Zb(e.data,e.fields)).concat(this.totalData),cb.getInstance().debugCallback("Transform Data",(function(){var t=n.fields,e=A_({rows:t.rows,columns:t.columns,originData:n.originData,totalData:n.totalData,indexesData:n.indexesData,sortedDimensionValues:n.sortedDimensionValues,rowPivotMeta:n.rowPivotMeta,colPivotMeta:n.colPivotMeta}).indexesData;n.indexesData=e})),this.handleDimensionValuesSort()},e.prototype.transformDrillDownData=function(t,e,n){var r,i=this,o=this.fields,a=o.columns,l=o.values,s=Tl(Tl([],El(nb.getFieldPath(n,!0)),!1),[t],!1),u=this.spreadsheet.store,c=this.standardTransform(e,l),h=Zb(c,{columns:this.fields.columns,rows:s}),d=Rg(c,h),f=null==n?void 0:n.id,p=null!==(r=u.get("drillDownIdPathMap"))&&void 0!==r?r:new Map;p.has(f)&&(Pg(p.get(f),(function(t){Xx(i.indexesData,t)})),B_(this.rowPivotMeta,f));var v=A_({rows:s,columns:a,originData:d,totalData:h,indexesData:this.indexesData,sortedDimensionValues:this.sortedDimensionValues,rowPivotMeta:this.rowPivotMeta,colPivotMeta:this.colPivotMeta}),g=v.paths,y=v.indexesData,m=v.rowPivotMeta,C=v.colPivotMeta,w=v.sortedDimensionValues;this.indexesData=y,this.rowPivotMeta=m,this.colPivotMeta=C,this.sortedDimensionValues=w,p.set(f,g),u.set("drillDownIdPathMap",p)},e.prototype.clearDrillDownData=function(t){var e=this,n=this.spreadsheet.store,r=n.get("drillDownIdPathMap");if(r){var i=n.get("drillDownDataCache",[]);if(t){var o=r.get(t);o&&Pg(o,(function(t){Xx(e.indexesData,t)})),B_(this.rowPivotMeta,t),r.delete(t);var a=oy(i,(function(t){return r.has(null==t?void 0:t.rowId)}));n.set("drillDownDataCache",a);var l=a.map((function(t){return null==t?void 0:t.drillLevel})),s=n.get("drillDownFieldInLevel",[]).filter((function(t){return Gy(l,null==t?void 0:t.drillLevel)}));n.set("drillDownFieldInLevel",s)}else{r.clear();var u=this.spreadsheet.store.get("originalDataCfg");Cm(u)||this.spreadsheet.setDataCfg(u),this.spreadsheet.store.set("drillItemsNum",-1),this.spreadsheet.store.set("drillDownDataCache",[]),this.spreadsheet.store.set("drillDownFieldInLevel",[])}n.set("drillDownIdPathMap",r)}},e.prototype.standardTransform=function(t,e){if(Cm(e))return t;var n=[];return Pg(e,(function(e){Pg(t,(function(t){var r;By(t,e)&&n.push(bl(bl({},t),((r={})[ia]=e,r[ra]=t[e],r)))}))})),n},e.prototype.processDataCfg=function(t){var e=t.data,n=t.meta,r=void 0===n?[]:n,i=t.fields,o=t.sortParams,a=void 0===o?[]:o,l=t.totalData,s=i.columns,u=i.rows,c=i.values,h=i.valueInCols,d=i.customValueOrder,f=s,p=u;h?f=this.isCustomMeasuresPosition(d)?this.handleCustomMeasuresOrder(d,f):Yx(Tl(Tl([],El(s),!1),[ia],!1)):p=this.isCustomMeasuresPosition(d)?this.handleCustomMeasuresOrder(d,p):Yx(Tl(Tl([],El(u),!1),[ia],!1));var v=this.processMeta(r,VS("数值")),g=this.standardTransform(e,c),y=this.standardTransform(l,c);return{data:g,meta:v,fields:bl(bl({},i),{rows:p,columns:f,values:c}),totalData:y,sortParams:a}},e.prototype.getDimensionsByField=function(t){var e=this.fields||{},n=e.rows,r=void 0===n?[]:n,i=e.columns,o=void 0===i?[]:i;return Gy(r,t)?r:Gy(o,t)?o:[]},e.prototype.getTotalDimensionValues=function(t,e){var n=this,r=this.getDimensionsByField(t),i=(this.sortedDimensionValues[t]||[]).filter((function(i){return n.checkAccordQueryWithDimensionValue({dimensionValues:i,query:e,dimensions:r,field:t})}));return Vb(Yx(I_(Tl([],El(i),!1))))},e.prototype.getDimensionValues=function(t,e){var n,r,i,o,a=this.fields||{},l=a.rows,s=void 0===l?[]:l,u=a.columns,c=void 0===u?[]:u,h=new Map,d=[];if(Gy(s,t)?(h=this.rowPivotMeta,d=s):Gy(c,t)&&(h=this.colPivotMeta,d=c),!Cm(e)){var f=[],p=[],v=function(t){var n=Fh(e,t);p.push("".concat(n));var r=p.join("".concat(La));if(h.has(n)&&!Mm(n)){var a=null===(i=h.get(n))||void 0===i?void 0:i.childField;if(h=h.get(n).children,uy(g.sortParams,(function(t){return t.sortFieldId===a}))&&g.sortedDimensionValues[a]){var l=null===(o=g.sortedDimensionValues[a])||void 0===o?void 0:o.filter((function(t){return null==t?void 0:t.startsWith(r)}));f=I_(Tl([],El(l),!1))}else f=Tl([],El(h.keys()),!1)}},g=this;try{for(var y=Ll(d),m=y.next();!m.done;m=y.next()){v(m.value)}}catch(C){n={error:C}}finally{try{m&&!m.done&&(r=y.return)&&r.call(y)}finally{if(n)throw n.error}}return Cm(f)?[]:Vb(Yb(Tl([],El(h.keys()),!1),f))}return this.sortedDimensionValues[t]?Vb(I_(Tl([],El(this.sortedDimensionValues[t]),!1))):Vb(Tl([],El(h.keys()),!1))},e.prototype.getTotalValue=function(t,e){var n,r,i=function(t,e){var n=t.isRowTotal,r=t.isRowSubTotal,i=t.isColTotal,o=t.isColSubTotal,a=e||{},l=a.row,s=a.col,u=l||{},c=u.calcTotals,h=void 0===c?{}:c,d=u.calcSubTotals,f=void 0===d?{}:d,p=s||{},v=p.calcTotals,g=void 0===v?{}:v,y=p.calcSubTotals,m=void 0===y?{}:y,C=function(t,e){if((t.aggregation||t.calcFunc)&&e)return{aggregation:t.aggregation,calcFunc:t.calcFunc}};return C(g,i)||C(m,o)||C(h,n)||C(f,r)}(Xw(e)?e:this.getTotalStatus(t),null===(r=this.spreadsheet.options)||void 0===r?void 0:r.totals)||{},o=i.aggregation,a=i.calcFunc,l=uO[o];if(l||a){var s=this.getMultiData(t),u=void 0;return a?u=a(t,s):l&&(u=l(s,ra)),bl(bl({},t),((n={})[ra]=u,n[t[ia]]=u,n))}},e.prototype.getCellData=function(t){var e,n,r,i=t||{},o=i.query,a=i.rowNode,l=i.isTotals,s=void 0!==l&&l,u=i.totalStatus,c=this.fields,h=c.columns,d=c.rows,f=d,p=null===(e=this.spreadsheet)||void 0===e?void 0:e.store.get("drillDownIdPathMap"),v=Array.from(null!==(n=null==p?void 0:p.keys())&&void 0!==n?n:[]).some((function(t){return a.id.startsWith(t)}));s&&!v||(f=null!==(r=nb.getFieldPath(a,v))&&void 0!==r?r:d);var g=R_({rowDimensionValues:M_(f,o),colDimensionValues:M_(h,o),careUndefined:s||$b([].concat(d).concat(h),o),rowPivotMeta:this.rowPivotMeta,colPivotMeta:this.colPivotMeta}),y=Fh(this.indexesData,g);return y||(s?this.getTotalValue(o,u):y)},e.prototype.checkExistDimensionGroup=function(t){var e=this.fields,n=e.rows,r=e.columns,i=function(e){for(var n=!1,r=e.length;r>0;r--){var i=e[r-1];if(th(t).includes(i))i!==ia&&(n=!0);else if(n)return!0}return!1};return i(n)||i(r)},e.prototype.checkAccordQueryWithDimensionValue=function(t){var e,n,r=t.dimensionValues,i=t.query,o=t.dimensions,a=t.field;try{for(var l=Ll(o.entries()),s=l.next();!s.done;s=l.next()){var u=El(s.value,2),c=u[0],h=u[1],d=Fh(i,h);if(d)if(r.split(La)[c]!==d)return!1;if(a===h)break}}catch(f){e={error:f}}finally{try{s&&!s.done&&(n=l.return)&&n.call(l)}finally{if(e)throw e.error}}return!0},e.prototype.getTotalGroupQueries=function(t,e){for(var n=[e],r=null,i=function(i){var a,l,s=t[i-1];if(th(e).includes(s))s!==ia&&(r=s);else if(r){var u=o.sortedDimensionValues[r],c=[],h=u[0].split(La).length,d=function(e){var n,i,a=[];try{for(var l=(n=void 0,Ll(u)),d=l.next();!d.done;d=l.next()){var f=d.value;if(o.checkAccordQueryWithDimensionValue({dimensionValues:f,query:e,dimensions:t,field:r})){var p=f.split(La)[h-2];"undefined"!==p&&a.push(p)}}}catch(g){n={error:g}}finally{try{d&&!d.done&&(i=l.return)&&i.call(l)}finally{if(n)throw n.error}}var v=Yx(a).map((function(t){var n;return bl(bl({},e),((n={})[s]=t,n))}));c=qp(c,v)};try{for(var f=(a=void 0,Ll(n)),p=f.next();!p.done;p=f.next()){d(p.value)}}catch(v){a={error:v}}finally{try{p&&!p.done&&(l=f.return)&&l.call(f)}finally{if(a)throw a.error}}n=c,r=s}},o=this,a=t.length;a>0;a--)i(a);return n},e.prototype.getGroupTotalMultiData=function(t,e){var n,r,i,o,a=this.fields,l=a.rows,s=a.columns,u=[],c=this.getTotalGroupQueries(t,e),h=[];try{for(var d=Ll(c),f=d.next();!f.done;f=d.next()){var p=f.value;h=qp(h,this.getTotalGroupQueries(s,p))}}catch(C){n={error:C}}finally{try{f&&!f.done&&(r=d.return)&&r.call(d)}finally{if(n)throw n.error}}try{for(var v=Ll(h),g=v.next();!g.done;g=v.next()){var y=R_({rowDimensionValues:M_(t,p=g.value),colDimensionValues:M_(s,p),careUndefined:!0,isFirstCreate:!0,rowFields:l,colFields:s,rowPivotMeta:this.rowPivotMeta,colPivotMeta:this.colPivotMeta}),m=this.getCustomData(y);u=qp(u,Xp(qb(m)))}}catch(w){i={error:w}}finally{try{g&&!g.done&&(o=v.return)&&o.call(v)}finally{if(i)throw i.error}}return u},e.prototype.getMultiData=function(t,e,n,r){var i;if(Cm(t))return Xp(Xb(this.indexesData));var o=this.fields,a=o.rows,l=o.columns,s=o.values,u=Cm(r)?a:a.concat(r),c=[];if(this.checkExistDimensionGroup(t))c=this.getGroupTotalMultiData(u,t);else{var h=M_(u,t),d=M_(l,t),f=R_({rowDimensionValues:h,colDimensionValues:d,careUndefined:!0,isFirstCreate:!0,rowFields:a,colFields:l,rowPivotMeta:this.rowPivotMeta,colPivotMeta:this.colPivotMeta}),p=this.getCustomData(f);if(c=Xp(qb(p)),e){var v=[],g=Kb(h,a),y=Kb(d,l);if(n)v=g;else if(1===(null===(i=th(t))||void 0===i?void 0:i.length)&&By(t,ia))v=y;else{var m=function(t){return null==(e=null==t?void 0:t.filter((function(t){return!(null==s?void 0:s.includes(t))})))?void 0:e.every((function(t){return Mm(t)}));var e},C=m(d),w=m(h);v=C?g:w?y:Tl(Tl([],El(g),!1),El(y),!1)}c=c.filter((function(t){return!(null==v?void 0:v.find((function(e){var n;return e!==ia&&(null===(n=th(t))||void 0===n?void 0:n.includes(e))})))}))}}return c||[]},e.prototype.getFieldFormatter=function(e,n){return e===aa?this.getFieldFormatterForTotalValue(n):t.prototype.getFieldFormatter.call(this,e)},e.prototype.getFieldFormatterForTotalValue=function(e){var n;return!this.spreadsheet.isValueInCols()&&e&&(n=Fh(e.rowQuery,ia)),n=null!=n?n:Fh(this.fields.values,0),t.prototype.getFieldFormatter.call(this,n)},e.prototype.handleCustomMeasuresOrder=function(t,e){var n=Yx(Tl([],El(e),!1));return e.length>=t?(n.splice(t,0,ia),n):Tl(Tl([],El(n),!1),[ia],!1)},e.prototype.isCustomMeasuresPosition=function(t){return _m(t)},e.prototype.getRowData=function(t){return this.getMultiData(t.rowQuery)},e}(_O),EO=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.handleDimensionValueFilter=function(){Pg(e.filterParams,(function(t){var n=t.filterKey,r=t.filteredValues,i=t.customFilter,o=new Set(r),a=function(t){return!o.has(t[n])};e.displayData=Tl(Tl(Tl([],El(e.getStartRows()),!1),El(oy(e.getMovableRows(),(function(t){return i?i(t)&&a(t):a(t)}))),!1),El(e.getEndRows()),!1)}))},e.handleDimensionValuesSort=function(){Pg(e.sortParams,(function(t){var n=t.sortFieldId,r=t.sortBy,i=t.sortFunc,o=t.sortMethod,a=t.query;if(n){var l=e.getMovableRows(),s=[];if(a){var u=[];l.forEach((function(t){for(var e=Object.keys(a),n=!0,r=0;r<e.length;r++){var i=e[r];if(t[i]!==a[i]){n=!1,s.push(t);break}}n&&u.push(t)})),l=u}var c=l;if(i)c=i(bl(bl({},t),{data:l}));else if(r&&!ws(r)){var h=Tl([],El(r),!1).reverse();c=l.sort((function(t,e){var r=h.indexOf(t[n]);return h.indexOf(e[n])-r}))}else if(BL(o)||DL(o)){c=SC(l,[(ws(r)?r:null)||n],[o.toLocaleLowerCase()])}s.length&&(c=Tl(Tl([],El(c),!1),El(s),!1)),e.displayData=Tl(Tl(Tl([],El(e.getStartRows()),!1),El(c),!1),El(e.getEndRows()),!1)}}))},e}return Sl(e,t),e.prototype.processDataCfg=function(t){return t},e.prototype.setDataCfg=function(e){t.prototype.setDataCfg.call(this,e),this.handleDimensionValueFilter(),this.handleDimensionValuesSort()},e.prototype.getStartRows=function(){var t=(this.spreadsheet.options||{}).frozenRowCount;return t?this.displayData.slice(0,t):[]},e.prototype.getEndRows=function(){var t=(this.spreadsheet.options||{}).frozenTrailingRowCount;return t?this.displayData.slice(-t):[]},e.prototype.getMovableRows=function(){var t=this.displayData,e=this.spreadsheet.options||{},n=e.frozenTrailingRowCount,r=e.frozenRowCount;return t.slice(r||0,-n||void 0)},e.prototype.getTotalDimensionValues=function(t,e){return[]},e.prototype.getDimensionValues=function(t,e){return[]},e.prototype.getCellData=function(t){var e=t.query;if(0!==this.displayData.length||0!==e.rowIndex){var n=this.displayData[e.rowIndex];return"col"in e&&is(n)?n[e.col]:n}},e.prototype.getMultiData=function(t,e){return this.displayData},e.prototype.getRowData=function(t){return this.getCellData({query:{rowIndex:t.rowIndex}})},e}(_O),TO=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Sl(e,t),e.prototype.getCellData=function(t){var e=t.query,n=this.fields,r=n.columns,i=n.rows,o=R_({rowDimensionValues:M_(i,e),colDimensionValues:M_(r,e),rowPivotMeta:this.rowPivotMeta,colPivotMeta:this.colPivotMeta,isFirstCreate:!0,careUndefined:!0,rowFields:i,colFields:r});return Fh(this.indexesData,o)},e.prototype.setDataCfg=function(e){t.prototype.setDataCfg.call(this,e),this.sortedDimensionValues={},this.rowPivotMeta=new Map,this.colPivotMeta=new Map;var n=this.fields,r=A_({rows:n.rows,columns:n.columns,originData:this.originData,totalData:[],indexesData:this.indexesData,sortedDimensionValues:this.sortedDimensionValues,rowPivotMeta:this.rowPivotMeta,colPivotMeta:this.colPivotMeta}).indexesData;this.indexesData=r,this.handleDimensionValuesSort()},e.prototype.processDataCfg=function(t){t.fields.valueInCols=!1;var e=t.data,n=t.meta,r=_l(t,["data","meta"]),i=t.fields.values,o=[];Pg(e,(function(t){Cm(qy(th(t),i))?o.push(t):Pg(i,(function(e){var n;By(t,e)&&o.push(bl(bl({},t),((n={})[ia]=e,n[ra]=t[e],n)))}))}));var a=this.processMeta(n,VS("指标"));return bl(bl({},r),{meta:a,data:Yx(o),fields:bl(bl({},t.fields),{rows:[ia]})})},e}(LO);(iO=rO||(rO={})).ScrollChange="scroll-change",iO.ScrollEnd="scroll-end";var OO=function(t){function e(e){var n=t.call(this,e)||this;n.isMobile=!1,n.eventHandlers=[],n.scrollFrameId=null,n.getCoordinatesName=function(){return{from:n.isHorizontal?"x1":"y1",to:n.isHorizontal?"x2":"y2"}},n.getCoordinatesWithBBoxExtraPadding=function(){var t=n.theme.size,e=n.isHorizontal?0:t/2,r=n.isHorizontal?t:t/2;return{start:n.thumbOffset+e,end:n.thumbOffset+n.thumbLen-r}},n.current=function(){var t=n.thumbLen/n.trackLen;return n.thumbOffset/n.trackLen/(1-t)},n.updateThumbLen=function(t){if(n.thumbLen!==t){n.thumbLen=t;var e=n.getCoordinatesName();n.thumbShape.attr(e.to,n.thumbOffset+t),n.emitScrollChange(n.thumbOffset/(n.trackLen-n.thumbLen)*n.scrollTargetMaxOffset,!1)}},n.updateThumbOffset=function(t,e){var r;void 0===e&&(e=!0);var i=n.validateRange(t);if(!(n.thumbOffset===i&&0!==i)){n.thumbOffset=i;var o=n.getCoordinatesName(),a=o.from,l=o.to,s=n.getCoordinatesWithBBoxExtraPadding(),u=s.start,c=s.end;n.thumbShape.attr(((r={})[a]=u,r[l]=c,r)),e&&n.emitScrollChange(i/(n.trackLen-n.thumbLen)*n.scrollTargetMaxOffset,!1)}},n.onlyUpdateThumbOffset=function(t){var e;n.updateThumbOffset(t,!1),null===(e=n.get("canvas"))||void 0===e||e.draw()},n.emitScrollChange=function(t,e){void 0===e&&(e=!0),cancelAnimationFrame(n.scrollFrameId),n.scrollFrameId=requestAnimationFrame((function(){n.emit(rO.ScrollChange,{offset:t,updateThumbOffset:e})}))},n.addEventListener=function(t,e,n){return null==t||t.addEventListener(e,n,!1),{remove:function(){null==t||t.removeEventListener(e,n,!1)}}},n.addEvent=function(t,e,r){t.on(e,r),n.eventHandlers.push({target:t,type:e,handler:r})},n.initScrollBar=function(){n.scrollBarGroup=n.createScrollBarGroup(),n.scrollBarGroup.move(n.position.x,n.position.y),n.bindEvents()},n.createScrollBarGroup=function(){var t=n.addGroup({className:n.isHorizontal?"horizontalBar":"verticalBar"});return n.trackShape=n.createTrackShape(t),n.thumbShape=n.createThumbShape(t),t},n.createTrackShape=function(t){var e=n.theme,r=e.lineCap,i=void 0===r?"round":r,o=e.trackColor,a=e.size,l={lineWidth:a,stroke:o,lineCap:i};return n.isHorizontal?t.addShape("line",{attrs:bl(bl({},l),{x1:0,y1:a/2,x2:n.trackLen,y2:a/2})}):t.addShape("line",{attrs:bl(bl({},l),{x1:a/2,y1:0,x2:a/2,y2:n.trackLen})})},n.createThumbShape=function(t){var e=n.theme,r=e.size,i=e.lineCap,o=void 0===i?"round":i,a={lineWidth:r,stroke:e.thumbColor,lineCap:o,cursor:"default"},l=n.getCoordinatesWithBBoxExtraPadding(),s=l.start,u=l.end;return n.isHorizontal?t.addShape("line",{attrs:bl(bl({},a),{x1:s,y1:r/2,x2:u,y2:r/2})}):t.addShape("line",{attrs:bl(bl({},a),{x1:r/2,y1:s,x2:r/2,y2:u})})},n.bindEvents=function(){n.on("mousedown",n.onStartEvent(!1)),n.on("mouseup",n.onMouseUp),n.on("touchstart",n.onStartEvent(!0)),n.on("touchend",n.onMouseUp),n.trackShape.on("click",n.onTrackClick),n.thumbShape.on("mouseover",n.onTrackMouseOver),n.thumbShape.on("mouseout",n.onTrackMouseOut)},n.onStartEvent=function(t){return function(e){e.preventDefault(),n.isMobile=t;var r=n.isMobile?Fh(e,"touches.0",e):e,i=r.clientX,o=r.clientY;n.startPos=n.isHorizontal?i:o,n.bindLaterEvent()}},n.bindLaterEvent=function(){var t=n.get("canvas"),e=document.body,r=[];n.isMobile?(r=[n.addEventListener(e,"touchmove",n.onMouseMove),n.addEventListener(e,"touchend",n.onMouseUp),n.addEventListener(e,"touchcancel",n.onMouseUp)],n.addEvent(t,"touchend",n.onMouseUp),n.addEvent(t,"touchcancel",n.onMouseUp)):(r=[n.addEventListener(e,"mousemove",n.onMouseMove),n.addEventListener(e,"mouseup",n.onMouseUp),n.addEventListener(e,"mouseleave",n.onMouseUp)],n.addEvent(t,"mouseup",n.onMouseUp)),n.clearEvents=function(){r.forEach((function(t){null==t||t.remove()})),Pg(n.eventHandlers,(function(t){var e;null===(e=t.target)||void 0===e||e.off(t.type,t.handler)})),n.eventHandlers.length=0}},n.onTrackClick=function(t){var e=n.isHorizontal?t.x-n.position.x-n.thumbLen/2:t.y-n.position.y-n.thumbLen/2,r=n.validateRange(e);n.updateThumbOffset(r)},n.onMouseMove=function(t){t.preventDefault();var e=n.isMobile?Fh(t,"touches.0",t):t,r=e.clientX,i=e.clientY,o=n.isHorizontal?r:i,a=o-n.startPos;n.startPos=o,n.updateThumbOffset(n.thumbOffset+a)},n.onMouseUp=function(t){var e;n.emit(rO.ScrollEnd,{}),t.preventDefault(),null===(e=n.clearEvents)||void 0===e||e.call(n)},n.onTrackMouseOver=function(){var t=n.theme,e=t.thumbHoverColor,r=t.hoverSize;n.thumbShape.attr("stroke",e),n.thumbShape.attr("lineWidth",r)},n.onTrackMouseOut=function(){var t=n.theme,e=t.thumbColor,r=t.size;n.thumbShape.attr("stroke",e),n.thumbShape.attr("lineWidth",r)},n.validateRange=function(t){var e=t;return t+n.thumbLen>n.trackLen?e=n.trackLen-n.thumbLen:t+n.thumbLen<n.thumbLen&&(e=0),e};var r=e.isHorizontal,i=void 0!==r&&r,o=e.trackLen,a=e.thumbLen,l=e.position,s=e.thumbOffset,u=void 0===s?0:s,c=e.theme,h=e.scrollTargetMaxOffset;return n.isHorizontal=i,n.thumbOffset=u,n.trackLen=o,n.thumbLen=a,n.position=l,n.theme=c,n.scrollTargetMaxOffset=h,n.initScrollBar(),n}return Sl(e,t),e}(yo),IO=function(t,e,n){if(n<=0)return{start:0,end:0};var r=sy(t,(function(n,r){return e>=n&&e<t[r+1]}),0);r=Math.max(r,0);var i=n===e?r:sy(t,(function(e,r){return n>e&&n<=t[r+1]}),r);return{start:r,end:i=Math.min(-1===i?Infinity:i,t.length-2)}},RO=function(t,e){var n=e.width,r=e.originalWidth,i=Math.min(r-n,t);return i<0?0:i},MO=function(t,e,n){var r=Math.min(e-n,t);return r<0?0:r},AO=function(t,e){if(void 0===t&&(t=[]),Cm(t))return[];var n=[];return t.forEach((function(t){(t instanceof e&&n.push(t),t instanceof yo)&&t.getChildren().forEach((function(t){t instanceof e&&n.push(t)}))})),n},BO=function(t,e,n){return n.slice(t,e+1).map((function(t){return t.x+t.width}))},DO=function(t,e,n){for(var r=[],i=t;i<e+1;i++)r.push(n.getCellOffsetY(i+1));return r},kO=function(t,e,n){var r=El(n,4),i=r[0],o=r[1],a=r[2],l=r[3];return t>=i&&t<=o&&e>=a&&e<=l},NO=function(t){for(var e=El(t,4),n=e[0],r=e[1],i=e[2],o=e[3],a=[],l=n;l<=r;l+=1)for(var s=i;s<=o;s+=1)a.push([l,s]);return a},PO=function(t,e){var n=[],r=[];return Object.keys(e).forEach((function(i){var o=function(t,e){var n=[],r=[];if(Cm(t))return Cm(e)?{add:n,remove:r}:{add:NO(e),remove:r};if(Cm(e))return{add:n,remove:NO(t)};for(var i=El(t,4),o=i[0],a=i[1],l=i[2],s=i[3],u=El(e,4),c=u[0],h=u[1],d=u[2],f=u[3],p=o;p<=a;p++)for(var v=l;v<=s;v++)kO(p,v,e)||r.push([p,v]);for(p=c;p<=h;p+=1)for(v=d;v<=f;v+=1)kO(p,v,t)||n.push([p,v]);return{add:n,remove:r}}((null==t?void 0:t[i])||[],e[i]),a=o.add,l=o.remove;n.push.apply(n,Tl([],El(a),!1)),r.push.apply(r,Tl([],El(l),!1))})),{add:n,remove:r}},zO=function(t,e){void 0===e&&(e=!1),this.x=0,this.y=0,this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.width=0,this.height=0,this.originalWidth=0,this.originalHeight=0,this.viewportHeight=0,this.viewportWidth=0,this.facet=t,this.spreadsheet=t.spreadsheet,this.layoutResult=t.layoutResult,e&&this.calculateBBox()},HO=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Sl(e,t),e.prototype.calculateBBox=function(){var t=this.getCornerBBoxWidth(),e=this.getCornerBBoxHeight();this.width=t,this.height=e,this.maxX=t,this.maxY=e},e.prototype.getCornerBBoxOriginalHeight=function(){var t=this.layoutResult.colsHierarchy,e=this.spreadsheet.options.style.colCfg;return t.sampleNodeForLastLevel?Math.floor(t.height):null==e?void 0:e.height},e.prototype.getCornerBBoxHeight=function(){return this.originalHeight=this.getCornerBBoxOriginalHeight(),this.originalHeight},e.prototype.getCornerBBoxWidth=function(){var t=this.layoutResult.rowsHierarchy;return this.originalWidth=Math.floor(t.width+this.facet.getSeriesNumberWidth()),this.spreadsheet.isScrollContainsRowHeader()?this.originalWidth:this.adjustCornerBBoxWidth()},e.prototype.adjustCornerBBoxWidth=function(){var t=this.layoutResult.colsHierarchy,e=this.spreadsheet.options.width,n=.5*e,r=null==t?void 0:t.width,i=e-this.originalWidth;if(this.originalWidth<=n||r<=i)return this.originalWidth;var o=0;return o=r<=e-n?this.originalWidth-(r-i):n,Math.floor(o)},e}(zO),FO=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Sl(e,t),e.prototype.calculateBBox=function(){this.originalWidth=this.facet.getRealWidth(),this.originalHeight=this.facet.getRealHeight();var t=this.facet.cornerBBox,e={x:Math.floor(t.maxX),y:Math.floor(t.maxY)},n=this.spreadsheet.theme.scrollBar.size,r=this.spreadsheet.options,i=r.width,o=r.height,a=Math.max(0,i-e.x),l=Math.max(0,o-e.y-n);this.x=e.x,this.y=e.y,this.width=a,this.height=l,this.viewportHeight=Math.abs(Math.floor(Math.min(l,this.originalHeight))),this.viewportWidth=Math.abs(Math.floor(Math.min(a,this.originalWidth))),this.maxX=e.x+this.viewportWidth,this.maxY=e.y+this.viewportHeight,this.minX=e.x,this.minY=e.y;var s=this.spreadsheet.options,u=s.frozenTrailingColCount,c=s.frozenTrailingRowCount;u>0&&(this.viewportWidth=this.width,this.maxX=e.x+this.width),c>0&&(this.viewportHeight=this.height,this.maxY=e.y+this.height)},e}(zO),WO=function(t){function e(e){var n=t.call(this,e)||this;return n.isHeaderCellInViewport=function(t,e,n,r){return t+e>=n&&n+r>=t},n.headerConfig=e,n}return Sl(e,t),e.prototype.getConfig=function(){return this.headerConfig},e.prototype.clearResizeAreaGroup=function(t){var e=this.get("parent"),n=null==e?void 0:e.findById(t);null==n||n.clear()},e.prototype.render=function(t){this.clearResizeAreaGroup(t),this.clear(),this.layout(),this.offset(),this.clip()},e.prototype.onScrollXY=function(t,e,n){this.headerConfig.scrollX=t,this.headerConfig.scrollY=e,this.render(n)},e.prototype.onRowScrollX=function(t,e){this.headerConfig.scrollX=t,this.render(e)},e.prototype.clear=function(){t.prototype.clear.call(this)},e}(yo),GO=function(t){function e(e){var n=t.call(this,e)||this;return n.scrollGroup=n.addGroup({name:"colScrollGroup",zIndex:3}),n}return Sl(e,t),e.prototype.onColScroll=function(t,e){this.headerConfig.scrollX!==t&&(this.headerConfig.scrollX=t,this.render(e))},e.prototype.clip=function(){var t=this.headerConfig,e=t.width,n=t.height,r=t.scrollX,i=t.spreadsheet.isFrozenRowHeader();this.scrollGroup.setClip({type:"rect",attrs:{x:i?r:0,y:0,width:i?e:e+r,height:n}})},e.prototype.clear=function(){var t,e;null===(t=this.scrollGroup)||void 0===t||t.clear(),null===(e=this.background)||void 0===e||e.remove(!0)},e.prototype.getCellInstance=function(t,e,n){return new YL(t,e,n)},e.prototype.getCellGroup=function(t){return this.scrollGroup},e.prototype.isColCellInRect=function(t){var e=this.headerConfig,n=e.spreadsheet,r=e.cornerWidth,i=e.width,o=e.scrollX;return i+o>t.x&&o-(n.isFrozenRowHeader()?0:r)<t.x+t.width},e.prototype.layout=function(){var t=this,e=this.headerConfig,n=e.data,r=e.spreadsheet,i=r.options.colCell;Pg(n,(function(e){var n=e;if(t.isColCellInRect(n)){var o=(null==i?void 0:i(n,r,t.headerConfig))||t.getCellInstance(n,r,t.headerConfig);n.belongsCell=o,t.getCellGroup(n).add(o)}}))},e.prototype.offset=function(){var t=this.headerConfig,e=t.position,n=t.scrollX;Hb(this.scrollGroup,e.x-n)},e}(WO),jO=function(t){function e(e){return t.call(this,e)||this}return Sl(e,t),e.getCornerHeader=function(t,n,r,i,o,a){var l=t.width,s=t.height,u=n.originalWidth,c=n.originalHeight,h=n.width,d=n.height;return new e({data:this.getCornerNodes({x:n.x,y:n.y},u,c,i.rows,i.columns,o.rowsHierarchy,o.colsHierarchy,i.dataSet,r,a),position:{x:n.x,y:n.y},width:h,height:d,originalHeight:c,originalWidth:u,viewportWidth:l,viewportHeight:s,hierarchyType:i.hierarchyType,hierarchyCollapse:i.hierarchyCollapse,rows:i.rows,columns:i.columns,seriesNumberWidth:r,spreadsheet:a})},e.getCornerNodes=function(t,e,n,r,i,o,a,l,s,u){var c,h,d,f=[],p=u.options.style.colCfg,v=null==a?void 0:a.sampleNodeForLastLevel,g=null!==(c=null==v?void 0:v.y)&&void 0!==c?c:0,y=null!==(d=null!==(h=null==v?void 0:v.height)&&void 0!==h?h:null==p?void 0:p.height)&&void 0!==d?d:0;if(s){var m=new nb({id:"",key:"series-number-node",value:VS("序号")});m.x=null==t?void 0:t.x,m.y=g,m.width=s,m.height=y,m.isPivotMode=!0,m.spreadsheet=u,m.cornerType=Cb.Series,f.push(m)}if(u.isHierarchyTreeType()){var C=this.getTreeCornerText(u),w=new nb({key:"",id:C,value:C});w.x=t.x+s,w.y=g,w.width=e-s,w.height=y,w.seriesNumberWidth=s,w.isPivotMode=!0,w.spreadsheet=u,w.cornerType=Cb.Row,f.push(w)}else o.sampleNodesForAllLevels.forEach((function(t){var e=r[t.level],n=new nb({key:e,id:e,value:l.getFieldName(e)});n.x=t.x+s,n.y=g,n.width=t.width,n.height=y,n.field=e,n.isPivotMode=!0,n.cornerType=Cb.Row,n.spreadsheet=u,f.push(n)}));return a.sampleNodesForAllLevels.forEach((function(n){if(n.level<a.maxLevel){var r=i[n.level],o=new nb({key:r,id:r,value:l.getFieldName(r)});o.x=t.x,o.y=n.y,o.width=e,o.height=n.height,o.field=r,o.isPivotMode=!0,o.cornerType=Cb.Col,o.spreadsheet=u,f.push(o)}})),f},e.getTreeCornerText=function(t){var e=t.dataSet.fields.rows,n=void 0===e?[]:e,r=t.options.cornerText;if(r)return r;var i=t.store.get("drillDownFieldInLevel",[]).map((function(t){return t.drillField}));return n.filter((function(t){return!Gy(i,t)})).map((function(e){return t.dataSet.getFieldName(e)})).join("/")},e.prototype.onCorScroll=function(t,e){this.headerConfig.scrollX=t,this.render(e)},e.prototype.destroy=function(){t.prototype.destroy.call(this)},e.prototype.layout=function(){this.renderCells()},e.prototype.renderCells=function(){var t,e,n,r,i=this,o=this.headerConfig,a=o.data,l=o.spreadsheet,s=null===(e=null===(t=null==l?void 0:l.facet)||void 0===t?void 0:t.cfg)||void 0===e?void 0:e.cornerHeader,u=null===(r=null===(n=null==l?void 0:l.facet)||void 0===n?void 0:n.cfg)||void 0===r?void 0:r.cornerCell;s?s(this,l,this.headerConfig):a.forEach((function(t){var e;u&&(e=u(t,i.headerConfig.spreadsheet,i.headerConfig)),Cm(e)&&(e=new VL(t,i.headerConfig.spreadsheet,i.headerConfig)),i.add(e)}))},e.prototype.offset=function(){var t=this.headerConfig.scrollX;Hb(this,-t)},e.prototype.clip=function(){var t=this.headerConfig,e=t.width,n=t.height,r=t.scrollX;this.setClip({type:"rect",attrs:{x:r,y:0,width:e,height:n}})},e.prototype.getNodes=function(){return this.headerConfig.data||[]},e}(WO),UO=function(t){function e(e){var n=t.call(this,e)||this;return n.render(),n}return Sl(e,t),e.prototype.layout=function(){this.addCornerBottomBorder(),this.addCornerRightBorder(),this.addSplitLineShadow()},e.prototype.render=function(){this.clear(),this.layout()},e.prototype.onBorderScroll=function(t){this.cfg.scrollX=t;var e=this.cfg.position;zb(this,e.x-t,0),this.render()},e.prototype.onChangeShadowVisibility=function(t,e){this.cfg.showViewportLeftShadow=t>0,this.cfg.showViewportRightShadow=Math.floor(t)<Math.floor(e),this.render()},e.prototype.addCornerRightBorder=function(){var t,e=this.cfg;if(e.isPivotMode){var n=e.width,r=e.height,i=e.viewportHeight,o=e.position,a=null===(t=e.spreadsheet.theme)||void 0===t?void 0:t.splitLine,l=o.x+n,s=o.y,u=o.y+r+i;this.addShape("line",{attrs:{x1:l,y1:s,x2:l,y2:u,stroke:a.verticalBorderColor,lineWidth:a.verticalBorderWidth,opacity:a.verticalBorderColorOpacity}})}},e.prototype.addCornerBottomBorder=function(){var t,e=this.cfg,n=e.width,r=e.height,i=e.viewportWidth,o=e.position,a=e.scrollX,l=e.scrollContainsRowHeader,s=null===(t=e.spreadsheet.theme)||void 0===t?void 0:t.splitLine,u=o.x,c=u+n+i+(l?a:0),h=o.y+r-1;this.addShape("line",{attrs:{x1:u,y1:h,x2:c,y2:h,stroke:s.horizontalBorderColor,lineWidth:s.horizontalBorderWidth,opacity:s.horizontalBorderColorOpacity}})},e.prototype.addSplitLineShadow=function(){var t,e=this.cfg,n=e.isPivotMode,r=e.spreadsheet,i=null===(t=r.theme)||void 0===t?void 0:t.splitLine;n&&i.showShadow&&r.isFrozenRowHeader()&&(this.addSplitLineLeftShadow(),this.addSplitLineRightShadow())},e.prototype.addSplitLineLeftShadow=function(){var t,e,n;if(this.cfg.showViewportLeftShadow){var r=this.cfg,i=r.width,o=r.height,a=r.viewportHeight,l=r.position,s=null===(t=r.spreadsheet.theme)||void 0===t?void 0:t.splitLine,u=l.x+i,c=l.y;this.addShape("rect",{attrs:{x:u,y:c,width:s.shadowWidth,height:a+o,fill:"l (0) 0:".concat(null===(e=s.shadowColors)||void 0===e?void 0:e.left," 1:").concat(null===(n=s.shadowColors)||void 0===n?void 0:n.right)}})}},e.prototype.addSplitLineRightShadow=function(){var t,e,n;if(this.cfg.showViewportRightShadow){var r=this.cfg,i=r.width,o=r.height,a=r.viewportHeight,l=r.viewportWidth,s=r.position,u=null===(t=r.spreadsheet.theme)||void 0===t?void 0:t.splitLine,c=s.x+i+l-u.shadowWidth,h=s.y;this.addShape("rect",{attrs:{x:c,y:h,width:u.shadowWidth,height:a+o,fill:"l (0) 0:".concat(null===(e=u.shadowColors)||void 0===e?void 0:e.right," 1:").concat(null===(n=u.shadowColors)||void 0===n?void 0:n.left)}})}},e}(yo),YO=function(t){function e(e){return t.call(this,e)||this}return Sl(e,t),e.prototype.destroy=function(){t.prototype.destroy.call(this),this.gm&&this.gm.destroy()},e.prototype.layout=function(){var t,e,n=this,r=this.headerConfig,i=r.data,o=r.spreadsheet,a=r.width,l=r.viewportHeight,s=r.seriesNumberWidth,u=r.scrollY,c=r.scrollX,h=null===(e=null===(t=null==o?void 0:o.facet)||void 0===t?void 0:t.cfg)||void 0===e?void 0:e.rowCell;Pg(i,(function(t){if(function(t){return l+u>t.y&&u<t.y+t.height&&a-s+c>t.x&&c-s<t.x+t.width}(t)&&0!==t.height){var e=void 0;h&&(e=h(t,o,n.headerConfig)),Cm(e)&&o.isPivotMode()&&(e=new iE(t,o,n.headerConfig)),t.belongsCell=e,n.add(e)}}))},e.prototype.offset=function(){var t=this.headerConfig,e=t.scrollX,n=t.scrollY,r=t.position,i=t.seriesNumberWidth;zb(this,r.x-e+i,r.y-n)},e.prototype.clip=function(){var t=this.headerConfig,e=t.width,n=t.viewportHeight,r=t.scrollX,i=t.scrollY,o=t.seriesNumberWidth;this.setClip({type:"rect",attrs:{x:r-o,y:i,width:e,height:n}})},e}(WO),VO=function(t){function e(e){return t.call(this,e)||this}return Sl(e,t),e.getSeriesNumberHeader=function(t,n,r,i,o){var a=t.height,l=t.viewportHeight,s=[],u=i.isHierarchyTreeType();return r.forEach((function(t){if(!t.isTotals||u){var e=new nb({id:"",key:"",value:"".concat(s.length+1)});e.x=t.x,e.y=t.y,e.height=t.height,e.width=n,s.push(e)}})),new e({width:o,height:a,viewportWidth:o,viewportHeight:l,position:{x:0,y:t.y},data:s,spreadsheet:i})},e.prototype.clip=function(){var t=this.headerConfig,e=t.width,n=t.viewportHeight,r=t.scrollY;this.setClip({type:"rect",attrs:{x:0,y:r,width:e,height:n}})},e.prototype.layout=function(){var t=this,e=this.headerConfig,n=e.data,r=e.scrollY,i=e.viewportHeight;e.spreadsheet.isPivotMode&&this.addBackGround();var o=this.addGroup();Pg(n,(function(e){var n=e.y,a=e.height,l=e.isLeaf;if(t.isHeaderCellInViewport(n,a,r,i)){var s=t.addGroup();t.addText(s,e),t.add(s),l||t.addBorder(o,e)}}))},e.prototype.offset=function(){var t=this.headerConfig,e=t.scrollY,n=t.scrollX,r=t.position;zb(this,r.x-n,r.y-e),this.backgroundShape&&this.backgroundShape.translate(r.x,r.y+e),this.leftBorderShape&&this.leftBorderShape.translate(r.x,r.y+e)},e.prototype.addBackGround=function(){var t=this.getStyle().cell,e=this.headerConfig,n=e.position,r=e.width,i=e.viewportHeight;this.backgroundShape=t_(this,{x:n.x,y:-n.y,width:r,height:i,fill:t.backgroundColor,stroke:"transparent",opacity:t.backgroundColorOpacity});var o=C_(vb.LEFT,{x:n.x,y:-n.y,width:r,height:i},t),a=o.position,l=o.style;this.leftBorderShape=r_(this,a,l)},e.prototype.addBorder=function(t,e){var n=this.getStyle().cell,r=C_(vb.BOTTOM,e,n);r_(t,r.position,r.style)},e.prototype.getStyle=function(){return this.headerConfig.spreadsheet.theme.rowCell},e.prototype.addText=function(t,e){var n=this.headerConfig,r=n.scrollY,i=n.viewportHeight,o=bl(bl({},this.getStyle().seriesText),{textBaseline:"top"}),a=e.label,l=e.x,s=e.y,u=e.width,c=e.height,h=this.getTextPadding(a,u),d=rE(s+h.top,c-h.top-h.bottom,r,i,o.fontSize);t.addShape("text",{attrs:bl(bl({x:l+h.left,y:d,text:a},o),{cursor:"pointer"})})},e.prototype.getTextPadding=function(t,e){var n=this.getStyle(),r=this.headerConfig.spreadsheet.measureTextWidth(t,n.seriesText),i=Math.max(Math.abs((e-r)/2),4);return bl(bl({},n.cell.padding),{left:i,right:i})},e}(WO),XO=function(){function t(t){var e=this;this.scrollFrameId=null,this.hideScrollBar=function(){var t,n,r;null===(t=e.hRowScrollBar)||void 0===t||t.hide(),null===(n=e.hScrollBar)||void 0===n||n.hide(),null===(r=e.vScrollBar)||void 0===r||r.hide()},this.delayHideScrollBar=sg(this.hideScrollBar,1e3),this.delayHideScrollbarOnMobile=function(){JS()&&e.delayHideScrollBar()},this.showVerticalScrollBar=function(){var t;null===(t=e.vScrollBar)||void 0===t||t.show()},this.showHorizontalScrollBar=function(){var t,n;null===(t=e.hRowScrollBar)||void 0===t||t.show(),null===(n=e.hScrollBar)||void 0===n||n.show()},this.onContainerWheel=function(){e.onContainerWheelForPc(),e.onContainerWheelForMobile()},this.onContainerWheelForPc=function(){var t=e.spreadsheet.getCanvasElement();null==t||t.addEventListener("wheel",e.onWheel)},this.onContainerWheelForMobile=function(){e.mobileWheel=new nE(e.spreadsheet.container),e.mobileWheel.on("wheel",(function(t){e.spreadsheet.hideTooltip();var n=t.event,r=t.deltaX,i=t.deltaY,o=t.x,a=t.y;e.onWheel(bl(bl({},n),{deltaX:r,deltaY:i,offsetX:o,offsetY:a}))}))},this.bindEvents=function(){e.onContainerWheel(),e.emitPaginationEvent()},this.setScrollOffset=function(t){Object.keys(t).forEach((function(n){var r=t[n];Mm(r)||e.spreadsheet.store.set(n,Math.floor(r))}))},this.getScrollOffset=function(){var t=e.spreadsheet.store;return{scrollX:t.get("scrollX",0),scrollY:t.get("scrollY",0),rowHeaderScrollX:t.get("rowHeaderScrollX",0)}},this.emitPaginationEvent=function(){var t=e.cfg.pagination;if(t){var n=t.current,r=void 0===n?1:n,i=t.pageSize,o=e.viewCellHeights.getTotalLength(),a=Math.floor((o-1)/i)+1;e.cfg.spreadsheet.emit(Qo.LAYOUT_PAGINATION,{pageSize:i,pageCount:a,total:o,current:r})}},this.unbindEvents=function(){var t=e.spreadsheet.getCanvasElement();null==t||t.removeEventListener("wheel",e.onWheel),e.mobileWheel.destroy()},this.clipPanelGroup=function(){var t;e.foregroundGroup=e.spreadsheet.foregroundGroup,e.backgroundGroup=e.spreadsheet.backgroundGroup,e.panelGroup=e.spreadsheet.panelGroup;var n=e.panelBBox,r=n.width,i=n.height;null===(t=e.spreadsheet.panelScrollGroup)||void 0===t||t.setClip({type:"rect",attrs:{x:0,y:e.cornerBBox.height,width:r,height:i}})},this.calculateCellWidthHeight=function(){var t=Rw(e.layoutResult.colLeafNodes,(function(t,e){return t.push(Mg(t)+e.width),t}),[0]);e.viewCellWidths=t,e.viewCellHeights=e.getViewCellHeights(e.layoutResult)},this.getRealScrollX=function(t,n){return void 0===n&&(n=0),e.cfg.spreadsheet.isScrollContainsRowHeader()?t:n},this.calculatePanelBBox=function(){e.panelBBox=new FO(e,!0)},this.getRealWidth=function(){return Mg(e.viewCellWidths)},this.getRealHeight=function(){var t=e.cfg.pagination,n=e.viewCellHeights;if(t){var r=e.getCellRange(),i=r.start,o=r.end;return n.getCellOffsetY(o+1)-n.getCellOffsetY(i)}return n.getTotalHeight()},this.clearAllGroup=function(){for(var t=e.panelGroup.getChildren()||[],n=t.length-1;n>=0;n--){var r=t[n];r instanceof yo?r.set("children",[]):t[n].remove()}e.foregroundGroup.set("children",[]),e.backgroundGroup.set("children",[])},this.scrollWithAnimation=function(t,n,r){var i,o,a,l;void 0===t&&(t={}),void 0===n&&(n=200);var s=e.getAdjustedScrollOffset({scrollX:(null===(i=t.offsetX)||void 0===i?void 0:i.value)||0,scrollY:(null===(o=t.offsetY)||void 0===o?void 0:o.value)||0,rowHeaderScrollX:(null===(a=t.rowHeaderOffsetX)||void 0===a?void 0:a.value)||0}),u=s.scrollX,c=s.scrollY,h=s.rowHeaderScrollX;null===(l=e.timer)||void 0===l||l.stop();var d=e.getScrollOffset(),f=[null!=u?u:d.scrollX,null!=c?c:d.scrollY,null!=h?h:d.rowHeaderScrollX],p=Bn(Object.values(d),f);e.timer=Ve((function(t){try{var i=Math.min(t/n,1),o=El(p(i),3),a=o[0],l=o[1],s=o[2];e.setScrollOffset({rowHeaderScrollX:s,scrollX:a,scrollY:l}),e.startScroll(),t>n&&(e.timer.stop(),null==r||r())}catch(u){e.timer.stop()}}))},this.scrollImmediately=function(t){var n,r,i;void 0===t&&(t={});var o=e.getAdjustedScrollOffset({scrollX:(null===(n=t.offsetX)||void 0===n?void 0:n.value)||0,scrollY:(null===(r=t.offsetY)||void 0===r?void 0:r.value)||0,rowHeaderScrollX:(null===(i=t.rowHeaderOffsetX)||void 0===i?void 0:i.value)||0}),a=o.scrollX,l=o.scrollY,s=o.rowHeaderScrollX;e.setScrollOffset({scrollX:a,scrollY:l,rowHeaderScrollX:s}),e.startScroll()},this.startScroll=function(t){var n,r,i;void 0===t&&(t=!1);var o=e.getScrollOffset(),a=o.rowHeaderScrollX,l=o.scrollX,s=o.scrollY;null===(n=e.hRowScrollBar)||void 0===n||n.onlyUpdateThumbOffset(e.getScrollBarOffset(a,e.hRowScrollBar)),null===(r=e.hScrollBar)||void 0===r||r.onlyUpdateThumbOffset(e.getScrollBarOffset(l,e.hScrollBar)),null===(i=e.vScrollBar)||void 0===i||i.onlyUpdateThumbOffset(e.getScrollBarOffset(s,e.vScrollBar)),e.dynamicRenderCell(t)},this.getRendererHeight=function(){var t=e.getCellRange(),n=t.start,r=t.end;return e.viewCellHeights.getCellOffsetY(r+1)-e.viewCellHeights.getCellOffsetY(n)},this.getAdjustedScrollOffset=function(t){var n=t.scrollX,r=t.scrollY,i=t.rowHeaderScrollX;return{scrollX:MO(n,e.layoutResult.colsHierarchy.width,e.panelBBox.width),scrollY:MO(r,e.getRendererHeight(),e.panelBBox.height),rowHeaderScrollX:RO(i,e.cornerBBox)}},this.renderRowScrollBar=function(t){if(!e.cfg.spreadsheet.isScrollContainsRowHeader()&&e.cornerBBox.width<e.cornerBBox.originalWidth){var n=e.cornerBBox.originalWidth-e.cornerBBox.width,r=e.getScrollbarPosition().maxY,i=e.spreadsheet.theme,o=i.splitLine,a=i.scrollBar,l=Math.max(e.cornerBBox.width*e.cornerBBox.width/e.cornerBBox.originalWidth,null==a?void 0:a.thumbHorizontalMinSize),s=l-(null==o?void 0:o.verticalBorderWidth);e.hRowScrollBar=new OO({isHorizontal:!0,trackLen:e.cornerBBox.width,thumbLen:s,position:{x:e.cornerBBox.minX+e.scrollBarSize/2,y:r},thumbOffset:t*(e.cornerBBox.width-l)/n,theme:e.scrollBarTheme,scrollTargetMaxOffset:n}),e.hRowScrollBar.on(rO.ScrollChange,(function(t){var r,i,o=t.offset,a=e.getValidScrollBarOffset(o,n),l=Math.floor(a);e.setScrollOffset({rowHeaderScrollX:l}),null===(r=e.rowHeader)||void 0===r||r.onRowScrollX(l,va),null===(i=e.rowIndexHeader)||void 0===i||i.onRowScrollX(l,ma),e.cornerHeader.onRowScrollX(l,Ca);var s=e.getScrollBarOffset(l,e.hRowScrollBar),u=e.getScrollOffset(),c={scrollX:u.scrollX,scrollY:u.scrollY,rowHeaderScrollX:s};e.hRowScrollBar.updateThumbOffset(s,!1),e.spreadsheet.emit(Qo.ROW_CELL_SCROLL,c),e.spreadsheet.emit(Qo.GLOBAL_SCROLL,c)})),e.foregroundGroup.add(e.hRowScrollBar)}},this.getValidScrollBarOffset=function(t,e){return Lf(t,0,e)},this.renderHScrollBar=function(t,n,r){if(Math.floor(t)<Math.floor(n)){var i=e.scrollBarSize/2,o=e.getScrollbarPosition().maxY,a=t+(e.cfg.spreadsheet.isScrollContainsRowHeader()?Math.min(e.cornerBBox.width,e.getCanvasHW().width):0),l={x:e.panelBBox.minX+(e.cfg.spreadsheet.isScrollContainsRowHeader()?-e.cornerBBox.width+i:i),y:o},s=n+(e.cfg.spreadsheet.isScrollContainsRowHeader()?e.cornerBBox.width:0),u=e.spreadsheet.theme.scrollBar,c=s-a,h=Math.max(a/s*a,null==u?void 0:u.thumbHorizontalMinSize);e.hScrollBar=new OO({isHorizontal:!0,trackLen:a,thumbLen:h,position:l,thumbOffset:r*(a-h)/c,theme:e.scrollBarTheme,scrollTargetMaxOffset:c}),e.hScrollBar.on(rO.ScrollChange,(function(t){var n=t.offset,r=t.updateThumbOffset,i=e.getValidScrollBarOffset(n,c);r&&e.hScrollBar.updateThumbOffset(e.getScrollBarOffset(i,e.hScrollBar),!1),e.setScrollOffset({scrollX:i}),e.dynamicRenderCell()})),e.foregroundGroup.add(e.hScrollBar)}},this.getScrollbarPosition=function(){var t=e.panelBBox,n=t.maxX,r=t.maxY,i=e.getCanvasHW(),o=i.width,a=i.height,l=e.spreadsheet.options.interaction.scrollbarPosition===il.CONTENT;return{maxX:(l?n:o)-e.scrollBarSize,maxY:l?r:a-e.scrollBarSize}},this.renderVScrollBar=function(t,n,r){if(t<n){var i=e.spreadsheet.theme.scrollBar,o=Math.max(t/n*t,null==i?void 0:i.thumbVerticalMinSize),a=n-t,l=e.getScrollbarPosition().maxX;e.vScrollBar=new OO({isHorizontal:!1,trackLen:t,thumbLen:o,thumbOffset:r*(t-o)/a,position:{x:l,y:e.panelBBox.minY},theme:e.scrollBarTheme,scrollTargetMaxOffset:a}),e.vScrollBar.on(rO.ScrollChange,(function(t){var n=t.offset,r=t.updateThumbOffset,i=e.getValidScrollBarOffset(n,a);r&&e.vScrollBar.updateThumbOffset(e.getScrollBarOffset(i,e.vScrollBar),!1),e.setScrollOffset({scrollY:i}),e.dynamicRenderCell()})),e.foregroundGroup.add(e.vScrollBar)}},this.getScrollBarOffset=function(t,e){return t*(e.trackLen-e.thumbLen)/e.scrollTargetMaxOffset},this.isScrollOverThePanelArea=function(t){var n=t.offsetX,r=t.offsetY;return n>e.panelBBox.minX&&n<e.panelBBox.maxX&&r>e.panelBBox.minY&&r<e.panelBBox.maxY},this.isScrollOverTheCornerArea=function(t){var n=t.offsetX,r=t.offsetY;return n>e.cornerBBox.minX&&n<e.cornerBBox.maxX&&r>e.cornerBBox.minY&&r<e.cornerBBox.maxY+e.panelBBox.height},this.updateHorizontalRowScrollOffset=function(t){var n,r=t.offset,i=t.offsetX,o=t.offsetY;e.isScrollOverTheCornerArea({offsetX:i,offsetY:o})&&(null===(n=e.hRowScrollBar)||void 0===n||n.emitScrollChange(r))},this.updateHorizontalScrollOffset=function(t){var n,r=t.offset,i=t.offsetX,o=t.offsetY;e.hRowScrollBar&&!e.isScrollOverThePanelArea({offsetX:i,offsetY:o})||null===(n=e.hScrollBar)||void 0===n||n.emitScrollChange(r)},this.isScrollToLeft=function(t){var n=t.deltaX,r=t.offsetX,i=t.offsetY;if(!e.hScrollBar&&!e.hRowScrollBar)return!0;var o=!e.hRowScrollBar||e.isScrollOverThePanelArea({offsetY:i,offsetX:r})||e.hRowScrollBar.thumbOffset<=0,a=!e.hScrollBar||e.hScrollBar.thumbOffset<=0;return n<=0&&a&&o},this.isScrollToRight=function(t){var n,r,i,o,a,l,s=t.deltaX,u=t.offsetX,c=t.offsetY;if(!e.hScrollBar&&!e.hRowScrollBar)return!0;var h=e.spreadsheet.isFrozenRowHeader()?null===(n=e.panelBBox)||void 0===n?void 0:n.width:null===(r=e.panelBBox)||void 0===r?void 0:r.maxX,d=!e.hRowScrollBar||e.isScrollOverThePanelArea({offsetY:c,offsetX:u})||(null===(i=e.hRowScrollBar)||void 0===i?void 0:i.thumbOffset)+(null===(o=e.hRowScrollBar)||void 0===o?void 0:o.thumbLen)>=e.cornerBBox.width,f=e.hRowScrollBar&&e.isScrollOverTheCornerArea({offsetX:u,offsetY:c})||(null===(a=e.hScrollBar)||void 0===a?void 0:a.thumbOffset)+(null===(l=e.hScrollBar)||void 0===l?void 0:l.thumbLen)>=h;return s>=0&&f&&d},this.isScrollToTop=function(t){var n;return!e.vScrollBar||t<=0&&(null===(n=e.vScrollBar)||void 0===n?void 0:n.thumbOffset)<=0},this.isScrollToBottom=function(t){var n,r,i;return!e.vScrollBar||t>=0&&(null===(n=e.vScrollBar)||void 0===n?void 0:n.thumbOffset)+(null===(r=e.vScrollBar)||void 0===r?void 0:r.thumbLen)>=(null===(i=e.panelBBox)||void 0===i?void 0:i.height)},this.isVerticalScrollOverTheViewport=function(t){return!e.isScrollToTop(t)&&!e.isScrollToBottom(t)},this.isHorizontalScrollOverTheViewport=function(t){return!e.isScrollToLeft(t)&&!e.isScrollToRight(t)},this.isScrollOverTheViewport=function(t){var n=t.deltaY,r=t.deltaX;return!(t.offsetY<=e.cornerBBox.maxY)&&(0!==n?e.isVerticalScrollOverTheViewport(n):0!==r&&e.isHorizontalScrollOverTheViewport(t))},this.cancelScrollFrame=function(){return(!JS()||!e.scrollFrameId)&&(cancelAnimationFrame(e.scrollFrameId),!0)},this.clearScrollFrameIdOnMobile=function(){JS()&&(e.scrollFrameId=null)},this.stopScrollChainingIfNeeded=function(t){"auto"!==e.spreadsheet.options.interaction.overscrollBehavior&&e.stopScrollChaining(t)},this.stopScrollChaining=function(t){var e,n;(null==t?void 0:t.cancelable)&&(null===(e=null==t?void 0:t.preventDefault)||void 0===e||e.call(t));var r=null==t?void 0:t.originalEvent;(null==r?void 0:r.cancelable)&&(null===(n=null==r?void 0:r.preventDefault)||void 0===n||n.call(r))},this.onWheel=function(t){var n=e.spreadsheet.options.interaction,r=t.deltaX,i=t.deltaY,o=t.offsetX,a=t.offsetY;t.shiftKey&&tb()&&(o=o-r+i,r=i,a-=i,i=0);var l=El(function(t,e,n){var r=Math.abs(t/e),i=r>2?0:e;return[(r<=.5?0:t)*n.horizontal,i*n.vertical]}(r,i,n.scrollSpeedRatio),2),s=l[0],u=l[1];e.spreadsheet.hideTooltip(),e.spreadsheet.interaction.clearHoverTimer(),e.isScrollOverTheViewport({deltaX:s,deltaY:u,offsetX:o,offsetY:a})?(e.stopScrollChaining(t),e.spreadsheet.interaction.addIntercepts([Ja.HOVER]),e.cancelScrollFrame()&&(e.scrollFrameId=requestAnimationFrame((function(){var t,n=e.getScrollOffset(),r=n.scrollX,i=n.scrollY,l=n.rowHeaderScrollX;0!==s&&(e.showHorizontalScrollBar(),e.updateHorizontalRowScrollOffset({offsetX:o,offsetY:a,offset:s+l}),e.updateHorizontalScrollOffset({offsetX:o,offsetY:a,offset:s+r})),0!==u&&(e.showVerticalScrollBar(),null===(t=e.vScrollBar)||void 0===t||t.emitScrollChange(u+i)),e.delayHideScrollbarOnMobile(),e.clearScrollFrameIdOnMobile()})))):e.stopScrollChainingIfNeeded(t)},this.addCell=function(t){var n=e.spreadsheet.panelScrollGroup;null==n||n.add(t)},this.realCellRender=function(t,n){var r=e.calculateXYIndexes(t,n);cb.getInstance().logger("renderIndex:",e.preCellIndexes,r);var i=PO(e.preCellIndexes,r),o=i.add,a=i.remove;cb.getInstance().debugCallback("Data Cell Render",(function(){Pg(o,(function(t){var n=El(t,2),r=n[0],i=n[1],o=e.layoutResult.getCellMeta(i,r);if(o){var a=e.cfg.dataCell(o);a.set("name","".concat(r,"-").concat(i)),e.addCell(a)}}));var t=AO(e.panelGroup.getChildren(),fL);Pg(a,(function(e){var n=El(e,2),r=n[0],i=n[1],o=uy(t,(function(t){return t.get("name")==="".concat(r,"-").concat(i)}));null==o||o.remove(!0)})),cb.getInstance().logger("Render Cell Panel: ".concat(null==t?void 0:t.length,", Add: ").concat(null==o?void 0:o.length,", Remove: ").concat(null==a?void 0:a.length))})),e.preCellIndexes=r,e.spreadsheet.emit(Qo.LAYOUT_AFTER_REAL_DATA_CELL_RENDER,{add:o,remove:a,spreadsheet:e.spreadsheet})},this.getGridInfo=function(){var t=El(e.preCellIndexes.center,4),n=t[0],r=t[1],i=t[2],o=t[3];return{cols:BO(n,r,e.layoutResult.colLeafNodes),rows:DO(i,o,e.viewCellHeights)}},this.onAfterScroll=sg((function(){var t=e.spreadsheet,n=t.interaction,r=t.container;if(!n.isSelectedState()&&(n.removeIntercepts([Ja.HOVER]),n.getHoverAfterScroll())){var i=n.eventController.canvasMousemoveEvent;if(i){var o=i.x,a=i.y,l=r.getShape(o,a);l&&r.emit($o.MOUSE_MOVE,bl(bl({},i),{shape:l,target:l,timestamp:performance.now()}))}}}),300),this.cfg=t,this.spreadsheet=t.spreadsheet,this.init()}return Object.defineProperty(t.prototype,"scrollBarTheme",{get:function(){return this.spreadsheet.theme.scrollBar},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scrollBarSize",{get:function(){return this.scrollBarTheme.size},enumerable:!1,configurable:!0}),t.prototype.getCellCustomWidth=function(t,e){return ws(e)?null==e?void 0:e(t):e},t.prototype.getCellDraggedWidth=function(t){var e=this.cfg.colCfg;return Fh(null==e?void 0:e.widthByFieldValue,"".concat(t.value))},t.prototype.render=function(){var t;Cm((t=this.spreadsheet.dataCfg.fields).rows)&&Cm(t.columns)&&Cm(t.values)&&Cm(t.customTreeItems)||(this.adjustScrollOffset(),this.renderHeaders(),this.renderScrollBars(),this.renderBackground(),this.dynamicRenderCell())},t.prototype.adjustScrollOffset=function(){var t=this.getAdjustedScrollOffset(this.getScrollOffset());this.setScrollOffset(t)},t.prototype.getSeriesNumberWidth=function(){return this.cfg.showSeriesNumber?this.spreadsheet.theme.rowCell.seriesNumberWidth:0},t.prototype.getCanvasHW=function(){return{width:this.cfg.width,height:this.cfg.height}},t.prototype.updateScrollOffset=function(t){var e,n,r,i,o,a;void 0===(null===(e=t.rowHeaderOffsetX)||void 0===e?void 0:e.value)?void 0===(null===(r=t.offsetX)||void 0===r?void 0:r.value)?void 0!==(null===(o=t.offsetY)||void 0===o?void 0:o.value)&&((null===(a=t.offsetY)||void 0===a?void 0:a.animate)?this.scrollWithAnimation(t):this.scrollImmediately(t)):(null===(i=t.offsetX)||void 0===i?void 0:i.animate)?this.scrollWithAnimation(t):this.scrollImmediately(t):(null===(n=t.rowHeaderOffsetX)||void 0===n?void 0:n.animate)?this.scrollWithAnimation(t):this.scrollImmediately(t)},t.prototype.getPaginationScrollY=function(){var t=this.cfg.pagination;if(t){var e=t.current,n=void 0===e?1:e,r=t.pageSize,i=this.viewCellHeights,o=Math.max((n-1)*r,0);return i.getCellOffsetY(o)}return 0},t.prototype.destroy=function(){this.unbindEvents(),this.clearAllGroup(),this.preCellIndexes=null,cancelAnimationFrame(this.scrollFrameId)},t.prototype.calculateXYIndexes=function(t,e){var n=this.panelBBox,r=n.viewportHeight,i=n.viewportWidth;return{center:Pb(t,e,this.viewCellWidths,this.viewCellHeights,{width:i,height:r,x:0,y:0},this.getRealScrollX(this.cornerBBox.width))}},t.prototype.calculateCornerBBox=function(){this.cornerBBox=new HO(this,!0)},t.prototype.getCellRange=function(){var t=this.cfg.pagination;return function(t,e){var n=t,r=0,i=n.getTotalLength()-1;if(e){var o=e.current,a=void 0===o?1:o,l=e.pageSize;r=Math.max((a-1)*l,0),i=Math.min(a*l-1,n.getTotalLength()-1)}return{start:r,end:i}}(this.viewCellHeights,t)},t.prototype.clip=function(t,e){var n,r=this.spreadsheet.isFrozenRowHeader();null===(n=this.spreadsheet.panelScrollGroup)||void 0===n||n.setClip({type:"rect",attrs:{x:r?t:0,y:e,width:this.panelBBox.width+(r?0:t),height:this.panelBBox.height}})},t.prototype.translateRelatedGroups=function(t,e,n){var r,i,o,a,l,s;zb(this.spreadsheet.panelScrollGroup,this.cornerBBox.width-t,this.cornerBBox.height-e),null===(r=this.rowHeader)||void 0===r||r.onScrollXY(this.getRealScrollX(t,n),e,va),null===(i=this.rowIndexHeader)||void 0===i||i.onScrollXY(this.getRealScrollX(t,n),e,ma),null===(o=this.cornerHeader)||void 0===o||o.onCorScroll(this.getRealScrollX(t,n),Ca),null===(a=this.centerFrame)||void 0===a||a.onChangeShadowVisibility(t,this.getRealWidth()-this.panelBBox.width),null===(l=this.centerFrame)||void 0===l||l.onBorderScroll(this.getRealScrollX(t)),null===(s=this.columnHeader)||void 0===s||s.onColScroll(t,wa)},t.prototype.init=function(){var t=this;cb.getInstance().debugCallback("Header Layout",(function(){t.layoutResult=t.doLayout(),t.saveInitColumnLeafNodes(t.layoutResult.colLeafNodes),t.spreadsheet.emit(Qo.LAYOUT_AFTER_HEADER_LAYOUT,t.layoutResult)})),this.calculateCellWidthHeight(),this.calculateCornerBBox(),this.calculatePanelBBox(),this.clipPanelGroup(),this.bindEvents()},t.prototype.renderBackground=function(){var t=this.getCanvasHW(),e=t.width,n=t.height,r=this.spreadsheet.theme.background,i=r.color,o=r.opacity;this.backgroundGroup.addShape("rect",{attrs:{fill:i,opacity:o,x:0,y:0,width:e,height:n}})},t.prototype.renderScrollBars=function(){var t=this.getScrollOffset(),e=t.scrollX,n=t.scrollY,r=t.rowHeaderScrollX,i=this.panelBBox,o=i.width,a=i.height,l=this.layoutResult.colsHierarchy.width,s=this.getRealHeight();this.renderRowScrollBar(r),this.renderHScrollBar(o,l,e),this.renderVScrollBar(a,s,n)},t.prototype.renderHeaders=function(){var t=this.getSeriesNumberWidth();this.rowHeader=this.getRowHeader(),this.columnHeader=this.getColHeader(),t>0&&!this.rowIndexHeader&&(this.rowIndexHeader=this.getSeriesNumberHeader()),this.cornerHeader=this.getCornerHeader(),this.centerFrame=this.getCenterFrame(),this.rowIndexHeader&&this.foregroundGroup.add(this.rowIndexHeader),this.rowHeader&&this.foregroundGroup.add(this.rowHeader),this.foregroundGroup.add(this.columnHeader),this.foregroundGroup.add(this.cornerHeader),this.foregroundGroup.add(this.centerFrame)},t.prototype.getRowHeader=function(){var t,e,n;if(!this.rowHeader){var r=this.panelBBox,i=r.y,o=r.viewportHeight,a=r.viewportWidth,l=r.height,s=this.getSeriesNumberWidth();return new YO({width:this.cornerBBox.width,height:l,viewportWidth:a,viewportHeight:o,position:{x:0,y:i},data:this.layoutResult.rowNodes,hierarchyType:this.cfg.hierarchyType,linkFields:null!==(n=null===(e=null===(t=this.cfg.spreadsheet.options)||void 0===t?void 0:t.interaction)||void 0===e?void 0:e.linkFields)&&void 0!==n?n:[],seriesNumberWidth:s,spreadsheet:this.spreadsheet})}return this.rowHeader},t.prototype.getColHeader=function(){if(!this.columnHeader){var t=this.panelBBox,e=t.x,n=t.width,r=t.viewportHeight,i=t.viewportWidth;return new GO({width:n,cornerWidth:this.cornerBBox.width,height:this.cornerBBox.height,viewportWidth:i,viewportHeight:r,position:{x:e,y:0},data:this.layoutResult.colNodes,scrollContainsRowHeader:this.cfg.spreadsheet.isScrollContainsRowHeader(),sortParam:this.cfg.spreadsheet.store.get("sortParam"),spreadsheet:this.spreadsheet})}return this.columnHeader},t.prototype.getCornerHeader=function(){return this.cornerHeader?this.cornerHeader:jO.getCornerHeader(this.panelBBox,this.cornerBBox,this.getSeriesNumberWidth(),this.cfg,this.layoutResult,this.spreadsheet)},t.prototype.getSeriesNumberHeader=function(){return VO.getSeriesNumberHeader(this.panelBBox,this.getSeriesNumberWidth(),this.layoutResult.rowsHierarchy.getNodes(0),this.spreadsheet,this.cornerBBox.width)},t.prototype.getCenterFrame=function(){var t;if(!this.centerFrame){var e=this.panelBBox,n=e.viewportWidth,r=e.viewportHeight,i=this.cornerBBox.width,o=this.cornerBBox.height,a=null===(t=this.cfg)||void 0===t?void 0:t.frame,l={position:{x:this.cornerBBox.x,y:this.cornerBBox.y},width:i,height:o,viewportWidth:n,viewportHeight:r,showViewportLeftShadow:!1,showViewportRightShadow:!1,scrollContainsRowHeader:this.cfg.spreadsheet.isScrollContainsRowHeader(),isPivotMode:this.cfg.spreadsheet.isPivotMode(),spreadsheet:this.cfg.spreadsheet};return a?a(l):new UO(l)}return this.centerFrame},t.prototype.updatePanelScrollGroup=function(){this.gridInfo=this.getGridInfo(),this.spreadsheet.panelScrollGroup.update(this.gridInfo)},t.prototype.dynamicRenderCell=function(t){var e=this.getScrollOffset(),n=e.scrollX,r=e.scrollY,i=e.rowHeaderScrollX,o=r+this.getPaginationScrollY(),a=MO(o,this.viewCellHeights.getTotalHeight(),this.panelBBox.viewportHeight);this.spreadsheet.hideTooltip(),this.spreadsheet.interaction.clearHoverTimer(),this.realCellRender(n,a),this.updatePanelScrollGroup(),this.translateRelatedGroups(n,a,i),this.clip(n,a),t||this.emitScrollEvent({scrollX:n,scrollY:a,rowHeaderScrollX:i}),this.onAfterScroll()},t.prototype.emitScrollEvent=function(t){this.spreadsheet.emit(Qo.LAYOUT_CELL_SCROLL,t),this.spreadsheet.emit(Qo.GLOBAL_SCROLL,t)},t.prototype.saveInitColumnLeafNodes=function(t){void 0===t&&(t=[]);var e=this.spreadsheet,n=e.store,r=e.options.interaction.hiddenColumnFields;t.length+r.length!==n.get("initColumnLeafNodes",[]).length&&n.set("initColumnLeafNodes",t)},t.prototype.getHiddenColumnsInfo=function(t){var e=this.spreadsheet.store.get("hiddenColumnsDetail",[]);return Cm(e)?null:e.find((function(e){var n;return null===(n=null==e?void 0:e.hideColumnNodes)||void 0===n?void 0:n.some((function(e){return e.id===t.id}))}))},t.prototype.getCornerNodes=function(){var t;return(null===(t=this.cornerHeader)||void 0===t?void 0:t.getNodes())||[]},t}(),qO=function(t){var e,n,r,i=t.facetCfg,o=t.customTreeItems,a=void 0===o?[]:o,l=t.level,s=t.parentNode,u=t.hierarchy,c=i.spreadsheet,h=i.collapsedRows,d=i.hierarchyCollapse;try{for(var f=Ll(a),p=f.next();!p.done;p=f.next()){var v=p.value,g=v.key,y=v.title,m=v.collapsed,C=v.children,w=_l(v,["key","title","collapsed","children"]),x=((r={})[ia]=g,r),S=Rb(s.id,y),b=null!=m&&m,_=Fh(h,S),L=null!=_?_:d||b,E=new nb({id:S,key:g,label:y,value:y,level:l,parent:s,field:g,isTotals:!1,isCollapsed:L,hierarchy:u,query:x,spreadsheet:c,extra:w});l>u.maxLevel&&(u.maxLevel=l),Cm(C)&&(E.isLeaf=!0);var T=lb(i,s,E,u);Cm(C)||L||!T||qO({facetCfg:i,parentNode:E,level:l+1,hierarchy:u,customTreeItems:C})}}catch(O){e={error:O}}finally{try{p&&!p.done&&(n=f.return)&&n.call(f)}finally{if(e)throw e.error}}},KO=(_a+La).length,$O=function(t){var e,n,r,i,o,a,l,s=t.parentNode,u=t.currentField,c=t.level,h=t.facetCfg,d=t.hierarchy,f=t.pivotMeta,p=h.spreadsheet,v=h.dataSet,g=h.collapsedRows,y=h.hierarchyCollapse,m=h.rowExpandDepth,C=s.query,w=s.id,x=(null===(i=p.dataCfg.fields.rows)||void 0===i?void 0:i.length)<=c,S=(null===(o=null==v?void 0:v.sortedDimensionValues)||void 0===o?void 0:o[u])||[],b=Vb(Array.from(f.keys())),_=Yb(b,S,(function(t){return _a===w?t:Rb(w,t).slice(KO)})),L=ab(_,h,s,u),E=p.store.get("drillItemsNum");x&&E>0&&(L=L.slice(0,E)),0===c&&function(t,e,n){var r=t.getTotalsConfig(e);r.showGrandTotals&&n[r.reverseLayout?"unshift":"push"](new ib({label:r.label,isSubTotals:!1,isGrandTotals:!0}))}(p,u,L);try{for(var T=Ll(L),O=T.next();!O.done;O=T.next()){var I=O.value,R=I instanceof ib,M=R?null:f.get(I),A=void 0,B=C,D=!1,k=!1;if(R){var N=I;D=N.isGrandTotals,k=N.isSubTotals,A=VS(I.label),B=C}else A=I,B=bl(bl({},C),((r={})[u]=A,r));var P=Rb(w,A),z=null==g?void 0:g[P],H=_m(m)?c>m:null,F=null!==(a=null!=z?z:H)&&void 0!==a?a:y,W=new nb({id:P,key:u,label:A,value:A,level:c,parent:s,field:u,isTotals:R,isGrandTotals:D,isSubTotals:k,isCollapsed:F,hierarchy:d,query:B,spreadsheet:p});c>d.maxLevel&&(d.maxLevel=c);var G=!(null===(l=null==M?void 0:M.children)||void 0===l?void 0:l.size);(G||R)&&(W.isLeaf=!0),G||(W.isTotals=!0);var j=lb(h,s,W,d);G||F||R||!j||$O({level:c+1,currentField:M.childField,pivotMeta:M.children,facetCfg:h,parentNode:W,hierarchy:d})}}catch(U){e={error:U}}finally{try{O&&!O.done&&(n=T.return)&&n.call(T)}finally{if(e)throw e.error}}},ZO=function(t){var e,n,r=t.isValueInCols,i=t.moreThanOneValue,o=t.rootNode,a=t.facetCfg,l=t.hierarchy,s=t.fields;t.isRowHeader?(e=!r&&i,n=!r&&!i):(e=r&&i,n=r&&!i),Ib({addTotalMeasureInTotal:e,addMeasureInTotalQuery:n,parentNode:o,currentField:s[0],fields:s,facetCfg:a,hierarchy:l})},QO=function(t){var e=t.facetCfg,n=t.rootNode,r=t.hierarchy,i=e.hierarchyType,o=e.rows,a=e.dataSet;"tree"===i?$O({level:0,currentField:o[0],pivotMeta:a.rowPivotMeta,facetCfg:e,parentNode:n,hierarchy:r}):function(t){var e=t.facetCfg,n=t.rootNode,r=t.hierarchy,i=e.dataSet.fields.customTreeItems;qO({customTreeItems:i,facetCfg:e,level:0,parentNode:n,hierarchy:r})}(t)},JO=function(t){var e=t.isPivotMode,n=t.hierarchy,r=t.rootNode,i=t.facetCfg;e?ZO(t):function(t){var e=t.facetCfg,n=e.columns,r=e.spreadsheet.store.get("hiddenColumnsDetail"),i=null==e?void 0:e.showSeriesNumber,o=Tl([],El(jb(n).filter((function(t){return!r||r.every((function(e){return e.hideColumnNodes.every((function(e){return e.field!==t}))}))}))),!1),a=Tl([],El(n),!1),l={};i&&(a.unshift({key:la}),l[la]=!0),o.reduce((function(t,e){return t[e]=!0,t}),l),Ab(Wb(a,l),t,0,null)}({parentNode:r,hierarchy:n,facetCfg:i})},tI=function(t){var e=t.isRowHeader,n=t.facetCfg,r=n.spreadsheet,i=n.rows,o=void 0===i?[]:i,a=n.columns,l=void 0===a?[]:a,s=r.dataCfg.fields.valueInCols,u=r.isPivotMode(),c=n.dataSet.moreThanOneValue(),h=nb.rootNode(),d=new rb,f={isValueInCols:s,isPivotMode:u,moreThanOneValue:c,rootNode:h,hierarchy:d,spreadsheet:r,facetCfg:n,fields:e?o:l,isRowHeader:e};e?function(t){t.spreadsheet.isHierarchyTreeType()?QO(t):ZO(t)}(f):JO(f);return{hierarchy:d,leafNodes:e&&r.isHierarchyTreeType()?d.getNodes():d.getLeaves()}},eI=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Sl(e,t),Object.defineProperty(e.prototype,"rowCellTheme",{get:function(){return this.spreadsheet.theme.rowCell.cell},enumerable:!1,configurable:!0}),e.prototype.getContentHeight=function(){var t=this.layoutResult,e=t.rowsHierarchy,n=t.colsHierarchy;return e.height+n.height},e.prototype.doLayout=function(){var t=tI({isRowHeader:!0,facetCfg:this.cfg}),e=t.leafNodes,n=t.hierarchy,r=tI({isRowHeader:!1,facetCfg:this.cfg}),i=r.leafNodes,o=r.hierarchy;this.calculateNodesCoordinate(e,n,i,o);var a=this.cfg,l=a.dataSet,s=a.spreadsheet,u={colNodes:o.getNodes(),colsHierarchy:o,rowNodes:n.getNodes(),rowsHierarchy:n,rowLeafNodes:e,colLeafNodes:i,getCellMeta:function(t,n){var r,o,a,u=t||0,c=n||0,h=e[u],d=i[c];if(!h||!d)return null;var f,p=h.query,v=d.query,g=h.isTotals||h.isTotalMeasure||d.isTotals||d.isTotalMeasure,y=s.options.hierarchyType,m=null!==(o=Fh(s,"facet.cfg.colCfg.hideMeasureColumn"))&&void 0!==o&&o&&"customTree"!==y?((r={})[ia]=null===(a=l.fields.values)||void 0===a?void 0:a[0],r):{},C=tC({},p,v,m),w=k_(h,d),x=l.getCellData({query:C,rowNode:h,isTotals:g,totalStatus:w}),S=null;return Cm(x)?f=Fh(C,[ia],""):(f=Fh(x,[ia],""),S=Fh(x,[ra],null),g&&(f=Fh(C,[ia],""),S=Fh(x,f,null))),{spreadsheet:s,x:d.x,y:h.y,width:d.width,height:h.height,data:x,rowIndex:u,colIndex:c,isTotals:g,valueField:f,fieldValue:S,rowQuery:p,colQuery:v,rowId:h.id,colId:d.id,id:cL(h.id,d.id)}},spreadsheet:s};return function(t,e){var n=null==t?void 0:t.layoutDataPosition;if(n){var r=e.getCellMeta,i=n(t.spreadsheet,r);return bl(bl({},e),{getCellMeta:i})}return e}(this.cfg,u)},e.prototype.calculateNodesCoordinate=function(t,e,n,r){this.calculateRowNodesCoordinate(t,e,n),this.calculateColNodesCoordinate(n,r,t,e.width)},e.prototype.calculateColNodesCoordinate=function(t,e,n,r){for(var i,o,a,l=nb.blankNode(),s=e.getNodes(),u=e.sampleNodesForAllLevels,c=0;c<u.length;c++){var h=u[c];if(h.height=this.getColNodeHeight(h),e.height+=h.height,0===h.level)h.y=0;else{var d=u[c-1];h.y=null!==(i=(null==d?void 0:d.y)+(null==d?void 0:d.height))&&void 0!==i?i:0}}for(var f=0,p=function(i){var a=s[i];if(a.isLeaf&&(a.colIndex=f,f+=1,a.x=l.x+l.width,a.width=v.calculateColLeafNodesWidth(a,t,n,r),e.width+=a.width,l=a),0===a.level)a.y=0;else{var u=e.sampleNodesForAllLevels.find((function(t){return t.level===a.level-1}));a.y=null!==(o=(null==u?void 0:u.y)+(null==u?void 0:u.height))&&void 0!==o?o:0}a.height=v.getColNodeHeight(a),sb(v.cfg,null,a)},v=this,g=0;g<s.length;g++)p(g);this.autoCalculateColNodeWidthAndX(t),Cm(null===(a=this.spreadsheet.options.totals)||void 0===a?void 0:a.col)||(this.adjustTotalNodesCoordinate({hierarchy:e,isRowHeader:!1,isSubTotal:!0}),this.adjustTotalNodesCoordinate({hierarchy:e,isRowHeader:!1,isSubTotal:!1}))},e.prototype.autoCalculateColNodeWidthAndX=function(t){for(var e,n=null,r=t.slice(0);r.length;){var i=r.shift().parent;if(n!==i&&i){r.push(i);var o=null===(e=i.children)||void 0===e?void 0:e.find((function(t){return!t.hiddenChildNodeInfo})),a=null==o?void 0:o.x,l=sx(i.children,"width");i.x=a,i.width=l,n=i}}},e.prototype.calculateColLeafNodesWidth=function(t,e,n,r){var i,o,a,l,s,u=this.cfg,c=u.colCfg,h=u.dataSet,d=u.filterDisplayDataItem,f=this.getCellDraggedWidth(t);if(_m(f))return f;var p=this.getCellCustomWidth(t,null==c?void 0:c.width);if(_m(p))return p;if(this.spreadsheet.getLayoutWidthType()===yl.Compact){for(var v=this.spreadsheet.theme.colCell,g=v.bolderText,y=v.cell,m=v.icon,C=this.spreadsheet.dataSet.getFieldFormatter(t.field),w=null!==(i=null==C?void 0:C(t.value))&&void 0!==i?i:t.label,x=this.getExpectedCellIconWidth(Ua.COL_CELL,this.spreadsheet.isValueInCols()&&this.spreadsheet.options.showDefaultHeaderActionIcon,m),S=this.spreadsheet.measureTextWidthRoughly(w)+x,b=void 0,_=0,L=0;L<50;L++){var E=n[L];if(E){var T=h.getCellData({query:bl(bl({},t.query),E.query),rowNode:E,isTotals:t.isTotals||t.isTotalMeasure||E.isTotals||E.isTotalMeasure,totalStatus:k_(E,t)});if(T){var O=sL(T,d),I=null!==(a=null===(o=this.spreadsheet.dataSet.getFieldFormatter(T[ia]))||void 0===o?void 0:o(O))&&void 0!==a?a:O,R="".concat(I),M=this.spreadsheet.measureTextWidthRoughly(R);M>_&&(b=R,_=M)}}}var A=S>_,B=A?w:b,D=A?x:0;return cb.getInstance().logger("Max Label In Col:",t.field,B),this.spreadsheet.measureTextWidth(B,g)+(null===(l=y.padding)||void 0===l?void 0:l.left)+(null===(s=y.padding)||void 0===s?void 0:s.right)+D}return this.spreadsheet.isHierarchyTreeType()?this.getAdaptTreeColWidth(t,e,n):this.getAdaptGridColWidth(e,r)},e.prototype.getColNodeHeight=function(t){var e=this.cfg.colCfg,n=Fh(e,["heightByField",t.key]);return null!=n?n:null==e?void 0:e.height},e.prototype.getExpectedCellIconWidth=function(t,e,n){var r,i=0;if(e)i=1;else{var o=ML(yy(this.spreadsheet.options.headerActionIcons,(function(t){return bl(bl({},t),{displayCondition:function(){return!0}})})),null,t);i=null!==(r=null==o?void 0:o.iconNames.length)&&void 0!==r?r:0}return i?i*(n.size+n.margin.left)+n.margin.right:0},e.prototype.calculateRowNodesCoordinate=function(t,e,n){var r,i,o,a,l,s,u,c,h,d,f=this.cfg,p=f.cellCfg,v=f.spreadsheet,g=v.isHierarchyTreeType(),y=Fh(v,"options.style.rowCfg.heightByField",{}),m=null!==(o=e.sampleNodesForAllLevels)&&void 0!==o?o:[];if(g)e.width=this.getTreeRowHeaderWidth();else try{for(var C=Ll(e.sampleNodesForAllLevels),w=C.next();!w.done;w=C.next()){var x=w.value;x.width=this.calculateGridRowNodesWidth(x,n),e.width+=x.width;var S=null!==(a=m[x.level-1])&&void 0!==a?a:{x:0,width:0};x.x=(null==S?void 0:S.x)+(null==S?void 0:S.width)}}catch(O){r={error:O}}finally{try{w&&!w.done&&(i=C.return)&&i.call(C)}finally{if(r)throw r.error}}for(var b=nb.blankNode(),_=e.getNodes(),L=0;L<_.length;L++){var E=_[L];if((g||!g&&E.isLeaf)&&(null!==(l=E.rowIndex)&&void 0!==l||(E.rowIndex=L),null!==(s=E.colIndex)&&void 0!==s||(E.colIndex=L),E.y=b.y+b.height,E.height=(null!==(u=null==y?void 0:y[E.id])&&void 0!==u?u:null==p?void 0:p.height)+(null===(c=this.rowCellTheme.padding)||void 0===c?void 0:c.top)+(null===(h=this.rowCellTheme.padding)||void 0===h?void 0:h.bottom),b=E,e.height+=E.height),g||0===E.level)E.x=0;else{S=m[E.level-1];E.x=(null==S?void 0:S.x)+(null==S?void 0:S.width)}if(g)E.width=this.getTreeRowHeaderWidth();else{var T=m[E.level];E.width=null==T?void 0:T.width}sb(this.cfg,E,null)}g||(this.autoCalculateRowNodeHeightAndY(t),Cm(null===(d=v.options.totals)||void 0===d?void 0:d.row)||(this.adjustTotalNodesCoordinate({hierarchy:e,isRowHeader:!0,isSubTotal:!1}),this.adjustTotalNodesCoordinate({hierarchy:e,isRowHeader:!0,isSubTotal:!0})))},e.prototype.autoCalculateRowNodeHeightAndY=function(t){for(var e=null,n=t.slice(0);n.length;){var r=n.shift().parent;e!==r&&r&&(n.push(r),r.y=r.children[0].y,r.height=r.children.map((function(t){return t.height})).reduce((function(t,e){return t+e}),0),e=r)}},e.prototype.getMultipleMap=function(t,e,n){for(var r=t.maxLevel,i=this.cfg,o=i.totals,a=i.dataSet,l=a.moreThanOneValue(),s=a.fields,u=s.rows,c=s.columns,h=e?u:c,d=e?o.row:o.col,f=n?d.subTotalsGroupDimensions||[]:d.totalsGroupDimensions||[],p=Array.from({length:r+1},(function(){return 1})),v=r;v>0;v--){var g=h[v],y=g===ia&&l;f.includes(g)||y||(p[v-1]+=p[v],p[v]=0)}return p},e.prototype.adjustTotalNodesCoordinate=function(t){var e=t.hierarchy,n=t.isRowHeader,r=t.isSubTotal,i=this.getMultipleMap(e,n,r),o=oy(e.getNodes(),(function(t){return r?t.isSubTotals:t.isGrandTotals})),a=n?"width":"height";Pg(o,(function(t){var n=i[t.level];if(!n&&r)for(var o=1;n<1;)n=i[t.level-o]-o,o++;for(var l=0,s=function(n){l+=e.sampleNodesForAllLevels.find((function(e){return e.level===t.level+n}))[a]},u=0;u<n;u++)s(u);t[a]=l}))},e.prototype.calculateGridRowNodesWidth=function(t,e){var n=this.cfg,r=n.rowCfg,i=n.spreadsheet,o=Fh(r,["widthByField",t.key]);if(_m(o))return o;var a=this.getCellCustomWidth(t,null==r?void 0:r.width);return _m(a)?a:i.getLayoutWidthType()!==yl.Adaptive?this.getCompactGridRowWidth(t):this.getAdaptGridColWidth(e)},e.prototype.getAdaptTreeColWidth=function(t,e,n){var r=this.getCanvasHW().width-this.getSeriesNumberWidth(),i=Math.min(r/2,this.getTreeRowHeaderWidth()),o=Math.max(1,e.length),a=this.cfg.cellCfg;return Math.max(T_(a,this.getColLabelLength(t,n)),(r-i)/o)},e.prototype.getColLabelLength=function(t,e){var n,r=function(t){try{return JSON.parse(t)}catch(e){return null}}(null==t?void 0:t.value);if(Xl(r))return r.length;for(var i=1,o=0;o<50;o++){var a=e[o];if(!a)return i;for(var l=this.cfg.dataSet.getCellData({query:bl(bl({},t.query),a.query),rowNode:a,isTotals:t.isTotals||t.isTotalMeasure||a.isTotals||a.isTotalMeasure,totalStatus:k_(a,t)}),s=th(l),u=0;u<s.length;u++){var c=l[s[u]],h=jw(null===(n=null==c?void 0:c.values)||void 0===n?void 0:n[0]);h>i&&(i=h)}}return i},e.prototype.getAdaptGridColWidth=function(t,e){var n=this.cfg,r=n.rows,i=n.cellCfg,o=r.length,a=t.length,l=this.getCanvasHW().width-this.getSeriesNumberWidth(),s=Math.max(1,o+a);return e?Math.max(T_(i),(l-e)/a):Math.max(T_(i),l/s)},e.prototype.getTreeRowHeaderWidth=function(){var t,e,n,r,i=this.cfg,o=i.rows,a=i.dataSet,l=i.rowCfg,s=i.treeRowsWidth,u=null!=s?s:null==l?void 0:l.treeRowsWidth;if(u)return u;var c=this.getCellCustomWidth(null,null==l?void 0:l.width);if(c)return c;var h=o.map((function(t){return a.getFieldName(t)})).join("/"),d=this.spreadsheet.theme.cornerCell,f=d.bolderText,p=d.icon,v=this.spreadsheet.measureTextWidth(h,f)+2*p.size+(null===(t=p.margin)||void 0===t?void 0:t.left)+(null===(e=p.margin)||void 0===e?void 0:e.right)+(null===(n=this.rowCellTheme.padding)||void 0===n?void 0:n.left)+(null===(r=this.rowCellTheme.padding)||void 0===r?void 0:r.right);return Math.max(null!=u?u:120,v)},e.prototype.getCompactGridRowWidth=function(t){var e,n=this,r=this.cfg,i=r.dataSet,o=r.spreadsheet,a=o.theme.rowCell,l=a.bolderText,s=a.icon,u=a.cell,c=o.theme.cornerCell,h=c.bolderText,d=c.icon,f=c.cell,p=t.field,v=t.isLeaf,g=this.getExpectedCellIconWidth(Ua.ROW_CELL,!o.isValueInCols()&&v&&o.options.showDefaultHeaderActionIcon,s),y=Km(null===(e=i.getDimensionValues(p))||void 0===e?void 0:e.slice(0,50).map((function(t){var e,r;return null!==(r=null===(e=n.spreadsheet.dataSet.getFieldFormatter(p))||void 0===e?void 0:e(t))&&void 0!==r?r:t})),(function(t){return"".concat(t).length})),m=o.measureTextWidth(y,l)+g+u.padding.left+u.padding.right,C=i.getFieldName(p),w=this.getExpectedCellIconWidth(Ua.CORNER_CELL,!1,d),x=o.measureTextWidth(C,h)+w+f.padding.left+f.padding.right;return cb.getInstance().logger("Max Label In Row:",p,m>x?y:C),Math.max(m,x)},e.prototype.getViewCellHeights=function(t){var e=Rw(t.rowLeafNodes,(function(t,e){return t.push(Mg(t)+e.height),t}),[0]);return{getTotalHeight:function(){return Mg(e)},getCellOffsetY:function(t){return e[t]},getTotalLength:function(){return e.length-1},getIndexRange:function(t,n){return IO(e,t,n)}}},e}(XO),nI=function(t){function e(e){var n,r=this;(r=t.call(this,e)||this).getScrollGroupClipBBox=function(){var t,e=r.headerConfig,n=e.width,i=e.height,o=e.scrollX,a=e.spreadsheet,l=a.options;if(!l.frozenColCount&&!l.frozenTrailingColCount)return{x:o,y:0,width:n,height:i};for(var s=null===(t=a.facet)||void 0===t?void 0:t.layoutResult.colLeafNodes,u=Jb(a.options,s.length),c=u.frozenColCount,h=u.frozenTrailingColCount,d=0,f=0,p=0;p<c;p++)d+=s[p].width;for(p=0;p<h;p++)f+=s[s.length-1-p].width;return{x:o+d,y:0,width:n-d-f,height:i}};var i=null===(n=r.headerConfig.spreadsheet)||void 0===n?void 0:n.options,o=i.frozenColCount,a=i.frozenTrailingColCount;return o&&(r.frozenColGroup=r.addGroup({name:"colFrozenGroup",zIndex:4})),a&&(r.frozenTrailingColGroup=r.addGroup({name:"colFrozenTrailingGroup",zIndex:4})),r}return Sl(e,t),e.prototype.isFrozenCell=function(t){var e=this.headerConfig.spreadsheet,n=null==e?void 0:e.options,r=n.frozenColCount,i=n.frozenTrailingColCount,o=t.colIndex,a=null==e?void 0:e.facet.layoutResult.colLeafNodes;return Bb(o,r)||Db(o,i,a.length)},e.prototype.clear=function(){var e,n,r=this.headerConfig.spreadsheet;t.prototype.clear.call(this),null===(e=this.frozenTrailingColGroup)||void 0===e||e.clear(),null===(n=this.frozenColGroup)||void 0===n||n.clear();var i=null==r?void 0:r.foregroundGroup.findById(xa);null==i||i.clear()},e.prototype.getCellInstance=function(t,e,n){return t.field===la?new sE(t,e,n):new lE(t,e,n)},e.prototype.getCellGroup=function(t){var e,n,r=this.headerConfig.spreadsheet,i=null==r?void 0:r.options,o=i.frozenColCount,a=i.frozenTrailingColCount,l=null===(e=null==r?void 0:r.facet)||void 0===e?void 0:e.layoutResult.colNodes.filter((function(t){return Gb(t)})),s=Fb(l,o,a),u=s.colCount,c=s.trailingColCount;return Bb(Ub(t).colIndex,u)?this.frozenColGroup:Db(Ub(t).colIndex,c,null===(n=null==r?void 0:r.facet)||void 0===n?void 0:n.layoutResult.colLeafNodes.length)?this.frozenTrailingColGroup:this.scrollGroup},e.prototype.isColCellInRect=function(e){var n,r,i=this.headerConfig.spreadsheet,o=null==i?void 0:i.options,a=o.frozenColCount,l=o.frozenTrailingColCount,s=null===(n=null==i?void 0:i.facet)||void 0===n?void 0:n.layoutResult.colLeafNodes.length,u=null===(r=null==i?void 0:i.facet)||void 0===r?void 0:r.layoutResult.colNodes.filter((function(t){return Gb(t)})),c=Fb(u,a,l),h=c.colCount,d=c.trailingColCount;return!(!Bb(Ub(e).colIndex,h)&&!Db(Ub(e).colIndex,d,s))||t.prototype.isColCellInRect.call(this,e)},e.prototype.clip=function(){this.scrollGroup.setClip({type:"rect",attrs:this.getScrollGroupClipBBox()})},e}(GO),rI=function(t){function e(e){var n,r=t.call(this,e)||this;r.frozenGroupInfo=((n={})[Ra.FROZEN_COL]={width:0},n[Ra.FROZEN_ROW]={height:0},n[Ra.FROZEN_TRAILING_ROW]={height:0},n[Ra.FROZEN_TRAILING_COL]={width:0},n),r.panelScrollGroupIndexes=[],r.onSortHandler=function(t){var e=r.spreadsheet,n=t;Array.isArray(t)||(n=[t]);var i=e.dataCfg.sortParams||[];n=n.map((function(t){var e,n,r=bl(bl({},t),{sortFieldId:null!==(e=t.sortKey)&&void 0!==e?e:t.sortFieldId}),o=null!==(n=i.find((function(t){return t.sortFieldId===r.sortFieldId})))&&void 0!==n?n:{};return bl(bl({},o),r)}));var o=i.filter((function(t){return!n.find((function(e){return e.sortFieldId===t.sortFieldId}))}));Fw(e.dataCfg,"sortParams",Tl(Tl([],El(o),!1),El(n),!1)),e.setDataCfg(e.dataCfg),e.render(!0),e.emit(Qo.RANGE_SORTED,e.dataSet.getDisplayDataSet())},r.onFilterHandler=function(t){var e=r.spreadsheet,n=!t.filteredValues||0===t.filteredValues.length,i=e.dataCfg.filterParams||[],o=i.findIndex((function(e){return e.filterKey===t.filterKey}));-1!==o?n?i.splice(o,1):i[o]=t:i.push(t),Fw(e.dataCfg,"filterParams",i),e.render(!0),e.emit(Qo.RANGE_FILTERED,e.dataSet.getDisplayDataSet())},r.initFrozenGroupPosition=function(){var t=r.getScrollOffset(),e=t.scrollY,n=t.scrollX,i=r.getPaginationScrollY();zb(r.spreadsheet.frozenRowGroup,r.cornerBBox.width-n,r.cornerBBox.height-i),zb(r.spreadsheet.frozenColGroup,r.cornerBBox.width,r.cornerBBox.height-e-i),zb(r.spreadsheet.frozenTrailingColGroup,r.cornerBBox.width,r.cornerBBox.height-e-i),zb(r.spreadsheet.frozenTopGroup,r.cornerBBox.width,r.cornerBBox.height-i)},r.getTotalHeightForRange=function(t,e){if(t<0||e<0)return 0;if(r.rowOffsets)return r.rowOffsets[e+1]-r.rowOffsets[t];for(var n=0,i=t;i<e+1;i++){n+=r.getDefaultCellHeight()}return n},r.getShadowFill=function(t){var e,n,i=Fh(r.cfg,"spreadsheet.theme.splitLine");return"l (".concat(t,") 0:").concat(null===(e=i.shadowColors)||void 0===e?void 0:e.left," 1:").concat(null===(n=i.shadowColors)||void 0===n?void 0:n.right)},r.renderFrozenGroupSplitLine=function(t,e){var n,i=r.panelBBox,o=i.width,a=i.height,l=i.viewportWidth,s=i.viewportHeight,u=r.cornerBBox.height,c=r.layoutResult.colNodes.filter((function(t){return Gb(t)})),h=r.getCellRange(),d=h.end-h.start,f=Jb(r.spreadsheet.options,c.length,d),p=f.frozenRowCount,v=f.frozenColCount,g=f.frozenTrailingColCount,y=f.frozenTrailingRowCount,m=Math.floor(e-r.getPaginationScrollY()),C=Math.max(0,Mg(r.viewCellWidths)-l),w=Math.max(0,r.viewCellHeights.getCellOffsetY(h.end+1)-r.viewCellHeights.getCellOffsetY(h.start)-s);null===(n=r.foregroundGroup.findById(ya))||void 0===n||n.remove();var x,S,b,_,L=Fh(r.cfg,"spreadsheet.theme.splitLine"),E=r.foregroundGroup.addGroup({id:ya,zIndex:4}),T={lineWidth:null==L?void 0:L.verticalBorderWidth,stroke:null==L?void 0:L.verticalBorderColor,opacity:null==L?void 0:L.verticalBorderColorOpacity},O={lineWidth:null==L?void 0:L.horizontalBorderWidth,stroke:null==L?void 0:L.horizontalBorderColor,opacity:null==L?void 0:L.horizontalBorderColorOpacity};v>0&&(r_(E,{x1:x=c.reduce((function(t,e,n){return n<v?t+e.width:t}),0),x2:x,y1:u,y2:u+(S=y>0?a:s)},bl({},T)),L.showShadow&&t>0&&E.addShape("rect",{attrs:{x:x,y:u,width:L.shadowWidth,height:S,fill:r.getShadowFill(0)}}));p>0&&(r_(E,{x1:0,x2:_=g>0?o:l,y1:b=u+r.getTotalHeightForRange(h.start,h.start+p-1),y2:b},bl({},O)),L.showShadow&&m>0&&E.addShape("rect",{attrs:{x:0,y:b,width:_,height:L.shadowWidth,fill:r.getShadowFill(90)}}));g>0&&(r_(E,{x1:x=c[c.length-g].x,x2:x,y1:u,y2:u+(S=y?a:s)},bl({},T)),L.showShadow&&Math.floor(t)<Math.floor(C)&&E.addShape("rect",{attrs:{x:x-L.shadowWidth,y:u,width:L.shadowWidth,height:S,fill:r.getShadowFill(180)}}));y>0&&(r_(E,{x1:0,x2:_=g>0?o:l,y1:b=r.panelBBox.maxY-r.getTotalHeightForRange(h.end-y+1,h.end),y2:b},bl({},O)),L.showShadow&&m<Math.floor(w)&&E.addShape("rect",{attrs:{x:0,y:b-L.shadowWidth,width:_,height:L.shadowWidth,fill:r.getShadowFill(270)}}));r.foregroundGroup.sort()},r.renderFrozenPanelCornerGroup=function(){var t=r.layoutResult.colNodes.filter((function(t){return Gb(t)})),e=r.getCellRange(),n=Jb(r.spreadsheet.options,t.length,e.end-e.start+1),i=n.frozenRowCount,o=n.frozenColCount,a=n.frozenTrailingRowCount,l=n.frozenTrailingColCount,s=Fb(t,o,l),u=function(t,e,n){for(var r,i=t.frozenColCount,o=t.frozenRowCount,a=t.frozenTrailingColCount,l=t.frozenTrailingRowCount,s=((r={})[Oa.TOP]=[],r[Oa.BOTTOM]=[],r),u=0;u<i;u++){for(var c=n.start;c<n.start+o;c++)s[Oa.TOP].push({x:u,y:c});if(l>0)for(c=0;c<l;c++){var h=n.end-c;s[Oa.BOTTOM].push({x:u,y:h})}}for(u=0;u<a;u++){var d=e-1-u;for(c=n.start;c<n.start+o;c++)s[Oa.TOP].push({x:d,y:c});if(l>0)for(c=0;c<l;c++)h=n.end-c,s[Oa.BOTTOM].push({x:d,y:h})}return s}({frozenRowCount:i,frozenColCount:s.colCount,frozenTrailingRowCount:a,frozenTrailingColCount:s.trailingColCount},r.layoutResult.colLeafNodes.length,e);Object.keys(u).forEach((function(t){var e=u[t],n=r.spreadsheet[Va[t]];n&&e.forEach((function(t){r.addFrozenCell(t.x,t.y,n)}))}))},r.addFrozenCell=function(t,e,n){var i=r.layoutResult.getCellMeta(e,t);if(i.isFrozenCorner=!0,i){var o=r.cfg.dataCell(i);n.add(o)}},r.getRealFrozenColumns=function(t,e){var n,i=t,o=e;if(t||e){var a=r.layoutResult.colsHierarchy.getNodes();a=a.filter((function(t){return Gb(t)})),i=(n=Fb(a,t,e)).colCount,o=n.trailingColCount}return{colCount:i,trailingColCount:o}},r.addCell=function(t){var e=r.spreadsheet.options,n=e.frozenRowCount,i=e.frozenColCount,o=e.frozenTrailingRowCount,a=e.frozenTrailingColCount,l=r.layoutResult.colsHierarchy.getLeaves().length,s=r.getCellRange(),u=r.getRealFrozenColumns(i,a),c=u.colCount,h=u.trailingColCount,d=function(t,e,n,r){var i=e.frozenColCount,o=e.frozenRowCount,a=e.frozenTrailingColCount,l=e.frozenTrailingRowCount,s=t.colIndex,u=t.rowIndex;return kb(u,r.start,o)?Oa.ROW:Nb(u,r.end,l)?Oa.TRAILING_ROW:Bb(s,i)?Oa.COL:Db(s,a,n)?Oa.TRAILING_COL:Oa.SCROLL}(t.getMeta(),{frozenRowCount:n,frozenColCount:c,frozenTrailingRowCount:o,frozenTrailingColCount:h},l,s),f=Va[d];f&&r.spreadsheet[f].add(t)},r.getFrozenOptions=function(){var t=r.layoutResult.colLeafNodes.length,e=r.getCellRange();return Jb(r.cfg,t,e.end-e.start+1)};var i=r.spreadsheet;return i.on(Qo.RANGE_SORT,r.onSortHandler),i.on(Qo.RANGE_FILTER,r.onFilterHandler),r}return Sl(e,t),e.prototype.getContentHeight=function(){var t=this.getViewCellHeights().getTotalHeight,e=this.layoutResult.colsHierarchy;return t()+e.height},Object.defineProperty(e.prototype,"dataCellTheme",{get:function(){return this.spreadsheet.theme.dataCell.cell},enumerable:!1,configurable:!0}),e.prototype.destroy=function(){var e=this.spreadsheet;e.off(Qo.RANGE_SORT,this.onSortHandler),e.off(Qo.RANGE_FILTER,this.onFilterHandler),t.prototype.destroy.call(this)},e.prototype.calculateCornerBBox=function(){var t=this.layoutResult.colsHierarchy,e=Math.floor(t.height);this.cornerBBox=new HO(this),this.cornerBBox.height=e,this.cornerBBox.maxY=e},e.prototype.doLayout=function(){var t=this,e=this.cfg,n=e.dataSet,r=e.spreadsheet,i=new rb,o=tI({isRowHeader:!1,facetCfg:this.cfg}),a=o.leafNodes,l=o.hierarchy;this.calculateColNodesCoordinate(a,l);return{colNodes:l.getNodes(),colsHierarchy:l,rowNodes:i.getNodes(),rowsHierarchy:i,rowLeafNodes:i.getLeaves(),colLeafNodes:a,getCellMeta:function(e,i){var o,l,s=t.cfg.showSeriesNumber,u=a[i],c=t.getCellHeight(e),h=t.getCellRange(),d=Jb(t.cfg,a.length,h.end-h.start+1).frozenTrailingRowCount,f=u.x,p=t.viewCellHeights.getCellOffsetY(e);return Nb(e,h.end,d)&&(p=t.panelBBox.maxY-t.getTotalHeightForRange(e,h.end)),l=s&&u.field===la?e+1:n.getCellData({query:{col:u.field,rowIndex:e}}),{spreadsheet:r,x:f,y:p,width:u.width,height:c,data:(o={},o[u.field]=l,o),rowIndex:e,colIndex:i,isTotals:!1,colId:u.id,rowId:String(e),valueField:u.field,fieldValue:l,id:cL(String(e),u.id)}},spreadsheet:r}},e.prototype.getAdaptiveColWidth=function(t){var e=this.cfg.cellCfg,n=this.cfg.showSeriesNumber;if(this.spreadsheet.getLayoutWidthType()!==yl.Compact){var r=this.getSeriesNumberWidth(),i=t.length-(n?1:0),o=this.getCanvasHW().width-r;return Math.max(null==e?void 0:e.width,o/Math.max(1,i))}return null==e?void 0:e.width},e.prototype.getColNodeHeight=function(t,e){var n=this.cfg.colCfg,r=Fy(null==n?void 0:n.heightByField)[0]||(null==n?void 0:n.height);if(!e)return r;if(t.children&&t.children.length)return r;for(;t.parent;)e-=Gb(t)?0:r,t=t.parent;return e},e.prototype.calculateColNodesCoordinate=function(t,e){var n,r,i,o,a,l,s=nb.blankNode(),u=e.getNodes();try{for(var c=Ll(e.sampleNodesForAllLevels),h=c.next();!h.done;h=c.next()){var d=h.value;d.height=this.getColNodeHeight(d),e.height+=d.height}}catch(S){n={error:S}}finally{try{h&&!h.done&&(r=c.return)&&r.call(c)}finally{if(n)throw n.error}}for(var f=this.getAdaptiveColWidth(t),p=0,v=0;v<u.length;v++){(x=u[v]).isLeaf&&(x.colIndex=p,p+=1,x.x=s.x+s.width,x.width=this.calculateColLeafNodesWidth(x,f),sb(this.cfg,null,x),e.width+=x.width,s=x),0===x.level?x.y=0:x.y=null!==(a=(null===(i=x.parent)||void 0===i?void 0:i.y)+(null===(o=x.parent)||void 0===o?void 0:o.height))&&void 0!==a?a:0,x.height=this.getColNodeHeight(x,e.height)}var g=u.filter((function(t){return Gb(t)})),y=Jb(null===(l=this.spreadsheet)||void 0===l?void 0:l.options,g.length).frozenTrailingColCount;s=nb.blankNode();var m=this.getCanvasHW().width;if(y>0){var C=Fb(g,0,y).trailingColCount,w=u.filter((function(t){return t.isLeaf}));for(v=1;v<=C;v++){var x;(x=w[w.length-v]).x=1===v?m-x.width:s.x-x.width,s=x}}this.autoCalculateColNodeWidthAndX(t)},e.prototype.autoCalculateColNodeWidthAndX=function(t){for(var e=null,n=t.slice(0);n.length;){var r=n.shift().parent;e!==r&&r&&(n.push(r),r.x=r.children[0].x,r.width=r.children.map((function(t){return t.width})).reduce((function(t,e){return t+e}),0),e=r)}},e.prototype.calculateColLeafNodesWidth=function(t,e){var n=this.cfg,r=n.colCfg,i=n.dataSet,o=n.spreadsheet,a=this.spreadsheet.getLayoutWidthType(),l=this.getCellDraggedWidth(t);if(_m(l))return l;var s,u=this.getCellCustomWidth(t,null==r?void 0:r.width);if(_m(u))return u;if(a===yl.Compact){var c=i.getDisplayDataSet(),h=i.getFieldFormatter(t.field),d=Km(null==c?void 0:c.slice(0,50).map((function(e){var n;return"".concat(null!==(n=null==h?void 0:h(e[t.field]))&&void 0!==n?n:e[t.field])})),(function(t){return o.measureTextWidthRoughly(t)}));cb.getInstance().logger("Max Label In Col:",t.field,d);var f=o.theme.colCell.bolderText,p=o.theme.dataCell,v=p.text,g=p.cell,y=o.measureTextWidth(d,v)+g.padding.left+g.padding.right+1,m=o.measureTextWidth(t.label,f)+aE(this.spreadsheet,t,o.theme.colCell);s=Math.max(m,y)}else s=e;return t.field===la&&(s=this.getSeriesNumberWidth()),s},e.prototype.getDefaultCellHeight=function(){var t=this.cfg.cellCfg;return null==t?void 0:t.height},e.prototype.getCellHeight=function(t){if(this.rowOffsets){var e=Fh(this.spreadsheet,"options.style.rowCfg.heightByField",{}),n=null==e?void 0:e[String(t)];if(_m(n))return n}return this.getDefaultCellHeight()},e.prototype.initRowOffsets=function(){var t=this,e=this.cfg.dataSet,n=Fh(this.spreadsheet,"options.style.rowCfg.heightByField",{});if(Object.keys(n).length){var r=e.getDisplayDataSet();this.rowOffsets=[0];var i=0;r.forEach((function(e,r){var o,a=null!==(o=null==n?void 0:n[String(r)])&&void 0!==o?o:t.getDefaultCellHeight(),l=i+a;t.rowOffsets.push(l),i=l}))}},e.prototype.getViewCellHeights=function(){var t=this,e=this.cfg.dataSet;this.initRowOffsets();var n=this.getDefaultCellHeight();return{getTotalHeight:function(){return t.rowOffsets?Mg(t.rowOffsets):n*e.getDisplayDataSet().length},getCellOffsetY:function(e){if(e<=0)return 0;if(t.rowOffsets)return t.rowOffsets[e];for(var r=0,i=0;i<e;i++)r+=n;return r},getTotalLength:function(){return e.getDisplayDataSet().length},getIndexRange:function(e,r){if(t.rowOffsets)return IO(t.rowOffsets,e,r);var i=Math.floor(e/n),o=r%n==0?r/n-1:Math.floor(r/n);return{start:Math.max(0,i),end:Math.max(0,o)}}}},e.prototype.init=function(){t.prototype.init.call(this);var e=this.panelBBox,n=e.width,r=e.height;this.spreadsheet.panelGroup.setClip({type:"rect",attrs:{x:0,y:this.cornerBBox.height,width:n,height:r}})},e.prototype.getColHeader=function(){if(!this.columnHeader){var t=this.panelBBox,e=t.x,n=t.width,r=t.viewportHeight,i=t.viewportWidth;return new nI({width:n,height:this.cornerBBox.height,viewportWidth:i,viewportHeight:r,cornerWidth:this.cornerBBox.width,position:{x:e,y:0},data:this.layoutResult.colNodes,scrollContainsRowHeader:this.cfg.spreadsheet.isScrollContainsRowHeader(),sortParam:this.cfg.spreadsheet.store.get("sortParam"),spreadsheet:this.spreadsheet})}return this.columnHeader},e.prototype.updateRowResizeArea=function(){var t=this.spreadsheet,e=t.foregroundGroup,n=Fh(t.options,"interaction.resize");if(fm(n)?n:null==n?void 0:n.rowCellVertical){var r=e.findById(va),i=e.findById(ga);r&&r.set("children",[]),i&&i.set("children",[]),AO(this.panelGroup.getChildren(),uE).filter((function(t){return t.shouldDrawResizeArea()})).forEach((function(t){t.drawResizeArea()}))}},e.prototype.render=function(){this.calculateFrozenGroupInfo(),this.renderFrozenPanelCornerGroup(),t.prototype.render.call(this),this.initFrozenGroupPosition()},e.prototype.calculateFrozenGroupInfo=function(){var t=this.getFrozenOptions(),e=t.frozenColCount,n=t.frozenRowCount,r=t.frozenTrailingColCount,i=t.frozenTrailingRowCount,o=this.layoutResult.colNodes.filter((function(t){return Gb(t)})),a=this.viewCellHeights,l=this.getCellRange(),s=this.frozenGroupInfo,u=s.frozenCol,c=s.frozenTrailingCol,h=s.frozenRow,d=s.frozenTrailingRow;e>0&&(u.width=o[e-1].x+o[e-1].width-0,u.range=[0,e-1]),n>0&&(h.height=a.getCellOffsetY(l.start+n)-a.getCellOffsetY(l.start),h.range=[l.start,l.start+n-1]),r>0&&(c.width=o[o.length-1].x-o[o.length-r].x+o[o.length-1].width,c.range=[o.length-r,o.length-1]),i>0&&(d.height=a.getCellOffsetY(l.end+1)-a.getCellOffsetY(l.end+1-i),d.range=[l.end-i+1,l.end])},e.prototype.getRowHeader=function(){return null},e.prototype.getSeriesNumberHeader=function(){return null},e.prototype.translateRelatedGroups=function(e,n,r){var i=this,o=this.spreadsheet,a=o.frozenColGroup,l=o.frozenTrailingColGroup;[o.frozenRowGroup,o.frozenTrailingRowGroup].forEach((function(t){Hb(t,i.cornerBBox.width-e)})),[a,l].forEach((function(t){!function(t,e){var n,r=null==t?void 0:t.getMatrix(),i=null!==(n=null==r?void 0:r[7])&&void 0!==n?n:0;null==t||t.translate(0,e-i)}(t,i.cornerBBox.height-n)})),t.prototype.translateRelatedGroups.call(this,e,n,r),this.updateRowResizeArea(),this.renderFrozenGroupSplitLine(e,n)},e.prototype.calculateXYIndexes=function(t,e){var n=this.layoutResult.colLeafNodes.length,r=this.getCellRange(),i=this.panelBBox,o=i.viewportHeight,a=i.viewportWidth,l=this.getFrozenOptions(),s=l.frozenColCount,u=l.frozenRowCount,c=l.frozenTrailingColCount,h=l.frozenTrailingRowCount,d={width:a,height:o,x:0,y:0};if(c>0||s>0){var f=this.frozenGroupInfo,p=f.frozenTrailingCol,v=f.frozenCol;d.width-=p.width+v.width,d.x+=v.width}if(h>0||u>0){var g=this.frozenGroupInfo,y=g.frozenRow,m=g.frozenTrailingRow;d.height<y.height+m.height?(d.height=0,d.y=0):(d.height-=y.height+m.height,d.y+=y.height)}var C=Pb(t,e,this.viewCellWidths,this.viewCellHeights,d,this.getRealScrollX(this.cornerBBox.width));this.panelScrollGroupIndexes=C;var w=this.getRealFrozenColumns(s,c);return function(t,e,n,r){var i=e.frozenColCount,o=e.frozenRowCount,a=e.frozenTrailingColCount,l=e.frozenTrailingRowCount,s=Tl([],El(t),!1);Bb(s[0],i)&&(s[0]=i),Db(s[1],a,n)&&(s[1]=n-a-1),kb(s[2],r.start,o)&&(s[2]=r.start+o),Nb(s[3],r.end,l)&&(s[3]=r.end-l);var u=Tl([],El(s),!1);u[2]=r.start,u[3]=r.start+o-1;var c=Tl([],El(s),!1);c[0]=0,c[1]=i-1;var h=Tl([],El(s),!1);h[2]=r.end+1-l,h[3]=r.end;var d=Tl([],El(s),!1);return d[0]=n-a,d[1]=n-1,{center:s,frozenRow:u,frozenCol:c,frozenTrailingCol:d,frozenTrailingRow:h}}(C,{frozenColCount:w.colCount,frozenRowCount:u,frozenTrailingColCount:w.trailingColCount,frozenTrailingRowCount:h},n,r)},e.prototype.clip=function(t,e){var n,r,i=this.layoutResult.colLeafNodes,o=this.getPaginationScrollY(),a=this.spreadsheet,l=a.frozenRowGroup,s=a.frozenColGroup,u=a.frozenTrailingColGroup,c=a.frozenTrailingRowGroup,h=a.panelScrollGroup,d=s.getBBox().width,f=l.getBBox().height,p=u.getBBox(),v=c.getBBox().height,g=this.panelBBox.width-d-u.getBBox().width,y=this.panelBBox.height-f-v;h.setClip({type:"rect",attrs:{x:t+d,y:e+f,width:g,height:y}}),l.setClip({type:"rect",attrs:{x:t+d,y:o,width:g,height:f}}),c.setClip({type:"rect",attrs:{x:t+d,y:c.getBBox().minY,width:g,height:v}});var m={y:e+f,height:y};s.setClip({type:"rect",attrs:bl(bl({},m),{x:0,width:d})}),u.setClip({type:"rect",attrs:bl(bl({},m),{x:p.minX,width:p.width})});var C=this.spreadsheet.foregroundGroup.findById(va);C&&C.setClip({type:"rect",attrs:{x:0,y:f+this.cornerBBox.height,width:null!==(r=null===(n=null==i?void 0:i[0])||void 0===n?void 0:n.width)&&void 0!==r?r:0,height:y}})},e.prototype.updatePanelScrollGroup=function(){var e=this;t.prototype.updatePanelScrollGroup.call(this),[Ra.FROZEN_COL,Ra.FROZEN_ROW,Ra.FROZEN_TRAILING_COL,Ra.FROZEN_TRAILING_ROW].forEach((function(t){if(e.frozenGroupInfo[t].range){var n=[],r=[];if(t.toLowerCase().includes("row")){var i=El(e.frozenGroupInfo[t].range,2),o=i[0],a=i[1];if(n=e.gridInfo.cols,r=DO(o,a,e.viewCellHeights),t===Ra.FROZEN_TRAILING_ROW){var l=e.spreadsheet.frozenTrailingRowGroup.getBBox().minY;r=function(t,e,n,r){var i=DO(t,e,r),o=r.getCellOffsetY(t);return i.map((function(t){return t-o+n}))}(o,a,Math.ceil(l),e.viewCellHeights)}}else{var s=El(e.frozenGroupInfo[t].range,2),u=s[0],c=s[1],h=e.layoutResult.colNodes.filter((function(t){return Gb(t)}));n=BO(u,c,h),r=e.gridInfo.rows}e.spreadsheet["".concat(t,"Group")].updateGrid({cols:n,rows:r},"".concat(t,"Group"))}}))},e}(XO),iI=function(t){function e(e){var n=t.call(this,e)||this;return n.gridInfo={cols:[],rows:[]},n.updateGrid=function(t,e){void 0===e&&(e=Sa);var r=n.getBBox(),i=n.s2,o=i.theme,a=i.isTableMode,l=o.dataCell.cell,s=a()&&(e===Sa||e===ca);n.gridGroup&&n.findById(e)||(n.gridGroup=n.addGroup({id:e})),n.gridGroup.clear(),n.gridInfo=t,s&&n.gridInfo.cols.unshift(0);var u=l.verticalBorderWidth,c=l.verticalBorderWidth/2;n.gridInfo.cols.forEach((function(t){r_(n.gridGroup,{x1:t,x2:t,y1:Math.ceil(r.minY+c),y2:Math.floor(r.maxY-c)},{stroke:l.verticalBorderColor,strokeOpacity:l.verticalBorderColorOpacity,lineWidth:u,lineCap:Aa})}));var h=l.horizontalBorderWidth,d=l.horizontalBorderWidth/2;n.gridInfo.rows.forEach((function(t){r_(n.gridGroup,{x1:Math.ceil(r.minX+d),x2:Math.floor(r.maxX-d),y1:t,y2:t},{stroke:l.horizontalBorderColor,strokeOpacity:l.horizontalBorderColorOpacity,lineWidth:h,lineCap:Aa})})),n.gridGroup.toFront()},n.s2=e.s2,n}return Sl(e,t),e}(yo),oI=function(t){function e(e){var n=t.call(this,e)||this;return n.initMergedCellsGroup(),n}return Sl(e,t),e.prototype.initMergedCellsGroup=function(){this.mergedCellsGroup&&this.findById(sa)||(this.mergedCellsGroup=this.addGroup({id:sa}))},e.prototype.updateMergedCells=function(){this.initMergedCellsGroup(),SL(this.s2,this.mergedCellsGroup),this.mergedCellsGroup.toFront()},e.prototype.addMergeCell=function(t){var e;null===(e=this.mergedCellsGroup)||void 0===e||e.add(t)},e.prototype.update=function(t){this.updateGrid(t),this.updateMergedCells()},e}(iI),aI=function(){function t(t){var e=this;this.isLinkFieldText=function(t){var n=e.getCellAppendInfo(t);return null==n?void 0:n.isLinkFieldText},this.spreadsheet=t,this.bindEvents()}return t.prototype.getCellAppendInfo=function(t){var e,n;return(null===(e=null==t?void 0:t.attr)||void 0===e?void 0:e.call(t,"appendInfo"))||(null===(n=null==t?void 0:t.attrs)||void 0===n?void 0:n.appendInfo)||{}},t.prototype.reset=function(){},t}(),lI=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Sl(e,t),e.prototype.bindEvents=function(){this.bindDataCellClick()},e.prototype.bindDataCellClick=function(){var t=this;this.spreadsheet.on(Qo.DATA_CELL_CLICK,(function(e){var n;e.stopPropagation();var r=t.spreadsheet.interaction;if(r.clearHoverTimer(),!r.hasIntercepts([Ja.CLICK]))if(t.isLinkFieldText(e.target))t.emitLinkFieldClickEvent(e);else{var i=t.spreadsheet.getCell(e.target),o=i.getMeta();if(o)if(r.addIntercepts([Ja.HOVER]),r.isSelectedCell(i))1===(null===(n=e.originalEvent)||void 0===n?void 0:n.detail)&&r.reset();else{r.changeState({cells:[fE(i)],stateName:Ga.SELECTED,onUpdateCells:yE}),t.spreadsheet.emit(Qo.GLOBAL_SELECTED,[i]),t.showTooltip(e,o);var a=o.rowId,l=o.colId,s=o.spreadsheet,u=r.getSelectedCellHighlight(),c=u.colHeader,h=u.rowHeader;if(c&&aL(l,r.getAllColHeaderCells(),Ga.SELECTED),h&&a){var d=function(t,e){var n=e.interaction,r=e.facet,i=e.options;if(e.isTableMode()){if(!i.showSeriesNumber)return[];var o=r.layoutResult.colLeafNodes[0].id,a=cL(String(t.rowIndex),o),l=[],s=n.getAllCells().find((function(t){return t.getMeta().id===a}));return s&&s instanceof cE&&l.push(s),l}return oL(t.rowId,n.getAllRowHeaderCells(),e.isHierarchyTreeType())}(o,s);Pg(d,(function(t){t.updateByState(Ga.SELECTED)}))}}}}))},e.prototype.getTooltipOperator=function(t,e){var n=this,r={key:"trend",text:VS("趋势"),icon:"Trend"},i=this.spreadsheet.getCell(t.target),o=SO(this.spreadsheet,t).operation,a=o.trend&&bl(bl({},r),{onClick:function(){n.spreadsheet.emit(Qo.DATA_CELL_TREND_ICON_CLICK,bl(bl({},e),{record:n.spreadsheet.isTableMode()?n.spreadsheet.dataSet.getCellData({query:{rowIndex:e.rowIndex}}):void 0})),n.spreadsheet.hideTooltip()}});return bO(o,{defaultMenus:[a],cell:i})},e.prototype.showTooltip=function(t,e){var n=e.data,r=e.isTotals,i=void 0!==r&&r,o=e.value,a=e.fieldValue,l=e.field,s=e.valueField,u=n,c=this.spreadsheet.isTableMode(),h=[(c?bl(bl({},u),{value:o||a,valueField:l||s}):u)||bl(bl({},e.rowQuery),e.colQuery)],d=this.getTooltipOperator(t,e);this.spreadsheet.showTooltipWithInfo(t,h,{isTotals:i,operator:d,enterable:!0,hideSummary:!0,showSingleTips:c})},e.prototype.emitLinkFieldClickEvent=function(t){var e=this.getCellAppendInfo(t.target).cellData,n=e.valueField,r=e.data;this.spreadsheet.emit(Qo.GLOBAL_LINK_FIELD_JUMP,{key:n,cellData:e,record:Object.assign({rowIndex:e.rowIndex},r)})},e}(aI),sI=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Sl(e,t),e.prototype.bindEvents=function(){this.bindDataCellClick()},e.prototype.bindDataCellClick=function(){var t=this;this.spreadsheet.on(Qo.MERGED_CELLS_CLICK,(function(e){e.stopPropagation();var n=t.spreadsheet.interaction;n.hasIntercepts([Ja.CLICK])||n.addIntercepts([Ja.HOVER])}))},e}(aI),uI=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isMultiSelection=!1,e.handleRowColClick=function(t){if(t.stopPropagation(),!e.isLinkFieldText(t.target)){var n=e.spreadsheet,r=n.interaction,i=n.options,o=e.spreadsheet.getCell(t.target),a=!(!i.interaction.multiSelection||!e.isMultiSelection);r.selectHeaderCell({cell:o,isMultiSelection:a})&&e.showTooltip(t)}},e.getHideColumnField=function(t){return e.spreadsheet.isTableMode()?t.field:t.id},e}return Sl(e,t),e.prototype.bindEvents=function(){this.bindKeyboardDown(),this.bindKeyboardUp(),this.bindColCellClick(),this.bindRowCellClick(),this.bindTableColExpand(),this.bindMouseMove()},e.prototype.reset=function(){this.isMultiSelection=!1,this.spreadsheet.interaction.removeIntercepts([Ja.CLICK])},e.prototype.bindKeyboardDown=function(){var t=this;this.spreadsheet.on(Qo.GLOBAL_KEYBOARD_DOWN,(function(e){hE(e)&&(t.isMultiSelection=!0)}))},e.prototype.bindKeyboardUp=function(){var t=this;this.spreadsheet.on(Qo.GLOBAL_KEYBOARD_UP,(function(e){hE(e)&&t.reset()}))},e.prototype.bindMouseMove=function(){var t=this;this.spreadsheet.on(Qo.GLOBAL_MOUSE_MOVE,(function(e){t.isMultiSelection&&!dE(e)&&t.reset()}))},e.prototype.bindRowCellClick=function(){var t=this;this.spreadsheet.on(Qo.ROW_CELL_CLICK,(function(e){t.handleRowColClick(e)}))},e.prototype.bindColCellClick=function(){var t=this;this.spreadsheet.on(Qo.COL_CELL_CLICK,(function(e){t.handleRowColClick(e)}))},e.prototype.showTooltip=function(t){var e=SO(this.spreadsheet,t),n=e.operation;if(e.showTooltip){var r=this.spreadsheet.interaction,i=r.isSelectedState()?yy(r.getActiveCells(),(function(t){var e=t.getMeta();return rh({},e.query||{},aw(e,["colIndex","rowIndex"]))})):[],o=this.getTooltipOperator(t,n);this.spreadsheet.showTooltipWithInfo(t,i,{showSingleTips:!0,operator:o})}},e.prototype.getTooltipOperator=function(t,e){var n=this,r=this.spreadsheet.getCell(t.target),i=r.getMeta(),o=r.cellType===Ua.COL_CELL,a=1===this.spreadsheet.getColumnLeafNodes().length,l={key:"hiddenColumns",text:VS("隐藏"),icon:"EyeOutlined"},s=o&&!a&&i.isLeaf&&e.hiddenColumns&&bl(bl({},l),{onClick:function(){n.hideSelectedColumns()}});return bO(e,{defaultMenus:[s],cell:r})},e.prototype.bindTableColExpand=function(){var t=this;this.spreadsheet.on(Qo.LAYOUT_COLS_EXPANDED,(function(e){t.handleExpandIconClick(e)}))},e.prototype.hideSelectedColumns=function(){var t=this.spreadsheet.interaction.getActiveCells().map((function(t){return t.getMeta()})).map(this.getHideColumnField);EL(this.spreadsheet,t,!0)},e.prototype.handleExpandIconClick=function(t){var e=this.spreadsheet.store.get("hiddenColumnsDetail",[]),n=(py(e,(function(e){var n=e.displaySiblingNode;return TL(n,t.id)}))||{}).hideColumnNodes,r=void 0===n?[]:n,i=this.spreadsheet.options.interaction.hiddenColumnFields,o=r.map(this.getHideColumnField),a=Rg(i,o),l=e.filter((function(e){var n=e.displaySiblingNode;return!TL(n,t.id)}));this.spreadsheet.setOptions({interaction:{hiddenColumnFields:a}}),this.spreadsheet.store.set("hiddenColumnsDetail",l),this.spreadsheet.interaction.reset(),this.spreadsheet.render(!1)},e}(aI),cI=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.getRowData=function(t){var n,r=t.getHeadLeafChild(),i=e.spreadsheet.dataSet.getMultiData(null==r?void 0:r.query,null==r?void 0:r.isTotals,!0)[0];return bl(bl({},i),{rowIndex:null!==(n=t.rowIndex)&&void 0!==n?n:r.rowIndex})},e}return Sl(e,t),e.prototype.bindEvents=function(){this.bindRowCellClick()},e.prototype.bindRowCellClick=function(){var t=this;this.spreadsheet.on(Qo.ROW_CELL_CLICK,(function(e){if(!t.spreadsheet.interaction.hasIntercepts([Ja.CLICK])&&t.isLinkFieldText(e.target)){var n=t.getCellAppendInfo(e.target).cellData,r=n.key,i=t.getRowData(n);t.spreadsheet.emit(Qo.GLOBAL_LINK_FIELD_JUMP,{key:r,cellData:n,record:i})}}))},e}(aI),hI=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Sl(e,t),e.prototype.bindEvents=function(){this.bindCornerCellClick()},e.prototype.bindCornerCellClick=function(){var t=this;this.spreadsheet.on(Qo.CORNER_CELL_CLICK,(function(e){var n,r=t.spreadsheet.interaction,i=t.spreadsheet.getCell(e.target);if(i){var o=i.getMeta(),a=t.getRowNodesByField(null==o?void 0:o.field),l=null===(n=a[0])||void 0===n?void 0:n.belongsCell,s=t.getRowCells(a);if(l&&r.isSelectedCell(l))return r.reset(),void t.spreadsheet.emit(Qo.GLOBAL_SELECTED,r.getActiveCells());Cm(a)||Cm(s)||(r.addIntercepts([Ja.HOVER]),r.changeState({cells:s,stateName:Ga.SELECTED}),r.highlightNodes(a),t.showTooltip(e),t.spreadsheet.emit(Qo.GLOBAL_SELECTED,r.getActiveCells()))}}))},e.prototype.getRowNodesByField=function(t){return this.spreadsheet.getRowNodes().filter((function(e){return e.field===t}))},e.prototype.getRowCells=function(t){return t.map((function(t){return{id:t.id,colIndex:-1,rowIndex:-1,type:Ua.ROW_CELL}}))},e.prototype.showTooltip=function(t){var e=this.spreadsheet.interaction.getActiveCells();this.spreadsheet.showTooltipWithInfo(t,[],{data:{summaries:[{selectedData:e,name:"",value:null}]}})},e}(aI),dI=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Sl(e,t),e.prototype.bindEvents=function(){this.bindCornerCellHover(),this.bindDataCellHover(),this.bindRowCellHover(),this.bindColCellHover()},e.prototype.updateRowColCells=function(t){var e=t.rowId,n=t.colId,r=this.spreadsheet.interaction,i=r.getHoverHighlight(),o=i.rowHeader;(i.colHeader&&aL(n,r.getAllColHeaderCells(),Ga.HOVER),o&&e)&&Pg(oL(e,r.getAllRowHeaderCells(),this.spreadsheet.isHierarchyTreeType()),(function(t){t.updateByState(Ga.HOVER)}))},e.prototype.changeStateToHoverFocus=function(t,e,n){var r,i=this,o=this.spreadsheet.interaction,a=this.spreadsheet.options.interaction.hoverFocus;o.clearHoverTimer();var l=function(){if(!o.hasIntercepts([Ja.HOVER])){o.changeState({cells:[fE(t)],stateName:Ga.HOVER_FOCUS});var r=i.spreadsheet.isTableMode(),a={isTotals:n.isTotals,enterable:!0,hideSummary:!0,showSingleTips:r},l=o.getHoverHighlight(),s=l.rowHeader,u=l.colHeader;(s||u)&&i.updateRowColCells(n);var c=i.getCellData(n,r);i.spreadsheet.showTooltipWithInfo(e,c,a)}},s=800;if(fm(a)||(s=null!==(r=null==a?void 0:a.duration)&&void 0!==r?r:800),0===s)l();else{var u=window.setTimeout((function(){return l()}),s);o.setHoverTimer(u)}},e.prototype.handleHeaderHover=function(t){var e=this.spreadsheet.getCell(t.target);if(!Cm(e)){var n=this.spreadsheet.interaction;n.clearHoverTimer(),n.isActiveCell(e)||(n.changeState({cells:[fE(e)],stateName:Ga.HOVER}),e.update(),this.showEllipsisTooltip(t,e))}},e.prototype.showEllipsisTooltip=function(t,e){if(e&&e.getActualText()!==e.getFieldValue()){var n=e.getMeta(),r={isTotals:n.isTotals,enterable:!0,hideSummary:!0,showSingleTips:true,enableFormat:this.spreadsheet.isPivotMode()},i=this.getCellData(n,true);this.spreadsheet.showTooltipWithInfo(t,i,r)}},e.prototype.getCellData=function(t,e){void 0===t&&(t={});var n=t.data,r=t.query,i=t.value,o=t.field,a=t.fieldValue,l=t.valueField,s=t.rowQuery,u=t.colQuery,c=n;return e?[bl(bl({},r),{value:i||a,valueField:o||l})]:[c||bl(bl({},s),u)]},e.prototype.bindDataCellHover=function(){var t=this;this.spreadsheet.on(Qo.DATA_CELL_HOVER,(function(e){var n=t.spreadsheet.getCell(e.target);if(!Cm(n)){var r=t.spreadsheet,i=r.interaction,o=r.options.interaction,a=null==n?void 0:n.getMeta();if(!i.isActiveCell(n)){i.changeState({cells:[fE(n)],stateName:Ga.HOVER});var l=i.getHoverHighlight(),s=l.rowHeader,u=l.colHeader;(s||u)&&t.updateRowColCells(a),o.hoverFocus&&t.changeStateToHoverFocus(n,e,a)}}}))},e.prototype.bindRowCellHover=function(){var t=this;this.spreadsheet.on(Qo.ROW_CELL_HOVER,(function(e){t.handleHeaderHover(e)}))},e.prototype.bindColCellHover=function(){var t=this;this.spreadsheet.on(Qo.COL_CELL_HOVER,(function(e){t.handleHeaderHover(e)}))},e.prototype.bindCornerCellHover=function(){var t=this;this.spreadsheet.on(Qo.CORNER_CELL_HOVER,(function(e){t.handleHeaderHover(e)}))},e}(aI),fI=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.displayedCells=[],e.brushRangeCells=[],e.brushSelectionStage=Xa.UN_DRAGGED,e.brushSelectionMinimumMoveDistance=5,e.scrollAnimationComplete=!0,e.mouseMoveDistanceFromCanvas=0,e.setMoveDistanceFromCanvas=function(t,n,r){var i=0;if(n&&(i=t.x),r){var o=t.y;i=n?Math.max(o,i):o}e.mouseMoveDistanceFromCanvas=Math.abs(i)},e.formatBrushPointForScroll=function(t,n){var r,i,o,a;void 0===n&&(n=!1);var l=t.x,s=t.y,u=e.spreadsheet.facet,c=n?u.cornerBBox:u.panelBBox,h=c.minX,d=c.maxX,f=u.panelBBox,p=f.minY,v=f.maxY,g=(null===(r=e.endBrushPoint)||void 0===r?void 0:r.x)+l,y=(null===(i=e.endBrushPoint)||void 0===i?void 0:i.y)+s,m=!0,C=!0,w=null===(a=null===(o=u.vScrollBar)||void 0===o?void 0:o.getBBox())||void 0===a?void 0:a.width;return g>d?g=d-w-2:g<h?g=h+2:m=!1,y>v?y=v-2:y<=p?y=p+2:C=!1,{x:{value:g,needScroll:m},y:{value:y,needScroll:C}}},e.rectanglesIntersect=function(t,e){return t.maxX>e.minX&&t.minX<e.maxX&&t.minY<e.maxY&&t.maxY>e.minY},e.autoScrollIntervalId=null,e.autoScrollConfig=Vp(cl),e.validateYIndex=function(t){var n,r,i=e.spreadsheet.facet,o=i.frozenGroupInfo,a=0,l=null===(n=null==o?void 0:o.frozenRow)||void 0===n?void 0:n.range;if(l&&(a=l[1]+1),t<a)return null;var s=i.getCellRange().end,u=null===(r=null==o?void 0:o.frozenTrailingRow)||void 0===r?void 0:r.range;return u&&(s=u[0]-1),t>s?null:t},e.validateXIndex=function(t){var n,r,i=e.spreadsheet.facet,o=i.frozenGroupInfo,a=0,l=null===(n=null==o?void 0:o.frozenCol)||void 0===n?void 0:n.range;if(l&&(a=l[1]+1),t<a)return null;var s=i.layoutResult.colLeafNodes.length-1,u=null===(r=null==o?void 0:o.frozenTrailingCol)||void 0===r?void 0:r.range;return u&&(s=u[0]-1),t>s?null:t},e.adjustNextColIndexWithFrozen=function(t,n){var r=e.spreadsheet,i=r.facet,o=r.dataSet,a=r.options,l=o.getDisplayDataSet().length,s=i.layoutResult.colLeafNodes.length,u=Jb(a,s,l),c=u.frozenTrailingColCount,h=u.frozenColCount,d=i.panelScrollGroupIndexes;return c>0&&n===al.SCROLL_DOWN&&Db(t,c,s)?d[1]:h>0&&n===al.SCROLL_UP&&Bb(t,h)?d[0]:t},e.adjustNextRowIndexWithFrozen=function(t,n){var r=e.spreadsheet,i=r.facet,o=r.dataSet,a=r.options,l=o.getDisplayDataSet().length,s=i.layoutResult.colLeafNodes.length,u=i.getCellRange(),c=Jb(a,s,l),h=c.frozenTrailingRowCount,d=c.frozenRowCount,f=i.panelScrollGroupIndexes;return h>0&&n===al.SCROLL_DOWN&&Nb(t,u.end,h)?f[3]:d>0&&n===al.SCROLL_UP&&kb(t,u.start,d)?f[2]:t},e.getWillScrollRowIndexDiff=function(t){return t===al.SCROLL_DOWN?sl.SCROLL_DOWN:sl.SCROLL_UP},e.getDefaultWillScrollToRowIndex=function(t){var n=e.adjustNextRowIndexWithFrozen(e.endBrushPoint.rowIndex,t)+e.getWillScrollRowIndexDiff(t);return e.validateYIndex(n)},e.getWillScrollToRowIndex=function(t){return e.getDefaultWillScrollToRowIndex(t)},e.getNextScrollDelta=function(t){var n=e.spreadsheet.facet.getScrollOffset(),r=n.scrollX,i=n.scrollY,o=0,a=0;if(t.y.scroll){var l=t.y.value>0?al.SCROLL_DOWN:al.SCROLL_UP,s=e.getWillScrollToRowIndex(l),u=function(t,e,n){var r,i,o=n.facet,a=o.viewCellHeights.getCellOffsetY,l=o.panelBBox.height,s=a(t+1);if(Tm(s))return 0;var u=null==o?void 0:o.frozenGroupInfo,c=null!==(r=null==u?void 0:u.frozenRow.height)&&void 0!==r?r:0,h=null!==(i=null==u?void 0:u.frozenTrailingRow.height)&&void 0!==i?i:0;return e===al.SCROLL_UP?a(t)-c:s-(l-h)}(s,l,e.spreadsheet)-i;a=Tm(s)||Tm(u)||Number.isNaN(u)?0:u}if(t.x.scroll){l=t.x.value>0?al.SCROLL_DOWN:al.SCROLL_UP;var c=e.adjustNextColIndexWithFrozen(e.endBrushPoint.colIndex,l),h=e.validateXIndex(c+(t.x.value>0?1:-1));o=Tm(h)?0:function(t,e,n){var r,i,o=n.facet,a=o.panelBBox.width,l=null==o?void 0:o.frozenGroupInfo,s=null!==(r=null==l?void 0:l.frozenCol.width)&&void 0!==r?r:0,u=null!==(i=null==l?void 0:l.frozenTrailingCol.width)&&void 0!==i?i:0,c=o.layoutResult.colLeafNodes[t];return e===al.SCROLL_UP?c.x-s:c.x+c.width-(a-u)}(h,l,e.spreadsheet)-r}return{x:o,y:a}},e.onScrollAnimationComplete=function(){e.scrollAnimationComplete=!0,e.brushSelectionStage!==Xa.UN_DRAGGED&&e.renderPrepareSelected(e.endBrushPoint)},e.autoScroll=function(t){if(void 0===t&&(t=!1),e.brushSelectionStage!==Xa.UN_DRAGGED&&e.scrollAnimationComplete){var n=e.autoScrollConfig,r=e.spreadsheet.facet.getScrollOffset(),i=t?"rowHeaderOffsetX":"offsetX",o={rowHeaderOffsetX:{value:r.rowHeaderScrollX,animate:!0},offsetX:{value:r.scrollX,animate:!0},offsetY:{value:r.scrollY,animate:!0}},a=e.getNextScrollDelta(n),l=a.x,s=a.y;if(0!==s||0!==l){if(n.y.scroll&&(o.offsetY.value+=s),n.x.scroll){var u=o[i];u.value+=l,u.value<0&&(u.value=0)}e.scrollAnimationComplete=!1;var c=n.x.scroll?1:3,h=Math.max(16,300-e.mouseMoveDistanceFromCanvas*c);e.spreadsheet.facet.scrollWithAnimation(o,h,e.onScrollAnimationComplete)}else e.clearAutoScroll()}},e.handleScroll=_x((function(t,n,r){if(void 0===r&&(r=!1),e.brushSelectionStage!==Xa.UN_DRAGGED){var i=e.formatBrushPointForScroll({x:t,y:n},r),o=i.x,a=o.value,l=o.needScroll,s=i.y,u=s.value,c=s.needScroll,h=e.autoScrollConfig;c&&(h.y.value=n,h.y.scroll=!0),l&&(h.x.value=t,h.x.scroll=!0),e.setMoveDistanceFromCanvas({x:t,y:n},l,c),e.renderPrepareSelected({x:a,y:u}),(c||l)&&(e.clearAutoScroll(),e.autoScroll(r),e.autoScrollIntervalId=setInterval((function(){e.autoScroll(r)}),16))}}),30),e.clearAutoScroll=function(){e.autoScrollIntervalId&&(clearInterval(e.autoScrollIntervalId),e.autoScrollIntervalId=null,e.resetScrollDelta())},e.onUpdateCells=function(t,e){return e()},e.showPrepareSelectedCells=function(){e.brushRangeCells=e.getBrushRangeCells(),e.spreadsheet.interaction.changeState({cells:yy(e.brushRangeCells,(function(t){return fE(t)})),stateName:Ga.PREPARE_SELECT,force:!0,onUpdateCells:e.onUpdateCells})},e.renderPrepareSelected=function(t){var n=t.x,r=t.y,i=e.spreadsheet.container.getShape(n,r),o=e.spreadsheet.getCell(i);if(o&&(o instanceof fL||o instanceof iE||o instanceof YL)){var a=o.getMeta(),l=a.rowIndex,s=a.colIndex;e.endBrushPoint={x:n,y:r,rowIndex:l,colIndex:s};var u=e.spreadsheet.interaction;u.addIntercepts([Ja.HOVER]),u.clearStyleIndependent(),e.isValidBrushSelection()&&(e.showPrepareSelectedCells(),e.updatePrepareSelectMask())}},e}return Sl(e,t),e.prototype.bindEvents=function(){this.bindMouseDown(),this.bindMouseMove(),this.bindMouseUp()},e.prototype.getPrepareSelectMaskTheme=function(){var t;return null===(t=this.spreadsheet.theme)||void 0===t?void 0:t.prepareSelectMask},e.prototype.initPrepareSelectMaskShape=function(){var t=this.spreadsheet.foregroundGroup;if(t){t.removeChild(this.prepareSelectMaskShape);var e=this.getPrepareSelectMaskTheme();this.prepareSelectMaskShape=t.addShape("rect",{visible:!1,attrs:{width:0,height:0,x:0,y:0,fill:null==e?void 0:e.backgroundColor,fillOpacity:null==e?void 0:e.backgroundOpacity,zIndex:5},capture:!1})}},e.prototype.setBrushSelectionStage=function(t){this.brushSelectionStage=t},e.prototype.isPointInCanvas=function(t){var e=this.spreadsheet.facet.getCanvasHW(),n=e.height,r=e.width,i=this.spreadsheet.facet.panelBBox,o=i.minX,a=i.minY;return t.x>o&&t.x<r&&t.y>a&&t.y<n},e.prototype.resetDrag=function(){this.hidePrepareSelectMaskShape(),this.setBrushSelectionStage(Xa.UN_DRAGGED)},e.prototype.isValidBrushSelection=function(){var t=this.getBrushRange(),e=t.start,n=t.end;return n.x-e.x>this.brushSelectionMinimumMoveDistance||n.y-e.y>this.brushSelectionMinimumMoveDistance},e.prototype.setDisplayedCells=function(){this.displayedCells=this.spreadsheet.interaction.getPanelGroupAllDataCells()},e.prototype.updatePrepareSelectMask=function(){var t=this.getBrushRange(),e=this.getPrepareSelectMaskPosition(t),n=e.x,r=e.y;this.prepareSelectMaskShape.attr({x:n,y:r,width:t.width,height:t.height}),this.prepareSelectMaskShape.show()},e.prototype.hidePrepareSelectMaskShape=function(){var t;null===(t=this.prepareSelectMaskShape)||void 0===t||t.hide()},e.prototype.resetScrollDelta=function(){this.autoScrollConfig=Vp(cl)},e.prototype.getBrushPoint=function(t){var e=this.spreadsheet.facet.getScrollOffset(),n=e.scrollY,r=e.scrollX,i={x:null==t?void 0:t.x,y:null==t?void 0:t.y},o=this.spreadsheet.getCell(t.target).getMeta(),a=o.colIndex,l=o.rowIndex;return bl(bl({},i),{rowIndex:l,colIndex:a,scrollY:n,scrollX:r})},e.prototype.getBrushRange=function(){var t,e,n,r,i,o,a,l,s=this.spreadsheet.facet.getScrollOffset(),u=s.scrollX,c=s.scrollY,h=Math.min(this.startBrushPoint.rowIndex,null===(t=this.endBrushPoint)||void 0===t?void 0:t.rowIndex),d=Math.max(this.startBrushPoint.rowIndex,null===(e=this.endBrushPoint)||void 0===e?void 0:e.rowIndex),f=Math.min(this.startBrushPoint.colIndex,null===(n=this.endBrushPoint)||void 0===n?void 0:n.colIndex),p=Math.max(this.startBrushPoint.colIndex,null===(r=this.endBrushPoint)||void 0===r?void 0:r.colIndex),v=this.startBrushPoint.x+this.startBrushPoint.scrollX-u,g=this.startBrushPoint.y+this.startBrushPoint.scrollY-c,y=Math.min(v,null===(i=this.endBrushPoint)||void 0===i?void 0:i.x),m=Math.max(v,null===(o=this.endBrushPoint)||void 0===o?void 0:o.x),C=Math.min(g,null===(a=this.endBrushPoint)||void 0===a?void 0:a.y),w=Math.max(g,null===(l=this.endBrushPoint)||void 0===l?void 0:l.y);return{start:{rowIndex:h,colIndex:f,x:y,y:C},end:{rowIndex:d,colIndex:p,x:m,y:w},width:m-y,height:w-C}},e.prototype.getBrushRangeCells=function(){var t=this;return this.setDisplayedCells(),this.displayedCells.filter((function(e){var n=e.getMeta();return t.isInBrushRange(n)}))},e.prototype.mouseDown=function(t){var e;null===(e=null==t?void 0:t.preventDefault)||void 0===e||e.call(t),this.spreadsheet.interaction.hasIntercepts([Ja.CLICK])||(this.setBrushSelectionStage(Xa.CLICK),this.initPrepareSelectMaskShape(),this.setDisplayedCells(),this.startBrushPoint=this.getBrushPoint(t))},e.prototype.addBrushIntercepts=function(){this.spreadsheet.interaction.addIntercepts([Ja.BRUSH_SELECTION])},e.prototype.bindMouseUp=function(t){var e=this;void 0===t&&(t=!1),this.spreadsheet.on(Qo.GLOBAL_MOUSE_UP,(function(n){if(e.brushSelectionStage===Xa.DRAGGED){if(t&&e.clearAutoScroll(),e.isValidBrushSelection()){e.addBrushIntercepts(),e.updateSelectedCells();var r=xO(e.spreadsheet);e.spreadsheet.showTooltipWithInfo(n,r)}e.spreadsheet.interaction.getCurrentStateName()===Ga.PREPARE_SELECT&&e.spreadsheet.interaction.reset(),e.resetDrag()}else e.resetDrag()})),this.spreadsheet.on(Qo.GLOBAL_CONTEXT_MENU,(function(){e.brushSelectionStage!==Xa.UN_DRAGGED&&(e.spreadsheet.interaction.removeIntercepts([Ja.HOVER]),e.resetDrag())}))},e.prototype.autoBrushScroll=function(t,e){var n,r;if(void 0===e&&(e=!1),this.clearAutoScroll(),!this.isPointInCanvas(t)){var i=(null==t?void 0:t.x)-(null===(n=this.endBrushPoint)||void 0===n?void 0:n.x),o=(null==t?void 0:t.y)-(null===(r=this.endBrushPoint)||void 0===r?void 0:r.y);return this.handleScroll(i,o,e),!0}return!1},e.prototype.emitBrushSelectionEvent=function(t,e){this.spreadsheet.emit(t,e),this.spreadsheet.emit(Qo.GLOBAL_SELECTED,e),Cm(e)&&this.spreadsheet.interaction.removeIntercepts([Ja.HOVER])},e.prototype.getVisibleBrushRangeCells=function(t){return this.brushRangeCells.find((function(e){var n=e.getMeta();return(null==n?void 0:n.id)===t}))},e.prototype.isInBrushRange=function(t){return!1},e.prototype.bindMouseDown=function(){},e.prototype.bindMouseMove=function(){},e.prototype.updateSelectedCells=function(){},e.prototype.getPrepareSelectMaskPosition=function(t){return{x:t.start.x,y:t.start.y}},e}(aI),pI=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.displayedCells=[],e.brushRangeCells=[],e.onUpdateCells=function(t){return t.updateCells(t.getAllColHeaderCells())},e}return Sl(e,t),e.prototype.bindEvents=function(){this.bindMouseDown(),this.bindMouseMove(),this.bindMouseUp()},e.prototype.bindMouseDown=function(){var e=this;this.spreadsheet.on(Qo.COL_CELL_MOUSE_DOWN,(function(n){e.spreadsheet.interaction.getBrushSelection().col&&t.prototype.mouseDown.call(e,n)}))},e.prototype.isPointInCanvas=function(t){var e=this.spreadsheet.facet.getCanvasHW().width,n=this.spreadsheet.facet.cornerBBox,r=n.width,i=n.minY,o=n.maxY;return t.x>=r&&t.x<=e&&t.y>=i&&t.y<=o},e.prototype.bindMouseMove=function(){var t=this;this.spreadsheet.on(Qo.COL_CELL_MOUSE_MOVE,(function(e){if(t.brushSelectionStage!==Xa.UN_DRAGGED){t.setBrushSelectionStage(Xa.DRAGGED);var n=t.spreadsheet.container.getPointByEvent(e.originalEvent);t.isPointInCanvas(n)&&t.renderPrepareSelected(n)}}))},e.prototype.setDisplayedCells=function(){this.displayedCells=this.spreadsheet.interaction.getAllColHeaderCells()},e.prototype.isInBrushRange=function(t){var e=this.getBrushRange(),n=e.start,r=e.end,i=this.spreadsheet.facet.getScrollOffset().scrollX,o=this.spreadsheet.facet.cornerBBox,a=t.x,l=void 0===a?0:a,s=t.y,u=void 0===s?0:s,c=t.width,h=void 0===c?0:c,d=t.height,f=void 0===d?0:d;return this.rectanglesIntersect({minX:n.x-o.width+i,minY:n.y,maxX:r.x-o.width+i,maxY:r.y},{minX:l,maxX:l+h,minY:u,maxY:u+f})},e.prototype.updateSelectedCells=function(){var t=this.spreadsheet.interaction;t.changeState({cells:yy(this.brushRangeCells,fE),stateName:Ga.SELECTED,onUpdateCells:function(t){t.updateCells(t.getAllColHeaderCells())}}),this.spreadsheet.emit(Qo.COL_CELL_BRUSH_SELECTION,this.brushRangeCells),this.spreadsheet.emit(Qo.GLOBAL_SELECTED,this.brushRangeCells),Cm(this.brushRangeCells)&&t.removeIntercepts([Ja.HOVER])},e.prototype.addBrushIntercepts=function(){this.spreadsheet.interaction.addIntercepts([Ja.COL_BRUSH_SELECTION])},e}(fI),vI=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.displayedCells=[],e.brushRangeCells=[],e.getSelectedCellMetas=function(t){var n=[],r=e.spreadsheet.facet.layoutResult,i=r.rowLeafNodes,o=void 0===i?[]:i,a=r.colLeafNodes,l=void 0===a?[]:a,s=Lw(t.start.rowIndex,t.end.rowIndex+1),u=Lw(t.start.colIndex,t.end.colIndex+1);return s.forEach((function(t){u.forEach((function(r){var i=String(l[r].id),a=Cm(o)?String(t):String(o[t].id);n.push({colIndex:r,rowIndex:t,id:"".concat(a,"-").concat(i),type:Ua.DATA_CELL,rowId:a,colId:i,spreadsheet:e.spreadsheet})}))})),n},e}return Sl(e,t),e.prototype.bindMouseDown=function(){var e=this;this.spreadsheet.on(Qo.DATA_CELL_MOUSE_DOWN,(function(n){e.spreadsheet.interaction.getBrushSelection().data&&(t.prototype.mouseDown.call(e,n),e.resetScrollDelta())}))},e.prototype.bindMouseMove=function(){var t=this;this.spreadsheet.on(Qo.GLOBAL_MOUSE_MOVE,(function(e){if(t.brushSelectionStage!==Xa.UN_DRAGGED){t.setBrushSelectionStage(Xa.DRAGGED);var n=t.spreadsheet.container.getPointByEvent(e);t.autoBrushScroll(n)||t.renderPrepareSelected(n)}}))},e.prototype.isInBrushRange=function(t){var e=this.getBrushRange(),n=e.start,r=e.end,i=t.rowIndex,o=t.colIndex;return i>=n.rowIndex&&i<=r.rowIndex&&o>=n.colIndex&&o<=r.colIndex},e.prototype.updateSelectedCells=function(){var t=this.getBrushRange(),e=this.getSelectedCellMetas(t);this.spreadsheet.interaction.changeState({cells:e,stateName:Ga.SELECTED,onUpdateCells:yE});var n=this.getScrollBrushRangeCells(e);this.emitBrushSelectionEvent(Qo.DATA_CELL_BRUSH_SELECTION,n)},e.prototype.getScrollBrushRangeCells=function(t){var e=this;return t.map((function(t){var n=e.getVisibleBrushRangeCells(t.id);if(n)return n;var r=e.spreadsheet.facet.layoutResult.getCellMeta(t.rowIndex,t.colIndex);return new(e.spreadsheet.isTableMode()?uE:fL)(r,e.spreadsheet)}))},e.prototype.bindMouseUp=function(){t.prototype.bindMouseUp.call(this,!0)},e.prototype.getPrepareSelectMaskPosition=function(t){var e=this.spreadsheet.facet.panelBBox,n=e.minX,r=e.minY;return{x:Math.max(t.start.x,n),y:Math.max(t.start.y,r)}},e}(fI),gI=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isInBrushRange=function(t){var n=e.getBrushRange(),r=n.start,i=n.end,o=e.spreadsheet.facet.getScrollOffset(),a=o.scrollY,l=o.rowHeaderScrollX,s=e.spreadsheet.facet.cornerBBox,u=t.x,c=void 0===u?0:u,h=t.y,d=void 0===h?0:h,f=t.width,p=void 0===f?0:f,v=t.height,g=void 0===v?0:v;return e.rectanglesIntersect({minX:r.x+l,minY:r.y-s.height+a,maxX:i.x+l,maxY:i.y-s.height+a},{minX:c,maxX:c+p,minY:d,maxY:d+g})},e.onUpdateCells=function(t){return t.updateCells(t.getAllRowHeaderCells())},e.getSelectedRowNodes=function(){return e.spreadsheet.getRowNodes().filter(e.isInBrushRange)},e.getVisibleRowLeafCellByScrollDirection=function(t){var n=e.spreadsheet.interaction.getAllRowHeaderCells();return t===al.SCROLL_DOWN?Mg(n):n.find((function(t){return t.getMeta().isLeaf}))},e.getWillScrollToRowIndex=function(t){var n,r;if(!Tm(e.endBrushPoint.rowIndex))return e.getDefaultWillScrollToRowIndex(t);var i=e.getVisibleRowLeafCellByScrollDirection(t),o=(null!==(r=null===(n=null==i?void 0:i.getMeta())||void 0===n?void 0:n.rowIndex)&&void 0!==r?r:0)+e.getWillScrollRowIndexDiff(t);return e.validateYIndex(o)},e}return Sl(e,t),e.prototype.bindMouseDown=function(){var e=this;this.spreadsheet.on(Qo.ROW_CELL_MOUSE_DOWN,(function(n){e.spreadsheet.interaction.getBrushSelection().row&&t.prototype.mouseDown.call(e,n)}))},e.prototype.isPointInCanvas=function(t){var e=this.spreadsheet.facet.getCanvasHW().height,n=this.spreadsheet.facet.cornerBBox,r=n.minX,i=n.height,o=n.maxX;return t.x>=r&&t.x<=o&&t.y>=i&&t.y<=e},e.prototype.bindMouseMove=function(){var t=this;this.spreadsheet.on(Qo.GLOBAL_MOUSE_MOVE,(function(e){if(t.brushSelectionStage!==Xa.UN_DRAGGED){t.setBrushSelectionStage(Xa.DRAGGED);var n=t.spreadsheet.container.getPointByEvent(e);t.autoBrushScroll(n,!0)||t.renderPrepareSelected(n)}}))},e.prototype.setDisplayedCells=function(){this.displayedCells=this.spreadsheet.interaction.getAllRowHeaderCells()},e.prototype.updateSelectedCells=function(){var t=this.getSelectedRowNodes(),e=this.getScrollBrushRangeCells(t),n=yy(e,fE);this.spreadsheet.interaction.changeState({cells:n,stateName:Ga.SELECTED,onUpdateCells:this.onUpdateCells}),this.emitBrushSelectionEvent(Qo.ROW_CELL_BRUSH_SELECTION,e)},e.prototype.addBrushIntercepts=function(){this.spreadsheet.interaction.addIntercepts([Ja.ROW_BRUSH_SELECTION])},e.prototype.getScrollBrushRangeCells=function(t){var e=this;return t.map((function(t){var n=e.getVisibleBrushRangeCells(t.id);return n||new iE(t,e.spreadsheet)}))},e.prototype.getPrepareSelectMaskPosition=function(t){var e=this.spreadsheet.facet.panelBBox.minY;return{x:t.start.x,y:Math.max(t.start.y,e)}},e}(fI),yI=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isMultiSelection=!1,e}return Sl(e,t),e.prototype.bindEvents=function(){this.bindKeyboardDown(),this.bindDataCellClick(),this.bindKeyboardUp(),this.bindMouseMove()},e.prototype.reset=function(){this.isMultiSelection=!1,this.spreadsheet.interaction.removeIntercepts([Ja.CLICK])},e.prototype.bindKeyboardDown=function(){var t=this;this.spreadsheet.on(Qo.GLOBAL_KEYBOARD_DOWN,(function(e){hE(e)&&(t.isMultiSelection=!0,t.spreadsheet.interaction.addIntercepts([Ja.CLICK]))}))},e.prototype.bindKeyboardUp=function(){var t=this;this.spreadsheet.on(Qo.GLOBAL_KEYBOARD_UP,(function(e){hE(e)&&t.reset()}))},e.prototype.bindMouseMove=function(){var t=this;this.spreadsheet.on(Qo.GLOBAL_MOUSE_MOVE,(function(e){t.isMultiSelection&&!dE(e)&&t.reset()}))},e.prototype.getSelectedCells=function(t){var e=t.getMeta().id,n=this.spreadsheet.interaction,r=n.getCells([Ua.DATA_CELL]);return n.getCurrentStateName()!==Ga.SELECTED&&(r=[]),r.find((function(t){return t.id===e}))?r.filter((function(t){return t.id!==e})):Tl(Tl([],El(r),!1),[fE(t)],!1)},e.prototype.bindDataCellClick=function(){var t=this;this.spreadsheet.on(Qo.DATA_CELL_CLICK,(function(e){e.stopPropagation();var n=t.spreadsheet.getCell(e.target),r=n.getMeta(),i=t.spreadsheet,o=i.interaction;if(i.options,t.isMultiSelection&&r){var a=t.getSelectedCells(n);if(Cm(a))return o.clearState(),void t.spreadsheet.hideTooltip();o.addIntercepts([Ja.CLICK,Ja.HOVER]),t.spreadsheet.hideTooltip(),o.changeState({cells:a,stateName:Ga.SELECTED,onUpdateCells:yE}),t.spreadsheet.emit(Qo.GLOBAL_SELECTED,o.getActiveCells()),t.spreadsheet.showTooltipWithInfo(e,xO(t.spreadsheet))}}))},e}(aI),mI=function(){function t(t){var e=this;this.canvasEventHandlers=[],this.s2EventHandlers=[],this.domEventListeners=[],this.isCanvasEffect=!1,this.isGuiIconShape=function(t){return t instanceof bo&&t.attrs.type===_b.type},this.onCanvasMousedown=function(t){if(e.target=t.target,e.spreadsheet.interaction.clearHoverTimer(),e.isResizeArea(t)){e.spreadsheet.emit(Qo.LAYOUT_RESIZE_MOUSE_DOWN,t);var n=function(n){if(!e.spreadsheet.getCanvasElement())return!1;e.spreadsheet.getCanvasElement()!==n.target&&(t.clientX=n.clientX,t.clientY=n.clientY,t.originalEvent=n,e.spreadsheet.emit(Qo.LAYOUT_RESIZE_MOUSE_MOVE,t))};return window.addEventListener("mousemove",n),void window.addEventListener("mouseup",(function(){window.removeEventListener("mousemove",n)}),{once:!0})}switch(e.spreadsheet.getCellType(t.target)){case Ua.DATA_CELL:e.spreadsheet.emit(Qo.DATA_CELL_MOUSE_DOWN,t);break;case Ua.ROW_CELL:e.spreadsheet.emit(Qo.ROW_CELL_MOUSE_DOWN,t);break;case Ua.COL_CELL:e.spreadsheet.emit(Qo.COL_CELL_MOUSE_DOWN,t);break;case Ua.CORNER_CELL:e.spreadsheet.emit(Qo.CORNER_CELL_MOUSE_DOWN,t);break;case Ua.MERGED_CELL:e.spreadsheet.emit(Qo.MERGED_CELLS_MOUSE_DOWN,t)}},this.onCanvasMousemove=function(t){if(e.canvasMousemoveEvent=t,e.isResizeArea(t))return e.activeResizeArea(t),void e.spreadsheet.emit(Qo.LAYOUT_RESIZE_MOUSE_MOVE,t);e.resetResizeArea();var n=e.spreadsheet.getCell(t.target);if(n){var r=n.cellType;switch(r){case Ua.DATA_CELL:e.spreadsheet.emit(Qo.DATA_CELL_MOUSE_MOVE,t);break;case Ua.ROW_CELL:e.spreadsheet.emit(Qo.ROW_CELL_MOUSE_MOVE,t);break;case Ua.COL_CELL:e.spreadsheet.emit(Qo.COL_CELL_MOUSE_MOVE,t);break;case Ua.CORNER_CELL:e.spreadsheet.emit(Qo.CORNER_CELL_MOUSE_MOVE,t);break;case Ua.MERGED_CELL:e.spreadsheet.emit(Qo.MERGED_CELLS_MOUSE_MOVE,t)}if(!e.hasBrushSelectionIntercepts())switch(e.spreadsheet.emit(Qo.GLOBAL_HOVER,t),r){case Ua.DATA_CELL:e.spreadsheet.emit(Qo.DATA_CELL_HOVER,t);break;case Ua.ROW_CELL:e.spreadsheet.emit(Qo.ROW_CELL_HOVER,t);break;case Ua.COL_CELL:e.spreadsheet.emit(Qo.COL_CELL_HOVER,t);break;case Ua.CORNER_CELL:e.spreadsheet.emit(Qo.CORNER_CELL_HOVER,t);break;case Ua.MERGED_CELL:e.spreadsheet.emit(Qo.MERGED_CELLS_HOVER,t)}}},this.onCanvasMouseup=function(t){if(e.isResizeArea(t))e.spreadsheet.emit(Qo.LAYOUT_RESIZE_MOUSE_UP,t);else{var n=e.spreadsheet.getCell(t.target);if(n){var r=n.cellType;if(e.target===t.target){var i=e.isGuiIconShape(t.target);switch(r){case Ua.DATA_CELL:e.spreadsheet.emit(Qo.DATA_CELL_CLICK,t);break;case Ua.ROW_CELL:if(i)break;e.spreadsheet.emit(Qo.ROW_CELL_CLICK,t);break;case Ua.COL_CELL:if(i)break;e.spreadsheet.emit(Qo.COL_CELL_CLICK,t);break;case Ua.CORNER_CELL:if(i)break;e.spreadsheet.emit(Qo.CORNER_CELL_CLICK,t);break;case Ua.MERGED_CELL:e.spreadsheet.emit(Qo.MERGED_CELLS_CLICK,t)}}switch(r){case Ua.DATA_CELL:e.spreadsheet.emit(Qo.DATA_CELL_MOUSE_UP,t);break;case Ua.ROW_CELL:e.spreadsheet.emit(Qo.ROW_CELL_MOUSE_UP,t);break;case Ua.COL_CELL:e.spreadsheet.emit(Qo.COL_CELL_MOUSE_UP,t);break;case Ua.CORNER_CELL:e.spreadsheet.emit(Qo.CORNER_CELL_MOUSE_UP,t);break;case Ua.MERGED_CELL:e.spreadsheet.emit(Qo.MERGED_CELLS_MOUSE_UP,t)}}}},this.onCanvasClick=function(t){e.spreadsheet.emit(Qo.GLOBAL_CLICK,t)},this.onCanvasDoubleClick=function(t){var n=e.spreadsheet;if(e.isResizeArea(t))n.emit(Qo.LAYOUT_RESIZE_MOUSE_UP,t);else{n.emit(Qo.GLOBAL_DOUBLE_CLICK,t);var r=n.getCell(t.target);if(r){var i=r.cellType;if(e.target===t.target)switch(i){case Ua.DATA_CELL:n.emit(Qo.DATA_CELL_DOUBLE_CLICK,t);break;case Ua.ROW_CELL:n.emit(Qo.ROW_CELL_DOUBLE_CLICK,t);break;case Ua.COL_CELL:n.emit(Qo.COL_CELL_DOUBLE_CLICK,t);break;case Ua.CORNER_CELL:n.emit(Qo.CORNER_CELL_DOUBLE_CLICK,t);break;case Ua.MERGED_CELL:n.emit(Qo.MERGED_CELLS_DOUBLE_CLICK,t)}}}},this.onCanvasMouseout=function(t){if(e.isAutoResetSheetStyle&&!(null==t?void 0:t.shape)){var n=e.spreadsheet.interaction;n.isSelectedState()||n.intercepts.size>0||n.reset()}},this.onCanvasContextMenu=function(t){var n=e.spreadsheet;if(e.isResizeArea(t))n.emit(Qo.LAYOUT_RESIZE_MOUSE_UP,t);else switch(n.emit(Qo.GLOBAL_CONTEXT_MENU,t),e.spreadsheet.getCellType(t.target)){case Ua.DATA_CELL:e.spreadsheet.emit(Qo.DATA_CELL_CONTEXT_MENU,t);break;case Ua.ROW_CELL:e.spreadsheet.emit(Qo.ROW_CELL_CONTEXT_MENU,t);break;case Ua.COL_CELL:e.spreadsheet.emit(Qo.COL_CELL_CONTEXT_MENU,t);break;case Ua.CORNER_CELL:e.spreadsheet.emit(Qo.CORNER_CELL_CONTEXT_MENU,t);break;case Ua.MERGED_CELL:e.spreadsheet.emit(Qo.MERGED_CELLS_CONTEXT_MENU,t)}},this.spreadsheet=t,this.bindEvents()}return Object.defineProperty(t.prototype,"canvasContainer",{get:function(){return this.spreadsheet.container},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isAutoResetSheetStyle",{get:function(){return this.spreadsheet.options.interaction.autoResetSheetStyle},enumerable:!1,configurable:!0}),t.prototype.bindEvents=function(){var t=this;this.clearAllEvents(),this.addCanvasEvent($o.CLICK,this.onCanvasClick),this.addCanvasEvent($o.MOUSE_DOWN,this.onCanvasMousedown),this.addCanvasEvent($o.MOUSE_MOVE,this.onCanvasMousemove),this.addCanvasEvent($o.MOUSE_OUT,this.onCanvasMouseout),this.addCanvasEvent($o.MOUSE_UP,this.onCanvasMouseup),this.addCanvasEvent($o.DOUBLE_CLICK,this.onCanvasDoubleClick),this.addCanvasEvent($o.CONTEXT_MENU,this.onCanvasContextMenu),this.addS2Event(Qo.GLOBAL_ACTION_ICON_CLICK,(function(){t.spreadsheet.interaction.addIntercepts([Ja.HOVER]),t.spreadsheet.interaction.clearState()})),this.addDomEventListener(window,$o.CLICK,(function(e){t.resetSheetStyle(e),t.isCanvasEffect=t.isMouseOnTheCanvasContainer(e)})),this.addDomEventListener(window,$o.KEY_DOWN,(function(e){t.onKeyboardCopy(e),t.onKeyboardEsc(e),t.spreadsheet.emit(Qo.GLOBAL_KEYBOARD_DOWN,e)})),this.addDomEventListener(window,$o.KEY_UP,(function(e){t.spreadsheet.emit(Qo.GLOBAL_KEYBOARD_UP,e)})),this.addDomEventListener(window,$o.MOUSE_UP,(function(e){t.spreadsheet.emit(Qo.GLOBAL_MOUSE_UP,e)})),this.addDomEventListener(window,$o.MOUSE_MOVE,(function(e){t.spreadsheet.emit(Qo.GLOBAL_MOUSE_MOVE,e)}))},t.prototype.onKeyboardCopy=function(t){if(this.isCanvasEffect&&this.spreadsheet.options.interaction.enableCopy&&N_(t.key,Ka.COPY)&&(t.metaKey||t.ctrlKey)){var e=nL(this.spreadsheet);Tm(e)||this.spreadsheet.emit(Qo.GLOBAL_COPIED,e)}},t.prototype.onKeyboardEsc=function(t){this.isCanvasEffect&&N_(t.key,Ka.ESC)&&this.resetSheetStyle(t)},t.prototype.resetSheetStyle=function(t){if(this.isAutoResetSheetStyle&&this.spreadsheet){var e=this.spreadsheet.interaction;e.hasIntercepts([Ja.BRUSH_SELECTION,Ja.COL_BRUSH_SELECTION,Ja.ROW_BRUSH_SELECTION])?e.removeIntercepts([Ja.BRUSH_SELECTION,Ja.ROW_BRUSH_SELECTION,Ja.COL_BRUSH_SELECTION]):this.isMouseOnTheTooltip(t)||this.isMouseOnTheCanvasContainer(t)||(this.spreadsheet.emit(Qo.GLOBAL_RESET,t),e.reset())}},t.prototype.isMouseEvent=function(t){return Nv(t,"clientX")&&Nv(t,"clientY")},t.prototype.isMouseOnTheCanvasContainer=function(t){if(this.isMouseEvent(t)){var e=this.spreadsheet.getCanvasElement();if(!e)return!1;var n=e.getBoundingClientRect()||{},r=n.x,i=n.y,o=this.getContainerRect(),a=o.width,l=o.height;return e.contains(t.target)&&t.clientX<=r+a&&t.clientY<=i+l}return!1},t.prototype.getContainerRect=function(){var t,e=(null===(t=this.spreadsheet.facet)||void 0===t?void 0:t.panelBBox)||{},n=e.maxX,r=e.maxY,i=this.spreadsheet.options,o=i.width,a=i.height;return{width:Math.min(o,n),height:Math.min(a,r)}},t.prototype.isMouseOnTheTooltip=function(t){var e,n,r,i,o=this.spreadsheet.tooltip;if(!(null==o?void 0:o.visible))return!1;var a=(null===(r=null===(n=null===(e=this.spreadsheet.tooltip)||void 0===e?void 0:e.container)||void 0===n?void 0:n.getBoundingClientRect)||void 0===r?void 0:r.call(n))||{},l=a.x,s=a.y,u=a.width,c=a.height;return t.target instanceof Node?function(t,e){for(var n=!1,r=e;r&&r!==document.body;){if(t===r){n=!0;break}r=r.parentElement}return n}(null===(i=this.spreadsheet.tooltip)||void 0===i?void 0:i.container,t.target):!!this.isMouseEvent(t)&&(t.clientX>=l&&t.clientX<=l+u&&t.clientY>=s&&t.clientY<=s+c)},t.prototype.isResizeArea=function(t){var e=Fh(t.target,"attrs.appendInfo");return null==e?void 0:e.isResizeArea},t.prototype.activeResizeArea=function(t){this.resetResizeArea();var e=t.target;this.spreadsheet.store.set("activeResizeArea",e),e.attr(el.backgroundOpacity,this.spreadsheet.theme.resizeArea.interactionState.hover.backgroundOpacity)},t.prototype.resetResizeArea=function(){var t=this.spreadsheet.store.get("activeResizeArea");Cm(t)||t.attr(el.backgroundOpacity,this.spreadsheet.theme.resizeArea.backgroundOpacity),this.spreadsheet.store.set("activeResizeArea",t)},t.prototype.hasBrushSelectionIntercepts=function(){return this.spreadsheet.interaction.hasIntercepts([Ja.HOVER,Ja.BRUSH_SELECTION,Ja.ROW_BRUSH_SELECTION,Ja.COL_BRUSH_SELECTION])},t.prototype.clear=function(){this.unbindEvents()},t.prototype.unbindEvents=function(){this.clearAllEvents()},t.prototype.addCanvasEvent=function(t,e){var n;null===(n=this.canvasContainer)||void 0===n||n.on(t,e),this.canvasEventHandlers.push({type:t,handler:e})},t.prototype.addS2Event=function(t,e){this.spreadsheet.on(t,e),this.s2EventHandlers.push({type:t,handler:e})},t.prototype.addDomEventListener=function(t,e,n){if(t.addEventListener){var r=this.spreadsheet.options.interaction.eventListenerOptions;t.addEventListener(e,n,r),this.domEventListeners.push({target:t,type:e,handler:n,options:r})}},t.prototype.clearAllEvents=function(){var t=this;Pg(this.canvasEventHandlers,(function(e){var n,r=e.type,i=e.handler;null===(n=t.canvasContainer)||void 0===n||n.off(r,i)})),Pg(this.s2EventHandlers,(function(e){var n=e.type,r=e.handler;t.spreadsheet.off(n,r)})),Pg(this.domEventListeners,(function(t){t.target.removeEventListener(t.type,t.handler,t.options)})),this.canvasEventHandlers=[],this.s2EventHandlers=[],this.domEventListeners=[]},t}(),CI=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isRangeSelection=!1,e.handleColClick=function(t){t.stopPropagation();var n=e.spreadsheet.interaction,r=e.spreadsheet.getCell(t.target),i=null==r?void 0:r.getMeta();if(!Tm(null==i?void 0:i.x)){n.addIntercepts([Ja.HOVER]);var o=[fE(r)],a=e.spreadsheet.store.get("lastClickedCell");if(e.isRangeSelection&&a&&a.cellType===r.cellType&&a.getMeta().level===r.getMeta().level){var l=El([e.spreadsheet.facet.layoutResult.rowsHierarchy.maxLevel,e.spreadsheet.facet.layoutResult.colsHierarchy.maxLevel],2),s=l[0],u=l[1],c=pE(a.getMeta(),r.getMeta()),h=c.start,d=c.end;r instanceof fL?o=e.handleSeriesNumberRowSelected(h.rowIndex,d.rowIndex,r):r.cellType===Ua.ROW_CELL&&r.getMeta().level===s?o=e.handleRowSelected(h.rowIndex,d.rowIndex,r):r.cellType===Ua.COL_CELL&&r.getMeta().level===u&&(o=e.handleColSelected(h.colIndex,d.colIndex,r)),n.changeState({cells:o,stateName:Ga.SELECTED})}else Cm(n.getCells())&&n.removeIntercepts([Ja.HOVER]),e.spreadsheet.store.set("lastClickedCell",r);var f=o.map((function(t){return t.id}));n.updateCells(n.getRowColActiveCells(f)),e.spreadsheet.emit(Qo.GLOBAL_SELECTED,n.getActiveCells())}},e}return Sl(e,t),e.prototype.bindEvents=function(){this.bindKeyboardDown(),this.bindDataCellClick(),this.bindColCellClick(),this.bindKeyboardUp(),this.bindMouseMove()},e.prototype.reset=function(){this.isRangeSelection=!1,this.spreadsheet.interaction.removeIntercepts([Ja.CLICK])},e.prototype.bindKeyboardDown=function(){var t=this;this.spreadsheet.on(Qo.GLOBAL_KEYBOARD_DOWN,(function(e){e.key===Ka.SHIFT&&(t.isRangeSelection=!0,t.spreadsheet.interaction.addIntercepts([Ja.CLICK]))}))},e.prototype.bindKeyboardUp=function(){var t=this;this.spreadsheet.on(Qo.GLOBAL_KEYBOARD_UP,(function(e){e.key===Ka.SHIFT&&t.reset()}))},e.prototype.bindMouseMove=function(){var t=this;this.spreadsheet.on(Qo.GLOBAL_MOUSE_MOVE,(function(e){t.isRangeSelection&&!e.shiftKey&&t.reset()}))},e.prototype.bindColCellClick=function(){var t=this;this.spreadsheet.isTableMode()&&this.spreadsheet.on(Qo.ROW_CELL_CLICK,(function(e){t.handleColClick(e)})),this.spreadsheet.on(Qo.COL_CELL_CLICK,(function(e){t.handleColClick(e)}))},e.prototype.bindDataCellClick=function(){var t=this;this.spreadsheet.on(Qo.DATA_CELL_CLICK,(function(e){e.stopPropagation();var n=t.spreadsheet.getCell(e.target),r=n.getMeta(),i=t.spreadsheet.interaction;if(r){var o=t.spreadsheet.store.get("lastClickedCell");if(t.isRangeSelection&&(null==o?void 0:o.cellType)===n.cellType){var a=pE(o.getMeta(),n.getMeta()),l=a.start,s=a.end,u=Lw(l.colIndex,s.colIndex+1).flatMap((function(e){var r=t.spreadsheet.facet.layoutResult.colLeafNodes[e].id;return Lw(l.rowIndex,s.rowIndex+1).map((function(i){return{id:(t.spreadsheet.facet.getSeriesNumberWidth()||t.spreadsheet.isTableMode()?String(i):t.spreadsheet.facet.layoutResult.rowLeafNodes[i].id)+"-"+r,colIndex:e,rowIndex:i,type:n.cellType}}))}));i.addIntercepts([Ja.CLICK,Ja.HOVER]),i.changeState({cells:u,stateName:Ga.SELECTED}),t.spreadsheet.showTooltipWithInfo(e,xO(t.spreadsheet)),t.spreadsheet.emit(Qo.GLOBAL_SELECTED,i.getActiveCells())}else t.spreadsheet.store.set("lastClickedCell",n)}}))},e.prototype.handleSeriesNumberRowSelected=function(t,e,n){var r=this.spreadsheet.facet.layoutResult.colLeafNodes[0].id;return Lw(t,e+1).map((function(t){return{id:String(t)+"-"+r,colIndex:0,rowIndex:t,type:n.cellType}}))},e.prototype.handleRowSelected=function(t,e,n){return this.spreadsheet.facet.layoutResult.rowNodes.filter((function(n){return Ny(n.rowIndex,t,e+1)})).map((function(t){return{id:t.id,colIndex:t.colIndex,rowIndex:t.rowIndex,type:n.cellType}}))},e.prototype.handleColSelected=function(t,e,n){return this.spreadsheet.facet.layoutResult.colLeafNodes.filter((function(n){return Ny(n.colIndex,t,e+1)})).map((function(t){return{id:t.id,colIndex:t.colIndex,rowIndex:t.rowIndex,type:n.cellType}}))},e}(aI),wI=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.resizeStartPosition={},e.resizeMouseMove=function(t){var n,r;if(null===(n=e.resizeReferenceGroup)||void 0===n?void 0:n.get("visible")){null===(r=null==t?void 0:t.preventDefault)||void 0===r||r.call(t);var i=t.originalEvent,o=e.getResizeInfo(),a=e.resizeReferenceGroup.getChildren()||[];if(!Cm(a)){var l=El(a,2)[1],s=El(Yp(l.attr("path")),2),u=s[0],c=s[1];o.type===hl.Horizontal?e.updateHorizontalResizingEndGuideLinePosition(i,o,u,c):e.updateVerticalResizingEndGuideLinePosition(i,o,u,c),e.updateResizeGuideLineTheme(l),l.attr("path",[u,c])}}},e}return Sl(e,t),e.prototype.bindEvents=function(){this.bindMouseDown(),this.bindMouseMove(),this.bindMouseUp()},e.prototype.initResizeGroup=function(){if(!this.resizeReferenceGroup){this.resizeReferenceGroup=this.spreadsheet.foregroundGroup.addGroup();var t=this.spreadsheet.options,e=t.width,n=t.height,r=this.getResizeAreaTheme(),i=r.guideLineColor,o={path:"",lineDash:r.guideLineDash,stroke:i,lineWidth:r.size};this.resizeReferenceGroup.addShape("path",{id:"RESIZE_START_GUIDE_LINE",attrs:o}),this.resizeReferenceGroup.addShape("path",{id:"RESIZE_END_GUIDE_LINE",attrs:o}),this.resizeReferenceGroup.addShape("rect",{id:"RESIZE_MASK",attrs:{appendInfo:{isResizeArea:!0},x:0,y:0,width:e,height:n,fill:"transparent"}})}},e.prototype.getResizeAreaTheme=function(){return this.spreadsheet.theme.resizeArea},e.prototype.setResizeTarget=function(t){this.resizeTarget=t},e.prototype.getGuideLineWidthAndHeight=function(){var t=this.spreadsheet.options,e=t.width,n=t.height,r=this.spreadsheet.facet.panelBBox,i=r.maxY,o=r.maxX;return{width:Math.min(o,e),height:Math.min(i,n)}},e.prototype.getResizeShapes=function(){var t;return(null===(t=this.resizeReferenceGroup)||void 0===t?void 0:t.get("children"))||[]},e.prototype.setResizeMaskCursor=function(t){var e=El(this.getResizeShapes(),3)[2];null==e||e.attr("cursor",t)},e.prototype.updateResizeGuideLinePosition=function(t,e){var n=this.getResizeShapes();if(!Cm(n)){var r=El(n,2),i=r[0],o=r[1],a=e.type,l=e.offsetX,s=e.offsetY,u=e.width,c=e.height,h=this.getGuideLineWidthAndHeight(),d=h.width,f=h.height;if(this.setResizeMaskCursor("".concat(a,"-resize")),a===hl.Horizontal)return i.attr("path",[["M",l,s],["L",l,f]]),o.attr("path",[["M",l+u,s],["L",l+u,f]]),this.resizeStartPosition.offsetX=t.offsetX,void(this.resizeStartPosition.clientX=t.clientX);i.attr("path",[["M",l,s],["L",d,s]]),o.attr("path",[["M",l,s+c],["L",d,s+c]]),this.resizeStartPosition.offsetY=t.offsetY,this.resizeStartPosition.clientY=t.clientY}},e.prototype.bindMouseDown=function(){var t=this;this.spreadsheet.on(Qo.LAYOUT_RESIZE_MOUSE_DOWN,(function(e){var n=e.target,r=e.originalEvent,i=t.getCellAppendInfo(e.target);t.spreadsheet.store.set("resized",!1),(null==i?void 0:i.isResizeArea)&&(t.spreadsheet.interaction.reset(),t.spreadsheet.interaction.addIntercepts([Ja.RESIZE]),t.setResizeTarget(n),t.showResizeGroup(),t.updateResizeGuideLinePosition(r,i))}))},e.prototype.bindMouseMove=function(){var t=this;this.spreadsheet.on(Qo.LAYOUT_RESIZE_MOUSE_MOVE,(function(e){_x(t.resizeMouseMove,33)(e)}))},e.prototype.getResizeGuideLinePosition=function(){var t=El(this.resizeReferenceGroup.getChildren()||[],2),e=t[0],n=t[1],r=(null==e?void 0:e.attr("path"))||[],i=(null==n?void 0:n.attr("path"))||[],o=El(r[0]||[],3),a=o[1],l=void 0===a?0:a,s=o[2],u=void 0===s?0:s,c=El(i[0]||[],3),h=c[1],d=void 0===h?0:h,f=c[2];return{start:{x:l,y:u},end:{x:d,y:void 0===f?0:f}}},e.prototype.getDisAllowResizeInfo=function(){var t,e=this.getResizeInfo(),n=this.spreadsheet.options.interaction.resize,r=e.width,i=e.height,o=e.resizedWidth,a=e.resizedHeight,l=null===(t=null==n?void 0:n.disable)||void 0===t?void 0:t.call(n,e);return{displayWidth:l?r:o,displayHeight:l?i:a,isDisabled:l}},e.prototype.getResizeWidthDetail=function(){var t,e,n=this.getResizeInfo(),r=this.getDisAllowResizeInfo().displayWidth;switch(n.effect){case fl.Field:return{eventType:Qo.LAYOUT_RESIZE_ROW_WIDTH,style:{rowCfg:{widthByField:(t={},t[n.id]=r,t)}}};case fl.Tree:return{eventType:Qo.LAYOUT_RESIZE_TREE_WIDTH,style:{treeRowsWidth:r,rowCfg:{treeRowsWidth:r}}};case fl.Cell:return{eventType:Qo.LAYOUT_RESIZE_COL_WIDTH,style:{colCfg:{widthByFieldValue:(e={},e[n.id]=r,e)}}};case fl.Series:return{eventType:Qo.LAYOUT_RESIZE_SERIES_WIDTH,seriesNumberWidth:r};default:return null}},e.prototype.getResizeHeightDetail=function(){var t,e,n,r=this.spreadsheet.options,i=r.interaction.resize,o=r.style.rowCfg.heightByField,a=this.spreadsheet.theme.rowCell.cell.padding,l=this.getResizeInfo(),s=this.getDisAllowResizeInfo().displayHeight,u=s-a.top-a.bottom;switch(l.effect){case fl.Field:return{eventType:Qo.LAYOUT_RESIZE_COL_HEIGHT,style:{colCfg:{heightByField:(t={},t[l.id]=s,t)}}};case fl.Cell:return n=(null==o?void 0:o[String(l.id)])||(null==i?void 0:i.rowResizeType)===vl.CURRENT?{rowCfg:{heightByField:(e={},e[l.id]=u,e)}}:{cellCfg:{height:u}},{eventType:Qo.LAYOUT_RESIZE_ROW_HEIGHT,style:n};default:return null}},e.prototype.getResizeDetail=function(){return this.getResizeInfo().type===hl.Horizontal?this.getResizeWidthDetail():this.getResizeHeightDetail()},e.prototype.showResizeGroup=function(){this.initResizeGroup(),this.resizeReferenceGroup.set("visible",!0)},e.prototype.hideResizeGroup=function(){this.resizeReferenceGroup.set("visible",!1)},e.prototype.bindMouseUp=function(){var t=this;this.spreadsheet.on(Qo.GLOBAL_MOUSE_UP,(function(){var e;t.setResizeMaskCursor("default"),t.resizeReferenceGroup&&!Cm(null===(e=t.resizeReferenceGroup)||void 0===e?void 0:e.getChildren())&&(t.hideResizeGroup(),t.renderResizedResult())}))},e.prototype.updateResizeGuideLineTheme=function(t){var e=this.getResizeAreaTheme(),n=e.guideLineColor,r=e.guideLineDisableColor,i=this.getDisAllowResizeInfo().isDisabled;t.attr("stroke",i?r:n),this.setResizeMaskCursor(i?"no-drop":"default")},e.prototype.updateHorizontalResizingEndGuideLinePosition=function(t,e,n,r){var i=t.clientX-this.resizeStartPosition.clientX;e.width+i<28&&(i=-(e.width-28));var o=e.offsetX+e.width+i;n[1]=o,r[1]=o,this.resizeTarget.attr({x:o-e.size/2})},e.prototype.updateVerticalResizingEndGuideLinePosition=function(t,e,n,r){var i=t.clientY-this.resizeStartPosition.clientY;e.height+i<16&&(i=-(e.height-16));var o=e.offsetY+e.height+i;n[2]=o,r[2]=o,this.resizeTarget.attr({y:o-e.size/2})},e.prototype.renderResizedResult=function(){var t=this.getResizeInfo(),e=this.getResizeDetail()||{},n=e.style,r=e.seriesNumberWidth,i=e.eventType,o={info:t,style:n};this.spreadsheet.emit(Qo.LAYOUT_RESIZE,o),this.spreadsheet.emit(i,o),n&&this.spreadsheet.setOptions({style:n}),r&&this.spreadsheet.setTheme({rowCell:{seriesNumberWidth:r}}),this.spreadsheet.store.set("resized",!0),this.render()},e.prototype.getResizeInfo=function(){var t=this.getCellAppendInfo(this.resizeTarget),e=this.getResizeGuideLinePosition(),n=e.start,r=e.end,i=Math.floor(r.x-n.x),o=Math.floor(r.y-n.y);return bl(bl({},t),{resizedWidth:i,resizedHeight:o})},e.prototype.render=function(){this.resizeStartPosition={},this.resizeTarget=null,this.resizeReferenceGroup=null,this.spreadsheet.render(!1)},e}(aI),xI=[Ka.ARROW_LEFT,Ka.ARROW_RIGHT,Ka.ARROW_UP,Ka.ARROW_DOWN],SI=function(t){function e(e){return t.call(this,e)||this}return Sl(e,t),e.prototype.isCanvasEffect=function(){return this.spreadsheet.interaction.eventController.isCanvasEffect},e.prototype.bindEvents=function(){var t=this;this.spreadsheet.on(Qo.GLOBAL_KEYBOARD_DOWN,(function(e){if(t.isCanvasEffect()){var n=e.shiftKey,r=e.metaKey,i=!1,o=!1,a=!1;xI.includes(e.key)&&(r&&n?(i=!1,o=!0,a=!1):r?(i=!0,o=!0,a=!0):n?(i=!1,o=!1,a=!1):(i=!0,o=!1,a=!0),t.handleMove({event:e,changeStartCell:i,isJumpMode:o,isSingleSelection:a}))}})),this.spreadsheet.on(Qo.DATA_CELL_CLICK,(function(e){var n=t.spreadsheet.getCell(e.target).getMeta();n&&(t.startCell=t.getCellMetaFromViewMeta(n),t.endCell=t.startCell)}))},e.prototype.getCellMetaFromViewMeta=function(t){return{rowIndex:t.rowIndex,colIndex:t.colIndex,id:t.id,type:Ua.DATA_CELL}},e.prototype.handleMove=function(t){var e=t.event,n=t.changeStartCell,r=t.isJumpMode,i=t.isSingleSelection,o=this,a=o.spreadsheet,l=o.startCell,s=o.endCell,u=n?l:s,c=this.getMoveInfo(e.key,u,r);if(c){var h=El([c.row,c.col],2),d=h[0],f=h[1];this.scrollToActiveCell(a,d,f);var p=this.generateCellMeta(a,d,f),v=i?[p]:this.getRangeCells(a,l,p);!function(t,e){var n=t.interaction;n.changeState({stateName:Ga.SELECTED,cells:e}),t.emit(Qo.GLOBAL_SELECTED,n.getActiveCells())}(a,v),n&&(this.startCell=p),this.endCell=p,this.spreadsheet.emit(Qo.DATA_CELL_SELECT_MOVE,v)}},e.prototype.generateCellMeta=function(t,e,n){var r=t.isTableMode,i=t.facet.layoutResult,o=i.colLeafNodes,a=i.rowLeafNodes,l=r()?String(e):a[e].id,s=o[n].id;return{rowIndex:e,colIndex:n,id:cL(l,s),type:Ua.DATA_CELL}},e.prototype.getRangeCells=function(t,e,n){for(var r=pE(e,n),i=r.start,o=i.rowIndex,a=i.colIndex,l=r.end,s=l.rowIndex,u=l.colIndex,c=[],h=o;h<=s;h++)for(var d=a;d<=u;d++)c.push(this.generateCellMeta(t,h,d));return c},e.prototype.getMoveInfo=function(t,e,n){var r=this.spreadsheet,i=r.options,o=i.frozenColCount,a=void 0===o?0:o,l=i.frozenRowCount,s=void 0===l?0:l,u=i.frozenTrailingColCount,c=void 0===u?0:u,h=i.frozenTrailingRowCount,d=void 0===h?0:h,f=r.facet.layoutResult,p=f.rowLeafNodes,v=El([0+a,f.colLeafNodes.length-c-1],2),g=v[0],y=v[1],m=El([0+s,(r.isTableMode()?r.dataSet.getDisplayDataSet().length:p.length)-d-1],2),C=m[0],w=m[1];if(e)switch(t){case Ka.ARROW_RIGHT:if(e.colIndex+1>y)return;return{row:e.rowIndex,col:n?y:e.colIndex+1};case Ka.ARROW_LEFT:if(e.colIndex-1<g)return;return{row:e.rowIndex,col:n?g:e.colIndex-1};case Ka.ARROW_UP:if(e.rowIndex-1<C)return;return{row:n?C:e.rowIndex-1,col:e.colIndex};case Ka.ARROW_DOWN:if(e.rowIndex+1>w)return;return{row:n?w:e.rowIndex+1,col:e.colIndex}}},e.prototype.calculateOffset=function(t,e,n){var r=t.options,i=r.frozenRowCount,o=void 0===i?0:i,a=r.frozenTrailingRowCount,l=void 0===a?0:a,s=t.facet,u=t.frozenColGroup,c=t.frozenTrailingColGroup,h=t.frozenRowGroup,d=t.frozenTrailingRowGroup,f=s.layoutResult.colLeafNodes,p=s.getScrollOffset(),v=p.scrollX,g=p.scrollY,y=s.panelBBox,m=y.viewportHeight,C=y.viewportWidth,w=Fh(t,"theme.splitLine"),x=u?Math.floor(u.getBBox().width-w.verticalBorderWidth/2):0,S=c?Math.floor(c.getBBox().width):0,b=h?Math.floor(h.getBBox().height-w.horizontalBorderWidth/2):0,_=d?Math.floor(d.getBBox().height):0,L=Pb(v,g,s.viewCellWidths,s.viewCellHeights,{width:C-x-S,height:m-b-_,x:x,y:b},s.getRealScrollX(s.cornerBBox.width)),E=-1,T=-1,O=f.find((function(t){return t.colIndex===n}));if(n<=L[0]?E=O.x-x:n>=L[1]&&n<f.length-l&&(E=O.x+O.width-C+S),e<=L[2])T=s.viewCellHeights.getCellOffsetY(e-o);else if(e>=L[3]){T=s.viewCellHeights.getCellOffsetY(e+1)+_-m}return{offsetX:E,offsetY:T}},e.prototype.scrollToActiveCell=function(t,e,n){var r=this.calculateOffset(t,e,n),i=r.offsetX,o=r.offsetY,a=t.facet,l=t.facet.getScrollOffset(),s=l.scrollX,u=l.scrollY;a.scrollWithAnimation({offsetX:{value:i>-1?i:s},offsetY:{value:o>-1?o:u}})},e}(aI),bI=function(){function t(t){var e=this;this.interactions=new Map,this.intercepts=new Set,this.hoverTimer=null,this.defaultState={cells:[],force:!1},this.onTriggerInteractionsResetEffect=function(){e.interactions.forEach((function(t){t.reset()}))},this.selectAll=function(){e.changeState({stateName:Ga.ALL_SELECTED})},this.getCellChildrenNodes=function(t){var n,r=null===(n=null==t?void 0:t.getMeta)||void 0===n?void 0:n.call(t),i=(null==t?void 0:t.cellType)===Ua.ROW_CELL;return e.spreadsheet.isHierarchyTreeType()&&i?nb.getAllLeaveNodes(r).filter((function(t){return t.rowIndex===r.rowIndex})):nb.getAllChildrenNodes(r)},this.selectHeaderCell=function(t){var n;void 0===t&&(t={});var r=t.cell;if(!Cm(r)){var i=null===(n=null==r?void 0:r.getMeta)||void 0===n?void 0:n.call(r);if(i&&!Tm(null==i?void 0:i.x)){e.addIntercepts([Ja.HOVER]);var o=e.spreadsheet.isHierarchyTreeType(),a=(null==r?void 0:r.cellType)===Ua.COL_CELL,l=e.getState(),s=e.isSelectedCell(r),u=(null==t?void 0:t.isMultiSelection)&&e.isSelectedState(),c=s?[]:e.getCellChildrenNodes(r),h=s?[]:[fE(r)];if(u&&(h=qp(null==l?void 0:l.cells,h),c=qp(null==l?void 0:l.nodes,c),s&&(h=h.filter((function(t){return t.id!==i.id})),c=c.filter((function(t){return!(null==t?void 0:t.id.includes(i.id))})))),Cm(h))return e.reset(),void e.spreadsheet.emit(Qo.GLOBAL_SELECTED,e.getActiveCells());var d=c.filter((function(t){return null==t?void 0:t.isLeaf}));e.changeState({cells:h,nodes:d,stateName:Ga.SELECTED});var f=h.map((function(t){return t.id}));return e.updateCells(e.getRowColActiveCells(f)),o&&!a||e.highlightNodes(c),e.spreadsheet.emit(Qo.GLOBAL_SELECTED,e.getActiveCells()),!0}}},this.highlightNodes=function(t){void 0===t&&(t=[]),t.forEach((function(t){var e;null===(e=null==t?void 0:t.belongsCell)||void 0===e||e.updateByState(Ga.SELECTED,t.belongsCell)}))},this.mergeCells=function(t,n){CL(e.spreadsheet,t,n)},this.unmergeCell=function(t){wL(e.spreadsheet,t)},this.spreadsheet=t,this.registerEventController(),this.registerInteractions(),window.addEventListener("visibilitychange",this.onTriggerInteractionsResetEffect)}return t.prototype.destroy=function(){this.interactions.clear(),this.intercepts.clear(),this.eventController.clear(),this.clearHoverTimer(),this.resetState(),window.removeEventListener("visibilitychange",this.onTriggerInteractionsResetEffect)},t.prototype.reset=function(){this.clearState(),this.clearHoverTimer(),this.intercepts.clear(),this.spreadsheet.hideTooltip()},t.prototype.setState=function(t){!function(t,e){var n=null==e?void 0:e.stateName;t.interaction.isEqualStateName(n)||(mE(t),t.hideTooltip(),t.store.set(rl,e))}(this.spreadsheet,t)},t.prototype.getState=function(){return this.spreadsheet.store.get(rl)||this.defaultState},t.prototype.setInteractedCells=function(t){var e=this.getInteractedCells().concat([t]),n=this.getState();n.interactedCells=e,this.setState(n)},t.prototype.getInteractedCells=function(){var t=this.getState();return(null==t?void 0:t.interactedCells)||[]},t.prototype.resetState=function(){this.spreadsheet.store.set(rl,this.defaultState)},t.prototype.getCurrentStateName=function(){return this.getState().stateName},t.prototype.isEqualStateName=function(t){return this.getCurrentStateName()===t},t.prototype.isStateOf=function(t){var e=this.getState();return(null==e?void 0:e.stateName)===t},t.prototype.isSelectedState=function(){return this.isStateOf(Ga.SELECTED)},t.prototype.isAllSelectedState=function(){return this.isStateOf(Ga.ALL_SELECTED)},t.prototype.isHoverFocusState=function(){return this.isStateOf(Ga.HOVER_FOCUS)},t.prototype.isHoverState=function(){return this.isStateOf(Ga.HOVER)},t.prototype.isActiveCell=function(t){return!!this.getCells().find((function(e){return t.getMeta().id===e.id}))},t.prototype.isSelectedCell=function(t){return this.isSelectedState()&&this.isActiveCell(t)},t.prototype.getCells=function(t){var e=this.getState(),n=(null==e?void 0:e.cells)||[];return Tm(t)?n:n.filter((function(e){return t.includes(e.type)}))},t.prototype.getActiveCells=function(){var t=this.getCells().map((function(t){return t.id})),e=this.getAllCells();return yy(t,(function(t){return uy(e,(function(e){var n;return(null===(n=null==e?void 0:e.getMeta())||void 0===n?void 0:n.id)===t}))})).filter((function(t){return t}))},t.prototype.clearStyleIndependent=function(){(this.isSelectedState()||this.isHoverState()||this.isAllSelectedState())&&this.getPanelGroupAllDataCells().forEach((function(t){t.hideInteractionShape()}))},t.prototype.getPanelGroupAllUnSelectedDataCells=function(){var t=this;return this.getPanelGroupAllDataCells().filter((function(e){return!t.isActiveCell(e)}))},t.prototype.getPanelGroupAllDataCells=function(){var t;return AO(null===(t=this.spreadsheet.panelGroup)||void 0===t?void 0:t.getChildren(),fL)},t.prototype.getAllRowHeaderCells=function(){var t,e,n=((null===(t=this.spreadsheet.foregroundGroup)||void 0===t?void 0:t.getChildren())||[]).find((function(t){return t instanceof YO})),r=(null===(e=null==n?void 0:n.cfg)||void 0===e?void 0:e.children)||[];return AO(r,iE).filter((function(t){return t.cellType===Ua.ROW_CELL}))},t.prototype.getAllColHeaderCells=function(){var t,e,n=((null===(t=this.spreadsheet.foregroundGroup)||void 0===t?void 0:t.getChildren())||[]).find((function(t){return t instanceof GO})),r=(null===(e=null==n?void 0:n.cfg)||void 0===e?void 0:e.children)||[];return AO(r,YL).filter((function(t){return t.cellType===Ua.COL_CELL}))},t.prototype.getRowColActiveCells=function(t){return qp(this.getAllRowHeaderCells(),this.getAllColHeaderCells()).filter((function(e){return t.includes(e.getMeta().id)}))},t.prototype.getAllCells=function(){return qp(this.getPanelGroupAllDataCells(),this.getAllRowHeaderCells(),this.getAllColHeaderCells())},t.prototype.hideColumns=function(t,e){void 0===t&&(t=[]),void 0===e&&(e=!0),EL(this.spreadsheet,t,e)},t.prototype.getBrushSelectionInfo=function(t){var e,n,r;return fm(t)?{dataBrushSelection:t,rowBrushSelection:t,colBrushSelection:t}:{dataBrushSelection:null!==(e=null==t?void 0:t.data)&&void 0!==e&&e,rowBrushSelection:null!==(n=null==t?void 0:t.row)&&void 0!==n&&n,colBrushSelection:null!==(r=null==t?void 0:t.col)&&void 0!==r&&r}},t.prototype.getDefaultInteractions=function(){var t=this.spreadsheet.options.interaction,e=t.resize,n=t.brushSelection,r=t.multiSelection,i=t.rangeSelection,o=t.selectedCellMove,a=this.getBrushSelectionInfo(n),l=a.dataBrushSelection,s=a.rowBrushSelection,u=a.colBrushSelection;return[{key:Fa.CORNER_CELL_CLICK,interaction:hI},{key:Fa.DATA_CELL_CLICK,interaction:lI},{key:Fa.ROW_COLUMN_CLICK,interaction:uI},{key:Fa.ROW_TEXT_CLICK,interaction:cI},{key:Fa.MERGED_CELLS_CLICK,interaction:sI},{key:Fa.HOVER,interaction:dI,enable:!JS()},{key:Fa.BRUSH_SELECTION,interaction:vI,enable:!JS()&&l},{key:Fa.ROW_BRUSH_SELECTION,interaction:gI,enable:!JS()&&s},{key:Fa.COL_BRUSH_SELECTION,interaction:pI,enable:!JS()&&u},{key:Fa.COL_ROW_RESIZE,interaction:wI,enable:!JS()&&e},{key:Fa.DATA_CELL_MULTI_SELECTION,interaction:yI,enable:!JS()&&r},{key:Fa.RANGE_SELECTION,interaction:CI,enable:!JS()&&i},{key:Fa.SELECTED_CELL_MOVE,interaction:SI,enable:!JS()&&o}]},t.prototype.registerInteractions=function(){var t=this,e=this.spreadsheet.options.interaction.customInteractions;this.interactions.clear(),this.getDefaultInteractions().forEach((function(e){var n=e.key,r=e.interaction;!1!==e.enable&&t.interactions.set(n,new r(t.spreadsheet))})),Cm(e)||Pg(e,(function(e){var n=e.interaction;t.interactions.set(e.key,new n(t.spreadsheet))}))},t.prototype.registerEventController=function(){this.eventController=new mI(this.spreadsheet)},t.prototype.draw=function(){this.spreadsheet.container.draw()},t.prototype.clearState=function(){mE(this.spreadsheet)&&this.draw()},t.prototype.changeState=function(t){var e=this,n=this.spreadsheet.interaction,r=t.cells,i=void 0===r?[]:r,o=t.force,a=t.stateName,l=t.onUpdateCells;if(Cm(i)&&a===Ga.SELECTED)o&&n.changeState({cells:[],stateName:Ga.UNSELECTED});else{this.getCurrentStateName()===Ga.ALL_SELECTED&&this.clearStyleIndependent(),this.clearState(),this.setState(t);var s=function(){e.updatePanelGroupAllDataCells()};l?l(this,s):s(),this.draw()}},t.prototype.updatePanelGroupAllDataCells=function(){this.updateCells(this.getPanelGroupAllDataCells())},t.prototype.updateCells=function(t){void 0===t&&(t=[]),t.forEach((function(t){t.update()}))},t.prototype.addIntercepts=function(t){var e=this;void 0===t&&(t=[]),t.forEach((function(t){e.intercepts.add(t)}))},t.prototype.hasIntercepts=function(t){var e=this;return void 0===t&&(t=[]),t.some((function(t){return e.intercepts.has(t)}))},t.prototype.removeIntercepts=function(t){var e=this;void 0===t&&(t=[]),t.forEach((function(t){e.intercepts.delete(t)}))},t.prototype.clearHoverTimer=function(){clearTimeout(this.hoverTimer)},t.prototype.setHoverTimer=function(t){this.hoverTimer=t},t.prototype.getHoverTimer=function(){return this.hoverTimer},t.prototype.getSelectedCellHighlight=function(){var t=this.spreadsheet.options.interaction.selectedCellHighlight;if(fm(t))return{rowHeader:t,colHeader:t,currentRow:!1,currentCol:!1};var e=null!=t?t:{},n=e.rowHeader,r=void 0!==n&&n,i=e.colHeader,o=void 0!==i&&i,a=e.currentRow,l=void 0!==a&&a,s=e.currentCol;return{rowHeader:r,colHeader:o,currentRow:l,currentCol:void 0!==s&&s}},t.prototype.getHoverAfterScroll=function(){return this.spreadsheet.options.interaction.hoverAfterScroll},t.prototype.getHoverHighlight=function(){var t=this.spreadsheet.options.interaction.hoverHighlight;if(fm(t))return{rowHeader:t,colHeader:t,currentRow:t,currentCol:t};var e=null!=t?t:{},n=e.rowHeader,r=void 0!==n&&n,i=e.colHeader,o=void 0!==i&&i,a=e.currentRow,l=void 0!==a&&a,s=e.currentCol;return{rowHeader:r,colHeader:o,currentRow:l,currentCol:void 0!==s&&s}},t.prototype.getBrushSelection=function(){var t=this.spreadsheet.options.interaction.brushSelection;if(fm(t))return{data:t,row:t,col:t};var e=null!=t?t:{},n=e.data,r=void 0!==n&&n,i=e.row,o=void 0!==i&&i,a=e.col;return{data:r,row:o,col:void 0!==a&&a}},t}(),_I=function(){function t(t){var e=this;this.viewport=window,this.isDevicePixelRatioChange=!1,this.init=function(){e.initDevicePixelRatioListener(),e.initDeviceZoomListener()},this.destroy=function(){e.removeDevicePixelRatioListener(),e.removeDeviceZoomListener()},this.removeDevicePixelRatioListener=function(){var t;(null===(t=e.devicePixelRatioMedia)||void 0===t?void 0:t.removeEventListener)?e.devicePixelRatioMedia.removeEventListener("change",e.renderByDevicePixelRatioChanged):e.devicePixelRatioMedia.removeListener(e.renderByDevicePixelRatioChanged)},this.initDeviceZoomListener=function(){var t,n;JS()||null===(n=null===(t=e.viewport)||void 0===t?void 0:t.visualViewport)||void 0===n||n.addEventListener("resize",e.renderByZoomScaleWithoutResizeEffect)},this.removeDeviceZoomListener=function(){var t,n;JS()||null===(n=null===(t=e.viewport)||void 0===t?void 0:t.visualViewport)||void 0===n||n.removeEventListener("resize",e.renderByZoomScaleWithoutResizeEffect)},this.renderByZoomScaleWithoutResizeEffect=function(t){e.isDevicePixelRatioChange=!1,e.renderByZoomScale(t)},this.renderByDevicePixelRatioChanged=function(){e.isDevicePixelRatioChange=!0,e.renderByDevicePixelRatio()},this.renderByDevicePixelRatio=function(t){void 0===t&&(t=window.devicePixelRatio);var n=e.spreadsheet,r=n.container,i=n.options,o=i.width,a=i.height,l=i.devicePixelRatio,s=e.spreadsheet.getCanvasElement();if(r.get("pixelRatio")!==t&&s){var u=Math.max(t,l,1);r.set("pixelRatio",u),r.changeSize(o,a),e.spreadsheet.render(!1)}},this.renderByZoomScale=sg((function(t){var n=Math.ceil(t.target.scale);n>=1&&!e.isDevicePixelRatioChange&&e.renderByDevicePixelRatio(n)}),350),this.spreadsheet=t}return t.prototype.initDevicePixelRatioListener=function(){var t;this.devicePixelRatioMedia=window.matchMedia("(resolution: ".concat(window.devicePixelRatio,"dppx)")),(null===(t=this.devicePixelRatioMedia)||void 0===t?void 0:t.addEventListener)?this.devicePixelRatioMedia.addEventListener("change",this.renderByDevicePixelRatioChanged):this.devicePixelRatioMedia.addListener(this.renderByDevicePixelRatioChanged)},t}(),LI=function(){function t(t){this.visible=!1,this.position={x:0,y:0},this.spreadsheet=t}return t.prototype.show=function(t){var e,n,r,i=t.position,o=t.options,a=t.content,l=t.event,s=cO(o).enterable,u=this.spreadsheet.options.tooltip||{},c=u.autoAdjustBoundary,h=u.adjustPosition;this.visible=!0,this.options=t;var d=this.getContainer();this.renderContent(a);var f=function(t){var e=t.spreadsheet,n=t.position,r=t.tooltipContainer,i=t.autoAdjustBoundary,o=e.getCanvasElement(),a=n.x+ZS,l=n.y+QS;if(!i||!o)return{x:a,y:l};var s="body"===i,u=e.facet.panelBBox,c=u.maxX,h=u.maxY,d=e.options,f=d.width,p=d.height,v=o.getBoundingClientRect(),g=v.top,y=v.left,m=r.getBoundingClientRect(),C=m.width,w=m.height,x=document.body.getBoundingClientRect(),S=x.width,b=x.height,_=s?S:Math.min(f,c)+y,L=s?b:Math.min(p,h)+g;return a+C>=_&&(a=_-C),l+w>=L&&(l=L-w),{x:a,y:l}}({spreadsheet:this.spreadsheet,position:i,tooltipContainer:d,autoAdjustBoundary:c}),p=f.x,v=f.y;this.position=null!==(e=null==h?void 0:h({position:{x:p,y:v},event:l}))&&void 0!==e?e:{x:p,y:v},dO(d,{style:{left:"".concat(null===(n=this.position)||void 0===n?void 0:n.x,"px"),top:"".concat(null===(r=this.position)||void 0===r?void 0:r.y,"px"),pointerEvents:s?"all":"none"},visible:!0})},t.prototype.hide=function(){this.visible=!1,this.container&&(dO(this.container,{style:{pointerEvents:"none"},visible:!1}),this.resetPosition())},t.prototype.destroy=function(){var t,e;this.visible=!1,this.container&&(this.resetPosition(),null===(e=(t=this.container).remove)||void 0===e||e.call(t),this.container=null)},t.prototype.renderContent=function(t){if(this.container){this.clearContent();var e=(this.spreadsheet.options.tooltip||{}).content,n=null!=t?t:e;Tm(n)||("string"!=typeof n?n instanceof Element&&this.container.appendChild(n):this.container.innerHTML=n)}},t.prototype.clearContent=function(){this.container&&(this.container.innerHTML="")},t.prototype.disablePointerEvent=function(){this.container&&"none"!==this.container.style.pointerEvents&&dO(this.container,{style:{pointerEvents:"none"}})},t.prototype.resetPosition=function(){this.position={x:0,y:0}},t.prototype.getContainer=function(){var t;if(!this.container){var e=this.spreadsheet.options.tooltip,n=(null===(t=e.getContainer)||void 0===t?void 0:t.call(e))||document.body,r=document.createElement("div");return dO(r,{style:e.style,className:[qS].concat(e.className)}),n.appendChild(r),this.container=r,this.container}return this.container},t}(),EI=function(t){function e(e,n,r){var i=t.call(this)||this;return i.store=new Lb,i.untypedOn=i.on,i.untypedEmit=i.emit,i.on=function(t,e){return i.untypedOn(t,e)},i.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return i.untypedEmit.apply(i,Tl([t],El(e),!1))},i.initHiddenColumnsDetail=function(){var t=i.options.interaction.hiddenColumnFields,e=i.store.get("hiddenColumnsDetail");Cm(t)&&Cm(e)||EL(i,t,!0)},i.measureText=Th((function(t,e){var n;if(void 0===t&&(t=""),!e)return null;var r=null===(n=i.getCanvasElement())||void 0===n?void 0:n.getContext("2d"),o=e,a=o.fontSize,l=o.fontFamily,s=o.fontWeight,u=o.fontStyle,c=o.fontVariant;return r.font=[u,c,s,"".concat(a,"px"),l].join(" ").trim(),r.measureText(String(t))}),(function(t,e){return Tl([t],El(Fy(e)),!1).join("")})),i.measureTextWidth=function(t,e){void 0===t&&(t="");var n=i.measureText(t,e);return(null==n?void 0:n.width)||0},i.measureTextHeight=function(t,e){void 0===t&&(t="");var n=i.measureText(t,e);return n?n.actualBoundingBoxAscent+n.actualBoundingBoxDescent:0},i.measureTextWidthRoughly=function(t,e){var n,r;void 0===e&&(e={});var o=i.measureTextWidth("a",e),a=i.measureTextWidth("蚂",e),l=0;if(!t)return l;try{for(var s=Ll(t),u=s.next();!u.done;u=s.next()){var c=u.value.charCodeAt(0);l+=c>=0&&c<=255?o:a}}catch(h){n={error:h}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return l},i.dataCfg=wE(n),i.options=xE(r),i.dataSet=i.getDataSet(i.options),i.setDebug(),i.initTooltip(),i.initGroups(e),i.bindEvents(),i.initInteraction(),i.initTheme(),i.initHdAdapter(),i.registerIcons(),i.setOverscrollBehavior(),i}return Sl(e,t),e.prototype.setOverscrollBehavior=function(){var t=this.options.interaction.overscrollBehavior,e=window.getComputedStyle(document.body).getPropertyValue("overscroll-behavior");e&&"auto"!==e?this.store.set("initOverscrollBehavior",e):t&&(document.body.style.overscrollBehavior=t)},e.prototype.restoreOverscrollBehavior=function(){document.body.style.overscrollBehavior=this.store.get("initOverscrollBehavior")||""},e.prototype.setDebug=function(){cb.getInstance().setDebug(this.options.debug)},e.prototype.initTheme=function(){this.setThemeCfg({name:"default"})},e.prototype.getMountContainer=function(t){var e=zy(t)?document.querySelector(t):t;if(!e)throw new Error("Target mount container is not a DOM element");return e},e.prototype.initHdAdapter=function(){this.options.hdAdapter&&(this.hdAdapter=new _I(this),this.hdAdapter.init())},e.prototype.initInteraction=function(){var t,e;null===(e=null===(t=this.interaction)||void 0===t?void 0:t.destroy)||void 0===e||e.call(t),this.interaction=new bI(this)},e.prototype.initTooltip=function(){var t,e;null===(e=null===(t=this.tooltip)||void 0===t?void 0:t.destroy)||void 0===e||e.call(t),this.tooltip=this.renderTooltip(),this.tooltip},e.prototype.renderTooltip=function(){var t,e;return(null===(e=null===(t=this.options.tooltip)||void 0===t?void 0:t.renderTooltip)||void 0===e?void 0:e.call(t,this))||new LI(this)},e.prototype.showTooltip=function(t){var e,n,r=t.content,i=t.event,o=this.getCell(null==i?void 0:i.target),a=ws(r)?r(o,t):r;null===(n=(e=this.tooltip).show)||void 0===n||n.call(e,bl(bl({},t),{content:a}))},e.prototype.showTooltipWithInfo=function(t,e,n){var r,i=SO(this,t),o=i.showTooltip,a=i.content;if(o){var l=this.getCell(null==t?void 0:t.target),s=null!==(r=null==n?void 0:n.data)&&void 0!==r?r:wO({spreadsheet:this,cellInfos:e,targetCell:l,options:bl({enableFormat:!0},n)});this.showTooltip({data:s,position:{x:t.clientX,y:t.clientY},options:bl({enterable:!0},n),event:t,content:a})}},e.prototype.hideTooltip=function(){var t,e;null===(e=(t=this.tooltip).hide)||void 0===e||e.call(t)},e.prototype.destroyTooltip=function(){var t,e;null===(e=(t=this.tooltip).destroy)||void 0===e||e.call(t)},e.prototype.registerIcons=function(){var t=this.options.customSVGIcons;Cm(t)||Pg(t,(function(t){fb(t.name,t.svg)}))},e.prototype.setDataCfg=function(t,e){this.store.set("originalDataCfg",t),this.dataCfg=e?wE(t):wE(this.dataCfg,t),this.store.set(ka,Na)},e.prototype.setOptions=function(t,e){var n;this.hideTooltip(),this.options=e?xE(t):CE(this.options,t),(e||(null===(n=t.tooltip)||void 0===n?void 0:n.renderTooltip))&&this.initTooltip(),this.registerIcons()},e.prototype.render=function(t,e){if(void 0===t&&(t=!0),void 0===e&&(e={}),this.getCanvasElement()){var n=e.reBuildDataSet,r=void 0!==n&&n,i=e.reBuildHiddenColumnsDetail,o=void 0===i||i;this.emit(Qo.LAYOUT_BEFORE_RENDER),r&&(this.dataSet=this.getDataSet(this.options)),t&&(this.clearDrillDownData("",!0),this.dataSet.setDataCfg(this.dataCfg)),this.buildFacet(),o&&this.initHiddenColumnsDetail(),this.emit(Qo.LAYOUT_AFTER_RENDER)}},e.prototype.destroy=function(){var t,e,n,r,i;this.restoreOverscrollBehavior(),this.emit(Qo.LAYOUT_DESTROY),null===(t=this.facet)||void 0===t||t.destroy(),null===(e=this.hdAdapter)||void 0===e||e.destroy(),null===(n=this.interaction)||void 0===n||n.destroy(),null===(r=this.store)||void 0===r||r.clear(),this.destroyTooltip(),this.clearCanvasEvent(),null===(i=this.container)||void 0===i||i.destroy(),function(){var t;null===(t=document.getElementById(l_))||void 0===t||t.remove()}()},e.prototype.setThemeCfg=function(t){void 0===t&&(t={});var e=(null==t?void 0:t.theme)||{},n=eb(bl(bl({},t),{spreadsheet:this}));this.theme=CE(n,e)},e.prototype.setTheme=function(t){this.theme=CE(this.theme,t)},e.prototype.updatePagination=function(t){this.options=CE(this.options,{pagination:t}),this.store.set("scrollX",0),this.store.set("scrollY",0)},e.prototype.getContentHeight=function(){return this.facet.getContentHeight()},e.prototype.changeSize=function(t,e){void 0===t&&(t=this.options.width),void 0===e&&(e=this.options.height),this.changeSheetSize(t,e)},e.prototype.changeSheetSize=function(t,e){void 0===t&&(t=this.options.width),void 0===e&&(e=this.options.height);var n=this.getCanvasElement(),r=this.container.get("width"),i=this.container.get("height");(t!==r||e!==i)&&n&&(this.options=CE(this.options,{width:t,height:e}),this.container.changeSize(t,e))},e.prototype.getCanvasElement=function(){return this.container.get("el")},e.prototype.getLayoutWidthType=function(){return this.options.style.layoutWidthType},e.prototype.getRowNodes=function(t){return void 0===t&&(t=-1),-1===t?this.facet.layoutResult.rowNodes:this.facet.layoutResult.rowNodes.filter((function(e){return e.level===t}))},e.prototype.getRowLeafNodes=function(){var t;return(null===(t=this.facet)||void 0===t?void 0:t.layoutResult.rowLeafNodes)||[]},e.prototype.getColumnNodes=function(t){var e;void 0===t&&(t=-1);var n=(null===(e=this.facet)||void 0===e?void 0:e.layoutResult.colNodes)||[];return-1===t?n:n.filter((function(e){return e.level===t}))},e.prototype.getColumnLeafNodes=function(){var t;return(null===(t=this.facet)||void 0===t?void 0:t.layoutResult.colLeafNodes)||[]},e.prototype.updateScrollOffset=function(t){this.facet.updateScrollOffset(CE({offsetX:{value:void 0,animate:!1},offsetY:{value:void 0,animate:!1},rowHeaderOffsetX:{value:void 0,animate:!1}},t))},e.prototype.getTooltipDataItemMappingCallback=function(){var t;return null===(t=this.options)||void 0===t?void 0:t.mappingDisplayDataItem},e.prototype.getCell=function(t){for(var e,n=t;n&&!(n instanceof ta);){if(n instanceof lL)return n;n=null===(e=n.get)||void 0===e?void 0:e.call(n,"parent")}return null},e.prototype.getCellType=function(t){var e=this.getCell(t);return null==e?void 0:e.cellType},e.prototype.getTotalsConfig=function(t){var e=Fh(this.options.totals,Gy(this.dataSet.fields.rows,t)?"row":"col",{}),n=!(!e.showSubTotals||!Gy(e.subTotalsDimensions,t))&&e.showSubTotals;return bl(bl({label:VS("总计"),subLabel:VS("小计"),totalsGroupDimensions:[],subTotalsGroupDimensions:[]},e),{showSubTotals:n})},e.prototype.initGroups=function(t){var e=this.options,n=e.width,r=e.height,i=e.supportCSSTransform,o=e.devicePixelRatio;this.container=new ta({container:this.getMountContainer(t),width:n,height:r,localRefresh:!1,supportCSSTransform:i,pixelRatio:Math.max(o,1)}),this.backgroundGroup=this.container.addGroup({name:"backGroundGroup",zIndex:0}),this.panelGroup=this.container.addGroup({name:"panelGroup",zIndex:1}),this.foregroundGroup=this.container.addGroup({name:"foreGroundGroup",zIndex:3}),this.initPanelGroupChildren(),this.updateContainerStyle()},e.prototype.updateContainerStyle=function(){var t=this.getCanvasElement();t&&(t.style.display="block")},e.prototype.initPanelGroupChildren=function(){this.panelScrollGroup=new oI({name:"panelScrollGroup",zIndex:1,s2:this}),this.panelGroup.add(this.panelScrollGroup)},e.prototype.getInitColumnLeafNodes=function(){return this.store.get("initColumnLeafNodes",[])},e.prototype.clearColumnLeafNodes=function(){this.store.set("initColumnLeafNodes",void 0)},e.prototype.clearCanvasEvent=function(){var t=this;Sy(this.getEvents(),(function(e,n){t.off(n)}))},e.prototype.updateSortMethodMap=function(t,e,n){var r;void 0===n&&(n=!1);var i=n?null:this.store.get("sortMethodMap");this.store.set("sortMethodMap",bl(bl({},i),((r={})[t]=e,r)))},e.prototype.getMenuDefaultSelectedKeys=function(t){var e=Fh(this.store.get("sortMethodMap"),t);return e?[e]:[]},e}(Vt),TI=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Sl(e,t),e.prototype.getDataSet=function(t){var e=t.dataSet,n=t.hierarchyType;return e?e(this):"customTree"===n?new TO(this):new LO(this)},e.prototype.getContentHeight=function(){return this.facet.getContentHeight()},e.prototype.isPivotMode=function(){return!0},e.prototype.isTableMode=function(){return!1},e.prototype.isHierarchyTreeType=function(){var t=this.options.hierarchyType;return"tree"===t||"customTree"===t},e.prototype.isScrollContainsRowHeader=function(){return!this.isFrozenRowHeader()},e.prototype.isFrozenRowHeader=function(){var t;return null===(t=this.options)||void 0===t?void 0:t.frozenRowHeader},e.prototype.isValueInCols=function(){return this.dataSet.fields.valueInCols},e.prototype.clearDrillDownData=function(t,e){this.dataSet instanceof LO&&(this.dataSet.clearDrillDownData(t),e||(this.interaction.reset(),this.render(!1)))},e.prototype.getFacetCfgFromDataSetAndOptions=function(){var t=this,e=this.dataSet,n=e.fields,r=e.meta,i=this.options,o=i.style,a=i.dataCell;return bl(bl(bl(bl({},this.options),n),o),{meta:r,spreadsheet:this,dataSet:this.dataSet,dataCell:null!=a?a:function(e){return new fL(e,t)}})},e.prototype.buildFacet=function(){var t,e=this.getFacetCfgFromDataSetAndOptions();null===(t=this.facet)||void 0===t||t.destroy(),this.facet=new eI(e),this.facet.render()},e.prototype.bindEvents=function(){this.off(Qo.ROW_CELL_COLLAPSE_TREE_ROWS),this.off(Qo.LAYOUT_TREE_ROWS_COLLAPSE_ALL),this.on(Qo.ROW_CELL_COLLAPSE_TREE_ROWS,this.handleRowCellCollapseTreeRows),this.on(Qo.LAYOUT_TREE_ROWS_COLLAPSE_ALL,this.handleTreeRowsCollapseAll)},e.prototype.handleRowCellCollapseTreeRows=function(t){var e,n=t.id,r=t.isCollapsed,i={style:{collapsedRows:(e={},e[n]=r,e)}};this.emit(Qo.LAYOUT_COLLAPSE_ROWS,{collapsedRows:i.style.collapsedRows,meta:null==t?void 0:t.node}),this.setOptions(i),this.render(!1),this.emit(Qo.LAYOUT_AFTER_COLLAPSE_ROWS,{collapsedRows:i.style.collapsedRows,meta:null==t?void 0:t.node})},e.prototype.handleTreeRowsCollapseAll=function(t){var e={style:{hierarchyCollapse:!t,collapsedRows:null,rowExpandDepth:null}};this.setOptions(e),this.render(!1)},e.prototype.groupSortByMethod=function(t,e){var n=this.dataCfg.fields,r=n.rows,i=n.columns,o=this.options.style.colCfg.hideMeasureColumn,a=this.isValueInCols()?Mg(r):Mg(i),l=e.query,s=e.value,u=Yp(l),c=s;o&&this.isValueInCols()&&(c=this.dataSet.fields.values[0],u[ia]=c);var h={sortFieldId:a,sortMethod:t,sortByMeasure:c,query:u},d=this.dataCfg.sortParams.filter((function(t){return(null==t?void 0:t.sortFieldId)!==a}));this.updateSortMethodMap(e.id,t,!0);var f=Tl(Tl([],El(d),!1),[h],!1);this.emit(Qo.RANGE_SORT,f),this.setDataCfg(bl(bl({},this.dataCfg),{sortParams:f})),this.render()},e.prototype.handleGroupSort=function(t,e){var n=this;t.stopPropagation(),this.interaction.addIntercepts([Ja.HOVER]);var r=this.getMenuDefaultSelectedKeys(null==e?void 0:e.id),i={onClick:function(r){var i=r.key;n.groupSortByMethod(i,e),n.emit(Qo.RANGE_SORTED,t)},menus:[{key:"asc",icon:"groupAsc",text:VS("组内升序")},{key:"desc",icon:"groupDesc",text:VS("组内降序")},{key:"none",text:VS("不排序")}],defaultSelectedKeys:r};this.showTooltipWithInfo(t,[],{operator:i,onlyMenu:!0,forceRender:!0})},e}(EI),OI=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Sl(e,t),e}(iI),II=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.onSortTooltipClick=function(t,n){var r=t.key,i={sortFieldId:n.field,sortMethod:r};e.updateSortMethodMap(n.id,r),e.emit(Qo.RANGE_SORT,[i])},e}return Sl(e,t),e.prototype.getDataSet=function(t){var e=t.dataSet;return e?e(this):new EO(this)},e.prototype.isPivotMode=function(){return!1},e.prototype.isTableMode=function(){return!0},e.prototype.isHierarchyTreeType=function(){return!1},e.prototype.isScrollContainsRowHeader=function(){return!1},e.prototype.isFrozenRowHeader=function(){return!1},e.prototype.clearDrillDownData=function(){},e.prototype.isValueInCols=function(){return!1},e.prototype.bindEvents=function(){},e.prototype.initPanelGroupChildren=function(){var e,n=this;t.prototype.initPanelGroupChildren.call(this);var r={zIndex:2,s2:this};e=El([ua,ca,ha,da,fa,pa].map((function(t){var e=new OI(bl({name:t},r));return n.panelGroup.add(e),e})),6),this.frozenRowGroup=e[0],this.frozenColGroup=e[1],this.frozenTrailingRowGroup=e[2],this.frozenTrailingColGroup=e[3],this.frozenTopGroup=e[4],this.frozenBottomGroup=e[5]},e.prototype.getFacetCfgFromDataSetAndOptions=function(){var t=this,e=this.dataSet,n=e.fields,r=e.meta,i=this.options,o=i.style,a=i.dataCell;return bl(bl(bl(bl({},this.options),n),o),{meta:r,spreadsheet:this,dataSet:this.dataSet,dataCell:null!=a?a:function(e){return t.options.showSeriesNumber&&0===e.colIndex?new cE(e,t):new uE(e,t)}})},e.prototype.buildFacet=function(){var t,e=this.getFacetCfgFromDataSetAndOptions();null===(t=this.facet)||void 0===t||t.destroy(),this.facet=new rI(e),this.facet.render()},e.prototype.clearFrozenGroups=function(){this.frozenRowGroup.set("children",[]),this.frozenColGroup.set("children",[]),this.frozenTrailingRowGroup.set("children",[]),this.frozenTrailingColGroup.set("children",[]),this.frozenTopGroup.set("children",[]),this.frozenBottomGroup.set("children",[])},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.clearFrozenGroups(),this.off(Qo.RANGE_SORT),this.off(Qo.RANGE_FILTER)},e.prototype.handleGroupSort=function(t,e){var n=this;t.stopPropagation(),this.interaction.addIntercepts([Ja.HOVER]);var r=this.getMenuDefaultSelectedKeys(null==e?void 0:e.id),i={onClick:function(t){var r=t.key;n.onSortTooltipClick({key:r},e)},menus:[{key:"asc",icon:"groupAsc",text:VS("升序")},{key:"desc",icon:"groupDesc",text:VS("降序")},{key:"none",text:VS("不排序")}],defaultSelectedKeys:r};this.showTooltipWithInfo(t,[],{operator:i,onlyMenu:!0,forceRender:!0})},e}(EI),RI=Object.defineProperty,MI=Object.defineProperties,AI=Object.getOwnPropertyDescriptors,BI=Object.getOwnPropertySymbols,DI=Object.prototype.hasOwnProperty,kI=Object.prototype.propertyIsEnumerable,NI=(t,e,n)=>e in t?RI(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,PI=(t,e)=>{for(var n in e||(e={}))DI.call(e,n)&&NI(t,n,e[n]);if(BI)for(var n of BI(e))kI.call(e,n)&&NI(t,n,e[n]);return t},zI=(t,e)=>MI(t,AI(e));const HI={zh_CN:{"选择分析信息":"选择分析信息","切换指标":"切换指标","确定":"确定","取消":"取消","重置":"重置","请输入关键字搜索":"请输入关键字搜索","搜索":"搜索","恢复":"恢复","已选 {} 项":"已选 {} 项","所选项":"所选项","选择下钻维度":"选择下钻维度","恢复默认":"恢复默认","搜索字段":"搜索字段","行列切换":"行列切换","行头":"行头","列头":"列头","值":"值","展开子项":"展开子项","首字母":"首字母","手动排序":"手动排序","其他字段":"其他字段","高级排序":"高级排序","设置顺序":"设置顺序","可选字段":"可选字段","按以下规则进行排序（优先级由低到高）":"按以下规则进行排序（优先级由低到高）","按":"按","说明":"说明","复制原始数据":"复制原始数据","复制格式化数据":"复制格式化数据","下载原始数据":"下载原始数据","下载格式化数据":"下载格式化数据","操作成功":"操作成功","操作失败":"操作失败","时间":"时间","指标":"指标","目标值":"目标值"},en_US:{"选择分析信息":"Select Analysis Information","切换指标":"Switch indicator","确定":"Ok","取消":"Cancel","重置":"Reset","请输入关键字搜索":"Please enter a keyword search","搜索":"Search","恢复":"Recover","已选 {} 项":"selected {} item","所选项":"selected items","选择下钻维度":"Select drill down dimension","恢复默认":"Restore default","搜索字段":"Search field","行列切换":"Switch Dimensions","行头":"Rows","列头":"Cols","值":"Values","展开子项":"Expand Children","首字母":"Alphabetical order","手动排序":"Custom order","其他字段":"Other field","高级排序":"Advanced order","设置顺序":"SetManual","可选字段":"Fields","按以下规则进行排序（优先级由低到高）":"Order according to the following rules (from low to high priority)","按":"By","说明":"Description","复制原始数据":"Copy raw data","复制格式化数据":"Copy formatted data","下载原始数据":"Download raw data","下载格式化数据":"Download formatted data","操作成功":"Operation successful","操作失败":"Operation failed","时间":"Date","指标":"Measure","目标值":"Target Value"}},FI={tooltip:{showTooltip:!0,autoAdjustBoundary:"body",operation:{hiddenColumns:!0,trend:!1,sort:!0}},showDefaultHeaderActionIcon:!0};var WI="object"==typeof global&&global&&global.Object===Object&&global,GI="object"==typeof self&&self&&self.Object===Object&&self,jI=WI||GI||Function("return this")(),UI=jI.Symbol,YI=Object.prototype,VI=YI.hasOwnProperty,XI=YI.toString,qI=UI?UI.toStringTag:void 0;var KI=Object.prototype.toString;var $I="[object Null]",ZI="[object Undefined]",QI=UI?UI.toStringTag:void 0;function JI(t){return null==t?void 0===t?ZI:$I:QI&&QI in Object(t)?function(t){var e=VI.call(t,qI),n=t[qI];try{t[qI]=void 0;var r=!0}catch(o){}var i=XI.call(t);return r&&(e?t[qI]=n:delete t[qI]),i}(t):function(t){return KI.call(t)}(t)}function tR(t){return null!=t&&"object"==typeof t}var eR="[object Symbol]";function nR(t){return"symbol"==typeof t||tR(t)&&JI(t)==eR}var rR=Array.isArray,iR=1/0,oR=UI?UI.prototype:void 0,aR=oR?oR.toString:void 0;function lR(t){if("string"==typeof t)return t;if(rR(t))return function(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}(t,lR)+"";if(nR(t))return aR?aR.call(t):"";var e=t+"";return"0"==e&&1/t==-iR?"-0":e}var sR=/\s/;var uR=/^\s+/;function cR(t){return t?t.slice(0,function(t){for(var e=t.length;e--&&sR.test(t.charAt(e)););return e}(t)+1).replace(uR,""):t}function hR(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}var dR=NaN,fR=/^[-+]0x[0-9a-f]+$/i,pR=/^0b[01]+$/i,vR=/^0o[0-7]+$/i,gR=parseInt;function yR(t){if("number"==typeof t)return t;if(nR(t))return dR;if(hR(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=hR(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=cR(t);var n=pR.test(t);return n||vR.test(t)?gR(t.slice(2),n?2:8):fR.test(t)?dR:+t}function mR(t){return t}var CR="[object AsyncFunction]",wR="[object Function]",xR="[object GeneratorFunction]",SR="[object Proxy]";function bR(t){if(!hR(t))return!1;var e=JI(t);return e==wR||e==xR||e==CR||e==SR}var _R=jI["__core-js_shared__"],LR=function(){var t=/[^.]+$/.exec(_R&&_R.keys&&_R.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();var ER=Function.prototype.toString;function TR(t){if(null!=t){try{return ER.call(t)}catch(e){}try{return t+""}catch(e){}}return""}var OR=/^\[object .+?Constructor\]$/,IR=Function.prototype,RR=Object.prototype,MR=IR.toString,AR=RR.hasOwnProperty,BR=RegExp("^"+MR.call(AR).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function DR(t){return!(!hR(t)||function(t){return!!LR&&LR in t}(t))&&(bR(t)?BR:OR).test(TR(t))}function kR(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return DR(n)?n:void 0}var NR=kR(jI,"WeakMap"),PR=Object.create,zR=function(){function t(){}return function(e){if(!hR(e))return{};if(PR)return PR(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}(),HR=zR;var FR=function(){try{var t=kR(Object,"defineProperty");return t({},"",{}),t}catch(e){}}(),WR=FR;var GR=9007199254740991,jR=/^(?:0|[1-9]\d*)$/;function UR(t,e){var n=typeof t;return!!(e=null==e?GR:e)&&("number"==n||"symbol"!=n&&jR.test(t))&&t>-1&&t%1==0&&t<e}function YR(t,e,n){"__proto__"==e&&WR?WR(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function VR(t,e){return t===e||t!=t&&e!=e}var XR=Object.prototype.hasOwnProperty;function qR(t,e,n){var r=t[e];XR.call(t,e)&&VR(r,n)&&(void 0!==n||e in t)||YR(t,e,n)}function KR(t,e,n,r){var i=!n;n||(n={});for(var o=-1,a=e.length;++o<a;){var l=e[o],s=r?r(n[l],t[l],l,n,t):void 0;void 0===s&&(s=t[l]),i?YR(n,l,s):qR(n,l,s)}return n}var $R=9007199254740991;function ZR(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=$R}function QR(t){return null!=t&&ZR(t.length)&&!bR(t)}var JR=Object.prototype;function tM(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||JR)}function eM(t){return tR(t)&&"[object Arguments]"==JI(t)}var nM=Object.prototype,rM=nM.hasOwnProperty,iM=nM.propertyIsEnumerable,oM=eM(function(){return arguments}())?eM:function(t){return tR(t)&&rM.call(t,"callee")&&!iM.call(t,"callee")};var aM="object"==typeof exports&&exports&&!exports.nodeType&&exports,lM=aM&&"object"==typeof module&&module&&!module.nodeType&&module,sM=lM&&lM.exports===aM?jI.Buffer:void 0,uM=(sM?sM.isBuffer:void 0)||function(){return!1},cM={};function hM(t){return function(e){return t(e)}}cM["[object Float32Array]"]=cM["[object Float64Array]"]=cM["[object Int8Array]"]=cM["[object Int16Array]"]=cM["[object Int32Array]"]=cM["[object Uint8Array]"]=cM["[object Uint8ClampedArray]"]=cM["[object Uint16Array]"]=cM["[object Uint32Array]"]=!0,cM["[object Arguments]"]=cM["[object Array]"]=cM["[object ArrayBuffer]"]=cM["[object Boolean]"]=cM["[object DataView]"]=cM["[object Date]"]=cM["[object Error]"]=cM["[object Function]"]=cM["[object Map]"]=cM["[object Number]"]=cM["[object Object]"]=cM["[object RegExp]"]=cM["[object Set]"]=cM["[object String]"]=cM["[object WeakMap]"]=!1;var dM="object"==typeof exports&&exports&&!exports.nodeType&&exports,fM=dM&&"object"==typeof module&&module&&!module.nodeType&&module,pM=fM&&fM.exports===dM&&WI.process,vM=function(){try{var t=fM&&fM.require&&fM.require("util").types;return t||pM&&pM.binding&&pM.binding("util")}catch(e){}}(),gM=vM&&vM.isTypedArray,yM=gM?hM(gM):function(t){return tR(t)&&ZR(t.length)&&!!cM[JI(t)]},mM=Object.prototype.hasOwnProperty;function CM(t,e){var n=rR(t),r=!n&&oM(t),i=!n&&!r&&uM(t),o=!n&&!r&&!i&&yM(t),a=n||r||i||o,l=a?function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}(t.length,String):[],s=l.length;for(var u in t)!e&&!mM.call(t,u)||a&&("length"==u||i&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||UR(u,s))||l.push(u);return l}function wM(t,e){return function(n){return t(e(n))}}var xM=wM(Object.keys,Object),SM=Object.prototype.hasOwnProperty;function bM(t){if(!tM(t))return xM(t);var e=[];for(var n in Object(t))SM.call(t,n)&&"constructor"!=n&&e.push(n);return e}function _M(t){return QR(t)?CM(t):bM(t)}var LM=Object.prototype.hasOwnProperty;function EM(t){if(!hR(t))return function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}(t);var e=tM(t),n=[];for(var r in t)("constructor"!=r||!e&&LM.call(t,r))&&n.push(r);return n}function TM(t){return QR(t)?CM(t,!0):EM(t)}var OM=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,IM=/^\w*$/;function RM(t,e){if(rR(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!nR(t))||(IM.test(t)||!OM.test(t)||null!=e&&t in Object(e))}var MM=kR(Object,"create");var AM=Object.prototype.hasOwnProperty;var BM=Object.prototype.hasOwnProperty;function DM(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function kM(t,e){for(var n=t.length;n--;)if(VR(t[n][0],e))return n;return-1}DM.prototype.clear=function(){this.__data__=MM?MM(null):{},this.size=0},DM.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},DM.prototype.get=function(t){var e=this.__data__;if(MM){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return AM.call(e,t)?e[t]:void 0},DM.prototype.has=function(t){var e=this.__data__;return MM?void 0!==e[t]:BM.call(e,t)},DM.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=MM&&void 0===e?"__lodash_hash_undefined__":e,this};var NM=Array.prototype.splice;function PM(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}PM.prototype.clear=function(){this.__data__=[],this.size=0},PM.prototype.delete=function(t){var e=this.__data__,n=kM(e,t);return!(n<0)&&(n==e.length-1?e.pop():NM.call(e,n,1),--this.size,!0)},PM.prototype.get=function(t){var e=this.__data__,n=kM(e,t);return n<0?void 0:e[n][1]},PM.prototype.has=function(t){return kM(this.__data__,t)>-1},PM.prototype.set=function(t,e){var n=this.__data__,r=kM(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this};var zM=kR(jI,"Map");function HM(t,e){var n,r,i=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof e?"string":"hash"]:i.map}function FM(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}FM.prototype.clear=function(){this.size=0,this.__data__={hash:new DM,map:new(zM||PM),string:new DM}},FM.prototype.delete=function(t){var e=HM(this,t).delete(t);return this.size-=e?1:0,e},FM.prototype.get=function(t){return HM(this,t).get(t)},FM.prototype.has=function(t){return HM(this,t).has(t)},FM.prototype.set=function(t,e){var n=HM(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this};var WM="Expected a function";function GM(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError(WM);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(GM.Cache||FM),n}GM.Cache=FM;var jM=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,UM=/\\(\\)?/g,YM=function(t){var e=GM(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(jM,(function(t,n,r,i){e.push(r?i.replace(UM,"$1"):n||t)})),e})),VM=YM;function XM(t,e){return rR(t)?t:RM(t,e)?[t]:VM(function(t){return null==t?"":lR(t)}(t))}var qM=1/0;function KM(t){if("string"==typeof t||nR(t))return t;var e=t+"";return"0"==e&&1/t==-qM?"-0":e}function $M(t,e){for(var n=0,r=(e=XM(e,t)).length;null!=t&&n<r;)t=t[KM(e[n++])];return n&&n==r?t:void 0}function ZM(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}var QM=wM(Object.getPrototypeOf,Object),JM=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");function tA(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}function eA(t){var e=this.__data__=new PM(t);this.size=e.size}eA.prototype.clear=function(){this.__data__=new PM,this.size=0},eA.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},eA.prototype.get=function(t){return this.__data__.get(t)},eA.prototype.has=function(t){return this.__data__.has(t)},eA.prototype.set=function(t,e){var n=this.__data__;if(n instanceof PM){var r=n.__data__;if(!zM||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new FM(r)}return n.set(t,e),this.size=n.size,this};var nA="object"==typeof exports&&exports&&!exports.nodeType&&exports,rA=nA&&"object"==typeof module&&module&&!module.nodeType&&module,iA=rA&&rA.exports===nA?jI.Buffer:void 0,oA=iA?iA.allocUnsafe:void 0;function aA(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}function lA(){return[]}var sA=Object.prototype.propertyIsEnumerable,uA=Object.getOwnPropertySymbols,cA=uA?function(t){return null==t?[]:(t=Object(t),aA(uA(t),(function(e){return sA.call(t,e)})))}:lA;var hA=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)ZM(e,cA(t)),t=QM(t);return e}:lA,dA=hA;function fA(t,e,n){var r=e(t);return rR(t)?r:ZM(r,n(t))}function pA(t){return fA(t,_M,cA)}function vA(t){return fA(t,TM,dA)}var gA=kR(jI,"DataView"),yA=kR(jI,"Promise"),mA=kR(jI,"Set"),CA="[object Map]",wA="[object Promise]",xA="[object Set]",SA="[object WeakMap]",bA="[object DataView]",_A=TR(gA),LA=TR(zM),EA=TR(yA),TA=TR(mA),OA=TR(NR),IA=JI;(gA&&IA(new gA(new ArrayBuffer(1)))!=bA||zM&&IA(new zM)!=CA||yA&&IA(yA.resolve())!=wA||mA&&IA(new mA)!=xA||NR&&IA(new NR)!=SA)&&(IA=function(t){var e=JI(t),n="[object Object]"==e?t.constructor:void 0,r=n?TR(n):"";if(r)switch(r){case _A:return bA;case LA:return CA;case EA:return wA;case TA:return xA;case OA:return SA}return e});var RA=IA,MA=Object.prototype.hasOwnProperty;var AA=jI.Uint8Array;function BA(t){var e=new t.constructor(t.byteLength);return new AA(e).set(new AA(t)),e}var DA=/\w*$/;var kA=UI?UI.prototype:void 0,NA=kA?kA.valueOf:void 0;var PA="[object Boolean]",zA="[object Date]",HA="[object Map]",FA="[object Number]",WA="[object RegExp]",GA="[object Set]",jA="[object String]",UA="[object Symbol]",YA="[object ArrayBuffer]",VA="[object DataView]",XA="[object Float32Array]",qA="[object Float64Array]",KA="[object Int8Array]",$A="[object Int16Array]",ZA="[object Int32Array]",QA="[object Uint8Array]",JA="[object Uint8ClampedArray]",tB="[object Uint16Array]",eB="[object Uint32Array]";function nB(t,e,n){var r,i=t.constructor;switch(e){case YA:return BA(t);case PA:case zA:return new i(+t);case VA:return function(t,e){var n=e?BA(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case XA:case qA:case KA:case $A:case ZA:case QA:case JA:case tB:case eB:return function(t,e){var n=e?BA(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}(t,n);case HA:return new i;case FA:case jA:return new i(t);case WA:return function(t){var e=new t.constructor(t.source,DA.exec(t));return e.lastIndex=t.lastIndex,e}(t);case GA:return new i;case UA:return r=t,NA?Object(NA.call(r)):{}}}var rB=vM&&vM.isMap,iB=rB?hM(rB):function(t){return tR(t)&&"[object Map]"==RA(t)};var oB=vM&&vM.isSet,aB=oB?hM(oB):function(t){return tR(t)&&"[object Set]"==RA(t)},lB=1,sB=2,uB=4,cB="[object Arguments]",hB="[object Function]",dB="[object GeneratorFunction]",fB="[object Object]",pB={};function vB(t,e,n,r,i,o){var a,l=e&lB,s=e&sB,u=e&uB;if(n&&(a=i?n(t,r,i,o):n(t)),void 0!==a)return a;if(!hR(t))return t;var c=rR(t);if(c){if(a=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&MA.call(t,"index")&&(n.index=t.index,n.input=t.input),n}(t),!l)return function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}(t,a)}else{var h=RA(t),d=h==hB||h==dB;if(uM(t))return function(t,e){if(e)return t.slice();var n=t.length,r=oA?oA(n):new t.constructor(n);return t.copy(r),r}(t,l);if(h==fB||h==cB||d&&!i){if(a=s||d?{}:function(t){return"function"!=typeof t.constructor||tM(t)?{}:HR(QM(t))}(t),!l)return s?function(t,e){return KR(t,dA(t),e)}(t,function(t,e){return t&&KR(e,TM(e),t)}(a,t)):function(t,e){return KR(t,cA(t),e)}(t,function(t,e){return t&&KR(e,_M(e),t)}(a,t))}else{if(!pB[h])return i?t:{};a=nB(t,h,l)}}o||(o=new eA);var f=o.get(t);if(f)return f;o.set(t,a),aB(t)?t.forEach((function(r){a.add(vB(r,e,n,r,t,o))})):iB(t)&&t.forEach((function(r,i){a.set(i,vB(r,e,n,i,t,o))}));var p=c?void 0:(u?s?vA:pA:s?TM:_M)(t);return function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););}(p||t,(function(r,i){p&&(r=t[i=r]),qR(a,i,vB(r,e,n,i,t,o))})),a}pB[cB]=pB["[object Array]"]=pB["[object ArrayBuffer]"]=pB["[object DataView]"]=pB["[object Boolean]"]=pB["[object Date]"]=pB["[object Float32Array]"]=pB["[object Float64Array]"]=pB["[object Int8Array]"]=pB["[object Int16Array]"]=pB["[object Int32Array]"]=pB["[object Map]"]=pB["[object Number]"]=pB[fB]=pB["[object RegExp]"]=pB["[object Set]"]=pB["[object String]"]=pB["[object Symbol]"]=pB["[object Uint8Array]"]=pB["[object Uint8ClampedArray]"]=pB["[object Uint16Array]"]=pB["[object Uint32Array]"]=!0,pB["[object Error]"]=pB[hB]=pB["[object WeakMap]"]=!1;function gB(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new FM;++e<n;)this.add(t[e])}function yB(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function mB(t,e){return t.has(e)}gB.prototype.add=gB.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},gB.prototype.has=function(t){return this.__data__.has(t)};var CB=1,wB=2;function xB(t,e,n,r,i,o){var a=n&CB,l=t.length,s=e.length;if(l!=s&&!(a&&s>l))return!1;var u=o.get(t),c=o.get(e);if(u&&c)return u==e&&c==t;var h=-1,d=!0,f=n&wB?new gB:void 0;for(o.set(t,e),o.set(e,t);++h<l;){var p=t[h],v=e[h];if(r)var g=a?r(v,p,h,e,t,o):r(p,v,h,t,e,o);if(void 0!==g){if(g)continue;d=!1;break}if(f){if(!yB(e,(function(t,e){if(!mB(f,e)&&(p===t||i(p,t,n,r,o)))return f.push(e)}))){d=!1;break}}else if(p!==v&&!i(p,v,n,r,o)){d=!1;break}}return o.delete(t),o.delete(e),d}function SB(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}function bB(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}var _B=1,LB=2,EB="[object Boolean]",TB="[object Date]",OB="[object Error]",IB="[object Map]",RB="[object Number]",MB="[object RegExp]",AB="[object Set]",BB="[object String]",DB="[object Symbol]",kB="[object ArrayBuffer]",NB="[object DataView]",PB=UI?UI.prototype:void 0,zB=PB?PB.valueOf:void 0;var HB=1,FB=Object.prototype.hasOwnProperty;var WB=1,GB="[object Arguments]",jB="[object Array]",UB="[object Object]",YB=Object.prototype.hasOwnProperty;function VB(t,e,n,r,i,o){var a=rR(t),l=rR(e),s=a?jB:RA(t),u=l?jB:RA(e),c=(s=s==GB?UB:s)==UB,h=(u=u==GB?UB:u)==UB,d=s==u;if(d&&uM(t)){if(!uM(e))return!1;a=!0,c=!1}if(d&&!c)return o||(o=new eA),a||yM(t)?xB(t,e,n,r,i,o):function(t,e,n,r,i,o,a){switch(n){case NB:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case kB:return!(t.byteLength!=e.byteLength||!o(new AA(t),new AA(e)));case EB:case TB:case RB:return VR(+t,+e);case OB:return t.name==e.name&&t.message==e.message;case MB:case BB:return t==e+"";case IB:var l=SB;case AB:var s=r&_B;if(l||(l=bB),t.size!=e.size&&!s)return!1;var u=a.get(t);if(u)return u==e;r|=LB,a.set(t,e);var c=xB(l(t),l(e),r,i,o,a);return a.delete(t),c;case DB:if(zB)return zB.call(t)==zB.call(e)}return!1}(t,e,s,n,r,i,o);if(!(n&WB)){var f=c&&YB.call(t,"__wrapped__"),p=h&&YB.call(e,"__wrapped__");if(f||p){var v=f?t.value():t,g=p?e.value():e;return o||(o=new eA),i(v,g,n,r,o)}}return!!d&&(o||(o=new eA),function(t,e,n,r,i,o){var a=n&HB,l=pA(t),s=l.length;if(s!=pA(e).length&&!a)return!1;for(var u=s;u--;){var c=l[u];if(!(a?c in e:FB.call(e,c)))return!1}var h=o.get(t),d=o.get(e);if(h&&d)return h==e&&d==t;var f=!0;o.set(t,e),o.set(e,t);for(var p=a;++u<s;){var v=t[c=l[u]],g=e[c];if(r)var y=a?r(g,v,c,e,t,o):r(v,g,c,t,e,o);if(!(void 0===y?v===g||i(v,g,n,r,o):y)){f=!1;break}p||(p="constructor"==c)}if(f&&!p){var m=t.constructor,C=e.constructor;m==C||!("constructor"in t)||!("constructor"in e)||"function"==typeof m&&m instanceof m&&"function"==typeof C&&C instanceof C||(f=!1)}return o.delete(t),o.delete(e),f}(t,e,n,r,i,o))}function XB(t,e,n,r,i){return t===e||(null==t||null==e||!tR(t)&&!tR(e)?t!=t&&e!=e:VB(t,e,n,r,XB,i))}var qB=1,KB=2;function $B(t){return t==t&&!hR(t)}function ZB(t,e){return function(n){return null!=n&&(n[t]===e&&(void 0!==e||t in Object(n)))}}function QB(t){var e=function(t){for(var e=_M(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,$B(i)]}return e}(t);return 1==e.length&&e[0][2]?ZB(e[0][0],e[0][1]):function(n){return n===t||function(t,e,n,r){var i=n.length,o=i,a=!r;if(null==t)return!o;for(t=Object(t);i--;){var l=n[i];if(a&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++i<o;){var s=(l=n[i])[0],u=t[s],c=l[1];if(a&&l[2]){if(void 0===u&&!(s in t))return!1}else{var h=new eA;if(r)var d=r(u,c,s,t,e,h);if(!(void 0===d?XB(c,u,qB|KB,r,h):d))return!1}}return!0}(n,t,e)}}function JB(t,e){return null!=t&&e in Object(t)}function tD(t,e){return null!=t&&function(t,e,n){for(var r=-1,i=(e=XM(e,t)).length,o=!1;++r<i;){var a=KM(e[r]);if(!(o=null!=t&&n(t,a)))break;t=t[a]}return o||++r!=i?o:!!(i=null==t?0:t.length)&&ZR(i)&&UR(a,i)&&(rR(t)||oM(t))}(t,e,JB)}var eD=1,nD=2;function rD(t,e){return RM(t)&&$B(e)?ZB(KM(t),e):function(n){var r=function(t,e,n){var r=null==t?void 0:$M(t,e);return void 0===r?n:r}(n,t);return void 0===r&&r===e?tD(n,t):XB(e,r,eD|nD)}}function iD(t){return function(e){return null==e?void 0:e[t]}}function oD(t){return RM(t)?iD(KM(t)):function(t){return function(e){return $M(e,t)}}(t)}function aD(t){return"function"==typeof t?t:null==t?mR:"object"==typeof t?rR(t)?rD(t[0],t[1]):QB(t):oD(t)}var lD,sD=function(t,e,n){for(var r=-1,i=Object(t),o=n(t),a=o.length;a--;){var l=o[lD?a:++r];if(!1===e(i[l],l,i))break}return t};var uD=function(t,e){return function(n,r){if(null==n)return n;if(!QR(n))return t(n,r);for(var i=n.length,o=e?i:-1,a=Object(n);(e?o--:++o<i)&&!1!==r(a[o],o,a););return n}}((function(t,e){return t&&sD(t,e,_M)})),cD=uD,hD=function(){return jI.Date.now()},dD=Math.max,fD=Math.min;function pD(t,e,n){var r,i,o,a,l,s,u=0,c=!1,h=!1,d=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function f(e){var n=r,o=i;return r=i=void 0,u=e,a=t.apply(o,n)}function p(t){var n=t-s;return void 0===s||n>=e||n<0||h&&t-u>=o}function v(){var t=hD();if(p(t))return g(t);l=setTimeout(v,function(t){var n=e-(t-s);return h?fD(n,o-(t-u)):n}(t))}function g(t){return l=void 0,d&&r?f(t):(r=i=void 0,a)}function y(){var t=hD(),n=p(t);if(r=arguments,i=this,s=t,n){if(void 0===l)return function(t){return u=t,l=setTimeout(v,e),c?f(t):a}(s);if(h)return clearTimeout(l),l=setTimeout(v,e),f(s)}return void 0===l&&(l=setTimeout(v,e)),a}return e=yR(e)||0,hR(n)&&(c=!!n.leading,o=(h="maxWait"in n)?dD(yR(n.maxWait)||0,e):o,d="trailing"in n?!!n.trailing:d),y.cancel=function(){void 0!==l&&clearTimeout(l),u=0,r=s=i=l=void 0},y.flush=function(){return void 0===l?a:g(hD())},y}function vD(t,e){var n=[];return cD(t,(function(t,r,i){e(t,r,i)&&n.push(t)})),n}var gD="[object String]";function yD(t){return!0===t||!1===t||tR(t)&&"[object Boolean]"==JI(t)}var mD=Object.prototype.hasOwnProperty;function CD(t){if(null==t)return!0;if(QR(t)&&(rR(t)||"string"==typeof t||"function"==typeof t.splice||uM(t)||yM(t)||oM(t)))return!t.length;var e=RA(t);if("[object Map]"==e||"[object Set]"==e)return!t.size;if(tM(t))return!bM(t).length;for(var n in t)if(mD.call(t,n))return!1;return!0}var wD=iD("length"),xD="\\ud800-\\udfff",SD="["+xD+"]",bD="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",_D="\\ud83c[\\udffb-\\udfff]",LD="[^"+xD+"]",ED="(?:\\ud83c[\\udde6-\\uddff]){2}",TD="[\\ud800-\\udbff][\\udc00-\\udfff]",OD="(?:"+bD+"|"+_D+")"+"?",ID="[\\ufe0e\\ufe0f]?",RD=ID+OD+("(?:\\u200d(?:"+[LD,ED,TD].join("|")+")"+ID+OD+")*"),MD="(?:"+[LD+bD+"?",bD,ED,TD,SD].join("|")+")",AD=RegExp(_D+"(?="+_D+")|"+MD+RD,"g");function BD(t){return function(t){return JM.test(t)}(t)?function(t){for(var e=AD.lastIndex=0;AD.test(t);)++e;return e}(t):wD(t)}function DD(t,e,n,r,i){return i(t,(function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)})),n}function kD(t){if(null==t)return 0;if(QR(t))return"string"==typeof(e=t)||!rR(e)&&tR(e)&&JI(e)==gD?BD(t):t.length;var e,n=RA(t);return"[object Map]"==n||"[object Set]"==n?t.size:bM(t).length}const ND=t=>{let e=!0;const{s2:n,adaptive:r,container:i,wrapper:o}=t,{container:a,adaptiveWidth:l,adaptiveHeight:s}=((t,e)=>{var n,r,i;return yD(e)?{container:t,adaptiveWidth:!0,adaptiveHeight:!1}:{container:(null==(n=null==e?void 0:e.getContainer)?void 0:n.call(e))||t,adaptiveWidth:null==(r=null==e?void 0:e.width)||r,adaptiveHeight:null==(i=null==e?void 0:e.height)||i}})(o,r);if(!(a&&i&&r&&n))return;const u=(t,e)=>{null==n||n.changeSheetSize(t,e),null==n||n.render(!1)},c=pD(u,200),h=new ResizeObserver((([t]=[])=>{t&&(()=>{const{clientWidth:t,clientHeight:r}=i,o=l?Math.floor(null!=t?t:n.options.width):n.options.width,a=s?Math.floor(null!=r?r:n.options.height):n.options.height;if(l||s)e?(u(o,a),e=!1):c(o,a)})()}));return h.observe(a,{box:"border-box"}),()=>{h.unobserve(a)}},PD=(t,e)=>{const n=t.store.get("drillDownDataCache",[]),r=n.find((t=>t.rowId===e.id));return{drillDownDataCache:n,drillDownCurrentCache:r}},zD=t=>{var e;const n=t.spreadsheet,{fields:r}=n.dataCfg,i=(null==(e=r.rows)?void 0:e.length)-1,o=!!CD(r.values)||n.isValueInCols();return i<=t.level&&n.isHierarchyTreeType()&&o&&!t.isGrandTotals},HD=(t,e,n)=>{var r;const i=(null==(r=null==t?void 0:t.headerActionIcons)?void 0:r.length)?[...t.headerActionIcons]:[];if(!CD(e)){const t={belongsCell:"rowCell",iconNames:["DrillDownIcon"],defaultHide:!0,displayCondition:e.displayCondition||zD,action:t=>{const{iconName:e,meta:r,event:i}=t;"DrillDownIcon"===e&&(r.spreadsheet.store.set("drillDownNode",r),(t=>{const{meta:e,event:n,callback:r}=t,{spreadsheet:i}=e;i.store.set("drillDownNode",e);const{drillDownDataCache:o,drillDownCurrentCache:a}=PD(i,e),l=(null==a?void 0:a.drillField)?[null==a?void 0:a.drillField]:[],s=[];o.forEach((t=>{e.id.includes(t.rowId)&&e.id!==t.rowId&&s.push(t.drillField)})),n&&i.emit(Qo.GLOBAL_ACTION_ICON_CLICK,n),r({sheetInstance:i,cacheDrillFields:l,disabledFields:s,event:n})})({meta:r,event:i,callback:n}))}};i.push(t)}return zI(PI({},t),{headerActionIcons:i})},FD=t=>{const{fetchData:e,spreadsheet:n,drillFields:r,drillItemsNum:i=-1}=t;n.store.set("drillItemsNum",i);const o=n.store.get("drillDownNode"),{drillDownDataCache:a,drillDownCurrentCache:l}=PD(n,o);let s=vB(a,4);var u,c;l&&(c=t=>t.rowId!==o.id,s=(rR(u=a)?aA:vD)(u,aD(c))),e&&e(o,r).then((t=>{const{drillData:e,drillField:r}=t;if(n.dataSet.transformDrillDownData(r,e,o),!CD(e)){const t=o.level+1,i={rowId:o.id,drillLevel:t,drillData:e,drillField:r};s.push(i),n.store.set("drillDownDataCache",s)}n.interaction.reset(),n.render(!1)}))};YS=tC({},YS,HI);const WD=t=>{const e=h();return t({get instance(){var t;return null==(t=e.value)?void 0:t.instance}}),e};var GD=(t,e)=>{const n=t.__vccOpts||t;for(const[r,i]of e)n[r]=i;return n};var jD=GD(t({name:"TooltipDetail",props:["list"],setup:()=>({TOOLTIP_PREFIX_CLS:XS})}),[["render",function(t,e,i,a,u,c){return n(!0),r(_,null,L(t.list,((e,i)=>(n(),r("div",{key:`${e.value}-${i}`,class:o(`${t.TOOLTIP_PREFIX_CLS}-detail-list`)},[l("div",{class:o(`${t.TOOLTIP_PREFIX_CLS}-detail-item`)},[l("span",{class:o(`${t.TOOLTIP_PREFIX_CLS}-detail-item-key`)},s(e.name),3),l("span",{class:o(`${t.TOOLTIP_PREFIX_CLS}-detail-item-val ${t.TOOLTIP_PREFIX_CLS}-highlight`)},s(e.value),3)],2)],2)))),128)}]]);const UD=t({name:"TooltipHeadInfo",props:["rows","cols"],setup:()=>({TOOLTIP_PREFIX_CLS:XS}),components:{}}),YD={key:0};var VD=GD(UD,[["render",function(t,e,i,l,u,c){var h,d,f,p;return(null==(h=t.cols)?void 0:h.length)||(null==(d=t.rows)?void 0:d.length)?(n(),r("div",{key:0,class:o(`${t.TOOLTIP_PREFIX_CLS}-head-info-list`)},[(n(!0),r(_,null,L(t.cols,(t=>(n(),r("span",{key:t.value},s(t.value)+"/",1)))),128)),(null==(f=t.cols)?void 0:f.length)>0&&(null==(p=t.rows)?void 0:p.length)>0?(n(),r("span",YD,"，")):a("",!0),(n(!0),r(_,null,L(t.rows,(t=>(n(),r("span",{key:t.value},s(t.value)+"/",1)))),128))],2)):a("",!0)}]]);var XD=GD(t({name:"TooltipInfos",props:["infos"],setup:()=>({TOOLTIP_PREFIX_CLS:XS}),components:{}}),[["render",function(t,e,i,a,l,u){return n(),r("div",{class:o(`${t.TOOLTIP_PREFIX_CLS}-infos`)},s(t.infos),3)}]]);var qD=GD(t({name:"TooltipSimpleTips",props:["name","tips"],setup:()=>({TOOLTIP_PREFIX_CLS:XS}),components:{}}),[["render",function(t,e,i,l,u,c){return n(),r(_,null,[t.name?(n(),r("div",{key:0,class:o(`${t.TOOLTIP_PREFIX_CLS}-name`)},s(t.name),3)):a("",!0),t.tips?(n(),r("div",{key:1,class:o(`${t.TOOLTIP_PREFIX_CLS}-tips`)},s(t.tips),3)):a("",!0)],64)}]]);const KD=t({name:"TooltipSummary",props:["summaries"],setup(t){const e=i((()=>function(t,e,n){var r=rR(t)?tA:DD,i=arguments.length<3;return r(t,aD(e),n,i,cD)}(t.summaries,((t,e)=>(t.count+=kD(null==e?void 0:e.selectedData),(e.value||e.name)&&t.summaries.push(e),t)),{count:0,summaries:[]})));return{summaryInfo:e,i18n:VS,TOOLTIP_PREFIX_CLS:XS}},components:{}});var $D=GD(KD,[["render",function(t,e,i,a,u,c){return n(),r("div",{class:o(`${t.TOOLTIP_PREFIX_CLS}-summary`)},[l("div",{class:o(`${t.TOOLTIP_PREFIX_CLS}-summary-item`)},[l("span",{class:o(`${t.TOOLTIP_PREFIX_CLS}-selected`)},s(t.summaryInfo.count)+" "+s(t.i18n("项")),3),b(" "+s(t.i18n("已选择")),1)],2),(n(!0),r(_,null,L(t.summaryInfo.summaries,(e=>(n(),r("div",{key:`${e.name}-${e.value}`,class:o(`${t.TOOLTIP_PREFIX_CLS}-summary-item`)},[l("span",{class:o(`${t.TOOLTIP_PREFIX_CLS}-summary-key`)},s(e.name)+" "+s(t.i18n("总和")),3),l("span",{class:o(`${t.TOOLTIP_PREFIX_CLS}-summary-val ${t.TOOLTIP_PREFIX_CLS}-bold`)},s(e.value),3)],2)))),128))],2)}]]);const ZD=t({name:"TooltipOperatorTitle",props:["menu"],setup(t){const e=i((()=>pb(t.menu.icon)));return{TOOLTIP_PREFIX_CLS:XS,icon:e}}}),QD=["innerHTML"];var JD=GD(ZD,[["render",function(t,e,i,u,c,h){return n(),r("span",null,[t.icon?(n(),r("span",{key:0,innerHTML:t.icon,class:o(`${t.TOOLTIP_PREFIX_CLS}-operator-icon`)},null,10,QD)):a("",!0),l("span",{class:o(`${t.TOOLTIP_PREFIX_CLS}-operator-text`)},s(t.menu.text),3)])}]]);const tk=t({name:"TooltipOperatorMenu",props:["menu","cell"],setup:t=>({onMenuTitleClick:()=>{var e,n;null==(n=(e=t.menu).onClick)||n.call(e,t.cell)},isEmpty:CD,TOOLTIP_PREFIX_CLS:XS}),components:{MenuItem:O.Item,SubMenu:O.SubMenu,TooltipOperatorTitle:JD}});const ek=t({name:"TooltipOperator",props:["menus","onlyMenu","onClick","cell"],setup:(t,{emit:e})=>({TOOLTIP_PREFIX_CLS:XS,onMenuClick:(...t)=>{e("click",...t)}}),components:{Menu:O,Dropdown:k,TooltipOperatorTitle:JD,TooltipOperatorMenu:GD(tk,[["render",function(t,e,i,o,l,s){const c=f("TooltipOperatorTitle"),h=f("TooltipOperatorMenu"),d=f("MenuItem"),p=f("SubMenu");return n(),r(_,null,[t.isEmpty(t.menu.children)?a("",!0):(n(),u(p,{key:t.menu.key,popupClassName:`${t.TOOLTIP_PREFIX_CLS}-operator-submenu-popup`,onTitleClick:t.onMenuTitleClick},{title:v((()=>[C(c,{menu:t.menu,onClick:t.onMenuTitleClick},null,8,["menu","onClick"])])),default:v((()=>[(n(!0),r(_,null,L(t.menu.children,(e=>{var i;return n(),r(_,{key:e.key},[(null==(i=null==e?void 0:e.children)?void 0:i.length)?(n(),u(h,{key:0,menu:e,cell:t.cell},null,8,["menu","cell"])):(n(),u(d,{title:e.text,key:e.key},{default:v((()=>[C(c,{menu:e,onClick:t.onMenuTitleClick},null,8,["menu","onClick"])])),_:2},1032,["title"]))],64)})),128))])),_:1},8,["popupClassName","onTitleClick"])),t.isEmpty(t.menu.children)?(n(),u(d,{title:t.menu.text,key:t.menu.key},{default:v((()=>[C(c,{menu:t.menu,onClick:t.onMenuTitleClick},null,8,["menu","onClick"])])),_:1},8,["title"])):a("",!0)],64)}]])}});var nk=GD(t({name:"TooltipComponent",props:["data","options","cell","position","event","content"],setup(t){const{operator:e,onlyMenu:n}=cO(t.options);return{operator:e,onlyMenu:n}},components:{TooltipDetail:jD,TooltipHeadInfo:VD,TooltipInfos:XD,TooltipSimpleTips:qD,TooltipSummary:$D,TooltipOperator:GD(ek,[["render",function(t,e,i,l,s,c){const h=f("TooltipOperatorMenu"),d=f("Menu"),p=f("TooltipOperatorTitle"),g=f("Dropdown");return n(),r("div",{class:o(`${t.TOOLTIP_PREFIX_CLS}-operator`)},[t.onlyMenu?(n(),u(d,{key:0,class:o(`${t.TOOLTIP_PREFIX_CLS}-operator-menus`),onClick:t.onMenuClick},{default:v((()=>[(n(!0),r(_,null,L(t.menus,(e=>(n(),u(h,{key:e.key,menu:e,cell:t.cell},null,8,["menu","cell"])))),128))])),_:1},8,["class","onClick"])):(n(!0),r(_,{key:1},L(t.menus,(e=>(n(),u(g,{key:e.key,class:o(`${t.TOOLTIP_PREFIX_CLS}-operator-dropdown`)},{overlay:v((()=>{var i;return[(null==(i=null==e?void 0:e.children)?void 0:i.length)?(n(),u(d,{key:0,class:o(`${t.TOOLTIP_PREFIX_CLS}-operator-menus`),onClick:t.onMenuClick},{default:v((()=>[(n(!0),r(_,null,L(t.menus,(e=>(n(),u(h,{key:e.key,menu:e,cell:t.cell},null,8,["menu","cell"])))),128))])),_:2},1032,["class","onClick"])):a("",!0)]})),default:v((()=>[C(p,{menu:e,onClick:n=>{var r;return null==(r=e.onClick)?void 0:r.call(e,t.cell)}},null,8,["menu","onClick"])])),_:2},1032,["class"])))),128))],2)}]])}}),[["render",function(t,e,i,o,l,s){var c,h,d,p,v,g,y,m,w,x,S,b,L,E,O,I;const R=f("TooltipOperator"),M=f("TooltipSimpleTips"),A=f("TooltipSummary"),B=f("TooltipHeadInfo"),D=f("TooltipDetail"),k=f("TooltipInfos");return t.onlyMenu?(n(),u(R,{key:0,menus:(null==(c=t.operator)?void 0:c.menus)||[],onlyMenu:!0,cell:t.cell,onClick:null==(h=t.operator)?void 0:h.onClick},null,8,["menus","cell","onClick"])):(n(),r(_,{key:1},[C(R,{menus:(null==(d=t.operator)?void 0:d.menus)||[],onlyMenu:!1,cell:t.cell,onClick:null==(p=t.operator)?void 0:p.onClick},null,8,["menus","cell","onClick"]),t.content?T(t.$slots,"content",{key:0}):(n(),r(_,{key:1},[C(M,{name:null==(v=t.data)?void 0:v.name,tips:null==(g=t.data)?void 0:g.tips},null,8,["name","tips"]),(null==(m=null==(y=t.data)?void 0:y.summaries)?void 0:m.length)?(n(),u(A,{key:0,summaries:null==(w=t.data)?void 0:w.summaries},null,8,["summaries"])):a("",!0),C(B,{rows:(null==(S=null==(x=t.data)?void 0:x.headInfo)?void 0:S.rows)||[],cols:(null==(L=null==(b=t.data)?void 0:b.headInfo)?void 0:L.cols)||[]},null,8,["rows","cols"]),C(D,{list:(null==(E=t.data)?void 0:E.details)||[]},null,8,["list"]),(null==(O=t.data)?void 0:O.infos)?(n(),u(k,{key:1,infos:null==(I=t.data)?void 0:I.infos},null,8,["infos"])):a("",!0)],64))],64))}]]);class rk extends LI{constructor(t){super(t)}renderContent(){var t,e;const{tooltip:n}=this.spreadsheet.options,r=this.options,i=this.spreadsheet.getCell(null==(t=r.event)?void 0:t.target),o=null!=(e=r.content)?e:null==n?void 0:n.content,a=zI(PI({},r),{cell:i,content:o}),l=C(nk,a,{content:()=>o});E(null,this.container),E(l,this.container)}destroy(){super.destroy(),this.container&&E(null,this.container)}}const ik=`${Da}-pagination`;var ok=GD(t({name:"s2-pagination",props:{current:{type:Number,default:1},total:{type:Number,default:0},pageSize:{type:Number,default:10}},emits:["change","showSizeChange"],setup:t=>({showQuickJumper:i((()=>t.total/t.pageSize>5)),PRE_CLASS:ik,i18n:VS}),components:{AntDPagination:D}}),[["render",function(t,e,i,a,u,c){const h=f("AntDPagination");return n(),r("div",{class:o(t.PRE_CLASS)},[C(h,{"default-current":1,current:t.current,total:t.total,pageSize:t.pageSize,showSizeChanger:!0,onShowSizeChange:e[0]||(e[0]=(e,n)=>t.$emit("showSizeChange",n)),size:"small",showQuickJumper:t.showQuickJumper,onChange:e[1]||(e[1]=e=>t.$emit("change",e))},null,8,["current","total","pageSize","showQuickJumper"]),l("span",{class:o(`${t.PRE_CLASS}-count`)},s(t.i18n("共计"))+" "+s(t.total||" - ")+" "+s(t.i18n("条")),3)],2)}]]);const ak={tooltip:{renderTooltip:t=>new rk(t)}},lk=(...t)=>((...t)=>CE(wl,FI,...t))(ak,...t),sk=(t,e,n,r)=>{var i;null==(i=t.value)||i.on(n,(t=>{const n=function(t){var e,n,r,i,o,a,l=null===(r=null===(n=null===(e=t.target)||void 0===e?void 0:e.attrs)||void 0===n?void 0:n.appendInfo)||void 0===r?void 0:r.cellData,s=null===(o=(i=t.target).get)||void 0===o?void 0:o.call(i,"parent");return{target:s,viewMeta:(null===(a=null==s?void 0:s.getMeta)||void 0===a?void 0:a.call(s))||l,event:t}}(t);e(r,n)}))},uk=(t,e,n,r)=>{var i;null==(i=t.value)||i.on(n,(t=>{e(r,t)}))};function ck(t,n){const{dataCfg:r,options:o,themeCfg:a,loading:l,sheetType:s,onSpreadsheet:u,onMounted:c,onGetSpreadSheet:d}=t,f=e(),p=e(),v=h(),{loading:C,setLoading:b}=((t,n=!1)=>{const r=e(n),i=t=>{r.value=t};return m(t,(t=>{null==t||t.on(Qo.LAYOUT_BEFORE_RENDER,(()=>{i(!0)})),null==t||t.on(Qo.LAYOUT_AFTER_RENDER,(()=>{i(!1)}))})),{loading:r,setLoading:i}})(v,l),_=((t,n)=>{var r,o,a,l,s,u;const c=e(null!=(a=null==(o=null==(r=n.options)?void 0:r.pagination)?void 0:o.current)?a:1),h=e(null!=(u=null==(s=null==(l=n.options)?void 0:l.pagination)?void 0:s.pageSize)?u:10),d=e(0),f=i((()=>{var t;return n.showPagination&&!CD(null==(t=n.options)?void 0:t.pagination)}));return m([c,h],(()=>{var e;if(!t.value)return;const r=CD(null==(e=n.options)?void 0:e.pagination)?null:{current:c.value,pageSize:h.value};t.value.updatePagination(r),t.value.render(!1)})),m([()=>{var t;return null==(t=n.options)?void 0:t.pagination},t],(()=>{var e,r,i,o,a,l,s,u,f;c.value=null!=(i=null==(r=null==(e=n.options)?void 0:e.pagination)?void 0:r.current)?i:1,h.value=null!=(l=null==(a=null==(o=n.options)?void 0:o.pagination)?void 0:a.pageSize)?l:10,d.value=null!=(f=null==(u=null==(s=t.value)?void 0:s.facet)?void 0:u.viewCellHeights.getTotalLength())?f:0}),{immediate:!0}),m(t,((e,r,i)=>{if(!t.value)return;const o=t=>{var e;CD(null==(e=n.options)?void 0:e.pagination)||(d.value=t.total)};t.value.on(Qo.LAYOUT_PAGINATION,o),i((()=>{var e;null==(e=t.value)||e.off(Qo.LAYOUT_PAGINATION,o)}))})),{visible:f,current:c,pageSize:h,total:d,change:t=>{c.value=t},showSizeChange:t=>{h.value=t}}})(v,t);return g((()=>{b(!0),v.value=(t=>{const e=S(r),n=S(o),i=lk(n);return u?u(t,e,i):"table"===s?new II(t,e,i):new TI(t,e,i)})(p.value),v.value.setThemeCfg(S(a)),v.value.render(),b(!1),null==d||d(v.value),null==c||c(v.value)})),((t,e)=>{g((()=>{t.value&&(sk(t,e,Qo.ROW_CELL_HOVER,"rowCellHover"),sk(t,e,Qo.ROW_CELL_CLICK,"rowCellClick"),sk(t,e,Qo.ROW_CELL_DOUBLE_CLICK,"rowCellDoubleClick"),sk(t,e,Qo.ROW_CELL_CONTEXT_MENU,"rowCellContextMenu"),sk(t,e,Qo.ROW_CELL_MOUSE_DOWN,"rowCellMouseDown"),sk(t,e,Qo.ROW_CELL_MOUSE_UP,"rowCellMouseUp"),sk(t,e,Qo.ROW_CELL_MOUSE_MOVE,"rowCellMouseMove"),uk(t,e,Qo.ROW_CELL_COLLAPSE_TREE_ROWS,"rowCellCollapseTreeRows"),uk(t,e,Qo.ROW_CELL_SCROLL,"rowCellScroll"),sk(t,e,Qo.COL_CELL_HOVER,"colCellHover"),sk(t,e,Qo.COL_CELL_CLICK,"colCellClick"),sk(t,e,Qo.COL_CELL_DOUBLE_CLICK,"colCellDoubleClick"),sk(t,e,Qo.COL_CELL_CONTEXT_MENU,"colCellContextMenu"),sk(t,e,Qo.COL_CELL_MOUSE_DOWN,"colCellMouseDown"),sk(t,e,Qo.COL_CELL_MOUSE_UP,"colCellMouseUp"),sk(t,e,Qo.COL_CELL_MOUSE_MOVE,"colCellMouseMove"),sk(t,e,Qo.DATA_CELL_HOVER,"dataCellHover"),sk(t,e,Qo.DATA_CELL_CLICK,"dataCellClick"),sk(t,e,Qo.DATA_CELL_DOUBLE_CLICK,"dataCellDoubleClick"),sk(t,e,Qo.DATA_CELL_CONTEXT_MENU,"dataCellContextMenu"),sk(t,e,Qo.DATA_CELL_MOUSE_DOWN,"dataCellMouseDown"),sk(t,e,Qo.DATA_CELL_MOUSE_UP,"dataCellMouseUp"),sk(t,e,Qo.DATA_CELL_MOUSE_MOVE,"dataCellMouseMove"),uk(t,e,Qo.DATA_CELL_TREND_ICON_CLICK,"dataCellTrendIconClick"),uk(t,e,Qo.DATA_CELL_BRUSH_SELECTION,"dataCellBrushSelection"),uk(t,e,Qo.DATA_CELL_SELECT_MOVE,"dataCellSelectMove"),sk(t,e,Qo.CORNER_CELL_HOVER,"cornerCellHover"),sk(t,e,Qo.CORNER_CELL_CLICK,"cornerCellClick"),sk(t,e,Qo.CORNER_CELL_DOUBLE_CLICK,"cornerCellDoubleClick"),sk(t,e,Qo.CORNER_CELL_CONTEXT_MENU,"cornerCellContextMenu"),sk(t,e,Qo.CORNER_CELL_MOUSE_DOWN,"cornerCellMouseDown"),sk(t,e,Qo.CORNER_CELL_MOUSE_UP,"cornerCellMouseUp"),sk(t,e,Qo.CORNER_CELL_MOUSE_MOVE,"cornerCellMouseMove"),sk(t,e,Qo.MERGED_CELLS_HOVER,"mergedCellsHover"),sk(t,e,Qo.MERGED_CELLS_CLICK,"mergedCellsClick"),sk(t,e,Qo.MERGED_CELLS_DOUBLE_CLICK,"mergedCellsDoubleClick"),sk(t,e,Qo.MERGED_CELLS_CONTEXT_MENU,"mergedCellsContextMenu"),sk(t,e,Qo.MERGED_CELLS_MOUSE_DOWN,"mergedCellsMouseDown"),sk(t,e,Qo.MERGED_CELLS_MOUSE_UP,"mergedCellsMouseUp"),sk(t,e,Qo.MERGED_CELLS_MOUSE_MOVE,"mergedCellsMouseMove"),uk(t,e,Qo.RANGE_SORT,"rangeSort"),uk(t,e,Qo.RANGE_SORTED,"rangeSorted"),uk(t,e,Qo.RANGE_FILTER,"rangeFilter"),uk(t,e,Qo.RANGE_FILTERED,"rangeFiltered"),uk(t,e,Qo.LAYOUT_AFTER_HEADER_LAYOUT,"layoutAfterHeaderLayout"),uk(t,e,Qo.LAYOUT_PAGINATION,"layoutPagination"),uk(t,e,Qo.LAYOUT_CELL_SCROLL,"layoutCellScroll"),uk(t,e,Qo.LAYOUT_AFTER_COLLAPSE_ROWS,"layoutAfterCollapseRows"),uk(t,e,Qo.LAYOUT_TREE_ROWS_COLLAPSE_ALL,"collapseRowsAll"),uk(t,e,Qo.LAYOUT_COLS_EXPANDED,"layoutColsExpanded"),uk(t,e,Qo.LAYOUT_COLS_HIDDEN,"layoutColsHidden"),uk(t,e,Qo.LAYOUT_BEFORE_RENDER,"beforeRender"),uk(t,e,Qo.LAYOUT_AFTER_RENDER,"afterRender"),uk(t,e,Qo.LAYOUT_DESTROY,"destroy"),uk(t,e,Qo.LAYOUT_RESIZE,"layoutResize"),uk(t,e,Qo.LAYOUT_RESIZE_SERIES_WIDTH,"layoutResizeSeriesWidth"),uk(t,e,Qo.LAYOUT_RESIZE_ROW_WIDTH,"layoutResizeRowWidth"),uk(t,e,Qo.LAYOUT_RESIZE_ROW_HEIGHT,"layoutResizeRowHeight"),uk(t,e,Qo.LAYOUT_RESIZE_COL_WIDTH,"layoutResizeColWidth"),uk(t,e,Qo.LAYOUT_RESIZE_COL_HEIGHT,"layoutResizeColHeight"),uk(t,e,Qo.LAYOUT_RESIZE_TREE_WIDTH,"layoutResizeTreeWidth"),uk(t,e,Qo.LAYOUT_RESIZE_MOUSE_DOWN,"layoutResizeMouseDown"),uk(t,e,Qo.LAYOUT_RESIZE_MOUSE_UP,"layoutResizeMouseUp"),uk(t,e,Qo.LAYOUT_RESIZE_MOUSE_MOVE,"layoutResizeMouseMove"),uk(t,e,Qo.GLOBAL_KEYBOARD_DOWN,"keyBoardDown"),uk(t,e,Qo.GLOBAL_KEYBOARD_UP,"keyBoardUp"),uk(t,e,Qo.GLOBAL_COPIED,"copied"),uk(t,e,Qo.GLOBAL_ACTION_ICON_HOVER,"actionIconHover"),uk(t,e,Qo.GLOBAL_ACTION_ICON_CLICK,"actionIconClick"),uk(t,e,Qo.GLOBAL_CONTEXT_MENU,"contextMenu"),uk(t,e,Qo.GLOBAL_HOVER,"mouseHover"),uk(t,e,Qo.GLOBAL_CLICK,"click"),uk(t,e,Qo.GLOBAL_DOUBLE_CLICK,"doubleClick"),uk(t,e,Qo.GLOBAL_SELECTED,"selected"),uk(t,e,Qo.GLOBAL_MOUSE_UP,"mouseUp"),uk(t,e,Qo.GLOBAL_RESET,"reset"),uk(t,e,Qo.GLOBAL_LINK_FIELD_JUMP,"linkFieldJump"),uk(t,e,Qo.GLOBAL_SCROLL,"scroll"),uk(t,e,Qo.LAYOUT_AFTER_REAL_DATA_CELL_RENDER,"layoutAfterRealDataCellRender"),uk(t,e,Qo.ROW_CELL_BRUSH_SELECTION,"rowCellBrushSelection"),uk(t,e,Qo.COL_CELL_BRUSH_SELECTION,"colCellBrushSelection"))}))})(v,n),((t,e)=>{const n=w({rerender:!1,reloadData:!1,rebuildDataset:!1});m((()=>e.options),((e,r)=>{var i,o;n.rerender=!0,Object.is(null==r?void 0:r.hierarchyType,null==e?void 0:e.hierarchyType)||(n.reloadData=!0,n.rebuildDataset=!0),null==(i=t.value)||i.setOptions(e),null==(o=t.value)||o.changeSheetSize(null==e?void 0:e.width,null==e?void 0:e.height)}),{deep:x(e.options)}),m((()=>e.dataCfg),((e,r)=>{var i,o,a,l,s,u;(null==(o=null==(i=null==r?void 0:r.fields)?void 0:i.columns)?void 0:o.length)!==(null==(l=null==(a=null==e?void 0:e.fields)?void 0:a.columns)?void 0:l.length)&&(null==(s=t.value)||s.clearColumnLeafNodes()),n.rerender=!0,n.reloadData=!0,null==(u=t.value)||u.setDataCfg(e)}),{deep:x(e.dataCfg)}),m((()=>e.themeCfg),(e=>{var r;n.rerender=!0,null==(r=t.value)||r.setThemeCfg(e)}),{deep:x(e.themeCfg)}),m(n,(e=>{var n;e.rerender&&(null==(n=t.value)||n.render(e.reloadData,{reBuildDataSet:e.rebuildDataset}),e.rerender=!1,e.reloadData=!1,e.rebuildDataset=!1)}))})(v,t),((t,n,r)=>{const i=e();m([t,()=>n.adaptive],(([t,e],n,o)=>{t&&(i.value=ND({s2:t,adaptive:e,wrapper:r.wrapperRef.value,container:r.containerRef.value}),o((()=>{var t;null==(t=i.value)||t.call(i)})))}),{deep:!0})})(v,t,{wrapperRef:f,containerRef:p}),y((()=>{var t;null==(t=v.value)||t.destroy()})),{wrapperRef:f,containerRef:p,s2Ref:v,loading:C,setLoading:b,pagination:_}}const hk=()=>({sheetType:String,dataCfg:Object,themeCfg:Object,showPagination:{type:[Object,Boolean],default:!1},loading:Boolean,partDrillDown:Object,header:Object,options:{type:Object,default:{}},adaptive:{type:[Object,Boolean],default:!1},onSpreadsheet:Function,onGetSpreadSheet:Function,onMounted:Function});var dk=GD(t({name:"BaseSheet",props:hk(),emits:["spreadsheet","getSpreadSheet","rowCellHover","rowCellClick","rowCellDoubleClick","rowCellContextMenu","rowCellMouseDown","rowCellMouseUp","rowCellMouseMove","rowCellCollapseTreeRows","rowCellScroll","colCellHover","colCellClick","colCellDoubleClick","colCellContextMenu","colCellMouseDown","colCellMouseUp","colCellMouseMove","dataCellHover","dataCellClick","dataCellDoubleClick","dataCellContextMenu","dataCellMouseDown","dataCellMouseUp","dataCellMouseMove","dataCellTrendIconClick","dataCellBrushSelection","dataCellSelectMove","cornerCellHover","cornerCellClick","cornerCellDoubleClick","cornerCellContextMenu","cornerCellMouseDown","cornerCellMouseUp","cornerCellMouseMove","mergedCellsHover","mergedCellsClick","mergedCellsDoubleClick","mergedCellsContextMenu","mergedCellsMouseDown","mergedCellsMouseUp","mergedCellsMouseMove","rangeSort","rangeSorted","rangeFilter","rangeFiltered","layoutAfterHeaderLayout","layoutPagination","layoutCellScroll","layoutCollapseRows","layoutAfterCollapseRows","collapseRowsAll","layoutColsExpanded","layoutColsHidden","beforeRender","afterRender","mounted","destroy","layoutResize","layoutResizeSeriesWidth","layoutResizeRowWidth","layoutResizeRowHeight","layoutResizeColWidth","layoutResizeColHeight","layoutResizeTreeWidth","layoutResizeMouseDown","layoutResizeMouseUp","layoutResizeMouseMove","keyBoardDown","keyBoardUp","copied","actionIconHover","actionIconClick","contextMenu","mouseHover","mouseUp","mouseMove","mouseDown","selected","reset","linkFieldJump","click","doubleClick","scroll","hover","layoutAfterRealDataCellRender","rowCellBrushSelection","colCellBrushSelection"],setup(t,e){const{wrapperRef:n,containerRef:r,s2Ref:i,loading:o,pagination:a}=ck(t,e.emit);e.expose({get instance(){return i.value}});return{S2_PREFIX_CLS:Da,wrapperRef:n,containerRef:r,s2Ref:i,loading:o,pagination:a,handlePageChange:e=>{var n,r;t.showPagination&&!yD(t.showPagination)&&(null==(r=(n=t.showPagination).onChange)||r.call(n,e)),a.change(e)},handlePageSizeChange:e=>{var n,r;t.showPagination&&!yD(t.showPagination)&&(null==(r=(n=t.showPagination).onShowSizeChange)||r.call(n,e)),a.showSizeChange(e)}}},components:{Spin:B,S2Pagination:ok}}),[["render",function(t,e,r,i,s,c){const h=f("S2Pagination"),d=f("Spin");return n(),u(d,{wrapperClassName:t.S2_PREFIX_CLS+"-spin",spinning:t.loading},{default:v((()=>[l("div",{ref:"wrapperRef",class:o(t.S2_PREFIX_CLS+"-wrapper")},[l("div",{ref:"containerRef",class:o(t.S2_PREFIX_CLS+"-container")},null,2),t.pagination.visible.value?(n(),u(h,{key:0,current:t.pagination.current.value,pageSize:t.pagination.pageSize.value,total:t.pagination.total.value,onChange:t.handlePageChange,onShowSizeChange:t.handlePageSizeChange},null,8,["current","pageSize","total","onChange","onShowSizeChange"])):a("",!0)],2)])),_:1},8,["wrapperClassName","spinning"])}]]);const fk={class:"antv-s2-icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",width:"12.6",height:"12.6"},pk=[l("path",{d:"M511.804 222.338c-57.117 0-105.737 20.061-145.86 60.184-40.122 40.123-60.184 88.569-60.184 145.337 0 56.769 20.062 105.214 60.185 145.337 40.122 40.123 88.742 60.185 145.859 60.185 57.116 0 105.736-20.062 145.859-60.185 40.123-40.123 60.184-88.568 60.184-145.337 0-56.768-20.061-105.214-60.184-145.337-40.123-40.123-88.743-60.184-145.86-60.184zm0 338.619c-36.729 0-68.007-12.925-93.835-38.774-25.827-25.85-38.752-57.127-38.773-93.834-.022-36.707 12.902-68.16 38.773-94.357 25.872-26.197 57.15-39.285 93.835-39.263 36.685.022 67.963 13.11 93.834 39.263 25.871 26.154 38.796 57.606 38.774 94.357-.022 36.75-12.946 68.028-38.774 93.834-25.828 25.806-57.106 38.73-93.834 38.774zm366.165-295.766c-21.084-42.168-50.327-79.223-87.73-111.165-37.404-31.941-79.898-57.105-127.484-75.491C614.472 60.845 564.155 52 511.804 52c-52.352 0-103.006 8.845-151.963 26.535-46.911 18.364-89.069 43.528-126.472 75.491-37.403 31.964-66.647 69.019-87.731 111.165C123.879 308.71 113 353.923 113 400.835c0 65.95 15.982 132.924 47.945 200.92 26.524 56.441 63.58 112.198 111.165 167.27 62.556 73.435 134.632 138.71 216.227 195.827 6.81 4.765 14.459 7.148 22.945 7.148 8.485 0 16.47-2.383 23.956-7.148 81.595-57.79 153.67-123.067 216.227-195.828 47.608-55.767 84.663-111.524 111.165-167.27 31.963-67.995 47.945-134.969 47.945-200.919 0-46.912-10.88-92.126-32.638-135.644h.032zm-40.797 136.656c0 55.07-13.6 111.513-40.798 169.326-23.129 49.631-56.452 99.948-99.97 150.95-52.351 61.208-113.885 117.65-184.6 169.326-70.716-51.676-132.25-108.118-184.6-169.326-42.844-51.002-76.167-101.319-99.971-150.95-27.198-57.791-40.797-114.57-40.797-170.338 0-36.032 8.159-70.716 24.478-104.05 16.994-32.638 40.45-61.882 70.368-87.73 30.592-26.525 65.276-47.26 104.05-62.209 40.797-14.97 82.954-22.455 126.472-22.455 43.517 0 85.675 7.485 126.472 22.455 38.752 14.97 73.436 35.706 104.05 62.208 30.593 25.85 54.048 55.093 70.367 87.731 16.32 34.009 24.479 69.03 24.479 105.062z",fill:"currentColor"},null,-1)];var vk={render:function(t,e){return n(),r("svg",fk,pk)}};const gk={class:"antv-s2-icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",width:"12.6",height:"12.6"},yk=[l("path",{d:"M86.016 805.888H0l143.872-529.92h79.36l144.896 529.92h-91.136l-29.696-109.056H115.2S85.504 805.888 86.016 805.888zM225.28 613.376 181.248 455.68 138.24 613.376h87.04zM519.168 430.08c24.576-16.384 47.616-25.088 69.12-25.088 30.72 0 58.368 14.848 81.92 44.032 24.064 29.184 35.328 72.192 35.328 128.512 0 44.032-7.168 83.456-22.528 118.272-14.848 34.816-35.328 62.976-60.416 83.456-26.112 20.992-57.856 31.232-95.232 31.232-15.36-.512-31.232-1.536-46.592-3.584-4.096-.512-8.704-1.024-12.8-1.536h-66.56V256h81.92v206.336c11.264-12.8 23.04-23.552 35.84-32.256zM483.84 587.264v135.168c13.824 3.072 26.112 4.608 37.376 4.608 27.648 0 50.176-11.776 69.12-36.352 19.456-25.088 28.672-59.392 28.672-104.96 0-32.256-5.12-55.296-14.848-70.144-9.216-13.824-18.432-19.968-28.672-19.968-12.288 0-27.136 7.68-44.544 24.064-16.896 16.896-32.768 39.424-47.104 67.584zm529.92 207.36c-36.864 14.336-71.68 20.992-104.96 20.992-32.768.512-64.512-9.216-91.648-27.136-27.136-18.432-48.64-44.032-62.464-73.728-14.848-30.72-22.528-65.536-22.528-104.448 0-58.88 16.896-108.032 51.2-146.944 33.792-38.912 75.264-58.88 123.392-58.88 34.304 0 70.144 7.168 108.032 21.504l10.24 4.096v95.232l-20.992-10.752c-34.816-17.92-65.536-26.624-92.16-26.624-16.896 0-32.768 4.608-47.104 13.824-13.824 8.704-25.088 23.04-32.768 42.496-8.192 19.968-12.288 41.472-12.288 63.488 0 28.672 7.68 55.808 24.064 82.432 14.848 24.576 37.888 36.352 71.168 36.352 10.752 0 21.504-1.024 31.744-2.56 9.728-1.536 29.696-8.192 58.88-18.944l19.456-7.68v92.672l-11.264 4.608z",fill:"currentColor"},null,-1)];var mk={render:function(t,e){return n(),r("svg",gk,yk)}};const Ck={class:"antv-s2-icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",width:"12.6",height:"12.6"},wk=[l("path",{d:"M950.016 898.016 744 693.024q88-107.008 88-244.992 0-159.008-112.512-271.488T448 64.032 176.512 176.544 64 448.032 176.512 719.52 448 832.032q138.016 0 244.992-88l206.016 206.016q10.016 10.016 24.992 10.016t26.016-10.016q10.016-11.008 10.016-26.016t-10.016-26.016zM568.992 736Q512 760 448 760t-120.992-24q-56-24-99.488-67.488t-66.496-99.488q-24.992-56.992-24.992-120.992t24.992-120.992q23.008-56 66.496-99.488t99.488-67.488q56.992-24 120.992-24t120.992 24q56 24 99.488 67.488t67.488 99.488q24 56.992 24 120.992t-24 120.992q-24 56-67.488 99.488T568.992 736z",fill:"currentColor"},null,-1)];var xk={render:function(t,e){return n(),r("svg",Ck,wk)}};const Sk=t({name:"DrillDown",props:{className:String,titleText:{type:String,default:VS("选择下钻维度")},searchText:{type:String,default:VS("搜索字段")},clearButtonText:{type:String,default:VS("恢复默认")},extra:Node,dataSet:{type:Array,default:[]},drillFields:Array,disabledFields:Array,getDrillFields:Function,setDrillFields:Function},emits:["getDrillFields","setDrillFields"],methods:{},components:{Button:I,Input:R,Empty:M,Menu:O,MenuItem:A,LocationIcon:vk,TextIcon:mk,CalendarIcon:xk},setup(t){const{dataSet:n,disabledFields:r,getDrillFields:i,setDrillFields:o,className:a}=t,l=e(n.map((t=>(t.disabled=!(!r||!r.includes(t.value)),t)))),s=e([]);return{options:l,handleSearch:t=>{const{value:e}=t.target;if(e){const t=new RegExp(e,"gi"),r=n.filter((e=>t.test(e.name)));l.value=[...r]}else l.value=[...n]},handleSelect:t=>{const e=null==t?void 0:t.selectedKeys;s.value=e,i&&i(e),o&&o(e)},handleClear:t=>{t.stopPropagation(),s.value=[],i&&i([]),o&&o([])},className:a,selected:s,isEmpty:CD,DRILL_DOWN_PRE_CLASS:"s2-drill-down"}}});var bk=GD(Sk,[["render",function(t,e,i,c,h,d){const p=f("Button"),g=f("Input"),y=f("Empty"),m=f("text-icon"),w=f("calendar-icon"),x=f("location-icon"),S=f("MenuItem"),E=f("Menu");return n(),r("div",{class:o([t.DRILL_DOWN_PRE_CLASS,t.className])},[l("header",{class:o(`${t.DRILL_DOWN_PRE_CLASS}-header`)},[l("div",null,s(t.titleText),1),C(p,{type:"link",onClick:t.handleClear},{default:v((()=>[b(s(t.clearButtonText),1)])),_:1},8,["onClick"])],2),C(g,{class:o(`${t.DRILL_DOWN_PRE_CLASS}-search`),placeholder:t.searchText,onChange:t.handleSearch,onPressEnter:t.handleSearch,allowClear:!0},null,8,["class","placeholder","onChange","onPressEnter"]),t.isEmpty(t.options)?(n(),u(y,{key:0,imageStyle:{height:"64px"},class:o(`${t.DRILL_DOWN_PRE_CLASS}-empty`)},null,8,["class"])):a("",!0),C(E,{class:"`${DRILL_DOWN_PRE_CLASS}-menu`",selectedKeys:t.selected,"onUpdate:selectedKeys":e[0]||(e[0]=e=>t.selected=e),onSelect:t.handleSelect},{default:v((()=>[(n(!0),r(_,null,L(t.options,(e=>(n(),u(S,{key:e.value,disabled:e.disabled,class:o(`${t.DRILL_DOWN_PRE_CLASS}-menu-item`)},{icon:v((()=>["text"===e.type?(n(),u(m,{key:0})):a("",!0),"date"===e.type?(n(),u(w,{key:1})):a("",!0),"location"===e.type?(n(),u(x,{key:2})):a("",!0)])),default:v((()=>[b(" "+s(null==e?void 0:e.name),1)])),_:2},1032,["disabled","class"])))),128))])),_:1},8,["selectedKeys","onSelect"])],2)}],["__scopeId","data-v-3a294982"]]);var _k=GD(t({name:"PivotSheet",props:hk(),emits:[],setup(t,n){const r=WD(n.expose),{options:o}=d(t),{dataCfg:a,partDrillDown:l}=d(t),s=e([]),u=t=>{var e,n,i,o,u,c;const h=null==(e=null==r?void 0:r.value)?void 0:e.instance;s.value=t,null==h||h.hideTooltip(),CD(t)?null==h||h.clearDrillDownData(null==(n=null==h?void 0:h.store.get("drillDownNode"))?void 0:n.id):FD({rows:null!=(o=null==(i=a.value)?void 0:i.fields.rows)?o:[],drillFields:t,fetchData:null==(u=l.value)?void 0:u.fetchData,drillItemsNum:null==(c=l.value)?void 0:c.drillItemsNum,spreadsheet:h})},c=i((()=>HD(o.value,l.value,(t=>(t=>{var e,n;const{event:i,disabledFields:o}=t;if(i){const t=null==(e=null==r?void 0:r.value)?void 0:e.instance,a=C(bk,zI(PI({},null==(n=l.value)?void 0:n.drillConfig),{setDrillFields:u,drillFields:s.value,disabledFields:o}));null==t||t.showTooltip({position:{x:i.clientX,y:i.clientY},event:i,content:a})}})(t)))));return{s2Ref:r,options:c}},components:{BaseSheet:dk}}),[["render",function(t,e,r,i,o,a){const l=f("BaseSheet");return n(),u(l,p(t.$props,{ref:"s2Ref",options:t.options}),null,16,["options"])}]]);var Lk=GD(t({name:"TableSheet",props:[],emits:[],setup:(t,e)=>({s2Ref:WD(e.expose)}),components:{BaseSheet:dk}}),[["render",function(t,e,r,i,o,a){const l=f("BaseSheet");return n(),u(l,{ref:"s2Ref"},null,512)}]]);var Ek=GD(t({name:"Sheet",props:[],emits:[],setup:(t,e)=>({s2Ref:WD(e.expose),sheetType:i((()=>"table"===e.attrs.sheetType?Lk:_k))}),components:{PivotSheet:_k,TableSheet:Lk}}),[["render",function(t,e,r,i,o,a){return n(),u(c(t.sheetType),{ref:"s2Ref"},null,512)}]]);export{Ek as i};
