import{g as t,n as e}from"./@babel-6bd44fd1.js";import{l as r}from"./luxon-b01799b6.js";const n=t(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"})));var a=r;function i(t,e){var r={zone:e};if(t?t instanceof i?this._date=t._date:t instanceof Date?this._date=a.DateTime.fromJSDate(t,r):"number"==typeof t?this._date=a.DateTime.fromMillis(t,r):"string"==typeof t&&(this._date=a.DateTime.fromISO(t,r),this._date.isValid||(this._date=a.DateTime.fromRFC2822(t,r)),this._date.isValid||(this._date=a.DateTime.fromSQL(t,r)),this._date.isValid||(this._date=a.DateTime.fromFormat(t,"EEE, d MMM yyyy HH:mm:ss",r))):this._date=a.DateTime.local(),!this._date||!this._date.isValid)throw new Error("CronDate: unhandled timestamp: "+JSON.stringify(t));e&&e!==this._date.zoneName&&(this._date=this._date.setZone(e))}function s(t){return{start:t,count:1}}function o(t,e){t.end=e,t.step=e-t.start,t.count=2}function h(t,e,r){e&&(2===e.count?(t.push(s(e.start)),t.push(s(e.end))):t.push(e)),r&&t.push(r)}i.prototype.addYear=function(){this._date=this._date.plus({years:1})},i.prototype.addMonth=function(){this._date=this._date.plus({months:1}).startOf("month")},i.prototype.addDay=function(){this._date=this._date.plus({days:1}).startOf("day")},i.prototype.addHour=function(){var t=this._date;this._date=this._date.plus({hours:1}).startOf("hour"),this._date<=t&&(this._date=this._date.plus({hours:1}))},i.prototype.addMinute=function(){var t=this._date;this._date=this._date.plus({minutes:1}).startOf("minute"),this._date<t&&(this._date=this._date.plus({hours:1}))},i.prototype.addSecond=function(){var t=this._date;this._date=this._date.plus({seconds:1}).startOf("second"),this._date<t&&(this._date=this._date.plus({hours:1}))},i.prototype.subtractYear=function(){this._date=this._date.minus({years:1})},i.prototype.subtractMonth=function(){this._date=this._date.minus({months:1}).endOf("month").startOf("second")},i.prototype.subtractDay=function(){this._date=this._date.minus({days:1}).endOf("day").startOf("second")},i.prototype.subtractHour=function(){var t=this._date;this._date=this._date.minus({hours:1}).endOf("hour").startOf("second"),this._date>=t&&(this._date=this._date.minus({hours:1}))},i.prototype.subtractMinute=function(){var t=this._date;this._date=this._date.minus({minutes:1}).endOf("minute").startOf("second"),this._date>t&&(this._date=this._date.minus({hours:1}))},i.prototype.subtractSecond=function(){var t=this._date;this._date=this._date.minus({seconds:1}).startOf("second"),this._date>t&&(this._date=this._date.minus({hours:1}))},i.prototype.getDate=function(){return this._date.day},i.prototype.getFullYear=function(){return this._date.year},i.prototype.getDay=function(){var t=this._date.weekday;return 7==t?0:t},i.prototype.getMonth=function(){return this._date.month-1},i.prototype.getHours=function(){return this._date.hour},i.prototype.getMinutes=function(){return this._date.minute},i.prototype.getSeconds=function(){return this._date.second},i.prototype.getMilliseconds=function(){return this._date.millisecond},i.prototype.getTime=function(){return this._date.valueOf()},i.prototype.getUTCDate=function(){return this._getUTC().day},i.prototype.getUTCFullYear=function(){return this._getUTC().year},i.prototype.getUTCDay=function(){var t=this._getUTC().weekday;return 7==t?0:t},i.prototype.getUTCMonth=function(){return this._getUTC().month-1},i.prototype.getUTCHours=function(){return this._getUTC().hour},i.prototype.getUTCMinutes=function(){return this._getUTC().minute},i.prototype.getUTCSeconds=function(){return this._getUTC().second},i.prototype.toISOString=function(){return this._date.toUTC().toISO()},i.prototype.toJSON=function(){return this._date.toJSON()},i.prototype.setDate=function(t){this._date=this._date.set({day:t})},i.prototype.setFullYear=function(t){this._date=this._date.set({year:t})},i.prototype.setDay=function(t){this._date=this._date.set({weekday:t})},i.prototype.setMonth=function(t){this._date=this._date.set({month:t+1})},i.prototype.setHours=function(t){this._date=this._date.set({hour:t})},i.prototype.setMinutes=function(t){this._date=this._date.set({minute:t})},i.prototype.setSeconds=function(t){this._date=this._date.set({second:t})},i.prototype.setMilliseconds=function(t){this._date=this._date.set({millisecond:t})},i.prototype._getUTC=function(){return this._date.toUTC()},i.prototype.toString=function(){return this.toDate().toString()},i.prototype.toDate=function(){return this._date.toJSDate()},i.prototype.isLastDayOfMonth=function(){var t=this._date.plus({days:1}).startOf("day");return this._date.month!==t.month},i.prototype.isLastWeekdayOfMonth=function(){var t=this._date.plus({days:7}).startOf("day");return this._date.month!==t.month};var d=function(t){for(var e=[],r=void 0,n=0;n<t.length;n++){var a=t[n];"number"!=typeof a?(h(e,r,s(a)),r=void 0):r?1===r.count?o(r,a):r.step===a-r.end?(r.count++,r.end=a):2===r.count?(e.push(s(r.start)),o(r=s(r.end),a)):(h(e,r),r=s(a)):r=s(a)}return h(e,r),e};var u=i,f=function(t,e,r){var n=d(t);if(1===n.length){var a=n[0];if(1===(u=a.step)&&a.start===e&&a.end===r)return"*";if(1!==u&&a.start===e&&a.end===r-u+1)return"*/"+u}for(var i=[],s=0,o=n.length;s<o;++s){var h=n[s];if(1!==h.count){var u=h.step;if(1!==h.step){var f=0==h.start?h.count-1:h.count;h.step*f>h.end?i=i.concat(Array.from({length:h.end-h.start+1}).map((function(t,e){var r=h.start+e;return(r-h.start)%h.step==0?r:null})).filter((function(t){return null!=t}))):h.end===r-h.step+1?i.push(h.start+"/"+h.step):i.push(h.start+"-"+h.end+"/"+h.step)}else i.push(h.start+"-"+h.end)}else i.push(h.start)}return i.join(",")};function l(t,e){this._options=e,this._utc=e.utc||!1,this._tz=this._utc?"UTC":e.tz,this._currentDate=new u(e.currentDate,this._tz),this._startDate=e.startDate?new u(e.startDate,this._tz):null,this._endDate=e.endDate?new u(e.endDate,this._tz):null,this._isIterator=e.iterator||!1,this._hasIterated=!1,this._nthDayOfWeek=e.nthDayOfWeek||0,this.fields=l._freezeFields(t)}l.map=["second","minute","hour","dayOfMonth","month","dayOfWeek"],l.predefined={"@yearly":"0 0 1 1 *","@monthly":"0 0 1 * *","@weekly":"0 0 * * 0","@daily":"0 0 * * *","@hourly":"0 * * * *"},l.constraints=[{min:0,max:59,chars:[]},{min:0,max:59,chars:[]},{min:0,max:23,chars:[]},{min:1,max:31,chars:["L"]},{min:1,max:12,chars:[]},{min:0,max:7,chars:["L"]}],l.daysInMonth=[31,29,31,30,31,30,31,31,30,31,30,31],l.aliases={month:{jan:1,feb:2,mar:3,apr:4,may:5,jun:6,jul:7,aug:8,sep:9,oct:10,nov:11,dec:12},dayOfWeek:{sun:0,mon:1,tue:2,wed:3,thu:4,fri:5,sat:6}},l.parseDefaults=["0","*","*","*","*","*"],l.standardValidCharacters=/^[,*\d/-]+$/,l.dayOfWeekValidCharacters=/^[?,*\dL#/-]+$/,l.dayOfMonthValidCharacters=/^[?,*\dL/-]+$/,l.validCharacters={second:l.standardValidCharacters,minute:l.standardValidCharacters,hour:l.standardValidCharacters,dayOfMonth:l.dayOfMonthValidCharacters,month:l.standardValidCharacters,dayOfWeek:l.dayOfWeekValidCharacters},l._isValidConstraintChar=function(t,e){return"string"==typeof e&&t.chars.some((function(t){return e.indexOf(t)>-1}))},l._parseField=function(t,e,r){switch(t){case"month":case"dayOfWeek":var n=l.aliases[t];e=e.replace(/[a-z]{3}/gi,(function(t){if(t=t.toLowerCase(),void 0!==n[t])return n[t];throw new Error('Validation error, cannot resolve alias "'+t+'"')}))}if(!l.validCharacters[t].test(e))throw new Error("Invalid characters, got value: "+e);function a(t){var e=t.split("/");if(e.length>2)throw new Error("Invalid repeat: "+t);return e.length>1?(e[0]==+e[0]&&(e=[e[0]+"-"+r.max,e[1]]),i(e[0],e[e.length-1])):i(t,1)}function i(e,n){var a=[],i=e.split("-");if(i.length>1){if(i.length<2)return+e;if(!i[0].length){if(!i[1].length)throw new Error("Invalid range: "+e);return+e}var s=+i[0],o=+i[1];if(Number.isNaN(s)||Number.isNaN(o)||s<r.min||o>r.max)throw new Error("Constraint error, got range "+s+"-"+o+" expected range "+r.min+"-"+r.max);if(s>o)throw new Error("Invalid range: "+e);var h=+n;if(Number.isNaN(h)||h<=0)throw new Error("Constraint error, cannot repeat at every "+h+" time.");"dayOfWeek"===t&&o%7==0&&a.push(0);for(var d=s,u=o;d<=u;d++){!(-1!==a.indexOf(d))&&h>0&&h%n==0?(h=1,a.push(d)):h++}return a}return Number.isNaN(+e)?e:+e}return-1!==e.indexOf("*")?e=e.replace(/\*/g,r.min+"-"+r.max):-1!==e.indexOf("?")&&(e=e.replace(/\?/g,r.min+"-"+r.max)),function(e){var n=[];function i(e){if(e instanceof Array)for(var a=0,i=e.length;a<i;a++){var s=e[a];if(l._isValidConstraintChar(r,s))n.push(s);else{if("number"!=typeof s||Number.isNaN(s)||s<r.min||s>r.max)throw new Error("Constraint error, got value "+s+" expected range "+r.min+"-"+r.max);n.push(s)}}else{if(l._isValidConstraintChar(r,e))return void n.push(e);var o=+e;if(Number.isNaN(o)||o<r.min||o>r.max)throw new Error("Constraint error, got value "+e+" expected range "+r.min+"-"+r.max);"dayOfWeek"===t&&(o%=7),n.push(o)}}var s=e.split(",");if(!s.every((function(t){return t.length>0})))throw new Error("Invalid list value format");if(s.length>1)for(var o=0,h=s.length;o<h;o++)i(a(s[o]));else i(a(e));return n.sort(l._sortCompareFn),n}(e)},l._sortCompareFn=function(t,e){var r="number"==typeof t,n="number"==typeof e;return r&&n?t-e:!r&&n?1:r&&!n?-1:t.localeCompare(e)},l._handleMaxDaysInMonth=function(t){if(1===t.month.length){var e=l.daysInMonth[t.month[0]-1];if(t.dayOfMonth[0]>e)throw new Error("Invalid explicit day of month definition");return t.dayOfMonth.filter((function(t){return"L"===t||t<=e})).sort(l._sortCompareFn)}},l._freezeFields=function(t){for(var e=0,r=l.map.length;e<r;++e){var n=l.map[e],a=t[n];t[n]=Object.freeze(a)}return Object.freeze(t)},l.prototype._applyTimezoneShift=function(t,e,r){if("Month"===r||"Day"===r){var n=t.getTime();t[e+r](),n===t.getTime()&&(0===t.getMinutes()&&0===t.getSeconds()?t.addHour():59===t.getMinutes()&&59===t.getSeconds()&&t.subtractHour())}else{var a=t.getHours();t[e+r]();var i=t.getHours(),s=i-a;2===s?24!==this.fields.hour.length&&(this._dstStart=i):0===s&&0===t.getMinutes()&&0===t.getSeconds()&&24!==this.fields.hour.length&&(this._dstEnd=i)}},l.prototype._findSchedule=function(t){function e(t,e){for(var r=0,n=e.length;r<n;r++)if(e[r]>=t)return e[r]===t;return e[0]===t}function r(t,e){if(e<6){if(t.getDate()<8&&1===e)return!0;var r=t.getDate()%7?1:0,n=t.getDate()-t.getDate()%7;return Math.floor(n/7)+r===e}return!1}function n(t){return t.length>0&&t.some((function(t){return"string"==typeof t&&t.indexOf("L")>=0}))}var a=(t=t||!1)?"subtract":"add",i=new u(this._currentDate,this._tz),s=this._startDate,o=this._endDate,h=i.getTime(),d=0;for(;d<1e4;){if(d++,t){if(s&&i.getTime()-s.getTime()<0)throw new Error("Out of the timespan range")}else if(o&&o.getTime()-i.getTime()<0)throw new Error("Out of the timespan range");var f=e(i.getDate(),this.fields.dayOfMonth);n(this.fields.dayOfMonth)&&(f=f||i.isLastDayOfMonth());var p=e(i.getDay(),this.fields.dayOfWeek);n(this.fields.dayOfWeek)&&(p=p||this.fields.dayOfWeek.some((function(t){if(!n([t]))return!1;var e=Number.parseInt(t[0])%7;if(Number.isNaN(e))throw new Error("Invalid last weekday of the month expression: "+t);return i.getDay()===e&&i.isLastWeekdayOfMonth()})));var c=this.fields.dayOfMonth.length>=l.daysInMonth[i.getMonth()],m=this.fields.dayOfWeek.length===l.constraints[5].max-l.constraints[5].min+1,_=i.getHours();if(f||p&&!m)if(c||!m||f)if(!c||m||p)if(this._nthDayOfWeek>0&&!r(i,this._nthDayOfWeek))this._applyTimezoneShift(i,a,"Day");else if(e(i.getMonth()+1,this.fields.month)){if(e(_,this.fields.hour)){if(this._dstEnd===_&&!t){this._dstEnd=null,this._applyTimezoneShift(i,"add","Hour");continue}}else{if(this._dstStart!==_){this._dstStart=null,this._applyTimezoneShift(i,a,"Hour");continue}if(!e(_-1,this.fields.hour)){i[a+"Hour"]();continue}}if(e(i.getMinutes(),this.fields.minute))if(e(i.getSeconds(),this.fields.second)){if(h!==i.getTime())break;"add"===a||0===i.getMilliseconds()?this._applyTimezoneShift(i,a,"Second"):i.setMilliseconds(0)}else this._applyTimezoneShift(i,a,"Second");else this._applyTimezoneShift(i,a,"Minute")}else this._applyTimezoneShift(i,a,"Month");else this._applyTimezoneShift(i,a,"Day");else this._applyTimezoneShift(i,a,"Day");else this._applyTimezoneShift(i,a,"Day")}if(d>=1e4)throw new Error("Invalid expression, loop limit exceeded");return this._currentDate=new u(i,this._tz),this._hasIterated=!0,i},l.prototype.next=function(){var t=this._findSchedule();return this._isIterator?{value:t,done:!this.hasNext()}:t},l.prototype.prev=function(){var t=this._findSchedule(!0);return this._isIterator?{value:t,done:!this.hasPrev()}:t},l.prototype.hasNext=function(){var t=this._currentDate,e=this._hasIterated;try{return this._findSchedule(),!0}catch(r){return!1}finally{this._currentDate=t,this._hasIterated=e}},l.prototype.hasPrev=function(){var t=this._currentDate,e=this._hasIterated;try{return this._findSchedule(!0),!0}catch(r){return!1}finally{this._currentDate=t,this._hasIterated=e}},l.prototype.iterate=function(t,e){var r=[];if(t>=0)for(var n=0,a=t;n<a;n++)try{var i=this.next();r.push(i),e&&e(i,n)}catch(s){break}else for(n=0,a=t;n>a;n--)try{i=this.prev();r.push(i),e&&e(i,n)}catch(s){break}return r},l.prototype.reset=function(t){this._currentDate=new u(t||this._options.currentDate)},l.prototype.stringify=function(t){for(var e=[],r=t?0:1,n=l.map.length;r<n;++r){var a=l.map[r],i=this.fields[a],s=l.constraints[r];"dayOfMonth"===a&&1===this.fields.month.length?s={min:1,max:l.daysInMonth[this.fields.month[0]-1]}:"dayOfWeek"===a&&(s={min:0,max:6},i=7===i[i.length-1]?i.slice(0,-1):i),e.push(f(i,s.min,s.max))}return e.join(" ")},l.parse=function(t,e){var r=this;return"function"==typeof e&&(e={}),function(t,e){e||(e={}),void 0===e.currentDate&&(e.currentDate=new u(void 0,r._tz)),l.predefined[t]&&(t=l.predefined[t]);var n=[],a=(t+"").trim().split(/\s+/);if(a.length>6)throw new Error("Invalid cron expression");for(var i=l.map.length-a.length,s=0,o=l.map.length;s<o;++s){var h=l.map[s],d=a[a.length>o?s:s-i];if(s<i||!d)n.push(l._parseField(h,l.parseDefaults[s],l.constraints[s]));else{var f="dayOfWeek"===h?m(d):d;n.push(l._parseField(h,f,l.constraints[s]))}}var p={};for(s=0,o=l.map.length;s<o;s++){p[l.map[s]]=n[s]}var c=l._handleMaxDaysInMonth(p);return p.dayOfMonth=c||p.dayOfMonth,new l(p,e);function m(t){var r=t.split("#");if(r.length>1){var n=+r[r.length-1];if(/,/.test(t))throw new Error("Constraint error, invalid dayOfWeek `#` and `,` special characters are incompatible");if(/\//.test(t))throw new Error("Constraint error, invalid dayOfWeek `#` and `/` special characters are incompatible");if(/-/.test(t))throw new Error("Constraint error, invalid dayOfWeek `#` and `-` special characters are incompatible");if(r.length>2||Number.isNaN(n)||n<1||n>5)throw new Error("Constraint error, invalid dayOfWeek occurrence number (#)");return e.nthDayOfWeek=n,r[0]}return t}}(t,e)},l.fieldsToExpression=function(t,e){function r(t,e,r){if(!e)throw new Error("Validation error, Field "+t+" is missing");if(0===e.length)throw new Error("Validation error, Field "+t+" contains no values");for(var n=0,a=e.length;n<a;n++){var i=e[n];if(!l._isValidConstraintChar(r,i)&&("number"!=typeof i||Number.isNaN(i)||i<r.min||i>r.max))throw new Error("Constraint error, got value "+i+" expected range "+r.min+"-"+r.max)}}for(var n={},a=0,i=l.map.length;a<i;++a){var s=l.map[a],o=t[s];r(s,o,l.constraints[a]);for(var h=[],d=-1;++d<o.length;)h[d]=o[d];if((o=h.sort(l._sortCompareFn).filter((function(t,e,r){return!e||t!==r[e-1]}))).length!==h.length)throw new Error("Validation error, Field "+s+" contains duplicate values");n[s]=o}var u=l._handleMaxDaysInMonth(n);return n.dayOfMonth=u||n.dayOfMonth,new l(n,e||{})};var p=l;function c(){}c._parseEntry=function(t){var e=t.split(" ");if(6===e.length)return{interval:p.parse(t)};if(e.length>6)return{interval:p.parse(e.slice(0,6).join(" ")),command:e.slice(6,e.length)};throw new Error("Invalid entry: "+t)},c.parseExpression=function(t,e){return p.parse(t,e)},c.fieldsToExpression=function(t,e){return p.fieldsToExpression(t,e)},c.parseString=function(t){for(var e=t.split("\n"),r={variables:{},expressions:[],errors:{}},n=0,a=e.length;n<a;n++){var i=null,s=e[n].trim();if(s.length>0){if(s.match(/^#/))continue;if(i=s.match(/^(.*)=(.*)$/))r.variables[i[1]]=i[2];else{var o=null;try{o=c._parseEntry("0 "+s),r.expressions.push(o.interval)}catch(h){r.errors[s]=h}}}}return r},c.parseFile=function(t,e){n.readFile(t,(function(t,r){if(!t)return e(null,c.parseString(r.toString()));e(t)}))};const m=e(c);export{m as c,n as r};
