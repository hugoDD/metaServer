import{r as e,u as s,p as t,l as i,Y as a,X as r,E as l,o,a as m,c as p,G as n,f as u,g as d,i as c,w as j,F as v,A as b,t as f,a0 as y}from"./@vue-1ad4818c.js";import{b as h}from"./team-3e46d8bc.js";import{_}from"./index-ea085229.js";import{b as g,a as x}from"./element-plus-bab58d46.js";import"./vue3-manner-report-313033e6.js";import"./axios-85bcd05e.js";import"./crypto-js-43a3a23e.js";import"./@babel-6bd44fd1.js";import"./cron-parser-1391a961.js";import"./luxon-b01799b6.js";import"./vue-router-414ebc36.js";import"./nprogress-c04e6182.js";import"./pinia-3f60a8e1.js";import"./sortablejs-2f5483e3.js";import"./qrcodejs2-fix-bab07f30.js";import"./@element-plus-2a6d398c.js";import"./moment-bafe441d.js";import"./pinyin-pro-c81f5d39.js";import"./vue-i18n-0843b5c5.js";import"./@intlify-2528d766.js";import"./source-map-b06bd4b9.js";import"./vue-c723f8b1.js";import"./@vueuse-477b4dbb.js";import"./pinia-plugin-persistedstate-d2bd58cf.js";import"./resize-observer-polyfill-ad543aa3.js";import"./vue-smart-widget-8b3f5b0a.js";import"./echarts-b5d24e9a.js";import"./zrender-a15b073b.js";import"./tslib-a4e99503.js";import"./echarts-liquidfill-f5c863f1.js";import"./@antv-43d380be.js";import"./ant-design-vue-2db0c9af.js";import"./lodash-es-b8e8104a.js";import"./@ant-design-60f2ef8e.js";import"./@ctrl-4982d949.js";import"./dayjs-7fb79ad3.js";import"./vue-types-6bcea8eb.js";import"./dom-align-78cb5391.js";import"./vue-draggable-next-a413f884.js";import"./vue-resize-observer-90aea344.js";import"./@popperjs-b78c3215.js";import"./async-validator-cf877c1f.js";import"./memoize-one-63ab667a.js";import"./escape-html-3148dbc9.js";import"./normalize-wheel-es-3222b0a2.js";import"./@floating-ui-0ef99041.js";const k={class:"tab-member-list"},N={key:0,class:"search-box mb-10"},I={class:"member-item-box"},w={key:0,class:"member-list__main role"},z=["title"],V=["title"],B={class:"member-list__icon"},C={class:"member-list__main"},D=["title"],E=["title"],M=["onClick"],R=_({__name:"TabMemberList",props:{modelValue:null,id:{type:String,default:""},isRole:{type:Boolean,default:!1},isDisabled:{type:Boolean,default:!1}},emits:["delMembers"],setup(_,{emit:R}){const q=_;let A=e([]),T=e(""),F=e([]),G=e(!1);s((()=>q.modelValue),(()=>{A.value=q.modelValue,L()}),{deep:!0}),t((()=>{A.value=q.modelValue,L()}));const L=()=>{if(!T.value)return void(F.value=[...A.value]);let e=[];A.value.forEach((s=>{-1!=s.userName.indexOf(T.value)&&e.push(s),-1!=s.departmentName.indexOf(T.value)&&e.push(s)})),F.value=[...e]};return(e,s)=>{const t=i("mlSearchInput"),A=i("mlAvatar"),O=i("el-avatar"),S=i("ElIconDeleteFilled"),H=i("el-icon"),J=i("el-scrollbar"),K=i("el-empty"),U=a("loading");return r((o(),m("div",k,[_.isRole?u("",!0):(o(),m("div",N,[p(t,{style:{width:"230px"},modelValue:l(T),"onUpdate:modelValue":s[0]||(s[0]=e=>n(T)?T.value=e:T=e),placeholder:"查询成员名称及所属部门",onConfirm:L},null,8,["modelValue"])])),d("div",I,[l(F).length>0?(o(),c(J,{key:0},{default:j((()=>[(o(!0),m(v,null,b(l(F),((e,s)=>(o(),m("div",{class:"member-item",key:s},[_.isRole?(o(),m("div",w,[d("div",{class:"name yichu",title:e.roleName.name},f(e.roleName),9,z),d("div",{class:"department yichu",title:e.description},f(e.description),9,V)])):(o(),m(v,{key:1},[d("div",B,[p(O,{size:40},{default:j((()=>[p(A,{userId:e.userId},null,8,["userId"])])),_:2},1024)]),d("div",C,[d("div",{class:"name yichu",title:e.userName},f(e.userName),9,D),d("div",{class:"department yichu",title:e.departmentName},f(e.departmentName),9,E)])],64)),_.isDisabled?u("",!0):(o(),m("span",{key:2,class:"member-list__del",onClick:y((s=>(e=>{g.confirm("是否确认删除?","提示：",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then((async()=>{let s;G.value=!0,s=q.isRole?await h(e.roleId,q.id):await h(q.id,e.userId),s&&(x.success("删除成功"),R("delMembers")),G.value=!1})).catch((()=>{}))})(e)),["stop"])},[p(H,{size:"20"},{default:j((()=>[p(S)])),_:1})],8,M))])))),128))])),_:1})):(o(),c(K,{key:1,description:"没有数据"}))])])),[[U,l(G)]])}}},[["__scopeId","data-v-8e31963d"]]);export{R as default};
