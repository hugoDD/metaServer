import{R as e,r as l,p as a,l as t,Y as o,X as n,E as s,o as u,a as i,i as d,w as c,c as m,f as r,F as v,A as p,g as y}from"./@vue-1ad4818c.js";const b={class:"action-div"},V={key:0,class:"w-100 mt-15"},U={key:1,class:"w-100 info-text mt-5"},C=y("div",{class:"w-100 info-text mt-5"},"不选择则取消所有用户的",-1),f={__name:"autoShare",props:{modelValue:null},setup(y){const f=y,w=e("$API");e("$ElMessage");let h=l(!1),k=l({actionContent:{}}),I=l([]);a((()=>{k.value=f.modelValue,k.value.actionContent.toUsersId||(k.value.actionContent.toUsersId=[]),x()}));const x=async()=>{h.value=!0;let e=await w.common.queryEntityList(k.value.entityCode,!1,!0,!0);e&&(I.value=e.data),h.value=!1};return(e,l)=>{var a,y,f;const w=t("mlSelectUser"),x=t("el-form-item"),_=t("el-option"),g=t("el-select"),T=t("el-checkbox"),E=o("loading");return n((u(),i("div",b,[9==(null==(a=s(k).actionType)?void 0:a.value)?(u(),d(x,{key:0,style:{"margin-bottom":"20px"},label:"共享给谁"},{default:c((()=>[m(w,{modelValue:s(k).actionContent.toUsersId,"onUpdate:modelValue":l[0]||(l[0]=e=>s(k).actionContent.toUsersId=e),multiple:"",clearable:""},null,8,["modelValue"])])),_:1})):r("",!0),m(x,{label:9==(null==(y=s(k).actionType)?void 0:y.value)?"同时共享关联记录":"取消共享记录"},{default:c((()=>{var e,a;return[m(g,{modelValue:s(k).actionContent.items,"onUpdate:modelValue":l[1]||(l[1]=e=>s(k).actionContent.items=e),multiple:"",placeholder:"选择关联实体"+(null==(e=s(k).actionType)?void 0:e.value)==9?"(可选)":"",style:{width:"100%"},clearable:"",filterable:"","value-key":"label"},{default:c((()=>[(u(!0),i(v,null,p(s(I),((e,l)=>(u(),d(_,{key:l,value:e,label:e.label},null,8,["value","label"])))),128))])),_:1},8,["modelValue","placeholder"]),9==(null==(a=s(k).actionType)?void 0:a.value)?(u(),i("div",V,[m(T,{modelValue:s(k).actionContent.withUpdate,"onUpdate:modelValue":l[2]||(l[2]=e=>s(k).actionContent.withUpdate=e),label:"允许编辑 (不勾选则仅共享读取权限)"},null,8,["modelValue"])])):(u(),i("div",U,"可取消共享源实体记录或其关联记录"))]})),_:1},8,["label"]),10==(null==(f=s(k).actionType)?void 0:f.value)?(u(),d(x,{key:1,style:{"margin-top":"20px"},label:"取消哪些用户"},{default:c((()=>[m(w,{modelValue:s(k).actionContent.toUsersId,"onUpdate:modelValue":l[3]||(l[3]=e=>s(k).actionContent.toUsersId=e),multiple:"",clearable:""},null,8,["modelValue"]),C])),_:1})):r("",!0)])),[[E,s(h)]])}}};export{f as default};
