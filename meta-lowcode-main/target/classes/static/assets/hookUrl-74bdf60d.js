import{_ as e,j as t}from"./index-ea085229.js";import{R as l,r as a,p as o,l as s,Y as n,X as i,E as r,o as c,a as p,c as m,w as u,z as d,i as j,F as v,A as f,f as y,g as C,t as k,bh as g,bf as b}from"./@vue-1ad4818c.js";import"./element-plus-bab58d46.js";import"./lodash-es-b8e8104a.js";import"./@vueuse-477b4dbb.js";import"./@element-plus-2a6d398c.js";import"./@babel-6bd44fd1.js";import"./@popperjs-b78c3215.js";import"./@ctrl-4982d949.js";import"./dayjs-7fb79ad3.js";import"./async-validator-cf877c1f.js";import"./memoize-one-63ab667a.js";import"./escape-html-3148dbc9.js";import"./normalize-wheel-es-3222b0a2.js";import"./@floating-ui-0ef99041.js";import"./vue3-manner-report-313033e6.js";import"./axios-85bcd05e.js";import"./crypto-js-43a3a23e.js";import"./cron-parser-1391a961.js";import"./luxon-b01799b6.js";import"./vue-router-414ebc36.js";import"./nprogress-c04e6182.js";import"./pinia-3f60a8e1.js";import"./sortablejs-2f5483e3.js";import"./qrcodejs2-fix-bab07f30.js";import"./moment-bafe441d.js";import"./pinyin-pro-c81f5d39.js";import"./vue-i18n-0843b5c5.js";import"./@intlify-2528d766.js";import"./source-map-b06bd4b9.js";import"./vue-c723f8b1.js";import"./pinia-plugin-persistedstate-d2bd58cf.js";import"./resize-observer-polyfill-ad543aa3.js";import"./vue-smart-widget-8b3f5b0a.js";import"./echarts-b5d24e9a.js";import"./zrender-a15b073b.js";import"./tslib-a4e99503.js";import"./echarts-liquidfill-f5c863f1.js";import"./@antv-43d380be.js";import"./ant-design-vue-2db0c9af.js";import"./@ant-design-60f2ef8e.js";import"./vue-types-6bcea8eb.js";import"./dom-align-78cb5391.js";import"./vue-draggable-next-a413f884.js";import"./vue-resize-observer-90aea344.js";const U=e=>(g("data-v-c907f919"),e=e(),b(),e),h={class:"action-div"},V=U((()=>C("div",{class:"info-text mt-3"},[d(" 填写后，系统在调用时会携带在请求头 Header 中，Header 名称为 "),C("span",{style:{color:"#e83e8c","font-size":"12px"}},"X-RBHOOK-SECRET")],-1))),_=U((()=>C("div",{class:"info-text"},[d(" 启用后，调用返回结果必须为 "),C("span",{style:{color:"#e83e8c","font-size":"12px"}},"SUCCESS"),d(" ，否则将视为调用失败 ")],-1))),T=U((()=>C("div",{class:"info-text"},"更新时默认只推送修改的字段/数据，启用后会推送全部字段/数据",-1))),x={key:0,class:"text-div mt-5"},S={class:"pre-div"},w={key:1,class:"text-div mt-5"},B={class:"pre-div"},R=e({__name:"hookUrl",props:{modelValue:null},setup(e){const g=e,b=l("$API"),U=l("$ElMessage");let R=a(!1),L=a({actionContent:{}});o((()=>{L.value=g.modelValue,L.value.actionContent.callBackType||(L.value.actionContent.callBackType="URL"),I()}));let E=a({});const z=async()=>{if(!L.value.actionContent.hookUrl)return void U.warning("请输入要推送到的URL");let e=await b.trigger.detial.callBackTest(L.value.actionContent);E.value=e};let A=a(!1),N=a([]);const I=async()=>{A.value=!0;let e=await t.get("/plugins/metaTrigger/trigger/queryFunctionList");e&&(N.value=e.data),A.value=!1};return(e,t)=>{const l=s("el-radio"),a=s("el-radio-group"),o=s("el-form-item"),g=s("el-option"),b=s("el-select"),U=s("el-input"),I=s("el-checkbox"),q=s("el-row"),F=s("el-button"),H=n("loading");return i((c(),p("div",h,[m(o,{class:"mt-20",label:"回调类型"},{default:u((()=>[m(a,{modelValue:r(L).actionContent.callBackType,"onUpdate:modelValue":t[0]||(t[0]=e=>r(L).actionContent.callBackType=e),class:"ml-4"},{default:u((()=>[m(l,{label:"URL"},{default:u((()=>[d("URL回调")])),_:1}),m(l,{label:"FUNCTION"},{default:u((()=>[d("函数回调")])),_:1})])),_:1},8,["modelValue"])])),_:1}),"FUNCTION"==r(L).actionContent.callBackType?i((c(),j(o,{key:0,class:"mt-20",label:"回调函数"},{default:u((()=>[m(b,{modelValue:r(L).actionContent.functionName,"onUpdate:modelValue":t[1]||(t[1]=e=>r(L).actionContent.functionName=e),class:"m-2",placeholder:"选择回调函数"},{default:u((()=>[(c(!0),p(v,null,f(r(N),(e=>(c(),j(g,{key:e,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})),[[H,r(A)]]):y("",!0),"URL"==r(L).actionContent.callBackType?(c(),j(o,{key:1,class:"mt-20",label:"推送到(URL)"},{default:u((()=>[m(U,{modelValue:r(L).actionContent.hookUrl,"onUpdate:modelValue":t[2]||(t[2]=e=>r(L).actionContent.hookUrl=e),placeholder:"https://www.test.com/send"},null,8,["modelValue"])])),_:1})):y("",!0),"URL"==r(L).actionContent.callBackType?(c(),j(o,{key:2,class:"mt-20",label:"安全码"},{default:u((()=>[m(U,{modelValue:r(L).actionContent.hookSecret,"onUpdate:modelValue":t[3]||(t[3]=e=>r(L).actionContent.hookSecret=e),placeholder:"(选填)"},null,8,["modelValue"]),V])),_:1})):y("",!0),"URL"==r(L).actionContent.callBackType?(c(),j(o,{key:3,class:"mt-10",label:" "},{default:u((()=>[m(q,{class:"w-100"},{default:u((()=>[m(I,{modelValue:r(L).actionContent.forceSync,"onUpdate:modelValue":t[4]||(t[4]=e=>r(L).actionContent.forceSync=e),label:"校验返回结果"},null,8,["modelValue"])])),_:1}),_])),_:1})):y("",!0),m(o,{class:"mt-10",label:" "},{default:u((()=>[m(q,{class:"w-100"},{default:u((()=>[m(I,{modelValue:r(L).actionContent.pushAllData,"onUpdate:modelValue":t[5]||(t[5]=e=>r(L).actionContent.pushAllData=e),label:"推送全量数据"},null,8,["modelValue"])])),_:1}),T])),_:1}),"URL"==r(L).actionContent.callBackType?(c(),j(o,{key:4,class:"mt-15",label:" "},{default:u((()=>[m(q,{class:"w-100"},{default:u((()=>[m(F,{style:{width:"80px",height:"36px"},type:"primary",plain:"",onClick:z},{default:u((()=>[d("推送测试")])),_:1})])),_:1}),r(E)?(c(),p("div",x,[C("div",null,"STATUS : "+k(r(E).code),1),C("div",null,"MESSAGE : "+k(r(E).message),1),C("div",S,k(r(E).data),1)])):(c(),p("div",w,[C("div",null,"STATUS : "+k(r(E).code),1),C("div",null,"MESSAGE : "+k(r(E).message),1),C("div",B,k(r(E).error),1)]))])),_:1})):y("",!0)])),[[H,r(R)]])}}},[["__scopeId","data-v-c907f919"]]);export{R as default};
