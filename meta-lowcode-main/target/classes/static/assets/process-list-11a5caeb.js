import{u as e}from"./vue-router-414ebc36.js";import{R as t,r as a,l,o,a as i,c as n,w as r,E as s,F as d,g as p}from"./@vue-1ad4818c.js";const u=p("span",{class:"ml-5"},"添加",-1),f={__name:"process-list",setup(p){const f=e();t("$TOOL");let c=a(""),m=a([{fieldName:"flowName",op:"LK",value:""}]),v=a([{prop:"flowName",label:"名称",sortable:!0,highlight:!0},{prop:"entityCode",label:"应用实体",entityCode:!0,sortable:!0},{prop:"runningTotal",label:"运行中的流程统计",align:"center"},{prop:"runningTotal",label:"结束的流程统计",align:"center"},{prop:"isDisabled",label:"启用",align:"center",customSolt:"switch",isNegation:!0,width:80},{prop:"modifiedOn",label:"修改时间",align:"center",width:100,fromNow:!0}]);const g=e=>{let t={...e};C.value.form={...t},y.value.dialogForm={...C.value},y.value.saveProcess()};let y=a(),C=a({saveEntity:"ApprovalConfig",saveIdCode:"approvalConfigId",checkCodes:["flowName"],codeErrMsg:["请输入审批流程名称"],disabledTip:"禁用后正在使用此流程的审批记录不受影响",fromEntityLabel:"应用实体",showFormItem:[{label:"名称",code:"flowName",type:"1"}]});const b=()=>{w({target:"add"})},w=e=>{let{target:t,row:a}=e,{defaultCode:l}=c.value;"add"===t?(C.value.title="添加审批流程",C.value.form={entityCode:"all"==l?"":parseInt(l)},C.value.type="add"):(C.value.title="编辑审批流程",C.value.type="edit",C.value.form={...a}),y.value.openDialog(C.value)},h=async e=>{e?I(e):c.value.getEntityList()},I=e=>{f.push({path:"/web/process-detail",query:{approvalConfigId:e.approvalConfigId,entityCode:e.entityCode}})};return(e,t)=>{const a=l("ElIconPlus"),p=l("el-icon"),f=l("el-button"),C=l("mlEntityMenuAndList"),L=l("mlActiveDialog");return o(),i(d,null,[n(C,{ref_key:"mlEntityMenuAndListRef",ref:c,entityName:"ApprovalConfig",aciveId:"approvalConfigId",fieldsList:"entityCode,flowName,modifiedOn,isDisabled,runningTotal,completeTotal,createdOn",onGoDetial:I,tableColumn:s(v),defalutSortField:"createdOn",filterItems:s(m),onActionBtn:w,queryUrl:"/approval/configList",onChangeSwitch:g,onOpenAddDialog:b},{addbutton:r((()=>[n(f,{type:"primary",onClick:t[0]||(t[0]=e=>w({target:"add"}))},{default:r((()=>[n(p,{size:"14"},{default:r((()=>[n(a)])),_:1}),u])),_:1})])),_:1},8,["tableColumn","filterItems"]),n(L,{ref_key:"mlActiveDialogRefs",ref:y,isProcess:"",onSaveProcess:h},null,512)],64)}}};export{f as default};
