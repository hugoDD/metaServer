import{f as e,J as i,K as t}from"./index-ea085229.js";import{a as s}from"./element-plus-bab58d46.js";import{v as o,r,l,Y as a,o as n,i as p,w as m,E as d,z as u,f as c,c as g,X as j,a as f,F as y,g as v,t as w}from"./@vue-1ad4818c.js";import"./vue3-manner-report-313033e6.js";import"./axios-85bcd05e.js";import"./crypto-js-43a3a23e.js";import"./@babel-6bd44fd1.js";import"./cron-parser-1391a961.js";import"./luxon-b01799b6.js";import"./vue-router-414ebc36.js";import"./nprogress-c04e6182.js";import"./pinia-3f60a8e1.js";import"./sortablejs-2f5483e3.js";import"./qrcodejs2-fix-bab07f30.js";import"./@element-plus-2a6d398c.js";import"./moment-bafe441d.js";import"./pinyin-pro-c81f5d39.js";import"./vue-i18n-0843b5c5.js";import"./@intlify-2528d766.js";import"./source-map-b06bd4b9.js";import"./vue-c723f8b1.js";import"./@vueuse-477b4dbb.js";import"./pinia-plugin-persistedstate-d2bd58cf.js";import"./resize-observer-polyfill-ad543aa3.js";import"./vue-smart-widget-8b3f5b0a.js";import"./echarts-b5d24e9a.js";import"./zrender-a15b073b.js";import"./tslib-a4e99503.js";import"./echarts-liquidfill-f5c863f1.js";import"./@antv-43d380be.js";import"./ant-design-vue-2db0c9af.js";import"./lodash-es-b8e8104a.js";import"./@ant-design-60f2ef8e.js";import"./@ctrl-4982d949.js";import"./dayjs-7fb79ad3.js";import"./vue-types-6bcea8eb.js";import"./dom-align-78cb5391.js";import"./vue-draggable-next-a413f884.js";import"./vue-resize-observer-90aea344.js";import"./@popperjs-b78c3215.js";import"./async-validator-cf877c1f.js";import"./memoize-one-63ab667a.js";import"./escape-html-3148dbc9.js";import"./normalize-wheel-es-3222b0a2.js";import"./@floating-ui-0ef99041.js";const b={style:{"padding-right":"20px"}},h={class:"w-100"},V={__name:"ActivateAuth",emits:["registerActiveConfirm"],setup(V,{expose:_,emit:x}){const{setPublicSetting:C}=e(),L=o({account:"",secretKey:"",licenseCode:"",offlineSign:""});let S=o({isShow:!1,loading:!1,type:1,registerLicense:{}}),k=r({});const q=async()=>{let{type:e,registerLicense:o}=S,{account:r,secretKey:l,licenseCode:a,offlineSign:n}=o;if(!(1!=e||r&&l&&a))return void s.warning("账号、密钥、授权码为必填项。");if(2==e&&!n)return void s.warning("离线授权码为必填项。");let p={};if(p=1==e?{account:r,secretKey:l,licenseCode:a}:{offlineSign:n},S.loading=!0,await i(p)){let e=await t();e&&C(e),s.success("激活成功"),S.isShow=!1,S.loading=!1,x("registerActiveConfirm")}else S.loading=!1};return _({openDailog:e=>{k.value={...e},S.isShow=!0,S.registerLicense={...L}}}),(e,i)=>{const t=l("el-input"),s=l("el-form-item"),o=l("el-form"),r=l("el-button"),V=l("ml-dialog"),_=a("loading");return n(),p(V,{modelValue:d(S).isShow,"onUpdate:modelValue":i[7]||(i[7]=e=>d(S).isShow=e),title:1==d(S).type?"联网激活":"离线激活",width:"600"},{footer:m((()=>[2==d(S).type?(n(),p(r,{key:0,onClick:i[4]||(i[4]=e=>d(S).type=1),type:"success",loading:d(S).loading},{default:m((()=>[u("联网激活")])),_:1},8,["loading"])):c("",!0),1==d(S).type?(n(),p(r,{key:1,onClick:i[5]||(i[5]=e=>d(S).type=2),type:"info",loading:d(S).loading},{default:m((()=>[u("离线激活")])),_:1},8,["loading"])):c("",!0),g(r,{onClick:i[6]||(i[6]=e=>d(S).isShow=!1),loading:d(S).loading},{default:m((()=>[u("取消")])),_:1},8,["loading"]),g(r,{type:"primary",onClick:q,loading:d(S).loading},{default:m((()=>[u("激活")])),_:1},8,["loading"])])),default:m((()=>[j((n(),f("div",b,[g(o,{"label-width":1==d(S).type?"70px":"80px"},{default:m((()=>[1==d(S).type?(n(),f(y,{key:0},[g(s,{label:"账号",required:""},{default:m((()=>[g(t,{modelValue:d(S).registerLicense.account,"onUpdate:modelValue":i[0]||(i[0]=e=>d(S).registerLicense.account=e)},null,8,["modelValue"])])),_:1}),g(s,{label:"密钥",required:""},{default:m((()=>[g(t,{modelValue:d(S).registerLicense.secretKey,"onUpdate:modelValue":i[1]||(i[1]=e=>d(S).registerLicense.secretKey=e)},null,8,["modelValue"])])),_:1}),g(s,{label:"授权码",style:{"margin-bottom":"22px"},required:""},{default:m((()=>[g(t,{modelValue:d(S).registerLicense.licenseCode,"onUpdate:modelValue":i[2]||(i[2]=e=>d(S).registerLicense.licenseCode=e)},null,8,["modelValue"])])),_:1})],64)):(n(),f(y,{key:1},[g(s,{label:"设备号"},{default:m((()=>[v("span",h,w(d(k).deviceNo),1)])),_:1}),g(s,{label:"离线授权",required:""},{default:m((()=>[g(t,{modelValue:d(S).registerLicense.offlineSign,"onUpdate:modelValue":i[3]||(i[3]=e=>d(S).registerLicense.offlineSign=e),type:"textarea",rows:6},null,8,["modelValue"])])),_:1})],64))])),_:1},8,["label-width"])])),[[_,d(S).loading]])])),_:1},8,["modelValue","title"])}}};export{V as default};
