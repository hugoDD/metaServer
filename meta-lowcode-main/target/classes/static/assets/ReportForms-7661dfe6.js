import{_ as e,f as s,j as t}from"./index-ea085229.js";import{u as o}from"./vue-router-414ebc36.js";import{s as i}from"./pinia-3f60a8e1.js";import{R as r,r as a,l as p,Y as l,o as n,i as m,w as j,E as u,X as d,a as c,c as v,z as g,f as y,F as f,A as x,t as h,g as w,G as b}from"./@vue-1ad4818c.js";import"./element-plus-bab58d46.js";import"./lodash-es-b8e8104a.js";import"./@vueuse-477b4dbb.js";import"./@element-plus-2a6d398c.js";import"./@babel-6bd44fd1.js";import"./@popperjs-b78c3215.js";import"./@ctrl-4982d949.js";import"./dayjs-7fb79ad3.js";import"./async-validator-cf877c1f.js";import"./memoize-one-63ab667a.js";import"./escape-html-3148dbc9.js";import"./normalize-wheel-es-3222b0a2.js";import"./@floating-ui-0ef99041.js";import"./vue3-manner-report-313033e6.js";import"./axios-85bcd05e.js";import"./crypto-js-43a3a23e.js";import"./cron-parser-1391a961.js";import"./luxon-b01799b6.js";import"./nprogress-c04e6182.js";import"./sortablejs-2f5483e3.js";import"./qrcodejs2-fix-bab07f30.js";import"./moment-bafe441d.js";import"./pinyin-pro-c81f5d39.js";import"./vue-i18n-0843b5c5.js";import"./@intlify-2528d766.js";import"./source-map-b06bd4b9.js";import"./vue-c723f8b1.js";import"./pinia-plugin-persistedstate-d2bd58cf.js";import"./resize-observer-polyfill-ad543aa3.js";import"./vue-smart-widget-8b3f5b0a.js";import"./echarts-b5d24e9a.js";import"./zrender-a15b073b.js";import"./tslib-a4e99503.js";import"./echarts-liquidfill-f5c863f1.js";import"./@antv-43d380be.js";import"./ant-design-vue-2db0c9af.js";import"./@ant-design-60f2ef8e.js";import"./vue-types-6bcea8eb.js";import"./dom-align-78cb5391.js";import"./vue-draggable-next-a413f884.js";import"./vue-resize-observer-90aea344.js";const k={key:0,style:{"max-height":"500px"}},_=["onClick"],C={class:"down-icon"},I={key:1,class:"not-plugin"},z=e({__name:"ReportForms",setup(e,{expose:z}){const{publicSetting:R}=i(s()),L=o(),D=r("$TOOL");let E=a(!1),T=a(!1),q=a(""),A=a(""),G=a([]),N=a(!1);const P=async()=>{T.value=!0;let e=await t.get("/plugins/mannerReport/getReportConfigList",{entityCode:q.value});e&&(G.value=e.data||[]),T.value=!1},V=()=>{let e=L.resolve({name:"TemplatesList"});window.open(e.href+"?entityCode="+q.value,"_blank")};return z({openDialog:e=>{E.value=!0,q.value=e.entityCode,A.value=e.detailId,(R.value.APP_PLUGINID||[]).includes("mannerReport")&&(N.value=!0,P())}}),(e,s)=>{const t=p("el-empty"),o=p("ElIconDownload"),i=p("el-icon"),r=p("el-scrollbar"),a=p("ml-dialog"),z=l("loading");return n(),m(a,{title:"选择报表",modelValue:u(E),"onUpdate:modelValue":s[0]||(s[0]=e=>b(E)?E.value=e:E=e),width:"500px",appendToBody:""},{default:j((()=>[u(N)?d((n(),c("div",k,[v(r,null,{default:j((()=>[0==u(G).length?(n(),m(t,{key:0,"image-size":80},{description:j((()=>[g(" 暂无报表 "),u(D).checkRole("r45-1")?(n(),c("span",{key:0,class:"ml-a-span",onClick:V},"点击配置")):y("",!0)])),_:1})):y("",!0),(n(!0),c(f,null,x(u(G),((e,s)=>(n(),c("div",{class:"report-item text-ellipsis",key:s,onClick:s=>(async e=>{window.open(`/plugins/mannerReport/exportExcelTemplate?reportConfigId=${e.reportConfigId}&entityId=${A.value}`)})(e)},[g(h(e.reportName)+" ",1),w("span",C,[v(i,null,{default:j((()=>[v(o)])),_:1})])],8,_)))),128))])),_:1})])),[[z,u(T)]]):(n(),c("div",I,"在线报表 插件未安装！！"))])),_:1},8,["modelValue"])}}},[["__scopeId","data-v-6e38e244"]]);export{z as default};
