import{_ as e,f as t,a2 as a,a3 as l,a4 as i,a5 as o,l as s,x as r,a6 as n,a7 as d,a8 as m,a9 as p,aa as c,ab as h,ac as g,e as u}from"./index-ea085229.js";import y from"./entity-property-editor-c9880942.js";import f from"./boolean-widget-editor-96decc00.js";import b from"./integer-widget-editor-fc7736e2.js";import w from"./decimal-widget-editor-3bf7f1a6.js";import F from"./percent-widget-editor-efe2ad39.js";import E from"./money-widget-editor-8dc26d51.js";import D from"./text-widget-editor-dca21c09.js";import T from"./email-widget-editor-e06c216a.js";import j from"./url-widget-editor-8378b1cc.js";import v from"./textarea-widget-editor-303cffa1.js";import _ from"./password-widget-editor-c0cc48b6.js";import V from"./option-widget-editor-e6a9a4fe.js";import k from"./tag-widget-editor-b8304c3f.js";import C from"./areaselect-widget-editor-472a3859.js";import P from"./date-widget-editor-f841f5a7.js";import x from"./datetime-widget-editor-0eebeda4.js";import W from"./picture-widget-editor-4d3f953b.js";import $ from"./file-widget-editor-8dad7fe9.js";import S from"./reference-widget-editor-7831b5c0.js";import N from"./anyreference-widget-editor-6ab813ca.js";import L from"./referencelist-widget-editor-2cb31426.js";import{h as z,l as I,Y as U,o as A,i as B,w as M,c as R,X as H,a as K,g as q,t as O,F as X,A as Y,z as Z,f as G,ag as J,j as Q,bh as ee,bf as te}from"./@vue-1ad4818c.js";import{s as ae}from"./pinia-3f60a8e1.js";import"./element-plus-bab58d46.js";import"./lodash-es-b8e8104a.js";import"./@vueuse-477b4dbb.js";import"./@element-plus-2a6d398c.js";import"./@babel-6bd44fd1.js";import"./@popperjs-b78c3215.js";import"./@ctrl-4982d949.js";import"./dayjs-7fb79ad3.js";import"./async-validator-cf877c1f.js";import"./memoize-one-63ab667a.js";import"./escape-html-3148dbc9.js";import"./normalize-wheel-es-3222b0a2.js";import"./@floating-ui-0ef99041.js";import"./vue3-manner-report-313033e6.js";import"./axios-85bcd05e.js";import"./crypto-js-43a3a23e.js";import"./cron-parser-1391a961.js";import"./luxon-b01799b6.js";import"./vue-router-414ebc36.js";import"./nprogress-c04e6182.js";import"./sortablejs-2f5483e3.js";import"./qrcodejs2-fix-bab07f30.js";import"./moment-bafe441d.js";import"./pinyin-pro-c81f5d39.js";import"./vue-i18n-0843b5c5.js";import"./@intlify-2528d766.js";import"./source-map-b06bd4b9.js";import"./vue-c723f8b1.js";import"./pinia-plugin-persistedstate-d2bd58cf.js";import"./resize-observer-polyfill-ad543aa3.js";import"./vue-smart-widget-8b3f5b0a.js";import"./echarts-b5d24e9a.js";import"./zrender-a15b073b.js";import"./tslib-a4e99503.js";import"./echarts-liquidfill-f5c863f1.js";import"./@antv-43d380be.js";import"./ant-design-vue-2db0c9af.js";import"./@ant-design-60f2ef8e.js";import"./vue-types-6bcea8eb.js";import"./dom-align-78cb5391.js";import"./vue-draggable-next-a413f884.js";import"./vue-resize-observer-90aea344.js";import"./field-state-variables-3bb6d4cb.js";import"./field-editor-mixin-140fe671.js";const{getEntityList:le}=t(),{publicSetting:ie}=ae(t()),oe={name:"EntityFieldTable",components:{EntityPropEditor:y,BooleanWE:f,IntegerWE:b,DecimalWE:w,PercentWE:F,MoneyWE:E,TextWE:D,EmailWE:T,UrlWE:j,TextAreaWE:v,PasswordWE:_,OptionWE:V,TagWE:k,AreaSelectWE:C,DateWE:P,DateTimeWE:x,PictureWE:W,FileWE:$,ReferenceWE:S,AnyReferenceWE:N,ReferenceListWE:L},data:()=>({columns:[{prop:"name",label:"字段名称",width:"130",align:"left",fixed:!0},{prop:"label",label:"显示名称",align:"center"},{prop:"physicalName",label:"数据库字段名",align:"left"},{prop:"type",label:"字段类型",width:"100",align:"left"},{prop:"referTo",label:"引用实体",width:"120",align:"center"},{prop:"idFieldFlag",label:"主键字段",width:"70",align:"center",formatter:a},{prop:"nameFieldFlag",label:"名称字段",width:"70",align:"center",formatter:a},{prop:"mainDetailFieldFlag",label:"主从字段",width:"70",align:"center",formatter:a},{prop:"reserved",label:"系统字段",width:"70",align:"center",formatter:a}],tableData:[],filteredData:[],searchText:"",tableHeight:100,curFWEditor:"",curEditorType:"",showNameFieldDialogFlag:!1,showNewFieldDialogFlag:!1,showEditFieldDialogFlag:!1,showEntityPropsDialogFlag:!1,editingFieldName:null,nameFieldColumns:[{prop:"name",label:"字段名称",width:"148",align:"left",fixed:!0},{prop:"label",label:"显示名称",width:"148",align:"center"}],nameFieldData:[],entityProps:{name:"Account",label:"客户",entityCode:0,physicalName:"",nameField:"",detailEntityFlag:!1,mainEntity:"",layoutable:!0,listable:!0,authorizable:!1,assignable:!1,shareable:!1},entity:"",propsLoading:!1,allTags:[],addTagDialogIsShow:!1,addTagDialogLoading:!1,inputVisible:!1,tagValue:""}),created(){this.entity=this.$route.query.entity},mounted(){this.$nextTick((()=>{this.resizeTableHeight()})),window.onresize=()=>{this.resizeTableHeight()},this.initPageData()},methods:{resizeTableHeight(){this.$refs.tableContainer&&(this.tableHeight=this.$refs.tableContainer.$el.offsetHeight-42+42)},initEntityProps(){this.propsLoading=!0,l(this.entity).then((e=>{e&&e.data&&(this.entityProps=e.data,this.entityProps.tags=e.data.tags?e.data.tags.split(","):[],this.getAllTags()),this.propsLoading=!1})).catch((e=>{this.$message({message:e.message,type:"error"}),this.propsLoading=!1}))},initPageData(){this.initEntityProps(),this.initTableData()},async getAllTags(){let e=await i();e&&e.data&&(this.allTags=e.data.map((e=>({name:e,checked:this.entityProps.tags.includes(e)}))))},onTagsChange(e){e.checked=!e.checked},async setConfirmTags(){this.addTagDialogLoading=!0;let e=[];this.allTags.forEach((t=>{t.checked&&e.push(t.name)}));let t=await o(this.entity,e.join(","));t&&t.data&&(this.$message.success("标签设置成功"),this.addTagDialogIsShow=!1,this.initEntityProps()),this.addTagDialogLoading=!1},showInput(){this.inputVisible=!0,this.$nextTick((()=>{this.$refs.InputRef.focus()}))},handleInputConfirm(){let e=this.allTags.filter((e=>e.name==this.tagValue));this.tagValue&&e.length<1&&this.allTags.push({name:this.tagValue,checked:!0}),this.inputVisible=!1,this.tagValue=""},initTableData(){s(this.entity).then((e=>{null==e.error?(this.tableData=e.data,this.filteredData=r(this.tableData),this.searchText=""):this.$message({message:e.error,type:"error"})})).catch((e=>{this.$message({message:e.message,type:"error"})}))},handleNewFieldCommand(e){this.curFWEditor=e,this.curEditorType=e.replace(/WE$/,""),this.showNewFieldDialogFlag=!0},editTableData(e){e.type&&n(e.name,this.entity).then((t=>{null==t.error?!0===t.data?(this.curEditorType=e.type,this.curFWEditor=e.type+"WE",this.editingFieldName=e.name,this.showEditFieldDialogFlag=!0):this.$message.info("提示：系统字段/保留字段不能编辑！"):this.$message({message:t.error,type:"error"})})).catch((e=>{this.$message({message:e.message,type:"error"})}))},deleteTableData(e){ie.value.trialVersionFlag?this.$message.error("试用版本已禁用删除字段功能，敬请谅解"):this.entity&&e.type&&e.name&&d(e.name,this.entity).then((t=>{if(null!=t.error)return void this.$message({message:t.error,type:"error"});if(!0!==t.data)return void this.$message.info("提示：系统字段/保留字段不能被删除！");let a=[];["字段删除后不能恢复，是否确认删除?","1. 删除字段会清空该字段的所有数据，且不能恢复；’","2. 删除字段不会同步更新表单和列表，请手工从表单布局和列表中移除；"].forEach((e=>{a.push(z("p",null,e))})),this.$confirm("删除提醒",{message:z("div",null,a),showCancelButton:!0,type:"warning"}).then((()=>{this.$prompt('请输入大写"MLC"',"再次确认删除",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^MLC$/,inputErrorMessage:"输入不正确"}).then((({value:t})=>{"MLC"===t&&this.deleteField(e.name,this.entity)})).catch((e=>{this.$message({type:"info",message:"已取消删除"})}))})).catch((()=>{this.$message({type:"info",message:"已取消删除"})}))})).catch((e=>{this.$message({message:e.message,type:"error"})}))},deleteField(e,t){m(e,t).then((e=>{null==e.error?(this.$message.success("字段已删除"),this.initTableData()):this.$message({message:e.error,type:"error"})})).catch((e=>{this.$message({message:e.message,type:"error"})}))},onFieldSaved(){this.showNewFieldDialogFlag=!1,this.showEditFieldDialogFlag=!1,this.initTableData()},onCancelSaveField(){this.showNewFieldDialogFlag=!1,this.showEditFieldDialogFlag=!1},filterMainEntity(e,t){p().then((a=>{if(null!=a.error)return void this.$message({message:a.error,type:"error"});let l=a.data;e.length=0,e=l.filter((t=>{t.systemEntityFlag||t.internalEntityFlag,!1===t.detailEntityFlag&&e.push({name:t.name,label:t.label})})),t()})).catch((e=>{this.$message({message:e.message,type:"error"})}))},saveEntity(){},cancelSaveEntity(){this.initEntityProps(),this.showEntityPropsDialogFlag=!1},modifyEntityLabel(){this.$prompt("修改实体显示名称","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputValue:this.entityProps.label,inputPattern:/^[A-Za-z\u4e00-\u9fa5\d]+$/,inputErrorMessage:"输入不正确"}).then((({value:e})=>{c(this.entityProps.name,e).then((t=>{null==t.error?(this.entityProps.label=e,le(),this.$message({message:"修改成功",type:"success"})):this.$message({message:t.error,type:"error"})})).catch((e=>{this.$message({message:e.message,type:"error"})}))})).catch((()=>{this.$message.info("已取消")}))},modifyEntityNameField(){h(this.entityProps.name).then((e=>{null==e.error?(this.nameFieldData=e.data,this.showNameFieldDialogFlag=!0):this.$message({message:e.error,type:"error"})})).catch((e=>{}))},selectNameField(e){g(this.entityProps.name,e.name).then((t=>{null==t.error?(this.$message({message:"修改成功",type:"success"}),this.entityProps.nameField=e.label,this.showNameFieldDialogFlag=!1,this.initTableData()):this.$message({message:t.error,type:"error"})})).catch((e=>{this.$message({message:e.message,type:"error"})}))},searchTableData(){u(this.searchText)?this.filteredData=r(this.tableData):(this.filteredData.length=0,this.filteredData=this.tableData.filter((e=>e.name.toLowerCase().includes(this.searchText.toLowerCase())||e.label.toLowerCase().includes(this.searchText.toLowerCase())||e.physicalName.toLowerCase().includes(this.searchText.toLowerCase()))))},clearTableSearch(){this.filteredData=r(this.tableData)}}},se=e=>(ee("data-v-f692697a"),e=e(),te(),e),re={class:"entity-property"},ne={class:"entity-property-header"},de={class:"entity-property-form"},me={class:"w-100"},pe={class:"search-panel-left"},ce=se((()=>q("div",{style:{flex:"1"}},null,-1))),he={class:"search-panel-right"},ge={style:{height:"32px","line-height":"32px","font-size":"13px","background-color":"white"}},ue=se((()=>q("div",{class:"name-field-hint"},[q("i",{class:"el-icon-bell"}),Z("提示：只有文本(Text)类型字段可设置为名称字段。 ")],-1))),ye={class:"dialog-footer"},fe={class:"w-100"},be={class:"dialog-footer"};const we=e(oe,[["render",function(e,t,a,l,i,o){const s=I("el-input"),r=I("el-form-item"),n=I("el-button"),d=I("el-switch"),m=I("el-tag"),p=I("el-form"),c=I("el-scrollbar"),h=I("el-aside"),g=I("ArrowDown"),u=I("el-icon"),y=I("el-dropdown-item"),f=I("el-dropdown-menu"),b=I("el-dropdown"),w=I("el-header"),F=I("SimpleTable"),E=I("el-main"),D=I("el-footer"),T=I("el-dialog"),j=I("EntityPropEditor"),v=I("el-container"),_=I("el-check-tag"),V=I("ml-dialog"),k=U("loading");return A(),B(v,{class:"hidden-x-scrollbar"},{default:M((()=>[R(h,{class:"left-props-panel"},{default:M((()=>[R(c,{class:"props-scrollbar"},{default:M((()=>[H((A(),K("div",re,[q("div",ne,"<"+O(i.entityProps.label)+">实体属性",1),q("div",de,[R(p,{"label-position":"left","label-width":"120px",size:"small"},{default:M((()=>[R(r,{label:"实体名称："},{default:M((()=>[R(s,{link:"",type:"primary",modelValue:i.entityProps.name,"onUpdate:modelValue":t[0]||(t[0]=e=>i.entityProps.name=e),disabled:""},null,8,["modelValue"])])),_:1}),R(r,{label:"显示名称："},{default:M((()=>[R(s,{link:"",type:"primary",modelValue:i.entityProps.label,"onUpdate:modelValue":t[1]||(t[1]=e=>i.entityProps.label=e),readonly:!0},{suffix:M((()=>[R(n,{link:"",type:"primary",icon:"el-icon-edit",title:"修改显示名称",onClick:o.modifyEntityLabel},null,8,["onClick"])])),_:1},8,["modelValue"])])),_:1}),R(r,{label:"实体编码："},{default:M((()=>[R(s,{link:"",type:"primary",modelValue:i.entityProps.entityCode,"onUpdate:modelValue":t[2]||(t[2]=e=>i.entityProps.entityCode=e),disabled:""},null,8,["modelValue"])])),_:1}),R(r,{label:"数据库表名："},{default:M((()=>[R(s,{link:"",type:"primary",modelValue:i.entityProps.physicalName,"onUpdate:modelValue":t[3]||(t[3]=e=>i.entityProps.physicalName=e),disabled:""},null,8,["modelValue"])])),_:1}),R(r,{label:"名称字段："},{default:M((()=>[R(s,{link:"",type:"primary",modelValue:i.entityProps.nameField,"onUpdate:modelValue":t[4]||(t[4]=e=>i.entityProps.nameField=e),readonly:!0},{suffix:M((()=>[R(n,{link:"",type:"primary",icon:"el-icon-edit",title:"修改名称字段",onClick:o.modifyEntityNameField},null,8,["onClick"])])),_:1},8,["modelValue"])])),_:1}),R(r,{label:"允许设计表单："},{default:M((()=>[R(d,{modelValue:i.entityProps.layoutable,"onUpdate:modelValue":t[5]||(t[5]=e=>i.entityProps.layoutable=e),style:{float:"right"},disabled:""},null,8,["modelValue"])])),_:1}),R(r,{label:"允许设计列表："},{default:M((()=>[R(d,{modelValue:i.entityProps.listable,"onUpdate:modelValue":t[6]||(t[6]=e=>i.entityProps.listable=e),style:{float:"right"},disabled:""},null,8,["modelValue"])])),_:1}),R(r,{label:"开启记录级权限："},{default:M((()=>[R(d,{modelValue:i.entityProps.authorizable,"onUpdate:modelValue":t[7]||(t[7]=e=>i.entityProps.authorizable=e),style:{float:"right"},disabled:""},null,8,["modelValue"])])),_:1}),R(r,{label:"是否明细实体："},{default:M((()=>[R(d,{modelValue:i.entityProps.detailEntityFlag,"onUpdate:modelValue":t[8]||(t[8]=e=>i.entityProps.detailEntityFlag=e),style:{float:"right"},disabled:""},null,8,["modelValue"])])),_:1}),R(r,{label:"标签"},{default:M((()=>{var e;return[(A(!0),K(X,null,Y(i.entityProps.tags,(e=>(A(),B(m,{key:e,class:"mr-5 mb-5"},{default:M((()=>[Z(O(e),1)])),_:2},1024)))),128)),q("div",me,[R(n,{disabled:(null==(e=i.entityProps.tags)?void 0:e.length)>9,class:"button-new-tag ml-1",size:"small",onClick:t[9]||(t[9]=e=>i.addTagDialogIsShow=!0),plain:""},{default:M((()=>[Z(" 设置标签 ")])),_:1},8,["disabled"])])]})),_:1}),i.entityProps.detailEntityFlag?(A(),B(r,{key:0,label:"所属主实体："},{default:M((()=>[R(s,{link:"",type:"primary",modelValue:i.entityProps.mainEntity.label,"onUpdate:modelValue":t[10]||(t[10]=e=>i.entityProps.mainEntity.label=e),disabled:""},null,8,["modelValue"])])),_:1})):G("",!0)])),_:1})])])),[[k,i.propsLoading]])])),_:1})])),_:1}),R(v,null,{default:M((()=>[R(w,{class:"list-search-panel"},{default:M((()=>[q("div",pe,[R(b,{onCommand:o.handleNewFieldCommand,size:"small"},{dropdown:M((()=>[R(f,null,{default:M((()=>[R(y,{command:"BooleanWE"},{default:M((()=>[Z("布尔 / Boolean")])),_:1}),R(y,{command:"IntegerWE"},{default:M((()=>[Z("整数 / Integer")])),_:1}),R(y,{command:"DecimalWE"},{default:M((()=>[Z("精度小数 / Decimal")])),_:1}),R(y,{command:"PercentWE"},{default:M((()=>[Z("百分比 / Percent")])),_:1}),R(y,{command:"MoneyWE"},{default:M((()=>[Z("金额 / Money")])),_:1}),R(y,{command:"TextWE",divided:""},{default:M((()=>[Z("文本 / Text")])),_:1}),R(y,{command:"TextAreaWE"},{default:M((()=>[Z("长文本 / TextArea")])),_:1}),R(y,{command:"OptionWE",divided:""},{default:M((()=>[Z("单选项 / Option")])),_:1}),R(y,{command:"TagWE"},{default:M((()=>[Z("多选项 / Tag")])),_:1}),R(y,{command:"AreaSelectWE"},{default:M((()=>[Z("地区选择 / AreaSelect")])),_:1}),R(y,{command:"DateWE",divided:""},{default:M((()=>[Z("日期 / Date")])),_:1}),R(y,{command:"DateTimeWE"},{default:M((()=>[Z("日期时间 / DateTime")])),_:1}),R(y,{command:"PictureWE",divided:""},{default:M((()=>[Z("图片 / Picture")])),_:1}),R(y,{command:"FileWE"},{default:M((()=>[Z("文件 / File")])),_:1}),R(y,{command:"ReferenceWE",divided:""},{default:M((()=>[Z("一对一引用 / Reference ")])),_:1})])),_:1})])),default:M((()=>[R(n,{type:"primary"},{default:M((()=>[Z(" 新建字段"),R(u,null,{default:M((()=>[R(g)])),_:1})])),_:1})])),_:1},8,["onCommand"])]),ce,q("div",he,[R(s,{link:"",type:"primary",modelValue:i.searchText,"onUpdate:modelValue":t[11]||(t[11]=e=>i.searchText=e),clearable:!0,onClear:o.clearTableSearch,class:"v-middle",onKeyup:J(o.searchTableData,["enter"]),size:"small",placeholder:"请输入关键词搜索"},{append:M((()=>[R(n,{icon:"el-icon-search",onClick:o.searchTableData},null,8,["onClick"])])),_:1},8,["modelValue","onClear","onKeyup"])])])),_:1}),R(E,{ref:"tableContainer"},{default:M((()=>[q("div",null,[R(F,{columns:i.columns,data:i.filteredData,"show-pagination":!1,"show-check-box":!1,"show-operation-column":!0,height:"100%","table-size":"small","table-width":"100% !important"},{table_operation:M((({scope:e})=>[e.row.reserved?G("",!0):(A(),K(X,{key:0},[R(n,{type:"primary",link:"",size:"small",icon:"el-icon-edit",onClick:t=>o.editTableData(e.row)},{default:M((()=>[Z("修改 ")])),_:2},1032,["onClick"]),R(n,{type:"primary",link:"",size:"small",icon:"el-icon-delete",onClick:t=>o.deleteTableData(e.row)},{default:M((()=>[Z("删除 ")])),_:2},1032,["onClick"])],64))])),_:1},8,["columns","data"])])])),_:1},512),R(D,null,{default:M((()=>[q("div",ge," 字段列表：当前实体共 "+O(i.tableData.length)+" 个字段 ",1)])),_:1}),i.showNameFieldDialogFlag?(A(),B(T,{key:0,title:"修改名称字段",modelValue:i.showNameFieldDialogFlag,"onUpdate:modelValue":t[12]||(t[12]=e=>i.showNameFieldDialogFlag=e),"append-to-body":!0,"destroy-on-close":!0,class:"name-field-dialog",width:"480px"},{default:M((()=>[ue,R(F,{"show-pagination":!1,"show-check-box":!1,"table-size":"small","show-operation-column":!0,columns:i.nameFieldColumns,data:i.nameFieldData,"max-height":420},{table_operation:M((({scope:e})=>[e.row.nameFieldFlag?(A(),B(n,{key:1,disabled:!0},{default:M((()=>[Z("当前名称字段")])),_:1})):(A(),B(n,{key:0,class:"",icon:"el-icon-check",onClick:t=>o.selectNameField(e.row)},{default:M((()=>[Z("选择 ")])),_:2},1032,["onClick"]))])),_:1},8,["columns","data"])])),_:1},8,["modelValue"])):G("",!0),i.showNewFieldDialogFlag?(A(),B(T,{key:1,title:"新建字段 / "+i.curEditorType,modelValue:i.showNewFieldDialogFlag,"onUpdate:modelValue":t[13]||(t[13]=e=>i.showNewFieldDialogFlag=e),"show-close":!0,"destroy-on-close":!0,"close-on-click-modal":!1,"close-on-press-escape":!1,class:"no-padding field-setting-dialog",width:"620px"},{default:M((()=>[(A(),B(Q(i.curFWEditor),{entity:i.entity,onFieldSaved:o.onFieldSaved,onCancelSave:o.onCancelSaveField,showingInDialog:!0},null,40,["entity","onFieldSaved","onCancelSave"]))])),_:1},8,["title","modelValue"])):G("",!0),i.showEditFieldDialogFlag?(A(),B(T,{key:2,title:"编辑字段 / "+i.curEditorType,modelValue:i.showEditFieldDialogFlag,"onUpdate:modelValue":t[14]||(t[14]=e=>i.showEditFieldDialogFlag=e),"show-close":!1,"destroy-on-close":!0,"close-on-click-modal":!1,"close-on-press-escape":!1,class:"no-padding field-setting-dialog",width:"620px"},{default:M((()=>[(A(),B(Q(i.curFWEditor),{entity:i.entity,onFieldSaved:o.onFieldSaved,onCancelSave:o.onCancelSaveField,showingInDialog:!0,"field-name":i.editingFieldName,"field-state":2},null,40,["entity","onFieldSaved","onCancelSave","field-name"]))])),_:1},8,["title","modelValue"])):G("",!0),i.showEntityPropsDialogFlag?(A(),B(T,{key:3,title:"编辑实体属性",modelValue:i.showEntityPropsDialogFlag,"onUpdate:modelValue":t[15]||(t[15]=e=>i.showEntityPropsDialogFlag=e),"show-close":!1,"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0},{footer:M((()=>[q("div",ye,[R(n,{type:"primary",onClick:o.saveEntity},{default:M((()=>[Z("保 存")])),_:1},8,["onClick"]),R(n,{onClick:o.cancelSaveEntity},{default:M((()=>[Z("取 消")])),_:1},8,["onClick"])])])),default:M((()=>[R(j,{ref:"EPEditor",entityProps:i.entityProps,"show-title":!1,"filter-entity-method":o.filterMainEntity},null,8,["entityProps","filter-entity-method"])])),_:1},8,["modelValue"])):G("",!0)])),_:1}),R(V,{modelValue:i.addTagDialogIsShow,"onUpdate:modelValue":t[18]||(t[18]=e=>i.addTagDialogIsShow=e),title:"设置标签",width:"400"},{footer:M((()=>[q("div",be,[H((A(),B(n,{type:"primary",onClick:o.setConfirmTags},{default:M((()=>[Z("确 定")])),_:1},8,["onClick"])),[[k,i.addTagDialogLoading]]),H((A(),B(n,{onClick:t[17]||(t[17]=e=>i.addTagDialogIsShow=!1)},{default:M((()=>[Z("取 消")])),_:1})),[[k,i.addTagDialogLoading]])])])),default:M((()=>{var e;return[H((A(),K("div",null,[(A(!0),K(X,null,Y(i.allTags,((e,t)=>(A(),B(_,{key:t,class:"mr-5 mb-5",checked:e.checked,onChange:t=>o.onTagsChange(e)},{default:M((()=>[Z(O(e.name),1)])),_:2},1032,["checked","onChange"])))),128)),q("div",fe,[i.inputVisible?(A(),B(s,{key:0,class:"mb-5",ref:"InputRef",modelValue:i.tagValue,"onUpdate:modelValue":t[16]||(t[16]=e=>i.tagValue=e),style:{width:"100px"},onKeyup:J(o.handleInputConfirm,["enter"]),onBlur:o.handleInputConfirm},null,8,["modelValue","onKeyup","onBlur"])):(A(),B(n,{key:1,class:"mb-5 button-new-tag ml-1",onClick:o.showInput,disabled:(null==(e=i.allTags)?void 0:e.length)>9},{default:M((()=>[Z("+ 新增标签")])),_:1},8,["onClick","disabled"]))])])),[[k,i.addTagDialogLoading]])]})),_:1},8,["modelValue"])])),_:1})}],["__scopeId","data-v-f692697a"]]);export{we as default};
