import{g as e}from"./index-ea085229.js";import{u as t}from"./vue-router-414ebc36.js";import{R as o,r as s,p as a,l,Y as i,X as p,E as r,o as n,a as m,c as u,w as d,F as j,A as f,i as v,g as c,z as g}from"./@vue-1ad4818c.js";import"./element-plus-bab58d46.js";import"./lodash-es-b8e8104a.js";import"./@vueuse-477b4dbb.js";import"./@element-plus-2a6d398c.js";import"./@babel-6bd44fd1.js";import"./@popperjs-b78c3215.js";import"./@ctrl-4982d949.js";import"./dayjs-7fb79ad3.js";import"./async-validator-cf877c1f.js";import"./memoize-one-63ab667a.js";import"./escape-html-3148dbc9.js";import"./normalize-wheel-es-3222b0a2.js";import"./@floating-ui-0ef99041.js";import"./vue3-manner-report-313033e6.js";import"./axios-85bcd05e.js";import"./crypto-js-43a3a23e.js";import"./cron-parser-1391a961.js";import"./luxon-b01799b6.js";import"./nprogress-c04e6182.js";import"./pinia-3f60a8e1.js";import"./sortablejs-2f5483e3.js";import"./qrcodejs2-fix-bab07f30.js";import"./moment-bafe441d.js";import"./pinyin-pro-c81f5d39.js";import"./vue-i18n-0843b5c5.js";import"./@intlify-2528d766.js";import"./source-map-b06bd4b9.js";import"./vue-c723f8b1.js";import"./pinia-plugin-persistedstate-d2bd58cf.js";import"./resize-observer-polyfill-ad543aa3.js";import"./vue-smart-widget-8b3f5b0a.js";import"./echarts-b5d24e9a.js";import"./zrender-a15b073b.js";import"./tslib-a4e99503.js";import"./echarts-liquidfill-f5c863f1.js";import"./@antv-43d380be.js";import"./ant-design-vue-2db0c9af.js";import"./@ant-design-60f2ef8e.js";import"./vue-types-6bcea8eb.js";import"./dom-align-78cb5391.js";import"./vue-draggable-next-a413f884.js";import"./vue-resize-observer-90aea344.js";const C={class:"action-div"},b={class:"w-100 mt-5"},y=c("span",{class:"info-text"},"1.勾选提交模式当满足条件将自动提交审批，但不会自动审核，需审核人人工审核。",-1),w=c("span",{class:"info-text"},"2.不勾选提交模式当满足条件将自动提交审批，且自动审核通过。",-1),h=c("span",{class:"info-text"},"注：审批流程中至少配置一个审批人，否则会提交失败",-1),x={__name:"autoApproval",props:{modelValue:null},setup(x){const I=x,V=t();o("$API"),o("$ElMessage");let _=s(!1),z=s({actionContent:{}}),E=s([]);a((()=>{z.value=I.modelValue,N()}));const N=async()=>{let t={mainEntity:"ApprovalConfig",fieldsList:"approvalConfigId,entityCode,flowName",filter:{equation:"AND",items:[{fieldName:"entityCode",op:"EQ",value:z.value.entityCode}]},sortFields:[{fieldName:"modifiedOn",type:"DESC"}]};_.value=!0;let o=await e(t.mainEntity,t.fieldsList,t.filter,null,null,t.sortFields);o&&(E.value=o.data.dataList||[],E.value.unshift({flowName:"不使用",approvalConfigId:""}),z.value.actionContent.approvalConfigId||(z.value.actionContent.approvalConfigId="")),_.value=!1},A=()=>{V.push({path:"/web/process-list"})};return(e,t)=>{const o=l("el-option"),s=l("el-select"),a=l("el-checkbox"),x=l("el-row"),I=l("el-form-item"),V=i("loading");return p((n(),m("div",C,[u(I,{label:"使用审批流程"},{default:d((()=>[u(s,{modelValue:r(z).actionContent.approvalConfigId,"onUpdate:modelValue":t[0]||(t[0]=e=>r(z).actionContent.approvalConfigId=e),placeholder:"Select",style:{width:"400px"}},{default:d((()=>[(n(!0),m(j,null,f(r(E),(e=>(n(),v(o,{key:e.approvalConfigId,label:e.flowName,value:e.approvalConfigId},null,8,["label","value"])))),128))])),_:1},8,["modelValue"]),c("div",{class:"w-100"},[c("span",{class:"info-text"},[g(" 需要先添加 "),c("span",{class:"ml-a-span",onClick:A},"审批流程"),g(" 才能在此处选择 ")])]),c("div",b,[u(x,null,{default:d((()=>[u(a,{modelValue:r(z).actionContent.submitMode,"onUpdate:modelValue":t[1]||(t[1]=e=>r(z).actionContent.submitMode=e),label:"提交模式"},null,8,["modelValue"])])),_:1}),u(x,null,{default:d((()=>[y])),_:1}),u(x,null,{default:d((()=>[w])),_:1}),u(x,null,{default:d((()=>[h])),_:1})])])),_:1})])),[[V,r(_)]])}}};export{x as default};
