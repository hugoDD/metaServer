import{_ as e,$ as r}from"./index-ea085229.js";import{D as t}from"./detail-5eb8c530.js";import{r as o,l as i,o as s,a,c as l,E as p,w as m,g as n,t as g,F as j}from"./@vue-1ad4818c.js";import"./element-plus-bab58d46.js";import"./lodash-es-b8e8104a.js";import"./@vueuse-477b4dbb.js";import"./@element-plus-2a6d398c.js";import"./@babel-6bd44fd1.js";import"./@popperjs-b78c3215.js";import"./@ctrl-4982d949.js";import"./dayjs-7fb79ad3.js";import"./async-validator-cf877c1f.js";import"./memoize-one-63ab667a.js";import"./escape-html-3148dbc9.js";import"./normalize-wheel-es-3222b0a2.js";import"./@floating-ui-0ef99041.js";import"./vue3-manner-report-313033e6.js";import"./axios-85bcd05e.js";import"./crypto-js-43a3a23e.js";import"./cron-parser-1391a961.js";import"./luxon-b01799b6.js";import"./vue-router-414ebc36.js";import"./nprogress-c04e6182.js";import"./pinia-3f60a8e1.js";import"./sortablejs-2f5483e3.js";import"./qrcodejs2-fix-bab07f30.js";import"./moment-bafe441d.js";import"./pinyin-pro-c81f5d39.js";import"./vue-i18n-0843b5c5.js";import"./@intlify-2528d766.js";import"./source-map-b06bd4b9.js";import"./vue-c723f8b1.js";import"./pinia-plugin-persistedstate-d2bd58cf.js";import"./resize-observer-polyfill-ad543aa3.js";import"./vue-smart-widget-8b3f5b0a.js";import"./echarts-b5d24e9a.js";import"./zrender-a15b073b.js";import"./tslib-a4e99503.js";import"./echarts-liquidfill-f5c863f1.js";import"./@antv-43d380be.js";import"./ant-design-vue-2db0c9af.js";import"./@ant-design-60f2ef8e.js";import"./vue-types-6bcea8eb.js";import"./dom-align-78cb5391.js";import"./vue-draggable-next-a413f884.js";import"./vue-resize-observer-90aea344.js";import"./DetailTabs-e3a61e27.js";import"./DetailTabsSet-9cda58dd.js";import"./More-47f7037c.js";import"./SetColumn-15f4404b.js";import"./DataExport-cabbbed3.js";import"./Allocation-359987ff.js";import"./ReportForms-7661dfe6.js";import"./DefaultFilterDialog-f7a53bd1.js";import"./FormatRow-d4305ec1.js";import"./edit-dfd0882d.js";import"./team-3e46d8bc.js";import"./NewRelated-d601bf33.js";import"./ApprovalRelated-e5fb019d.js";import"./CardLayout-74c0bddb.js";const d={class:"errorlog-box"},u=e({__name:"trigger-log",setup(e){let u=o([{fieldName:"createdOn",type:"DESC"}]),c=o([{fieldName:"triggerReason",op:"LK",value:""}]),f=o([{prop:"triggerConfigId",label:"触发器名称",align:"center",formatter:e=>{var r;return null==(r=e.triggerConfigId)?void 0:r.name}},{prop:"actionType",label:"类型",align:"center",formatter:e=>{var r;return null==(r=e.actionType)?void 0:r.label}},{prop:"triggerReason",label:"触发原因",align:"center"},{prop:"recordId",label:"关联实体",align:"center",highlight:!0,formatter:e=>{var r;return null==(r=e.recordId)?void 0:r.name}},{prop:"executeFlag",label:"执行结果",align:"center",width:"100",elTag:!0,styleFn:e=>({cursor:e.executeFlag?"initial":"pointer"}),formatter:e=>({type:e.executeFlag?"success":"danger",label:e.executeFlag?"成功":"失败"}),clickFn:e=>{e.executeFlag||(h.value.log=e.errorLog||"未查询到日志",h.value.isShow=!0)}},{prop:"createdOn",label:"创建时间",width:"120",align:"center",formatter:e=>r(e.createdOn)}]),v=o("");const b=e=>{v.value.openDialog(e.recordId.id)};let h=o({isShow:!1,log:""});return(e,r)=>{const o=i("mlSingleList"),y=i("ml-dialog");return s(),a(j,null,[l(o,{title:"触发器日志",mainEntity:"TriggerLog",fieldsList:"actionType,triggerReason,recordId,executeFlag,triggerConfigId,createdOn,errorLog",sortFields:p(u),fieldName:"triggerConfigId.name",tableColumn:p(f),queryUrl:"/plugins/metaTrigger/trigger/log",onHighlightClick:b,filterItems:p(c)},null,8,["sortFields","tableColumn","filterItems"]),l(t,{ref_key:"detailRefs",ref:v},null,512),l(y,{title:"异常执行日志",modelValue:p(h).isShow,"onUpdate:modelValue":r[0]||(r[0]=e=>p(h).isShow=e),width:"80%"},{default:m((()=>[n("div",d,g(p(h).log),1)])),_:1},8,["modelValue"])],64)}}},[["__scopeId","data-v-ebea05d7"]]);export{u as default};
